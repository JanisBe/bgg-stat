var sP=Object.create;var Tp=Object.defineProperty,oP=Object.defineProperties,aP=Object.getOwnPropertyDescriptor,lP=Object.getOwnPropertyDescriptors,cP=Object.getOwnPropertyNames,Dd=Object.getOwnPropertySymbols,dP=Object.getPrototypeOf,Fp=Object.prototype.hasOwnProperty,tb=Object.prototype.propertyIsEnumerable;var eb=(e,t,i)=>t in e?Tp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,q=(e,t)=>{for(var i in t||={})Fp.call(t,i)&&eb(e,i,t[i]);if(Dd)for(var i of Dd(t))tb.call(t,i)&&eb(e,i,t[i]);return e},ue=(e,t)=>oP(e,lP(t));var Ap=(e,t)=>{var i={};for(var n in e)Fp.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&Dd)for(var n of Dd(e))t.indexOf(n)<0&&tb.call(e,n)&&(i[n]=e[n]);return i};var ib=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var uP=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of cP(t))!Fp.call(e,r)&&r!==i&&Tp(e,r,{get:()=>t[r],enumerable:!(n=aP(t,r))||n.enumerable});return e};var nb=(e,t,i)=>(i=e!=null?sP(dP(e)):{},uP(t||!e||!e.__esModule?Tp(i,"default",{value:e,enumerable:!0}):i,e));var or=(e,t,i)=>new Promise((n,r)=>{var s=u=>{try{c(i.next(u))}catch(v){r(v)}},a=u=>{try{c(i.throw(u))}catch(v){r(v)}},c=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);c((i=i.apply(e,t)).next())});var cD=ib((aC,lC)=>{"use strict";(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof lC=="object"&&typeof aC<"u"?lC.exports=t():e.Papa=t()})(aC,function e(){"use strict";var t=typeof self<"u"?self:typeof window<"u"?window:t!==void 0?t:{},i=!t.document&&!!t.postMessage,n=t.IS_PAPA_WORKER||!1,r={},s=0,a={parse:function(_,N){var Y=(N=N||{}).dynamicTyping||!1;if(G(Y)&&(N.dynamicTypingFunction=Y,Y={}),N.dynamicTyping=Y,N.transform=!!G(N.transform)&&N.transform,N.worker&&a.WORKERS_SUPPORTED){var se=function(){if(!a.WORKERS_SUPPORTED)return!1;var ve=(Et=t.URL||t.webkitURL||null,ut=e.toString(),a.BLOB_URL||(a.BLOB_URL=Et.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ut,")();"],{type:"text/javascript"})))),Ve=new t.Worker(ve),Et,ut;return Ve.onmessage=L,Ve.id=s++,r[Ve.id]=Ve}();return se.userStep=N.step,se.userChunk=N.chunk,se.userComplete=N.complete,se.userError=N.error,N.step=G(N.step),N.chunk=G(N.chunk),N.complete=G(N.complete),N.error=G(N.error),delete N.worker,void se.postMessage({input:_,config:N,workerId:se.id})}var pe=null;return a.NODE_STREAM_INPUT,typeof _=="string"?(_=function(ve){return ve.charCodeAt(0)===65279?ve.slice(1):ve}(_),pe=N.download?new v(N):new x(N)):_.readable===!0&&G(_.read)&&G(_.on)?pe=new D(N):(t.File&&_ instanceof File||_ instanceof Object)&&(pe=new b(N)),pe.stream(_)},unparse:function(_,N){var Y=!1,se=!0,pe=",",ve=`\r
`,Ve='"',Et=Ve+Ve,ut=!1,Ce=null,ft=!1;(function(){if(typeof N=="object"){if(typeof N.delimiter!="string"||a.BAD_DELIMITERS.filter(function(fe){return N.delimiter.indexOf(fe)!==-1}).length||(pe=N.delimiter),(typeof N.quotes=="boolean"||typeof N.quotes=="function"||Array.isArray(N.quotes))&&(Y=N.quotes),typeof N.skipEmptyLines!="boolean"&&typeof N.skipEmptyLines!="string"||(ut=N.skipEmptyLines),typeof N.newline=="string"&&(ve=N.newline),typeof N.quoteChar=="string"&&(Ve=N.quoteChar),typeof N.header=="boolean"&&(se=N.header),Array.isArray(N.columns)){if(N.columns.length===0)throw new Error("Option columns is empty");Ce=N.columns}N.escapeChar!==void 0&&(Et=N.escapeChar+Ve),(typeof N.escapeFormulae=="boolean"||N.escapeFormulae instanceof RegExp)&&(ft=N.escapeFormulae instanceof RegExp?N.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var be=new RegExp(O(Ve),"g");if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return Ti(null,_,ut);if(typeof _[0]=="object")return Ti(Ce||Object.keys(_[0]),_,ut)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||Ce),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),Ti(_.fields||[],_.data||[],ut);throw new Error("Unable to serialize unrecognized input");function Ti(fe,rt,_t){var mt="";typeof fe=="string"&&(fe=JSON.parse(fe)),typeof rt=="string"&&(rt=JSON.parse(rt));var Bt=Array.isArray(fe)&&0<fe.length,Vt=!Array.isArray(rt[0]);if(Bt&&se){for(var ht=0;ht<fe.length;ht++)0<ht&&(mt+=pe),mt+=Ut(fe[ht],ht);0<rt.length&&(mt+=ve)}for(var xe=0;xe<rt.length;xe++){var Qe=Bt?fe.length:rt[xe].length,vt=!1,ce=Bt?Object.keys(rt[xe]).length===0:rt[xe].length===0;if(_t&&!Bt&&(vt=_t==="greedy"?rt[xe].join("").trim()==="":rt[xe].length===1&&rt[xe][0].length===0),_t==="greedy"&&Bt){for(var it=[],Lt=0;Lt<Qe;Lt++){var Dt=Vt?fe[Lt]:Lt;it.push(rt[xe][Dt])}vt=it.join("").trim()===""}if(!vt){for(var st=0;st<Qe;st++){0<st&&!ce&&(mt+=pe);var Fi=Bt&&Vt?fe[st]:st;mt+=Ut(rt[xe][Fi],st)}xe<rt.length-1&&(!_t||0<Qe&&!ce)&&(mt+=ve)}}return mt}function Ut(fe,rt){if(fe==null)return"";if(fe.constructor===Date)return JSON.stringify(fe).slice(1,25);var _t=!1;ft&&typeof fe=="string"&&ft.test(fe)&&(fe="'"+fe,_t=!0);var mt=fe.toString().replace(be,Et);return(_t=_t||Y===!0||typeof Y=="function"&&Y(fe,rt)||Array.isArray(Y)&&Y[rt]||function(Bt,Vt){for(var ht=0;ht<Vt.length;ht++)if(-1<Bt.indexOf(Vt[ht]))return!0;return!1}(mt,a.BAD_DELIMITERS)||-1<mt.indexOf(pe)||mt.charAt(0)===" "||mt.charAt(mt.length-1)===" ")?Ve+mt+Ve:mt}}};if(a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=B,a.ParserHandle=A,a.NetworkStreamer=v,a.FileStreamer=b,a.StringStreamer=x,a.ReadableStreamStreamer=D,t.jQuery){var c=t.jQuery;c.fn.parse=function(_){var N=_.config||{},Y=[];return this.each(function(ve){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&t.FileReader)||!this.files||this.files.length===0)return!0;for(var Ve=0;Ve<this.files.length;Ve++)Y.push({file:this.files[Ve],inputElem:this,instanceConfig:c.extend({},N)})}),se(),this;function se(){if(Y.length!==0){var ve,Ve,Et,ut,Ce=Y[0];if(G(_.before)){var ft=_.before(Ce.file,Ce.inputElem);if(typeof ft=="object"){if(ft.action==="abort")return ve="AbortError",Ve=Ce.file,Et=Ce.inputElem,ut=ft.reason,void(G(_.error)&&_.error({name:ve},Ve,Et,ut));if(ft.action==="skip")return void pe();typeof ft.config=="object"&&(Ce.instanceConfig=c.extend(Ce.instanceConfig,ft.config))}else if(ft==="skip")return void pe()}var be=Ce.instanceConfig.complete;Ce.instanceConfig.complete=function(Ti){G(be)&&be(Ti,Ce.file,Ce.inputElem),pe()},a.parse(Ce.file,Ce.instanceConfig)}else G(_.complete)&&_.complete()}function pe(){Y.splice(0,1),se()}}}function u(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(N){var Y=$(N);Y.chunkSize=parseInt(Y.chunkSize),N.step||N.chunk||(Y.chunkSize=null),this._handle=new A(Y),(this._handle.streamer=this)._config=Y}.call(this,_),this.parseChunk=function(N,Y){if(this.isFirstChunk&&G(this._config.beforeFirstChunk)){var se=this._config.beforeFirstChunk(N);se!==void 0&&(N=se)}this.isFirstChunk=!1,this._halted=!1;var pe=this._partialLine+N;this._partialLine="";var ve=this._handle.parse(pe,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var Ve=ve.meta.cursor;this._finished||(this._partialLine=pe.substring(Ve-this._baseIndex),this._baseIndex=Ve),ve&&ve.data&&(this._rowCount+=ve.data.length);var Et=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:ve,workerId:a.WORKER_ID,finished:Et});else if(G(this._config.chunk)&&!Y){if(this._config.chunk(ve,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);ve=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ve.data),this._completeResults.errors=this._completeResults.errors.concat(ve.errors),this._completeResults.meta=ve.meta),this._completed||!Et||!G(this._config.complete)||ve&&ve.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Et||ve&&ve.meta.paused||this._nextChunk(),ve}this._halted=!0},this._sendError=function(N){G(this._config.error)?this._config.error(N):n&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:N,finished:!1})}}function v(_){var N;(_=_||{}).chunkSize||(_.chunkSize=a.RemoteChunkSize),u.call(this,_),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(Y){this._input=Y,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(N=new XMLHttpRequest,this._config.withCredentials&&(N.withCredentials=this._config.withCredentials),i||(N.onload=ne(this._chunkLoaded,this),N.onerror=ne(this._chunkError,this)),N.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var Y=this._config.downloadRequestHeaders;for(var se in Y)N.setRequestHeader(se,Y[se])}if(this._config.chunkSize){var pe=this._start+this._config.chunkSize-1;N.setRequestHeader("Range","bytes="+this._start+"-"+pe)}try{N.send(this._config.downloadRequestBody)}catch(ve){this._chunkError(ve.message)}i&&N.status===0&&this._chunkError()}},this._chunkLoaded=function(){N.readyState===4&&(N.status<200||400<=N.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:N.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(Y){var se=Y.getResponseHeader("Content-Range");return se===null?-1:parseInt(se.substring(se.lastIndexOf("/")+1))}(N),this.parseChunk(N.responseText)))},this._chunkError=function(Y){var se=N.statusText||Y;this._sendError(new Error(se))}}function b(_){var N,Y;(_=_||{}).chunkSize||(_.chunkSize=a.LocalChunkSize),u.call(this,_);var se=typeof FileReader<"u";this.stream=function(pe){this._input=pe,Y=pe.slice||pe.webkitSlice||pe.mozSlice,se?((N=new FileReader).onload=ne(this._chunkLoaded,this),N.onerror=ne(this._chunkError,this)):N=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var pe=this._input;if(this._config.chunkSize){var ve=Math.min(this._start+this._config.chunkSize,this._input.size);pe=Y.call(pe,this._start,ve)}var Ve=N.readAsText(pe,this._config.encoding);se||this._chunkLoaded({target:{result:Ve}})},this._chunkLoaded=function(pe){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(pe.target.result)},this._chunkError=function(){this._sendError(N.error)}}function x(_){var N;u.call(this,_=_||{}),this.stream=function(Y){return N=Y,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var Y,se=this._config.chunkSize;return se?(Y=N.substring(0,se),N=N.substring(se)):(Y=N,N=""),this._finished=!N,this.parseChunk(Y)}}}function D(_){u.call(this,_=_||{});var N=[],Y=!0,se=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(pe){this._input=pe,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){se&&N.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),N.length?this.parseChunk(N.shift()):Y=!0},this._streamData=ne(function(pe){try{N.push(typeof pe=="string"?pe:pe.toString(this._config.encoding)),Y&&(Y=!1,this._checkIsFinished(),this.parseChunk(N.shift()))}catch(ve){this._streamError(ve)}},this),this._streamError=ne(function(pe){this._streamCleanUp(),this._sendError(pe)},this),this._streamEnd=ne(function(){this._streamCleanUp(),se=!0,this._streamData("")},this),this._streamCleanUp=ne(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function A(_){var N,Y,se,pe=Math.pow(2,53),ve=-pe,Ve=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Et=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ut=this,Ce=0,ft=0,be=!1,Ti=!1,Ut=[],fe={data:[],errors:[],meta:{}};if(G(_.step)){var rt=_.step;_.step=function(xe){if(fe=xe,Bt())mt();else{if(mt(),fe.data.length===0)return;Ce+=xe.data.length,_.preview&&Ce>_.preview?Y.abort():(fe.data=fe.data[0],rt(fe,ut))}}}function _t(xe){return _.skipEmptyLines==="greedy"?xe.join("").trim()==="":xe.length===1&&xe[0].length===0}function mt(){return fe&&se&&(ht("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),se=!1),_.skipEmptyLines&&(fe.data=fe.data.filter(function(xe){return!_t(xe)})),Bt()&&function(){if(!fe)return;function xe(vt,ce){G(_.transformHeader)&&(vt=_.transformHeader(vt,ce)),Ut.push(vt)}if(Array.isArray(fe.data[0])){for(var Qe=0;Bt()&&Qe<fe.data.length;Qe++)fe.data[Qe].forEach(xe);fe.data.splice(0,1)}else fe.data.forEach(xe)}(),function(){if(!fe||!_.header&&!_.dynamicTyping&&!_.transform)return fe;function xe(vt,ce){var it,Lt=_.header?{}:[];for(it=0;it<vt.length;it++){var Dt=it,st=vt[it];_.header&&(Dt=it>=Ut.length?"__parsed_extra":Ut[it]),_.transform&&(st=_.transform(st,Dt)),st=Vt(Dt,st),Dt==="__parsed_extra"?(Lt[Dt]=Lt[Dt]||[],Lt[Dt].push(st)):Lt[Dt]=st}return _.header&&(it>Ut.length?ht("FieldMismatch","TooManyFields","Too many fields: expected "+Ut.length+" fields but parsed "+it,ft+ce):it<Ut.length&&ht("FieldMismatch","TooFewFields","Too few fields: expected "+Ut.length+" fields but parsed "+it,ft+ce)),Lt}var Qe=1;return!fe.data.length||Array.isArray(fe.data[0])?(fe.data=fe.data.map(xe),Qe=fe.data.length):fe.data=xe(fe.data,0),_.header&&fe.meta&&(fe.meta.fields=Ut),ft+=Qe,fe}()}function Bt(){return _.header&&Ut.length===0}function Vt(xe,Qe){return vt=xe,_.dynamicTypingFunction&&_.dynamicTyping[vt]===void 0&&(_.dynamicTyping[vt]=_.dynamicTypingFunction(vt)),(_.dynamicTyping[vt]||_.dynamicTyping)===!0?Qe==="true"||Qe==="TRUE"||Qe!=="false"&&Qe!=="FALSE"&&(function(ce){if(Ve.test(ce)){var it=parseFloat(ce);if(ve<it&&it<pe)return!0}return!1}(Qe)?parseFloat(Qe):Et.test(Qe)?new Date(Qe):Qe===""?null:Qe):Qe;var vt}function ht(xe,Qe,vt,ce){var it={type:xe,code:Qe,message:vt};ce!==void 0&&(it.row=ce),fe.errors.push(it)}this.parse=function(xe,Qe,vt){var ce=_.quoteChar||'"';if(_.newline||(_.newline=function(Dt,st){Dt=Dt.substring(0,1048576);var Fi=new RegExp(O(st)+"([^]*?)"+O(st),"gm"),ci=(Dt=Dt.replace(Fi,"")).split("\r"),di=Dt.split(`
`),vn=1<di.length&&di[0].length<ci[0].length;if(ci.length===1||vn)return`
`;for(var Ai=0,Je=0;Je<ci.length;Je++)ci[Je][0]===`
`&&Ai++;return Ai>=ci.length/2?`\r
`:"\r"}(xe,ce)),se=!1,_.delimiter)G(_.delimiter)&&(_.delimiter=_.delimiter(xe),fe.meta.delimiter=_.delimiter);else{var it=function(Dt,st,Fi,ci,di){var vn,Ai,Je,At;di=di||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var et=0;et<di.length;et++){var at=di[et],Ir=0,Cn=0,_n=0;Je=void 0;for(var rn=new B({comments:ci,delimiter:at,newline:st,preview:10}).parse(Dt),Bn=0;Bn<rn.data.length;Bn++)if(Fi&&_t(rn.data[Bn]))_n++;else{var Vn=rn.data[Bn].length;Cn+=Vn,Je!==void 0?0<Vn&&(Ir+=Math.abs(Vn-Je),Je=Vn):Je=Vn}0<rn.data.length&&(Cn/=rn.data.length-_n),(Ai===void 0||Ir<=Ai)&&(At===void 0||At<Cn)&&1.99<Cn&&(Ai=Ir,vn=at,At=Cn)}return{successful:!!(_.delimiter=vn),bestDelimiter:vn}}(xe,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess);it.successful?_.delimiter=it.bestDelimiter:(se=!0,_.delimiter=a.DefaultDelimiter),fe.meta.delimiter=_.delimiter}var Lt=$(_);return _.preview&&_.header&&Lt.preview++,N=xe,Y=new B(Lt),fe=Y.parse(N,Qe,vt),mt(),be?{meta:{paused:!0}}:fe||{meta:{paused:!1}}},this.paused=function(){return be},this.pause=function(){be=!0,Y.abort(),N=G(_.chunk)?"":N.substring(Y.getCharIndex())},this.resume=function(){ut.streamer._halted?(be=!1,ut.streamer.parseChunk(N,!0)):setTimeout(ut.resume,3)},this.aborted=function(){return Ti},this.abort=function(){Ti=!0,Y.abort(),fe.meta.aborted=!0,G(_.complete)&&_.complete(fe),N=""}}function O(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function B(_){var N,Y=(_=_||{}).delimiter,se=_.newline,pe=_.comments,ve=_.step,Ve=_.preview,Et=_.fastMode,ut=N=_.quoteChar===void 0||_.quoteChar===null?'"':_.quoteChar;if(_.escapeChar!==void 0&&(ut=_.escapeChar),(typeof Y!="string"||-1<a.BAD_DELIMITERS.indexOf(Y))&&(Y=","),pe===Y)throw new Error("Comment character same as delimiter");pe===!0?pe="#":(typeof pe!="string"||-1<a.BAD_DELIMITERS.indexOf(pe))&&(pe=!1),se!==`
`&&se!=="\r"&&se!==`\r
`&&(se=`
`);var Ce=0,ft=!1;this.parse=function(be,Ti,Ut){if(typeof be!="string")throw new Error("Input must be a string");var fe=be.length,rt=Y.length,_t=se.length,mt=pe.length,Bt=G(ve),Vt=[],ht=[],xe=[],Qe=Ce=0;if(!be)return Pi();if(_.header&&!Ti){var vt=be.split(se)[0].split(Y),ce=[],it={},Lt=!1;for(var Dt in vt){var st=vt[Dt];G(_.transformHeader)&&(st=_.transformHeader(st,Dt));var Fi=st,ci=it[st]||0;for(0<ci&&(Lt=!0,Fi=st+"_"+ci),it[st]=ci+1;ce.includes(Fi);)Fi=Fi+"_"+ci;ce.push(Fi)}if(Lt){var di=be.split(se);di[0]=ce.join(Y),be=di.join(se)}}if(Et||Et!==!1&&be.indexOf(N)===-1){for(var vn=be.split(se),Ai=0;Ai<vn.length;Ai++){if(xe=vn[Ai],Ce+=xe.length,Ai!==vn.length-1)Ce+=se.length;else if(Ut)return Pi();if(!pe||xe.substring(0,mt)!==pe){if(Bt){if(Vt=[],_n(xe.split(Y)),Gi(),ft)return Pi()}else _n(xe.split(Y));if(Ve&&Ve<=Ai)return Vt=Vt.slice(0,Ve),Pi(!0)}}return Pi()}for(var Je=be.indexOf(Y,Ce),At=be.indexOf(se,Ce),et=new RegExp(O(ut)+O(N),"g"),at=be.indexOf(N,Ce);;)if(be[Ce]!==N)if(pe&&xe.length===0&&be.substring(Ce,Ce+mt)===pe){if(At===-1)return Pi();Ce=At+_t,At=be.indexOf(se,Ce),Je=be.indexOf(Y,Ce)}else if(Je!==-1&&(Je<At||At===-1))xe.push(be.substring(Ce,Je)),Ce=Je+rt,Je=be.indexOf(Y,Ce);else{if(At===-1)break;if(xe.push(be.substring(Ce,At)),Vn(At+_t),Bt&&(Gi(),ft))return Pi();if(Ve&&Vt.length>=Ve)return Pi(!0)}else for(at=Ce,Ce++;;){if((at=be.indexOf(N,at+1))===-1)return Ut||ht.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Vt.length,index:Ce}),Bn();if(at===fe-1)return Bn(be.substring(Ce,at).replace(et,N));if(N!==ut||be[at+1]!==ut){if(N===ut||at===0||be[at-1]!==ut){Je!==-1&&Je<at+1&&(Je=be.indexOf(Y,at+1)),At!==-1&&At<at+1&&(At=be.indexOf(se,at+1));var Ir=rn(At===-1?Je:Math.min(Je,At));if(be.substr(at+1+Ir,rt)===Y){xe.push(be.substring(Ce,at).replace(et,N)),be[Ce=at+1+Ir+rt]!==N&&(at=be.indexOf(N,Ce)),Je=be.indexOf(Y,Ce),At=be.indexOf(se,Ce);break}var Cn=rn(At);if(be.substring(at+1+Cn,at+1+Cn+_t)===se){if(xe.push(be.substring(Ce,at).replace(et,N)),Vn(at+1+Cn+_t),Je=be.indexOf(Y,Ce),at=be.indexOf(N,Ce),Bt&&(Gi(),ft))return Pi();if(Ve&&Vt.length>=Ve)return Pi(!0);break}ht.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Vt.length,index:Ce}),at++}}else at++}return Bn();function _n(ui){Vt.push(ui),Qe=Ce}function rn(ui){var Ci=0;if(ui!==-1){var Tr=be.substring(at+1,ui);Tr&&Tr.trim()===""&&(Ci=Tr.length)}return Ci}function Bn(ui){return Ut||(ui===void 0&&(ui=be.substring(Ce)),xe.push(ui),Ce=fe,_n(xe),Bt&&Gi()),Pi()}function Vn(ui){Ce=ui,_n(xe),xe=[],At=be.indexOf(se,Ce)}function Pi(ui){return{data:Vt,errors:ht,meta:{delimiter:Y,linebreak:se,aborted:ft,truncated:!!ui,cursor:Qe+(Ti||0)}}}function Gi(){ve(Pi()),Vt=[],ht=[]}},this.abort=function(){ft=!0},this.getCharIndex=function(){return Ce}}function L(_){var N=_.data,Y=r[N.workerId],se=!1;if(N.error)Y.userError(N.error,N.file);else if(N.results&&N.results.data){var pe={abort:function(){se=!0,U(N.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:K,resume:K};if(G(Y.userStep)){for(var ve=0;ve<N.results.data.length&&(Y.userStep({data:N.results.data[ve],errors:N.results.errors,meta:N.results.meta},pe),!se);ve++);delete N.results}else G(Y.userChunk)&&(Y.userChunk(N.results,pe,N.file),delete N.results)}N.finished&&!se&&U(N.workerId,N.results)}function U(_,N){var Y=r[_];G(Y.userComplete)&&Y.userComplete(N),Y.terminate(),delete r[_]}function K(){throw new Error("Not implemented.")}function $(_){if(typeof _!="object"||_===null)return _;var N=Array.isArray(_)?[]:{};for(var Y in _)N[Y]=$(_[Y]);return N}function ne(_,N){return function(){_.apply(N,arguments)}}function G(_){return typeof _=="function"}return n&&(t.onmessage=function(_){var N=_.data;if(a.WORKER_ID===void 0&&N&&(a.WORKER_ID=N.workerId),typeof N.input=="string")t.postMessage({workerId:a.WORKER_ID,results:a.parse(N.input,N.config),finished:!0});else if(t.File&&N.input instanceof File||N.input instanceof Object){var Y=a.parse(N.input,N.config);Y&&t.postMessage({workerId:a.WORKER_ID,results:Y,finished:!0})}}),(v.prototype=Object.create(u.prototype)).constructor=v,(b.prototype=Object.create(u.prototype)).constructor=b,(x.prototype=Object.create(x.prototype)).constructor=x,(D.prototype=Object.create(u.prototype)).constructor=D,a})});var dD=ib((sc,cC)=>{"use strict";(function(e,t){typeof sc=="object"&&typeof cC=="object"?cC.exports=t():typeof define=="function"&&define.amd?define("highcharts/highcharts",[],t):typeof sc=="object"?sc.highcharts=t():e.Highcharts&&e.Highcharts.error(16,!0)||(e.Highcharts=t())})(sc,()=>(()=>{"use strict";let e,t;var i,n,r,s,a,c,u,v,b,x,D,A,O,B,L,U,K,$={};$.d=(C,o)=>{for(var l in o)$.o(o,l)&&!$.o(C,l)&&Object.defineProperty(C,l,{enumerable:!0,get:o[l]})},$.o=(C,o)=>Object.prototype.hasOwnProperty.call(C,o);var ne={};$.d(ne,{default:()=>rP}),function(C){C.SVG_NS="http://www.w3.org/2000/svg",C.product="Highcharts",C.version="12.0.1",C.win=typeof window<"u"?window:{},C.doc=C.win.document,C.svg=C.doc&&C.doc.createElementNS&&!!C.doc.createElementNS(C.SVG_NS,"svg").createSVGRect,C.userAgent=C.win.navigator&&C.win.navigator.userAgent||"",C.isChrome=C.win.chrome,C.isFirefox=C.userAgent.indexOf("Firefox")!==-1,C.isMS=/(edge|msie|trident)/i.test(C.userAgent)&&!C.win.opera,C.isSafari=!C.isChrome&&C.userAgent.indexOf("Safari")!==-1,C.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(C.userAgent),C.isWebKit=C.userAgent.indexOf("AppleWebKit")!==-1,C.deg2rad=2*Math.PI/360,C.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],C.noop=function(){},C.supportsPassiveEvents=function(){let o=!1;if(!C.isMS){let l=Object.defineProperty({},"passive",{get:function(){o=!0}});C.win.addEventListener&&C.win.removeEventListener&&(C.win.addEventListener("testPassive",C.noop,l),C.win.removeEventListener("testPassive",C.noop,l))}return o}(),C.charts=[],C.composed=[],C.dateFormats={},C.seriesTypes={},C.symbolSizes={},C.chartCount=0}(i||(i={}));let G=i,{charts:_,doc:N,win:Y}=G;function se(C,o,l,d){let h=o?"Highcharts error":"Highcharts warning";C===32&&(C=`${h}: Deprecated member`);let g=ft(C),p=g?`${h} #${C}: www.highcharts.com/errors/${C}/`:C.toString();if(d!==void 0){let f="";g&&(p+="?"),ht(d,function(m,w){f+=`
 - ${w}: ${m}`,g&&(p+=encodeURI(w)+"="+encodeURI(m))}),p+=f}Qe(G,"displayError",{chart:l,code:C,message:p,params:d},function(){if(o)throw Error(p);Y.console&&se.messages.indexOf(p)===-1&&console.warn(p)}),se.messages.push(p)}function pe(C,o){return parseInt(C,o||10)}function ve(C){return typeof C=="string"}function Ve(C){let o=Object.prototype.toString.call(C);return o==="[object Array]"||o==="[object Array Iterator]"}function Et(C,o){return!!C&&typeof C=="object"&&(!o||!Ve(C))}function ut(C){return Et(C)&&typeof C.nodeType=="number"}function Ce(C){let o=C&&C.constructor;return!!(Et(C,!0)&&!ut(C)&&o&&o.name&&o.name!=="Object")}function ft(C){return typeof C=="number"&&!isNaN(C)&&C<1/0&&C>-1/0}function be(C){return C!=null}function Ti(C,o,l){let d,h=ve(o)&&!be(l),g=(p,f)=>{be(p)?C.setAttribute(f,p):h?(d=C.getAttribute(f))||f!=="class"||(d=C.getAttribute(f+"Name")):C.removeAttribute(f)};return ve(o)?g(l,o):ht(o,g),d}function Ut(C){return Ve(C)?C:[C]}function fe(C,o){let l;for(l in C||(C={}),o)C[l]=o[l];return C}function rt(){let C=arguments,o=C.length;for(let l=0;l<o;l++){let d=C[l];if(d!=null)return d}}function _t(C,o){fe(C.style,o)}function mt(C){return Math.pow(10,Math.floor(Math.log(C)/Math.LN10))}function Bt(C,o){return C>1e14?C:parseFloat(C.toPrecision(o||14))}(se||(se={})).messages=[],Math.easeInOutSine=function(C){return-.5*(Math.cos(Math.PI*C)-1)};let Vt=Array.prototype.find?function(C,o){return C.find(o)}:function(C,o){let l,d=C.length;for(l=0;l<d;l++)if(o(C[l],l))return C[l]};function ht(C,o,l){for(let d in C)Object.hasOwnProperty.call(C,d)&&o.call(l||C[d],C[d],d,C)}function xe(C,o,l){function d(p,f){let m=C.removeEventListener;m&&m.call(C,p,f,!1)}function h(p){let f,m;C.nodeName&&(o?(f={})[o]=!0:f=p,ht(f,function(w,S){if(p[S])for(m=p[S].length;m--;)d(S,p[S][m].fn)}))}let g=typeof C=="function"&&C.prototype||C;if(Object.hasOwnProperty.call(g,"hcEvents")){let p=g.hcEvents;if(o){let f=p[o]||[];l?(p[o]=f.filter(function(m){return l!==m.fn}),d(o,l)):(h(p),p[o]=[])}else h(p),delete g.hcEvents}}function Qe(C,o,l,d){if(l=l||{},N.createEvent&&(C.dispatchEvent||C.fireEvent&&C!==G)){let h=N.createEvent("Events");h.initEvent(o,!0,!0),l=fe(h,l),C.dispatchEvent?C.dispatchEvent(l):C.fireEvent(o,l)}else if(C.hcEvents){l.target||fe(l,{preventDefault:function(){l.defaultPrevented=!0},target:C,type:o});let h=[],g=C,p=!1;for(;g.hcEvents;)Object.hasOwnProperty.call(g,"hcEvents")&&g.hcEvents[o]&&(h.length&&(p=!0),h.unshift.apply(h,g.hcEvents[o])),g=Object.getPrototypeOf(g);p&&h.sort((f,m)=>f.order-m.order),h.forEach(f=>{f.fn.call(C,l)===!1&&l.preventDefault()})}d&&!l.defaultPrevented&&d.call(C,l)}let vt=function(){let C=Math.random().toString(36).substring(2,9)+"-",o=0;return function(){return"highcharts-"+(e?"":C)+o++}}();Y.jQuery&&(Y.jQuery.fn.highcharts=function(){let C=[].slice.call(arguments);if(this[0])return C[0]?(new G[ve(C[0])?C.shift():"Chart"](this[0],C[0],C[1]),this):_[Ti(this[0],"data-highcharts-chart")]});let ce={addEvent:function(C,o,l,d={}){let h=typeof C=="function"&&C.prototype||C;Object.hasOwnProperty.call(h,"hcEvents")||(h.hcEvents={});let g=h.hcEvents;G.Point&&C instanceof G.Point&&C.series&&C.series.chart&&(C.series.chart.runTrackerClick=!0);let p=C.addEventListener;p&&p.call(C,o,l,!!G.supportsPassiveEvents&&{passive:d.passive===void 0?o.indexOf("touch")!==-1:d.passive,capture:!1}),g[o]||(g[o]=[]);let f={fn:l,order:typeof d.order=="number"?d.order:1/0};return g[o].push(f),g[o].sort((m,w)=>m.order-w.order),function(){xe(C,o,l)}},arrayMax:function(C){let o=C.length,l=C[0];for(;o--;)C[o]>l&&(l=C[o]);return l},arrayMin:function(C){let o=C.length,l=C[0];for(;o--;)C[o]<l&&(l=C[o]);return l},attr:Ti,clamp:function(C,o,l){return C>o?C<l?C:l:o},clearTimeout:function(C){be(C)&&clearTimeout(C)},correctFloat:Bt,createElement:function(C,o,l,d,h){let g=N.createElement(C);return o&&fe(g,o),h&&_t(g,{padding:"0",border:"none",margin:"0"}),l&&_t(g,l),d&&d.appendChild(g),g},crisp:function(C,o=0,l){let d=o%2/2,h=l?-1:1;return(Math.round(C*h-d)+d)*h},css:_t,defined:be,destroyObjectProperties:function(C,o,l){ht(C,function(d,h){d!==o&&d?.destroy&&d.destroy(),(d?.destroy||!l)&&delete C[h]})},diffObjects:function(C,o,l,d){let h={};return function g(p,f,m,w){let S=l?f:p;ht(p,function(y,E){if(!w&&d&&d.indexOf(E)>-1&&f[E]){y=Ut(y),m[E]=[];for(let M=0;M<Math.max(y.length,f[E].length);M++)f[E][M]&&(y[M]===void 0?m[E][M]=f[E][M]:(m[E][M]={},g(y[M],f[E][M],m[E][M],w+1)))}else Et(y,!0)&&!y.nodeType?(m[E]=Ve(y)?[]:{},g(y,f[E]||{},m[E],w+1),Object.keys(m[E]).length!==0||E==="colorAxis"&&w===0||delete m[E]):(p[E]!==f[E]||E in p&&!(E in f))&&E!=="__proto__"&&E!=="constructor"&&(m[E]=S[E])})}(C,o,h,0),h},discardElement:function(C){C&&C.parentElement&&C.parentElement.removeChild(C)},erase:function(C,o){let l=C.length;for(;l--;)if(C[l]===o){C.splice(l,1);break}},error:se,extend:fe,extendClass:function(C,o){let l=function(){};return l.prototype=new C,fe(l.prototype,o),l},find:Vt,fireEvent:Qe,getAlignFactor:(C="")=>({center:.5,right:1,middle:.5,bottom:1})[C]||0,getClosestDistance:function(C,o){let l,d,h,g,p=!o;return C.forEach(f=>{if(f.length>1)for(g=d=f.length-1;g>0;g--)(h=f[g]-f[g-1])<0&&!p?(o?.(),o=void 0):h&&(l===void 0||h<l)&&(l=h)}),l},getMagnitude:mt,getNestedProperty:function(C,o){let l=C.split(".");for(;l.length&&be(o);){let d=l.shift();if(d===void 0||d==="__proto__")return;if(d==="this"){let g;return Et(o)&&(g=o["@this"]),g??o}let h=o[d];if(!be(h)||typeof h=="function"||typeof h.nodeType=="number"||h===Y)return;o=h}return o},getStyle:function C(o,l,d){let h;if(l==="width"){let p=Math.min(o.offsetWidth,o.scrollWidth),f=o.getBoundingClientRect&&o.getBoundingClientRect().width;return f<p&&f>=p-1&&(p=Math.floor(f)),Math.max(0,p-(C(o,"padding-left",!0)||0)-(C(o,"padding-right",!0)||0))}if(l==="height")return Math.max(0,Math.min(o.offsetHeight,o.scrollHeight)-(C(o,"padding-top",!0)||0)-(C(o,"padding-bottom",!0)||0));let g=Y.getComputedStyle(o,void 0);return g&&(h=g.getPropertyValue(l),rt(d,l!=="opacity")&&(h=pe(h))),h},insertItem:function(C,o){let l,d=C.options.index,h=o.length;for(l=C.options.isInternal?h:0;l<h+1;l++)if(!o[l]||ft(d)&&d<rt(o[l].options.index,o[l]._i)||o[l].options.isInternal){o.splice(l,0,C);break}return l},isArray:Ve,isClass:Ce,isDOMElement:ut,isFunction:function(C){return typeof C=="function"},isNumber:ft,isObject:Et,isString:ve,merge:function(C,...o){let l,d=[C,...o],h={},g=function(f,m){return typeof f!="object"&&(f={}),ht(m,function(w,S){S!=="__proto__"&&S!=="constructor"&&(!Et(w,!0)||Ce(w)||ut(w)?f[S]=m[S]:f[S]=g(f[S]||{},w))}),f};C===!0&&(h=d[1],d=Array.prototype.slice.call(d,2));let p=d.length;for(l=0;l<p;l++)h=g(h,d[l]);return h},normalizeTickInterval:function(C,o,l,d,h){let g,p=C;l=rt(l,mt(C));let f=C/l;for(!o&&(o=h?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],d===!1&&(l===1?o=o.filter(function(m){return m%1==0}):l<=.1&&(o=[1/l]))),g=0;g<o.length&&(p=o[g],(!h||!(p*l>=C))&&(h||!(f<=(o[g]+(o[g+1]||o[g]))/2)));g++);return Bt(p*l,-Math.round(Math.log(.001)/Math.LN10))},objectEach:ht,offset:function(C){let o=N.documentElement,l=C.parentElement||C.parentNode?C.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:l.top+(Y.pageYOffset||o.scrollTop)-(o.clientTop||0),left:l.left+(Y.pageXOffset||o.scrollLeft)-(o.clientLeft||0),width:l.width,height:l.height}},pad:function(C,o,l){return Array((o||2)+1-String(C).replace("-","").length).join(l||"0")+C},pick:rt,pInt:pe,pushUnique:function(C,o){return 0>C.indexOf(o)&&!!C.push(o)},relativeLength:function(C,o,l){return/%$/.test(C)?o*parseFloat(C)/100+(l||0):parseFloat(C)},removeEvent:xe,replaceNested:function(C,...o){let l,d;do for(d of(l=C,o))C=C.replace(d[0],d[1]);while(C!==l);return C},splat:Ut,stableSort:function(C,o){let l,d,h=C.length;for(d=0;d<h;d++)C[d].safeI=d;for(C.sort(function(g,p){return(l=o(g,p))===0?g.safeI-p.safeI:l}),d=0;d<h;d++)delete C[d].safeI},syncTimeout:function(C,o,l){return o>0?setTimeout(C,o,l):(C.call(0,l),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ucfirst:function(C){return ve(C)?C.substring(0,1).toUpperCase()+C.substring(1):String(C)},uniqueKey:vt,useSerialIds:function(C){return e=rt(C,e)},wrap:function(C,o,l){let d=C[o];C[o]=function(){let h=arguments,g=this;return l.apply(this,[function(){return d.apply(g,arguments.length?arguments:h)}].concat([].slice.call(arguments)))}}},{win:it}=G,{defined:Lt,error:Dt,extend:st,isNumber:Fi,isObject:ci,isString:di,merge:vn,objectEach:Ai,pad:Je,splat:At,timeUnits:et,ucfirst:at}=ce,Ir=G.isSafari&&it.Intl&&!it.Intl.DateTimeFormat.prototype.formatRange,Cn=C=>C.main===void 0,_n=C=>["D","L","M","X","J","V","S"].indexOf(C),rn=class{constructor(C){this.options={},this.variableTimezone=!1,this.Date=it.Date,this.update(C)}update(C={}){let o=C.timezone??"UTC";this.dTLCache={},this.options=C=vn(!0,this.options,C);let{timezoneOffset:l,useUTC:d}=C;this.Date=C.Date||it.Date||Date,Lt(d)&&(o=d?"UTC":void 0),l&&l%60==0&&(o="Etc/GMT"+(l>0?"+":"")+l/60),this.variableTimezone=o!=="UTC"&&o?.indexOf("Etc/GMT")!==0,this.timezone=o,["months","shortMonths","weekdays","shortWeekdays"].forEach(h=>{let g=/months/i.test(h),p=/short/.test(h),f={timeZone:"UTC"};f[g?"month":"weekday"]=p?"short":"long",this[h]=(g?[0,1,2,3,4,5,6,7,8,9,10,11]:[3,4,5,6,7,8,9]).map(m=>this.dateFormat(f,(g?31:1)*24*36e5*m))})}toParts(C){let[o,l,d,h,g,p,f]=this.dateTimeFormat({weekday:"narrow",day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},C,"es").split(/(?:, |\/|:)/g);return[h,+d-1,l,g,p,f,Math.floor(Number(C)||0)%1e3,_n(o)].map(Number)}dateTimeFormat(C,o,l=this.options.locale){let d=JSON.stringify(C)+l;di(C)&&(C=this.str2dtf(C));let h=this.dTLCache[d];if(!h){C.timeZone??(C.timeZone=this.timezone);try{h=new Intl.DateTimeFormat(l,C)}catch(g){/Invalid time zone/i.test(g.message)?(Dt(34),C.timeZone="UTC",h=new Intl.DateTimeFormat(l,C)):Dt(g.message,!1)}}return this.dTLCache[d]=h,h?.format(o)||""}str2dtf(C,o={}){let l={L:{fractionalSecondDigits:3},S:{second:"2-digit"},M:{minute:"numeric"},H:{hour:"2-digit"},k:{hour:"numeric"},E:{weekday:"narrow"},a:{weekday:"short"},A:{weekday:"long"},d:{day:"2-digit"},e:{day:"numeric"},b:{month:"short"},B:{month:"long"},m:{month:"2-digit"},o:{month:"numeric"},y:{year:"2-digit"},Y:{year:"numeric"}};return Object.keys(l).forEach(d=>{C.indexOf(d)!==-1&&st(o,l[d])}),o}makeTime(C,o,l=1,d=0,h,g,p){let f=this.Date.UTC(C,o,l,d,h||0,g||0,p||0);if(this.timezone!=="UTC"){let m=this.getTimezoneOffset(f);if(f+=m,[2,3,8,9,10,11].indexOf(o)!==-1&&(d<5||d>20)){let w=this.getTimezoneOffset(f);m!==w?f+=w-m:m-36e5!==this.getTimezoneOffset(f-36e5)||Ir||(f-=36e5)}}return f}parse(C){if(!di(C))return C??void 0;let o=(C=C.replace(/\//g,"-").replace(/(GMT|UTC)/,"")).indexOf("Z")>-1||/([+-][0-9]{2}):?[0-9]{2}$/.test(C),l=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(C);o||l||(C+="Z");let d=Date.parse(C);if(Fi(d))return d+(!o||l?this.getTimezoneOffset(d):0)}getTimezoneOffset(C){if(this.timezone!=="UTC"){let[o,l,d,h,g=0]=this.dateTimeFormat({timeZoneName:"shortOffset"},C,"en").split(/(GMT|:)/).map(Number),p=-(36e5*(d+g/60));if(Fi(p))return p}return 0}dateFormat(C,o,l){let d=G.defaultOptions?.lang;if(!Lt(o)||isNaN(o))return d?.invalidDate||"";if(di(C=C??"%Y-%m-%d %H:%M:%S")){let h,g=/%\[([a-zA-Z]+)\]/g;for(;h=g.exec(C);)C=C.replace(h[0],this.dateTimeFormat(h[1],o))}if(di(C)&&C.indexOf("%")!==-1){let h=this,[g,p,f,m,w,S,y,E]=this.toParts(o),M=d?.weekdays||this.weekdays,R=d?.shortWeekdays||this.shortWeekdays,T=d?.months||this.months,F=d?.shortMonths||this.shortMonths;Ai(st({a:R?R[E]:M[E].substr(0,3),A:M[E],d:Je(f),e:Je(f,2," "),w:E,b:F[p],B:T[p],m:Je(p+1),o:p+1,y:g.toString().substr(2,2),Y:g,H:Je(m),k:m,I:Je(m%12||12),l:m%12||12,M:Je(w),p:m<12?"AM":"PM",P:m<12?"am":"pm",S:Je(S),L:Je(y,3)},G.dateFormats),function(I,P){if(di(C))for(;C.indexOf("%"+P)!==-1;)C=C.replace("%"+P,typeof I=="function"?I.call(h,o):I)})}else if(ci(C)){let h=(this.getTimezoneOffset(o)||0)/36e5,g=this.options.timezone||"Etc/GMT"+(h>=0?"+":"")+h,{prefix:p="",suffix:f=""}=C;C=p+this.dateTimeFormat(st({timeZone:g},C),o)+f}return l?at(C):C}resolveDTLFormat(C){return ci(C,!0)?ci(C,!0)&&Cn(C)?{main:C}:C:{main:(C=At(C))[0],from:C[1],to:C[2]}}getTimeTicks(C,o,l,d){let h=this,g=[],p={},{count:f=1,unitRange:m}=C,[w,S,y,E,M,R]=h.toParts(o),T=(o||0)%1e3,F;if(d??(d=1),Lt(o)){if(T=m>=et.second?0:f*Math.floor(T/f),m>=et.second&&(R=m>=et.minute?0:f*Math.floor(R/f)),m>=et.minute&&(M=m>=et.hour?0:f*Math.floor(M/f)),m>=et.hour&&(E=m>=et.day?0:f*Math.floor(E/f)),m>=et.day&&(y=m>=et.month?1:Math.max(1,f*Math.floor(y/f))),m>=et.month&&(S=m>=et.year?0:f*Math.floor(S/f)),m>=et.year&&(w-=w%f),m===et.week){f&&(o=h.makeTime(w,S,y,E,M,R,T));let k=_n(this.dateTimeFormat({timeZone:this.timezone,weekday:"narrow"},o,"es"));y+=-k+d+(k<d?-7:0)}o=h.makeTime(w,S,y,E,M,R,T),h.variableTimezone&&Lt(l)&&(F=l-o>4*et.month||h.getTimezoneOffset(o)!==h.getTimezoneOffset(l));let I=o,P=1;for(;I<l;)g.push(I),m===et.year?I=h.makeTime(w+P*f,0):m===et.month?I=h.makeTime(w,S+P*f):F&&(m===et.day||m===et.week)?I=h.makeTime(w,S,y+P*f*(m===et.day?1:7)):F&&m===et.hour&&f>1?I=h.makeTime(w,S,y,E+P*f):I+=m*f,P++;g.push(I),m<=et.hour&&g.length<1e4&&g.forEach(k=>{k%18e5==0&&h.dateFormat("%H%M%S%L",k)==="000000000"&&(p[k]="day")})}return g.info=st(C,{higherRanks:p,totalRange:m*f}),g}getDateFormat(C,o,l,d){let h=this.dateFormat("%m-%d %H:%M:%S.%L",o),g="01-01 00:00:00.000",p={millisecond:15,second:12,minute:9,hour:6,day:3},f="millisecond",m=f;for(f in et){if(C===et.week&&+this.dateFormat("%w",o)===l&&h.substr(6)===g.substr(6)){f="week";break}if(et[f]>C){f=m;break}if(p[f]&&h.substr(p[f])!==g.substr(p[f]))break;f!=="week"&&(m=f)}return this.resolveDTLFormat(d[f]).main}},{isTouchDevice:Bn}=G,{fireEvent:Vn,merge:Pi}=ce,Gi={colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{locale:void 0,loading:"Loading...",months:void 0,shortMonths:void 0,weekdays:void 0,numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1"},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,timezone:"UTC",timezoneOffset:0,useUTC:void 0},chart:{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",margin:15,minScale:.67},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:""},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:C=>Math.sqrt(1-Math.pow(C-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%[AebHMSL]",second:"%[AebHMS]",minute:"%[AebHM]",hour:"%[AebHM]",day:"%[AebY]",week:"Week from %[AebY]",month:"%[BY]",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:Bn?25:10,headerFormat:'<span style="font-size: 0.8em">{ucfirst point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25CF</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};Gi.chart.styledMode=!0,Gi.chart.styledMode=!1;let ui=new rn(Gi.time),Ci={defaultOptions:Gi,defaultTime:ui,getOptions:function(){return Gi},setOptions:function(C){return Vn(G,"setOptions",{options:C}),Pi(!0,Gi,C),C.time&&ui.update(Gi.time),C.lang&&"locale"in C.lang&&ui.update({locale:C.lang.locale}),Gi}},{isNumber:Tr,merge:d3,pInt:wi,defined:Hw}=ce;class Ht{static parse(o){return o?new Ht(o):Ht.None}constructor(o){let l,d,h,g;this.rgba=[NaN,NaN,NaN,NaN],this.input=o;let p=G.Color;if(p&&p!==Ht)return new p(o);if(typeof o=="object"&&o.stops!==void 0)this.stops=o.stops.map(f=>new Ht(f[1]));else if(typeof o=="string")for(this.input=o=Ht.names[o.toLowerCase()]||o,h=Ht.parsers.length;h--&&!d;)(l=(g=Ht.parsers[h]).regex.exec(o))&&(d=g.parse(l));d&&(this.rgba=d)}get(o){let l=this.input,d=this.rgba;if(typeof l=="object"&&this.stops!==void 0){let h=d3(l);return h.stops=[].slice.call(h.stops),this.stops.forEach((g,p)=>{h.stops[p]=[h.stops[p][0],g.get(o)]}),h}return d&&Tr(d[0])?o!=="rgb"&&(o||d[3]!==1)?o==="a"?`${d[3]}`:"rgba("+d.join(",")+")":"rgb("+d[0]+","+d[1]+","+d[2]+")":l}brighten(o){let l=this.rgba;if(this.stops)this.stops.forEach(function(d){d.brighten(o)});else if(Tr(o)&&o!==0)for(let d=0;d<3;d++)l[d]+=wi(255*o),l[d]<0&&(l[d]=0),l[d]>255&&(l[d]=255);return this}setOpacity(o){return this.rgba[3]=o,this}tweenTo(o,l){let d=this.rgba,h=o.rgba;if(!Tr(d[0])||!Tr(h[0]))return o.input||"none";let g=h[3]!==1||d[3]!==1;return(g?"rgba(":"rgb(")+Math.round(h[0]+(d[0]-h[0])*(1-l))+","+Math.round(h[1]+(d[1]-h[1])*(1-l))+","+Math.round(h[2]+(d[2]-h[2])*(1-l))+(g?","+(h[3]+(d[3]-h[3])*(1-l)):"")+")"}}Ht.names={white:"#ffffff",black:"#000000"},Ht.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(C){return[wi(C[1]),wi(C[2]),wi(C[3]),parseFloat(C[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(C){return[wi(C[1]),wi(C[2]),wi(C[3]),1]}},{regex:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?$/i,parse:function(C){return[wi(C[1]+C[1],16),wi(C[2]+C[2],16),wi(C[3]+C[3],16),Hw(C[4])?wi(C[4]+C[4],16)/255:1]}},{regex:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?$/i,parse:function(C){return[wi(C[1],16),wi(C[2],16),wi(C[3],16),Hw(C[4])?wi(C[4],16)/255:1]}}],Ht.None=new Ht("");let{parse:Gw}=Ht,{win:u3}=G,{isNumber:wg,objectEach:h3}=ce,Ms=(()=>{class C{constructor(l,d,h){this.pos=NaN,this.options=d,this.elem=l,this.prop=h}dSetter(){let l=this.paths,d=l&&l[0],h=l&&l[1],g=this.now||0,p=[];if(g!==1&&d&&h)if(d.length===h.length&&g<1)for(let f=0;f<h.length;f++){let m=d[f],w=h[f],S=[];for(let y=0;y<w.length;y++){let E=m[y],M=w[y];wg(E)&&wg(M)&&!(w[0]==="A"&&(y===4||y===5))?S[y]=E+g*(M-E):S[y]=M}p.push(S)}else p=h;else p=this.toD||[];this.elem.attr("d",p,void 0,!0)}update(){let l=this.elem,d=this.prop,h=this.now,g=this.options.step;this[d+"Setter"]?this[d+"Setter"]():l.attr?l.element&&l.attr(d,h,null,!0):l.style[d]=h+this.unit,g&&g.call(l,h,this)}run(l,d,h){let g=this,p=g.options,f=function(S){return!f.stopped&&g.step(S)},m=u3.requestAnimationFrame||function(S){setTimeout(S,13)},w=function(){for(let S=0;S<C.timers.length;S++)C.timers[S]()||C.timers.splice(S--,1);C.timers.length&&m(w)};l!==d||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=l,this.end=d,this.unit=h,this.now=this.start,this.pos=0,f.elem=this.elem,f.prop=this.prop,f()&&C.timers.push(f)===1&&m(w)):(delete p.curAnim[this.prop],p.complete&&Object.keys(p.curAnim).length===0&&p.complete.call(this.elem))}step(l){let d,h,g=+new Date,p=this.options,f=this.elem,m=p.complete,w=p.duration,S=p.curAnim;return f.attr&&!f.element?d=!1:l||g>=w+this.startTime?(this.now=this.end,this.pos=1,this.update(),S[this.prop]=!0,h=!0,h3(S,function(y){y!==!0&&(h=!1)}),h&&m&&m.call(f),d=!1):(this.pos=p.easing((g-this.startTime)/w),this.now=this.start+(this.end-this.start)*this.pos,this.update(),d=!0),d}initPath(l,d,h){let g=l.startX,p=l.endX,f=h.slice(),m=l.isArea,w=m?2:1,S=d&&h.length>d.length&&h.hasStackedCliffs,y,E,M,R,T=d&&d.slice();if(!T||S)return[f,f];function F(P,k){for(;P.length<E;){let H=P[0],j=k[E-P.length];if(j&&H[0]==="M"&&(j[0]==="C"?P[0]=["C",H[1],H[2],H[1],H[2],H[1],H[2]]:P[0]=["L",H[1],H[2]]),P.unshift(H),m){let z=P.pop();P.push(P[P.length-1],z)}}}function I(P){for(;P.length<E;){let k=P[Math.floor(P.length/w)-1].slice();if(k[0]==="C"&&(k[1]=k[5],k[2]=k[6]),m){let H=P[Math.floor(P.length/w)].slice();P.splice(P.length/2,0,k,H)}else P.push(k)}}if(g&&p&&p.length){for(M=0;M<g.length;M++){if(g[M]===p[0]){y=M;break}if(g[0]===p[p.length-g.length+M]){y=M,R=!0;break}if(g[g.length-1]===p[p.length-g.length+M]){y=g.length-M;break}}y===void 0&&(T=[])}return T.length&&wg(y)&&(E=f.length+y*w,R?(F(T,f),I(f)):(F(f,T),I(T))),[T,f]}fillSetter(){C.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,Gw(this.start).tweenTo(Gw(this.end),this.pos),void 0,!0)}}return C.timers=[],C})(),{defined:g3,getStyle:p3,isArray:f3,isNumber:m3,isObject:yg,merge:zw,objectEach:v3,pick:C3}=ce;function bg(C){return yg(C)?zw({duration:500,defer:0},C):{duration:C?500:0,defer:0}}function Ww(C,o){let l=Ms.timers.length;for(;l--;)Ms.timers[l].elem!==C||o&&o!==Ms.timers[l].prop||(Ms.timers[l].stopped=!0)}let ii={animate:function(C,o,l){let d,h="",g,p,f;yg(l)||(f=arguments,l={duration:f[2],easing:f[3],complete:f[4]}),m3(l.duration)||(l.duration=400),l.easing=typeof l.easing=="function"?l.easing:Math[l.easing]||Math.easeInOutSine,l.curAnim=zw(o),v3(o,function(m,w){Ww(C,w),p=new Ms(C,l,w),g=void 0,w==="d"&&f3(o.d)?(p.paths=p.initPath(C,C.pathArray,o.d),p.toD=o.d,d=0,g=1):C.attr?d=C.attr(w):(d=parseFloat(p3(C,w))||0,w!=="opacity"&&(h="px")),g||(g=m),typeof g=="string"&&g.match("px")&&(g=g.replace(/px/g,"")),p.run(d,g,h)})},animObject:bg,getDeferredAnimation:function(C,o,l){let d=bg(o),h=l?[l]:C.series,g=0,p=0;return h.forEach(f=>{let m=bg(f.options.animation);g=yg(o)&&g3(o.defer)?d.defer:Math.max(g,m.duration+m.defer),p=Math.min(d.duration,m.duration)}),C.renderer.forExport&&(g=0),{defer:Math.max(0,g-p),duration:Math.min(g,p)}},setAnimation:function(C,o){o.renderer.globalAnimation=C3(C,o.options.chart.animation,!0)},stop:Ww},{SVG_NS:jw,win:w3}=G,{attr:y3,createElement:b3,css:S3,error:Uw,isFunction:x3,isString:$w,objectEach:qw,splat:E3}=ce,{trustedTypes:Sg}=w3,kc=Sg&&x3(Sg.createPolicy)&&Sg.createPolicy("highcharts",{createHTML:C=>C}),D3=kc?kc.createHTML(""):"";class Ct{static filterUserAttributes(o){return qw(o,(l,d)=>{let h=!0;Ct.allowedAttributes.indexOf(d)===-1&&(h=!1),["background","dynsrc","href","lowsrc","src"].indexOf(d)!==-1&&(h=$w(l)&&Ct.allowedReferences.some(g=>l.indexOf(g)===0)),h||(Uw(33,!1,void 0,{"Invalid attribute in config":`${d}`}),delete o[d]),$w(l)&&o[d]&&(o[d]=l.replace(/</g,"&lt;"))}),o}static parseStyle(o){return o.split(";").reduce((l,d)=>{let h=d.split(":").map(p=>p.trim()),g=h.shift();return g&&h.length&&(l[g.replace(/-([a-z])/g,p=>p[1].toUpperCase())]=h.join(":")),l},{})}static setElementHTML(o,l){o.innerHTML=Ct.emptyHTML,l&&new Ct(l).addToDOM(o)}constructor(o){this.nodes=typeof o=="string"?this.parseMarkup(o):o}addToDOM(o){return function l(d,h){let g;return E3(d).forEach(function(p){let f,m=p.tagName,w=p.textContent?G.doc.createTextNode(p.textContent):void 0,S=Ct.bypassHTMLFiltering;if(m)if(m==="#text")f=w;else if(Ct.allowedTags.indexOf(m)!==-1||S){let y=m==="svg"?jw:h.namespaceURI||jw,E=G.doc.createElementNS(y,m),M=p.attributes||{};qw(p,function(R,T){T!=="tagName"&&T!=="attributes"&&T!=="children"&&T!=="style"&&T!=="textContent"&&(M[T]=R)}),y3(E,S?M:Ct.filterUserAttributes(M)),p.style&&S3(E,p.style),w&&E.appendChild(w),l(p.children||[],E),f=E}else Uw(33,!1,void 0,{"Invalid tagName in config":m});f&&h.appendChild(f),g=f}),g}(this.nodes,o)}parseMarkup(o){let l,d=[];o=o.trim().replace(/ style=(["'])/g," data-style=$1");try{l=new DOMParser().parseFromString(kc?kc.createHTML(o):o,"text/html")}catch{}if(!l){let g=b3("div");g.innerHTML=o,l={body:g}}let h=(g,p)=>{let f=g.nodeName.toLowerCase(),m={tagName:f};f==="#text"&&(m.textContent=g.textContent||"");let w=g.attributes;if(w){let S={};[].forEach.call(w,y=>{y.name==="data-style"?m.style=Ct.parseStyle(y.value):S[y.name]=y.value}),m.attributes=S}if(g.childNodes.length){let S=[];[].forEach.call(g.childNodes,y=>{h(y,S)}),S.length&&(m.children=S)}p.push(m)};return[].forEach.call(l.body.childNodes,g=>h(g,d)),d}}Ct.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],Ct.allowedReferences=["https://","http://","mailto:","/","../","./","#"],Ct.allowedTags=["a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMorphology","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","textPath","thead","title","tbody","tspan","td","th","tr","u","ul","#text"],Ct.emptyHTML=D3,Ct.bypassHTMLFiltering=!1;let{defaultOptions:Kw,defaultTime:Yw}=Ci,{doc:M3}=G,{extend:R3,getNestedProperty:I3,isArray:T3,isNumber:Xw,isObject:F3,pick:A3,ucfirst:P3}=ce,Oc={add:(C,o)=>C+o,divide:(C,o)=>o!==0?C/o:"",eq:(C,o)=>C==o,each:function(C){let o=arguments[arguments.length-1];return!!T3(C)&&C.map((l,d)=>Lc(o.body,R3(F3(l)?l:{"@this":l},{"@index":d,"@first":d===0,"@last":d===C.length-1}))).join("")},ge:(C,o)=>C>=o,gt:(C,o)=>C>o,if:C=>!!C,le:(C,o)=>C<=o,lt:(C,o)=>C<o,multiply:(C,o)=>C*o,ne:(C,o)=>C!=o,subtract:(C,o)=>C-o,ucfirst:P3,unless:C=>!C},Zw={};function Lc(C="",o,l){let d=/\{([\p{L}\d:\.,;\-\/<>\[\]%_@"'’= #\(\)]+)\}/gu,h=/\(([\p{L}\d:\.,;\-\/<>\[\]%_@"'= ]+)\)/gu,g=[],p=/f$/,f=/\.(\d)/,m=l?.options.lang||Kw.lang,w=l&&l.time||Yw,S=l&&l.numberFormatter||Qw,y=(F="")=>{let I;return F==="true"||F!=="false"&&((I=Number(F)).toString()===F?I:/^["'].+["']$/.test(F)?F.slice(1,-1):I3(F,o))},E,M,R=0,T;for(;(E=d.exec(C))!==null;){let F=E,I=h.exec(E[1]);I&&(E=I,T=!0),M&&M.isBlock||(M={ctx:o,expression:E[1],find:E[0],isBlock:E[1].charAt(0)==="#",start:E.index,startInner:E.index+E[0].length,length:E[0].length});let P=(M.isBlock?F:E)[1].split(" ")[0].replace("#","");Oc[P]&&(M.isBlock&&P===M.fn&&R++,M.fn||(M.fn=P));let k=E[1]==="else";if(M.isBlock&&M.fn&&(E[1]===`/${M.fn}`||k))if(R)!k&&R--;else{let H=M.startInner,j=C.substr(H,E.index-H);M.body===void 0?(M.body=j,M.startInner=E.index+E[0].length):M.elseBody=j,M.find+=j+E[0],k||(g.push(M),M=void 0)}else M.isBlock||g.push(M);if(I&&!M?.isBlock)break}return g.forEach(F=>{let I,P,{body:k,elseBody:H,expression:j,fn:z}=F;if(z){let V=[F],W=[],X=j.length,Q=0,te;for(P=0;P<=X;P++){let de=j.charAt(P);te||de!=='"'&&de!=="'"?te===de&&(te=""):te=de,te||de!==" "&&P!==X||(W.push(j.substr(Q,P-Q)),Q=P+1)}for(P=Oc[z].length;P--;)V.unshift(y(W[P+1]));I=Oc[z].apply(o,V),F.isBlock&&typeof I=="boolean"&&(I=Lc(I?k:H,o,l))}else{let V=j.split(":");if(I=y(V.shift()||""),V.length&&typeof I=="number"){let W=V.join(":");if(p.test(W)){let X=parseInt((W.match(f)||["","-1"])[1],10);I!==null&&(I=S(I,X,m.decimalPoint,W.indexOf(",")>-1?m.thousandsSep:""))}else I=w.dateFormat(W,I),T&&(I=`"${I}"`)}}C=C.replace(F.find,A3(I,""))}),T?Lc(C,o,l):C}function Qw(C,o,l,d){o=+o;let h,g,[p,f]=(C=+C||0).toString().split("e").map(Number),m=this?.options?.lang||Kw.lang,w=(C.toString().split(".")[1]||"").split("e")[0].length,S=o,y={};l??(l=m.decimalPoint),d??(d=m.thousandsSep),o===-1?o=Math.min(w,20):Xw(o)?o&&f<0&&((g=o+f)>=0?(p=+p.toExponential(g).split("e")[0],o=g):(p=Math.floor(p),C=o<20?+(p*Math.pow(10,f)).toFixed(o):0,f=0)):o=2,f&&(o??(o=2),C=p),Xw(o)&&o>=0&&(y.minimumFractionDigits=o,y.maximumFractionDigits=o),d===""&&(y.useGrouping=!1);let E=d||l,M=E?"en":this?.locale||m.locale||M3.body.closest("[lang]")?.lang,R=JSON.stringify(y)+M;return h=(Zw[R]??(Zw[R]=new Intl.NumberFormat(M,y))).format(C),E&&(h=h.replace(/\,/g,d??",").replace(".",l??".")),(o||+h!=0)&&(!(f<0)||S)||(h="0"),f&&+h!=0&&(h+="e"+(f<0?"":"+")+f),h}let wn={dateFormat:function(C,o,l){return Yw.dateFormat(C,o,l)},format:Lc,helpers:Oc,numberFormat:Qw};(function(C){let o;C.rendererTypes={},C.getRendererType=function(l=o){return C.rendererTypes[l]||C.rendererTypes[o]},C.registerRendererType=function(l,d,h){C.rendererTypes[l]=d,(!o||h)&&(o=l,G.Renderer=d)}})(n||(n={}));let Ua=n,{clamp:k3,pick:O3,pushUnique:L3,stableSort:xg}=ce;(r||(r={})).distribute=function C(o,l,d){let h=o,g=h.reducedLen||l,p=(k,H)=>k.target-H.target,f=[],m=o.length,w=[],S=f.push,y,E,M,R=!0,T,F,I=0,P;for(y=m;y--;)I+=o[y].size;if(I>g){for(xg(o,(k,H)=>(H.rank||0)-(k.rank||0)),M=(P=o[0].rank===o[o.length-1].rank)?m/2:-1,E=P?M:m-1;M&&I>g;)T=o[y=Math.floor(E)],L3(w,y)&&(I-=T.size),E+=M,P&&E>=o.length&&(M/=2,E=M);w.sort((k,H)=>H-k).forEach(k=>S.apply(f,o.splice(k,1)))}for(xg(o,p),o=o.map(k=>({size:k.size,targets:[k.target],align:O3(k.align,.5)}));R;){for(y=o.length;y--;)T=o[y],F=(Math.min.apply(0,T.targets)+Math.max.apply(0,T.targets))/2,T.pos=k3(F-T.size*T.align,0,l-T.size);for(y=o.length,R=!1;y--;)y>0&&o[y-1].pos+o[y-1].size>o[y].pos&&(o[y-1].size+=o[y].size,o[y-1].targets=o[y-1].targets.concat(o[y].targets),o[y-1].align=.5,o[y-1].pos+o[y-1].size>l&&(o[y-1].pos=l-o[y-1].size),o.splice(y,1),R=!0)}return S.apply(h,f),y=0,o.some(k=>{let H=0;return(k.targets||[]).some(()=>(h[y].pos=k.pos+H,d!==void 0&&Math.abs(h[y].pos-h[y].target)>d?(h.slice(0,y+1).forEach(j=>delete j.pos),h.reducedLen=(h.reducedLen||l)-.1*l,h.reducedLen>.1*l&&C(h,l,d),!0):(H+=h[y].size,y++,!1)))}),xg(h,p),h};let Nc=r,{animate:N3,animObject:_3,stop:Jw}=ii,{deg2rad:ey,doc:xo,svg:B3,SVG_NS:_c,win:V3}=G,{addEvent:H3,attr:Eg,createElement:G3,crisp:Bc,css:ty,defined:Hn,erase:z3,extend:$a,fireEvent:Dg,getAlignFactor:Mg,isArray:iy,isFunction:ny,isObject:W3,isString:ry,merge:Rg,objectEach:Eo,pick:yn,pInt:Vc,pushUnique:j3,replaceNested:U3,syncTimeout:$3,uniqueKey:sy}=ce;class $t{_defaultGetter(o){let l=yn(this[o+"Value"],this[o],this.element?this.element.getAttribute(o):null,0);return/^-?[\d\.]+$/.test(l)&&(l=parseFloat(l)),l}_defaultSetter(o,l,d){d.setAttribute(l,o)}add(o){let l,d=this.renderer,h=this.element;return o&&(this.parentGroup=o),this.textStr!==void 0&&this.element.nodeName==="text"&&d.buildText(this),this.added=!0,(!o||o.handleZ||this.zIndex)&&(l=this.zIndexSetter()),l||(o?o.element:d.box).appendChild(h),this.onAdd&&this.onAdd(),this}addClass(o,l){let d=l?"":this.attr("class")||"";return(o=(o||"").split(/ /g).reduce(function(h,g){return d.indexOf(g)===-1&&h.push(g),h},d?[d]:[]).join(" "))!==d&&this.attr("class",o),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(o,l,d,h=!0){let g={},p=this.renderer,f=p.alignedObjects,m=!!o;o?(this.alignOptions=o,this.alignByTranslate=l,this.alignTo=d):(o=this.alignOptions||{},l=this.alignByTranslate,d=this.alignTo);let w=!d||ry(d)?d||"renderer":void 0;w&&(m&&j3(f,this),d=void 0);let S=yn(d,p[w],p),y=(S.x||0)+(o.x||0)+((S.width||0)-(o.width||0))*Mg(o.align),E=(S.y||0)+(o.y||0)+((S.height||0)-(o.height||0))*Mg(o.verticalAlign);return g[l?"translateX":"x"]=Math.round(y),g[l?"translateY":"y"]=Math.round(E),h&&(this[this.placed?"animate":"attr"](g),this.placed=!0),this.alignAttr=g,this}alignSetter(o){let l={left:"start",center:"middle",right:"end"};l[o]&&(this.alignValue=o,this.element.setAttribute("text-anchor",l[o]))}animate(o,l,d){let h=_3(yn(l,this.renderer.globalAnimation,!0)),g=h.defer;return xo.hidden&&(h.duration=0),h.duration!==0?(d&&(h.complete=d),$3(()=>{this.element&&N3(this,o,h)},g)):(this.attr(o,void 0,d||h.complete),Eo(o,function(p,f){h.step&&h.step.call(this,p,{prop:f,pos:1,elem:this})},this)),this}applyTextOutline(o){let l=this.element;o.indexOf("contrast")!==-1&&(o=o.replace(/contrast/g,this.renderer.getContrast(l.style.fill)));let d=o.split(" "),h=d[d.length-1],g=d[0];if(g&&g!=="none"&&G.svg){this.fakeTS=!0,g=g.replace(/(^[\d\.]+)(.*?)$/g,function(S,y,E){return 2*Number(y)+E}),this.removeTextOutline();let p=xo.createElementNS(_c,"tspan");Eg(p,{class:"highcharts-text-outline",fill:h,stroke:h,"stroke-width":g,"stroke-linejoin":"round"});let f=l.querySelector("textPath")||l;[].forEach.call(f.childNodes,S=>{let y=S.cloneNode(!0);y.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(E=>y.removeAttribute(E)),p.appendChild(y)});let m=0;[].forEach.call(f.querySelectorAll("text tspan"),S=>{m+=Number(S.getAttribute("dy"))});let w=xo.createElementNS(_c,"tspan");w.textContent="\u200B",Eg(w,{x:Number(l.getAttribute("x")),dy:-m}),p.appendChild(w),f.insertBefore(p,f.firstChild)}}attr(o,l,d,h){let{element:g}=this,p=$t.symbolCustomAttribs,f,m,w=this,S;return typeof o=="string"&&l!==void 0&&(f=o,(o={})[f]=l),typeof o=="string"?w=(this[o+"Getter"]||this._defaultGetter).call(this,o,g):(Eo(o,function(y,E){S=!1,h||Jw(this,E),this.symbolName&&p.indexOf(E)!==-1&&(m||(this.symbolAttr(o),m=!0),S=!0),this.rotation&&(E==="x"||E==="y")&&(this.doTransform=!0),S||(this[E+"Setter"]||this._defaultSetter).call(this,y,E,g)},this),this.afterSetters()),d&&d.call(this),w}clip(o){if(o&&!o.clipPath){let l=sy()+"-",d=this.renderer.createElement("clipPath").attr({id:l}).add(this.renderer.defs);$a(o,{clipPath:d,id:l,count:0}),o.add(d)}return this.attr("clip-path",o?`url(${this.renderer.url}#${o.id})`:"none")}crisp(o,l){l=Math.round(l||o.strokeWidth||0);let d=o.x||this.x||0,h=o.y||this.y||0,g=(o.width||this.width||0)+d,p=(o.height||this.height||0)+h,f=Bc(d,l),m=Bc(h,l);return $a(o,{x:f,y:m,width:Bc(g,l)-f,height:Bc(p,l)-m}),Hn(o.strokeWidth)&&(o.strokeWidth=l),o}complexColor(o,l,d){let h=this.renderer,g,p,f,m,w,S,y,E,M,R,T=[],F;Dg(this.renderer,"complexColor",{args:arguments},function(){if(o.radialGradient?p="radialGradient":o.linearGradient&&(p="linearGradient"),p){if(f=o[p],w=h.gradients,S=o.stops,M=d.radialReference,iy(f)&&(o[p]=f={x1:f[0],y1:f[1],x2:f[2],y2:f[3],gradientUnits:"userSpaceOnUse"}),p==="radialGradient"&&M&&!Hn(f.gradientUnits)&&(m=f,f=Rg(f,h.getRadialAttr(M,m),{gradientUnits:"userSpaceOnUse"})),Eo(f,function(I,P){P!=="id"&&T.push(P,I)}),Eo(S,function(I){T.push(I)}),w[T=T.join(",")])R=w[T].attr("id");else{f.id=R=sy();let I=w[T]=h.createElement(p).attr(f).add(h.defs);I.radAttr=m,I.stops=[],S.forEach(function(P){P[1].indexOf("rgba")===0?(y=(g=Ht.parse(P[1])).get("rgb"),E=g.get("a")):(y=P[1],E=1);let k=h.createElement("stop").attr({offset:P[0],"stop-color":y,"stop-opacity":E}).add(I);I.stops.push(k)})}F="url("+h.url+"#"+R+")",d.setAttribute(l,F),d.gradient=T,o.toString=function(){return F}}})}css(o){let l=this.styles,d={},h=this.element,g,p=!l;if(l&&Eo(o,function(f,m){l&&l[m]!==f&&(d[m]=f,p=!0)}),p){l&&(o=$a(l,d)),o.width===null||o.width==="auto"?delete this.textWidth:h.nodeName.toLowerCase()==="text"&&o.width&&(g=this.textWidth=Vc(o.width)),$a(this.styles,o),g&&!B3&&this.renderer.forExport&&delete o.width;let f=Rg(o);h.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","whiteSpace","width"].forEach(m=>f&&delete f[m]),f.color&&(f.fill=f.color)),ty(h,f)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),o.textOutline&&this.applyTextOutline(o.textOutline)),this}dashstyleSetter(o){let l,d=this["stroke-width"];if(d==="inherit"&&(d=1),o=o&&o.toLowerCase()){let h=o.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(l=h.length;l--;)h[l]=""+Vc(h[l])*yn(d,NaN);o=h.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",o)}}destroy(){let o=this,l=o.element||{},d=o.renderer,h=l.ownerSVGElement,g=l.nodeName==="SPAN"&&o.parentGroup||void 0,p,f;if(l.onclick=l.onmouseout=l.onmouseover=l.onmousemove=l.point=null,Jw(o),o.clipPath&&h){let m=o.clipPath;[].forEach.call(h.querySelectorAll("[clip-path],[CLIP-PATH]"),function(w){w.getAttribute("clip-path").indexOf(m.element.id)>-1&&w.removeAttribute("clip-path")}),o.clipPath=m.destroy()}if(o.connector=o.connector?.destroy(),o.stops){for(f=0;f<o.stops.length;f++)o.stops[f].destroy();o.stops.length=0,o.stops=void 0}for(o.safeRemoveChild(l);g&&g.div&&g.div.childNodes.length===0;)p=g.parentGroup,o.safeRemoveChild(g.div),delete g.div,g=p;o.alignOptions&&z3(d.alignedObjects,o),Eo(o,function(m,w){o[w]&&o[w].parentGroup===o&&o[w].destroy&&o[w].destroy(),delete o[w]})}dSetter(o,l,d){iy(o)&&(typeof o[0]=="string"&&(o=this.renderer.pathToSegments(o)),this.pathArray=o,o=o.reduce((h,g,p)=>g&&g.join?(p?h+" ":"")+g.join(" "):(g||"").toString(),"")),/(NaN| {2}|^$)/.test(o)&&(o="M 0 0"),this[l]!==o&&(d.setAttribute(l,o),this[l]=o)}fillSetter(o,l,d){typeof o=="string"?d.setAttribute(l,o):o&&this.complexColor(o,l,d)}hrefSetter(o,l,d){d.setAttributeNS("http://www.w3.org/1999/xlink",l,o)}getBBox(o,l){let d,h,g,p,{alignValue:f,element:m,renderer:w,styles:S,textStr:y}=this,{cache:E,cacheKeys:M}=w,R=m.namespaceURI===this.SVG_NS,T=yn(l,this.rotation,0),F=w.styledMode?m&&$t.prototype.getStyle.call(m,"font-size"):S.fontSize;if(Hn(y)&&((p=y.toString()).indexOf("<")===-1&&(p=p.replace(/\d/g,"0")),p+=["",w.rootFontSize,F,T,this.textWidth,f,S.lineClamp,S.textOverflow,S.fontWeight].join(",")),p&&!o&&(d=E[p]),!d||d.polygon){if(R||w.forExport){try{g=this.fakeTS&&function(P){let k=m.querySelector(".highcharts-text-outline");k&&ty(k,{display:P})},ny(g)&&g("none"),d=m.getBBox?$a({},m.getBBox()):{width:m.offsetWidth,height:m.offsetHeight,x:0,y:0},ny(g)&&g("")}catch{}(!d||d.width<0)&&(d={x:0,y:0,width:0,height:0})}else d=this.htmlGetBBox();h=d.height,R&&(d.height=h={"11px,17":14,"13px,20":16}[`${F||""},${Math.round(h)}`]||h),T&&(d=this.getRotatedBox(d,T));let I={bBox:d};Dg(this,"afterGetBBox",I),d=I.bBox}if(p&&(y===""||d.height>0)){for(;M.length>250;)delete E[M.shift()];E[p]||M.push(p),E[p]=d}return d}getRotatedBox(o,l){let{x:d,y:h,width:g,height:p}=o,{alignValue:f,translateY:m,rotationOriginX:w=0,rotationOriginY:S=0}=this,y=Mg(f),E=Number(this.element.getAttribute("y")||0)-(m?0:h),M=l*ey,R=(l-90)*ey,T=Math.cos(M),F=Math.sin(M),I=g*T,P=g*F,k=Math.cos(R),H=Math.sin(R),[[j,z],[V,W]]=[w,S].map(Se=>[Se-Se*T,Se*F]),X=d+y*(g-I)+j+W+E*k,Q=X+I,te=Q-p*k,de=te-I,le=h+E-y*P-z+V+E*H,ge=le+P,me=ge-p*H,he=me-P,Le=Math.min(X,Q,te,de),Te=Math.min(le,ge,me,he),Re=Math.max(X,Q,te,de)-Le,Be=Math.max(le,ge,me,he)-Te;return{x:Le,y:Te,width:Re,height:Be,polygon:[[X,le],[Q,ge],[te,me],[de,he]]}}getStyle(o){return V3.getComputedStyle(this.element||this,"").getPropertyValue(o)}hasClass(o){return(""+this.attr("class")).split(" ").indexOf(o)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(o,l){this.onEvents={},this.opacity=1,this.SVG_NS=_c,this.element=l==="span"||l==="body"?G3(l):xo.createElementNS(this.SVG_NS,l),this.renderer=o,this.styles={},Dg(this,"afterInit")}on(o,l){let{onEvents:d}=this;return d[o]&&d[o](),d[o]=H3(this.element,o,l),this}opacitySetter(o,l,d){let h=Number(Number(o).toFixed(3));this.opacity=h,d.setAttribute(l,h)}reAlign(){this.alignOptions?.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(o){return this.attr("class",(""+this.attr("class")).replace(ry(o)?RegExp(`(^| )${o}( |$)`):o," ").replace(/ +/g," ").trim())}removeTextOutline(){let o=this.element.querySelector("tspan.highcharts-text-outline");o&&this.safeRemoveChild(o)}safeRemoveChild(o){let l=o.parentNode;l&&l.removeChild(o)}setRadialReference(o){let l=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=o,l&&l.radAttr&&l.animate(this.renderer.getRadialAttr(o,l.radAttr)),this}shadow(o){let{renderer:l}=this,d=Rg(this.parentGroup?.rotation===90?{offsetX:-1,offsetY:-1}:{},W3(o)?o:{}),h=l.shadowDefinition(d);return this.attr({filter:o?`url(${l.url}#${h})`:"none"})}show(o=!0){return this.attr({visibility:o?"inherit":"visible"})}"stroke-widthSetter"(o,l,d){this[l]=o,d.setAttribute(l,o)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let o=this.getStyle("stroke-width"),l=0,d;return/px$/.test(o)?l=Vc(o):o!==""&&(Eg(d=xo.createElementNS(_c,"rect"),{width:o,"stroke-width":0}),this.element.parentNode.appendChild(d),l=d.getBBox().width,d.parentNode.removeChild(d)),l}symbolAttr(o){let l=this;$t.symbolCustomAttribs.forEach(function(d){l[d]=yn(o[d],l[d])}),l.attr({d:l.renderer.symbols[l.symbolName](l.x,l.y,l.width,l.height,l)})}textSetter(o){o!==this.textStr&&(delete this.textPxLength,this.textStr=o,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(o){let l=this.element,d=l.getElementsByTagName("title")[0]||xo.createElementNS(this.SVG_NS,"title");l.insertBefore?l.insertBefore(d,l.firstChild):l.appendChild(d),d.textContent=U3(yn(o,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let o=this.element;return o.parentNode.appendChild(o),this}translate(o,l){return this.attr({translateX:o,translateY:l})}updateTransform(o="transform"){let{element:l,matrix:d,rotation:h=0,rotationOriginX:g,rotationOriginY:p,scaleX:f,scaleY:m,translateX:w=0,translateY:S=0}=this,y=["translate("+w+","+S+")"];Hn(d)&&y.push("matrix("+d.join(",")+")"),h&&(y.push("rotate("+h+" "+yn(g,l.getAttribute("x"),0)+" "+yn(p,l.getAttribute("y")||0)+")"),this.text?.element.tagName==="SPAN"&&this.text.attr({rotation:h,rotationOriginX:(g||0)-this.padding,rotationOriginY:(p||0)-this.padding})),(Hn(f)||Hn(m))&&y.push("scale("+yn(f,1)+" "+yn(m,1)+")"),y.length&&!(this.text||this).textPath&&l.setAttribute(o,y.join(" "))}visibilitySetter(o,l,d){o==="inherit"?d.removeAttribute(l):this[l]!==o&&d.setAttribute(l,o),this[l]=o}xGetter(o){return this.element.nodeName==="circle"&&(o==="x"?o="cx":o==="y"&&(o="cy")),this._defaultGetter(o)}zIndexSetter(o,l){let d=this.renderer,h=this.parentGroup,g=(h||d).element||d.box,p=this.element,f=g===d.box,m,w,S,y=!1,E,M=this.added,R;if(Hn(o)?(p.setAttribute("data-z-index",o),o=+o,this[l]===o&&(M=!1)):Hn(this[l])&&p.removeAttribute("data-z-index"),this[l]=o,M){for((o=this.zIndex)&&h&&(h.handleZ=!0),R=(m=g.childNodes).length-1;R>=0&&!y;R--)E=!Hn(S=(w=m[R]).getAttribute("data-z-index")),w!==p&&(o<0&&E&&!f&&!R?(g.insertBefore(p,m[R]),y=!0):(Vc(S)<=o||E&&(!Hn(o)||o>=0))&&(g.insertBefore(p,m[R+1]),y=!0));y||(g.insertBefore(p,m[f?3:0]),y=!0)}return y}}$t.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],$t.prototype.strokeSetter=$t.prototype.fillSetter,$t.prototype.yGetter=$t.prototype.xGetter,$t.prototype.matrixSetter=$t.prototype.rotationOriginXSetter=$t.prototype.rotationOriginYSetter=$t.prototype.rotationSetter=$t.prototype.scaleXSetter=$t.prototype.scaleYSetter=$t.prototype.translateXSetter=$t.prototype.translateYSetter=$t.prototype.verticalAlignSetter=function(C,o){this[o]=C,this.doTransform=!0};let Gn=$t,{defined:Ig,extend:q3,getAlignFactor:oy,isNumber:qa,merge:K3,pick:Hc,removeEvent:ay}=ce;class Rs extends Gn{constructor(o,l,d,h,g,p,f,m,w,S){let y;super(o,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=l,this.x=d,this.y=h,this.anchorX=p,this.anchorY=f,this.baseline=w,this.className=S,this.addClass(S==="button"?"highcharts-no-tooltip":"highcharts-label"),S&&this.addClass("highcharts-"+S),this.text=o.text(void 0,0,0,m).attr({zIndex:1}),typeof g=="string"&&((y=/^url\((.*?)\)$/.test(g))||this.renderer.symbols[g])&&(this.symbolKey=g),this.bBox=Rs.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=o.styledMode||y,this.deferredAttr={},this.alignFactor=0}alignSetter(o){let l=oy(o);l!==this.alignFactor&&(this.alignFactor=l,this.bBox&&qa(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(o,l){this.anchorX=o,this.boxAttr(l,Math.round(o)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(o,l){this.anchorY=o,this.boxAttr(l,o-this.ySetting)}boxAttr(o,l){this.box?this.box.attr(o,l):this.deferredAttr[o]=l}css(o){if(o){let l={};o=K3(o),Rs.textProps.forEach(d=>{o[d]!==void 0&&(l[d]=o[d],delete o[d])}),this.text.css(l),"fontSize"in l||"fontWeight"in l?this.updateTextPadding():("width"in l||"textOverflow"in l)&&this.updateBoxSize()}return Gn.prototype.css.call(this,o)}destroy(){ay(this.element,"mouseenter"),ay(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),Gn.prototype.destroy.call(this)}fillSetter(o,l){o&&(this.needsBox=!0),this.fill=o,this.boxAttr(l,o)}getBBox(o,l){this.textStr&&this.bBox.width===0&&this.bBox.height===0&&this.updateBoxSize();let{padding:d,height:h=0,translateX:g=0,translateY:p=0,width:f=0}=this,m=Hc(this.paddingLeft,d),w=l??(this.rotation||0),S={width:f,height:h,x:g+this.bBox.x-m,y:p+this.bBox.y-d+this.baselineOffset};return w&&(S=this.getRotatedBox(S,w)),S}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(o){this.heightSetting=o,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:Hc(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&Ig(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(o,l){qa(o)?o!==this[l]&&(this[l]=o,this.updateTextPadding()):this[l]=void 0}rSetter(o,l){this.boxAttr(l,o)}strokeSetter(o,l){this.stroke=o,this.boxAttr(l,o)}"stroke-widthSetter"(o,l){o&&(this.needsBox=!0),this["stroke-width"]=o,this.boxAttr(l,o)}"text-alignSetter"(o){this.textAlign=o}textSetter(o){o!==void 0&&this.text.attr({text:o}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let o,l=this.text,d={},h=this.padding,g=this.bBox=(!qa(this.widthSetting)||!qa(this.heightSetting)||this.textAlign)&&Ig(l.textStr)?l.getBBox(void 0,0):Rs.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||g.height||0)+2*h;let p=this.renderer.fontMetrics(l);if(this.baselineOffset=h+Math.min((this.text.firstLineMetrics||p).b,g.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-p.h)/2),this.needsBox&&!l.textPath){if(!this.box){let f=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();f.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),f.add(this)}o=this.getCrispAdjust(),d.x=o,d.y=(this.baseline?-this.baselineOffset:0)+o,d.width=Math.round(this.width),d.height=Math.round(this.height),this.box.attr(q3(d,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let o=this.text;if(!o.textPath){this.updateBoxSize();let l=this.baseline?0:this.baselineOffset,d=(this.paddingLeft??this.padding)+(Ig(this.widthSetting)&&this.bBox?oy(this.textAlign)*(this.widthSetting-this.bBox.width):0);(d!==o.x||l!==o.y)&&(o.attr("x",d),o.hasBoxWidthChanged&&(this.bBox=o.getBBox(!0)),l!==void 0&&o.attr("y",l)),o.x=d,o.y=l}}widthSetter(o){this.widthSetting=qa(o)?o:void 0,this.doUpdate=!0}getPaddedWidth(){let o=this.padding,l=Hc(this.paddingLeft,o),d=Hc(this.paddingRight,o);return(this.widthSetting||this.bBox.width||0)+l+d}xSetter(o){this.x=o,this.alignFactor&&(o-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(o),this.attr("translateX",this.xSetting)}ySetter(o){this.ySetting=this.y=Math.round(o),this.attr("translateY",this.ySetting)}}Rs.emptyBBox={width:0,height:0,x:0,y:0},Rs.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineClamp","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"];let{defined:ly,isNumber:Y3,pick:Ka}=ce;function cy(C,o,l,d,h){let g=[];if(h){let p=h.start||0,f=Ka(h.r,l),m=Ka(h.r,d||l),w=2e-4/(h.borderRadius?1:Math.max(f,1)),S=Math.abs((h.end||0)-p-2*Math.PI)<w,y=(h.end||0)-(S?w:0),E=h.innerR,M=Ka(h.open,S),R=Math.cos(p),T=Math.sin(p),F=Math.cos(y),I=Math.sin(y),P=Ka(h.longArc,y-p-Math.PI<w?0:1),k=["A",f,m,0,P,Ka(h.clockwise,1),C+f*F,o+m*I];k.params={start:p,end:y,cx:C,cy:o},g.push(["M",C+f*R,o+m*T],k),ly(E)&&((k=["A",E,E,0,P,ly(h.clockwise)?1-h.clockwise:0,C+E*R,o+E*T]).params={start:y,end:p,cx:C,cy:o},g.push(M?["M",C+E*F,o+E*I]:["L",C+E*F,o+E*I],k)),M||g.push(["Z"])}return g}function dy(C,o,l,d,h){return h&&h.r?Tg(C,o,l,d,h):[["M",C,o],["L",C+l,o],["L",C+l,o+d],["L",C,o+d],["Z"]]}function Tg(C,o,l,d,h){let g=h?.r||0;return[["M",C+g,o],["L",C+l-g,o],["A",g,g,0,0,1,C+l,o+g],["L",C+l,o+d-g],["A",g,g,0,0,1,C+l-g,o+d],["L",C+g,o+d],["A",g,g,0,0,1,C,o+d-g],["L",C,o+g],["A",g,g,0,0,1,C+g,o],["Z"]]}let uy={arc:cy,callout:function(C,o,l,d,h){let g=Math.min(h&&h.r||0,l,d),p=g+6,f=h&&h.anchorX,m=h&&h.anchorY||0,w=Tg(C,o,l,d,{r:g});if(!Y3(f)||f<l&&f>0&&m<d&&m>0)return w;if(C+f>l-p)if(m>o+p&&m<o+d-p)w.splice(3,1,["L",C+l,m-6],["L",C+l+6,m],["L",C+l,m+6],["L",C+l,o+d-g]);else if(f<l){let S=m<o+p,y=S?o:o+d;w.splice(S?2:5,0,["L",f,m],["L",C+l-g,y])}else w.splice(3,1,["L",C+l,d/2],["L",f,m],["L",C+l,d/2],["L",C+l,o+d-g]);else if(C+f<p)if(m>o+p&&m<o+d-p)w.splice(7,1,["L",C,m+6],["L",C-6,m],["L",C,m-6],["L",C,o+g]);else if(f>0){let S=m<o+p,y=S?o:o+d;w.splice(S?1:6,0,["L",f,m],["L",C+g,y])}else w.splice(7,1,["L",C,d/2],["L",f,m],["L",C,d/2],["L",C,o+g]);else m>d&&f<l-p?w.splice(5,1,["L",f+6,o+d],["L",f,o+d+6],["L",f-6,o+d],["L",C+g,o+d]):m<0&&f>p&&w.splice(1,1,["L",f-6,o],["L",f,o-6],["L",f+6,o],["L",l-g,o]);return w},circle:function(C,o,l,d){return cy(C+l/2,o+d/2,l/2,d/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(C,o,l,d){return[["M",C+l/2,o],["L",C+l,o+d/2],["L",C+l/2,o+d],["L",C,o+d/2],["Z"]]},rect:dy,roundedRect:Tg,square:dy,triangle:function(C,o,l,d){return[["M",C+l/2,o],["L",C+l,o+d],["L",C,o+d],["Z"]]},"triangle-down":function(C,o,l,d){return[["M",C,o],["L",C+l,o],["L",C+l/2,o+d],["Z"]]}},{doc:Fg,SVG_NS:X3,win:hy}=G,{attr:Ag,extend:Z3,fireEvent:Q3,isString:J3,objectEach:eI,pick:tI}=ce,Pg=(C,o)=>C.substring(0,o)+"\u2026",iI=class{constructor(C){let o=C.styles;this.renderer=C.renderer,this.svgElement=C,this.width=C.textWidth,this.textLineHeight=o&&o.lineHeight,this.textOutline=o&&o.textOutline,this.ellipsis=!!(o&&o.textOverflow==="ellipsis"),this.lineClamp=o?.lineClamp,this.noWrap=!!(o&&o.whiteSpace==="nowrap")}buildSVG(){let C=this.svgElement,o=C.element,l=C.renderer,d=tI(C.textStr,"").toString(),h=d.indexOf("<")!==-1,g=o.childNodes,p=!C.added&&l.box,f=[d,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,C.getStyle("font-size"),C.styles.lineClamp,this.width].join(",");if(f!==C.textCache){C.textCache=f,delete C.actualWidth;for(let m=g.length;m--;)o.removeChild(g[m]);if(h||this.ellipsis||this.width||C.textPath||d.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(d))){if(d!==""){p&&p.appendChild(o);let m=new Ct(d);this.modifyTree(m.nodes),m.addToDOM(o),this.modifyDOM(),this.ellipsis&&(o.textContent||"").indexOf("\u2026")!==-1&&C.attr("title",this.unescapeEntities(C.textStr||"",["&lt;","&gt;"])),p&&p.removeChild(o)}}else o.appendChild(Fg.createTextNode(this.unescapeEntities(d)));J3(this.textOutline)&&C.applyTextOutline&&C.applyTextOutline(this.textOutline)}}modifyDOM(){let C,o=this.svgElement,l=Ag(o.element,"x");for(o.firstLineMetrics=void 0;(C=o.element.firstChild)&&/^[\s\u200B]*$/.test(C.textContent||" ");)o.element.removeChild(C);[].forEach.call(o.element.querySelectorAll("tspan.highcharts-br"),(p,f)=>{p.nextSibling&&p.previousSibling&&(f===0&&p.previousSibling.nodeType===1&&(o.firstLineMetrics=o.renderer.fontMetrics(p.previousSibling)),Ag(p,{dy:this.getLineHeight(p.nextSibling),x:l}))});let d=this.width||0;if(!d)return;let h=(p,f)=>{let m=p.textContent||"",w=m.replace(/([^\^])-/g,"$1- ").split(" "),S=!this.noWrap&&(w.length>1||o.element.childNodes.length>1),y=this.getLineHeight(f),E=Math.max(0,d-.8*y),M=0,R=o.actualWidth;if(S){let T=[],F=[];for(;f.firstChild&&f.firstChild!==p;)F.push(f.firstChild),f.removeChild(f.firstChild);for(;w.length;)if(w.length&&!this.noWrap&&M>0&&(T.push(p.textContent||""),p.textContent=w.join(" ").replace(/- /g,"-")),this.truncate(p,void 0,w,M===0&&R||0,d,E,(I,P)=>w.slice(0,P).join(" ").replace(/- /g,"-")),R=o.actualWidth,M++,this.lineClamp&&M>=this.lineClamp){w.length&&(this.truncate(p,p.textContent||"",void 0,0,d,E,Pg),p.textContent=p.textContent?.replace("\u2026","")+"\u2026");break}F.forEach(I=>{f.insertBefore(I,p)}),T.forEach(I=>{f.insertBefore(Fg.createTextNode(I),p);let P=Fg.createElementNS(X3,"tspan");P.textContent="\u200B",Ag(P,{dy:y,x:l}),f.insertBefore(P,p)})}else this.ellipsis&&m&&this.truncate(p,m,void 0,0,d,E,Pg)},g=p=>{[].slice.call(p.childNodes).forEach(f=>{f.nodeType===hy.Node.TEXT_NODE?h(f,p):(f.className.baseVal.indexOf("highcharts-br")!==-1&&(o.actualWidth=0),g(f))})};g(o.element)}getLineHeight(C){let o=C.nodeType===hy.Node.TEXT_NODE?C.parentElement:C;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(o||this.svgElement.element).h}modifyTree(C){let o=(l,d)=>{let{attributes:h={},children:g,style:p={},tagName:f}=l,m=this.renderer.styledMode;if(f==="b"||f==="strong"?m?h.class="highcharts-strong":p.fontWeight="bold":(f==="i"||f==="em")&&(m?h.class="highcharts-emphasized":p.fontStyle="italic"),p&&p.color&&(p.fill=p.color),f==="br"){h.class="highcharts-br",l.textContent="\u200B";let w=C[d+1];w&&w.textContent&&(w.textContent=w.textContent.replace(/^ +/gm,""))}else f==="a"&&g&&g.some(w=>w.tagName==="#text")&&(l.children=[{children:g,tagName:"tspan"}]);f!=="#text"&&f!=="a"&&(l.tagName="tspan"),Z3(l,{attributes:h,style:p}),g&&g.filter(w=>w.tagName!=="#text").forEach(o)};C.forEach(o),Q3(this.svgElement,"afterModifyTree",{nodes:C})}truncate(C,o,l,d,h,g,p){let f,m,w=this.svgElement,{rotation:S}=w,y=[],E=l&&!d?1:0,M=(o||l||"").length,R=M;l||(h=g);let T=function(F,I){let P=I||F,k=C.parentNode;if(k&&y[P]===void 0&&k.getSubStringLength)try{y[P]=d+k.getSubStringLength(0,l&&!d?P+1:P)}catch{}return y[P]};if(w.rotation=0,d+(m=T(C.textContent.length))>h){for(;E<=M;)R=Math.ceil((E+M)/2),l&&(f=p(l,R)),m=T(R,f&&f.length-1),E===M?E=M+1:m>h?M=R-1:E=R;M===0?C.textContent="":o&&M===o.length-1||(C.textContent=f||p(o||l,R)),this.ellipsis&&m>h&&this.truncate(C,C.textContent||"",void 0,0,h,g,Pg)}l&&l.splice(0,R),w.actualWidth=m,w.rotation=S}unescapeEntities(C,o){return eI(this.renderer.escapes,function(l,d){o&&o.indexOf(l)!==-1||(C=C.toString().replace(RegExp(l,"g"),d))}),C}},{defaultOptions:nI}=Ci,{charts:rI,deg2rad:gy,doc:Do,isFirefox:py,isMS:fy,isWebKit:sI,noop:oI,SVG_NS:aI,symbolSizes:Ya,win:kg}=G,{addEvent:Gc,attr:zc,createElement:lI,crisp:my,css:Wc,defined:Is,destroyObjectProperties:cI,extend:Ts,isArray:dI,isNumber:Xa,isObject:Za,isString:uI,merge:Og,pick:Lg,pInt:hI,replaceNested:gI,uniqueKey:pI}=ce;class jc{constructor(o,l,d,h,g,p,f){let m,w,S=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),y=S.element;f||S.css(this.getStyle(h||{})),o.appendChild(y),zc(o,"dir","ltr"),o.innerHTML.indexOf("xmlns")===-1&&zc(y,"xmlns",this.SVG_NS),this.box=y,this.boxWrapper=S,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(Do.createTextNode("Created with Highcharts 12.0.1")),this.defs=this.createElement("defs").add(),this.allowHTML=p,this.forExport=g,this.styledMode=f,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=S.getStyle("font-size"),this.setSize(l,d,!1),py&&o.getBoundingClientRect&&((m=function(){Wc(o,{left:0,top:0}),w=o.getBoundingClientRect(),Wc(o,{left:Math.ceil(w.left)-w.left+"px",top:Math.ceil(w.top)-w.top+"px"})})(),this.unSubPixelFix=Gc(kg,"resize",m))}definition(o){return new Ct([o]).addToDOM(this.defs.element)}getReferenceURL(){if((py||sI)&&Do.getElementsByTagName("base").length){if(!Is(t)){let o=pI(),l=new Ct([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:o},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${o})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(Do.body);Wc(l,{position:"fixed",top:0,left:0,zIndex:9e5});let d=Do.elementFromPoint(6,6);t=(d&&d.id)==="hitme",Do.body.removeChild(l)}if(t)return gI(kg.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(o){return this.style=Ts({fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif',fontSize:"1rem"},o),this.style}setStyle(o){this.boxWrapper.css(this.getStyle(o))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let o=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),cI(this.gradients||{}),this.gradients=null,this.defs=o.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(o){return new this.Element(this,o)}getRadialAttr(o,l){return{cx:o[0]-o[2]/2+(l.cx||0)*o[2],cy:o[1]-o[2]/2+(l.cy||0)*o[2],r:(l.r||0)*o[2]}}shadowDefinition(o){let l=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(o).map(h=>`${h}-${o[h]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),d=Og({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},o);return this.defs.element.querySelector(`#${l}`)||this.definition({tagName:"filter",attributes:{id:l,filterUnits:d.filterUnits},children:this.getShadowFilterContent(d)}),l}getShadowFilterContent(o){return[{tagName:"feDropShadow",attributes:{dx:o.offsetX,dy:o.offsetY,"flood-color":o.color,"flood-opacity":Math.min(5*o.opacity,1),stdDeviation:o.width/2}}]}buildText(o){new iI(o).buildSVG()}getContrast(o){let l=Ht.parse(o).rgba.map(h=>{let g=h/255;return g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4)}),d=.2126*l[0]+.7152*l[1]+.0722*l[2];return 1.05/(d+.05)>(d+.05)/.05?"#FFFFFF":"#000000"}button(o,l,d,h,g={},p,f,m,w,S){let y=this.label(o,l,d,w,void 0,void 0,S,void 0,"button"),E=this.styledMode,M=arguments,R=0;g=Og(nI.global.buttonTheme,g),E&&(delete g.fill,delete g.stroke,delete g["stroke-width"]);let T=g.states||{},F=g.style||{};delete g.states,delete g.style;let I=[Ct.filterUserAttributes(g)],P=[F];return E||["hover","select","disabled"].forEach((k,H)=>{I.push(Og(I[0],Ct.filterUserAttributes(M[H+5]||T[k]||{}))),P.push(I[H+1].style),delete I[H+1].style}),Gc(y.element,fy?"mouseover":"mouseenter",function(){R!==3&&y.setState(1)}),Gc(y.element,fy?"mouseout":"mouseleave",function(){R!==3&&y.setState(R)}),y.setState=(k=0)=>{if(k!==1&&(y.state=R=k),y.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][k]),!E){y.attr(I[k]);let H=P[k];Za(H)&&y.css(H)}},y.attr(I[0]),!E&&(y.css(Ts({cursor:"default"},F)),S&&y.text.css({pointerEvents:"none"})),y.on("touchstart",k=>k.stopPropagation()).on("click",function(k){R!==3&&h.call(y,k)})}crispLine(o,l){let[d,h]=o;return Is(d[1])&&d[1]===h[1]&&(d[1]=h[1]=my(d[1],l)),Is(d[2])&&d[2]===h[2]&&(d[2]=h[2]=my(d[2],l)),o}path(o){let l=this.styledMode?{}:{fill:"none"};return dI(o)?l.d=o:Za(o)&&Ts(l,o),this.createElement("path").attr(l)}circle(o,l,d){let h=Za(o)?o:o===void 0?{}:{x:o,y:l,r:d},g=this.createElement("circle");return g.xSetter=g.ySetter=function(p,f,m){m.setAttribute("c"+f,p)},g.attr(h)}arc(o,l,d,h,g,p){let f;Za(o)?(l=(f=o).y,d=f.r,h=f.innerR,g=f.start,p=f.end,o=f.x):f={innerR:h,start:g,end:p};let m=this.symbol("arc",o,l,d,d,f);return m.r=d,m}rect(o,l,d,h,g,p){let f=Za(o)?o:o===void 0?{}:{x:o,y:l,r:g,width:Math.max(d||0,0),height:Math.max(h||0,0)},m=this.createElement("rect");return this.styledMode||(p!==void 0&&(f["stroke-width"]=p,Ts(f,m.crisp(f))),f.fill="none"),m.rSetter=function(w,S,y){m.r=w,zc(y,{rx:w,ry:w})},m.rGetter=function(){return m.r||0},m.attr(f)}roundedRect(o){return this.symbol("roundedRect").attr(o)}setSize(o,l,d){this.width=o,this.height=l,this.boxWrapper.animate({width:o,height:l},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:Lg(d,!0)?void 0:0}),this.alignElements()}g(o){let l=this.createElement("g");return o?l.attr({class:"highcharts-"+o}):l}image(o,l,d,h,g,p){let f={preserveAspectRatio:"none"};Xa(l)&&(f.x=l),Xa(d)&&(f.y=d),Xa(h)&&(f.width=h),Xa(g)&&(f.height=g);let m=this.createElement("image").attr(f),w=function(S){m.attr({href:o}),p.call(m,S)};if(p){m.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let S=new kg.Image;Gc(S,"load",w),S.src=o,S.complete&&w({})}else m.attr({href:o});return m}symbol(o,l,d,h,g,p){let f,m,w,S,y=this,E=/^url\((.*?)\)$/,M=E.test(o),R=!M&&(this.symbols[o]?o:"circle"),T=R&&this.symbols[R];if(T)typeof l=="number"&&(m=T.call(this.symbols,l||0,d||0,h||0,g||0,p)),f=this.path(m),y.styledMode||f.attr("fill","none"),Ts(f,{symbolName:R||void 0,x:l,y:d,width:h,height:g}),p&&Ts(f,p);else if(M){w=o.match(E)[1];let F=f=this.image(w);F.imgwidth=Lg(p&&p.width,Ya[w]&&Ya[w].width),F.imgheight=Lg(p&&p.height,Ya[w]&&Ya[w].height),S=I=>I.attr({width:I.width,height:I.height}),["width","height"].forEach(I=>{F[`${I}Setter`]=function(P,k){this[k]=P;let{alignByTranslate:H,element:j,width:z,height:V,imgwidth:W,imgheight:X}=this,Q=k==="width"?W:X,te=1;p&&p.backgroundSize==="within"&&z&&V&&W&&X?(te=Math.min(z/W,V/X),zc(j,{width:Math.round(W*te),height:Math.round(X*te)})):j&&Q&&j.setAttribute(k,Q),!H&&W&&X&&this.translate(((z||0)-W*te)/2,((V||0)-X*te)/2)}}),Is(l)&&F.attr({x:l,y:d}),F.isImg=!0,F.symbolUrl=o,Is(F.imgwidth)&&Is(F.imgheight)?S(F):(F.attr({width:0,height:0}),lI("img",{onload:function(){let I=rI[y.chartIndex];this.width===0&&(Wc(this,{position:"absolute",top:"-999em"}),Do.body.appendChild(this)),Ya[w]={width:this.width,height:this.height},F.imgwidth=this.width,F.imgheight=this.height,F.element&&S(F),this.parentNode&&this.parentNode.removeChild(this),y.imgCount--,y.imgCount||!I||I.hasLoaded||I.onload()},src:w}),this.imgCount++)}return f}clipRect(o,l,d,h){return this.rect(o,l,d,h,0)}text(o,l,d,h){let g={};if(h&&(this.allowHTML||!this.forExport))return this.html(o,l,d);g.x=Math.round(l||0),d&&(g.y=Math.round(d)),Is(o)&&(g.text=o);let p=this.createElement("text").attr(g);return h&&(!this.forExport||this.allowHTML)||(p.xSetter=function(f,m,w){let S=w.getElementsByTagName("tspan"),y=w.getAttribute(m);for(let E=0,M;E<S.length;E++)(M=S[E]).getAttribute(m)===y&&M.setAttribute(m,f);w.setAttribute(m,f)}),p}fontMetrics(o){let l=hI(Gn.prototype.getStyle.call(o,"font-size")||0),d=l<24?l+3:Math.round(1.2*l),h=Math.round(.8*d);return{h:d,b:h,f:l}}rotCorr(o,l,d){let h=o;return l&&d&&(h=Math.max(h*Math.cos(l*gy),4)),{x:-o/3*Math.sin(l*gy),y:h}}pathToSegments(o){let l=[],d=[],h={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let g=0;g<o.length;g++)uI(d[0])&&Xa(o[g])&&d.length===h[d[0].toUpperCase()]&&o.splice(g,0,d[0].replace("M","L").replace("m","l")),typeof o[g]=="string"&&(d.length&&l.push(d.slice(0)),d.length=0),d.push(o[g]);return l.push(d.slice(0)),l}label(o,l,d,h,g,p,f,m,w){return new Rs(this,o,l,d,h,g,p,f,m,w)}alignElements(){this.alignedObjects.forEach(o=>o.align())}}Ts(jc.prototype,{Element:Gn,SVG_NS:aI,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:uy,draw:oI}),Ua.registerRendererType("svg",jc,!0);let{composed:fI}=G,{attr:mI,css:Mo,createElement:vI,defined:vy,extend:CI,getAlignFactor:wI,isNumber:yI,pInt:bI,pushUnique:SI}=ce;function Cy(C,o,l){let d=this.div?.style||l.style;Gn.prototype[`${o}Setter`].call(this,C,o,l),d&&(d[o]=C)}let xI=(C,o)=>{if(!C.div){let l=mI(C.element,"class"),d=C.css,h=vI("div",l?{className:l}:void 0,ue(q({position:"absolute",left:`${C.translateX||0}px`,top:`${C.translateY||0}px`},C.styles),{display:C.display,opacity:C.opacity,visibility:C.visibility}),C.parentGroup?.div||o);C.classSetter=(g,p,f)=>{f.setAttribute("class",g),h.className=g},C.translateXSetter=C.translateYSetter=(g,p)=>{C[p]=g,h.style[p==="translateX"?"left":"top"]=`${g}px`,C.doTransform=!0},C.opacitySetter=C.visibilitySetter=Cy,C.css=g=>(d.call(C,g),g.cursor&&(h.style.cursor=g.cursor),g.pointerEvents&&(h.style.pointerEvents=g.pointerEvents),C),C.on=function(){return Gn.prototype.on.apply({element:h,onEvents:C.onEvents},arguments),C},C.div=h}return C.div};class Qa extends Gn{static compose(o){SI(fI,this.compose)&&(o.prototype.html=function(l,d,h){return new Qa(this,"span").attr({text:l,x:Math.round(d),y:Math.round(h)})})}constructor(o,l){super(o,l),this.css(q({position:"absolute"},o.styledMode?{}:{fontFamily:o.style.fontFamily,fontSize:o.style.fontSize}))}getSpanCorrection(o,l,d){this.xCorr=-o*d,this.yCorr=-l}css(o){let l,{element:d}=this,h=d.tagName==="SPAN"&&o&&"width"in o,g=h&&o.width;return h&&(delete o.width,this.textWidth=bI(g)||void 0,l=!0),o?.textOverflow==="ellipsis"&&(o.overflow="hidden"),o?.lineClamp&&(o.display="-webkit-box",o.WebkitLineClamp=o.lineClamp,o.WebkitBoxOrient="vertical",o.overflow="hidden"),yI(Number(o?.fontSize))&&(o.fontSize=o.fontSize+"px"),CI(this.styles,o),Mo(d,o),l&&this.updateTransform(),this}htmlGetBBox(){let{element:o}=this;return{x:o.offsetLeft,y:o.offsetTop,width:o.offsetWidth,height:o.offsetHeight}}updateTransform(){if(!this.added){this.alignOnAdd=!0;return}let{element:o,renderer:l,rotation:d,rotationOriginX:h,rotationOriginY:g,scaleX:p,scaleY:f,styles:m,textAlign:w="left",textWidth:S,translateX:y=0,translateY:E=0,x:M=0,y:R=0}=this,{display:T="block",whiteSpace:F}=m;if(Mo(o,{marginLeft:`${y}px`,marginTop:`${E}px`}),o.tagName==="SPAN"){let I=[d,w,o.innerHTML,S,this.textAlign].join(","),P=-(this.parentGroup?.padding*1)||0,k,H=!1;if(S!==this.oldTextWidth){let W=this.textPxLength?this.textPxLength:(Mo(o,{width:"",whiteSpace:F||"nowrap"}),o.offsetWidth),X=S||0;(X>this.oldTextWidth||W>X)&&(/[ \-]/.test(o.textContent||o.innerText)||o.style.textOverflow==="ellipsis")&&(Mo(o,{width:W>X||d||p?S+"px":"auto",display:T,whiteSpace:F||"normal"}),this.oldTextWidth=S,H=!0)}this.hasBoxWidthChanged=H,I!==this.cTT&&(k=l.fontMetrics(o).b,vy(d)&&(d!==(this.oldRotation||0)||w!==this.oldAlign)&&this.setSpanRotation(d,P,P),this.getSpanCorrection(!vy(d)&&!this.textWidth&&this.textPxLength||o.offsetWidth,k,wI(w)));let{xCorr:j=0,yCorr:z=0}=this,V={left:`${M+j}px`,top:`${R+z}px`,textAlign:w,transformOrigin:`${(h??M)-j-M-P}px ${(g??R)-z-R-P}px`};(p||f)&&(V.transform=`scale(${p??1},${f??1})`),Mo(o,V),this.cTT=I,this.oldRotation=d,this.oldAlign=w}}setSpanRotation(o,l,d){Mo(this.element,{transform:`rotate(${o}deg)`,transformOrigin:`${l}% ${d}px`})}add(o){let l,d=this.renderer.box.parentNode,h=[];if(this.parentGroup=o,o&&!(l=o.div)){let g=o;for(;g;)h.push(g),g=g.parentGroup;for(let p of h.reverse())l=xI(p,d)}return(l||d).appendChild(this.element),this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(o){o!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,Ct.setElementHTML(this.element,o??""),this.textStr=o,this.doTransform=!0)}alignSetter(o){this.alignValue=this.textAlign=o,this.doTransform=!0}xSetter(o,l){this[l]=o,this.doTransform=!0}}let Fs=Qa.prototype;Fs.visibilitySetter=Fs.opacitySetter=Cy,Fs.ySetter=Fs.rotationSetter=Fs.rotationOriginXSetter=Fs.rotationOriginYSetter=Fs.xSetter,function(C){C.xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%[HMSL]",range:!1},second:{main:"%[HMS]",range:!1},minute:{main:"%[HM]",range:!1},hour:{main:"%[HM]",range:!1},day:{main:"%[eb]"},week:{main:"%[eb]"},month:{main:"%[bY]"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em",textOverflow:"ellipsis"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},C.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:o}=this.axis.chart;return o(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0}}(s||(s={}));let EI=s,{addEvent:DI,isFunction:MI,objectEach:RI,removeEvent:II}=ce;(a||(a={})).registerEventOptions=function(C,o){C.eventOptions=C.eventOptions||{},RI(o.events,function(l,d){C.eventOptions[d]!==l&&(C.eventOptions[d]&&(II(C,d,C.eventOptions[d]),delete C.eventOptions[d]),MI(l)&&(C.eventOptions[d]=l,DI(C,d,l,{order:0})))})};let Uc=a,{deg2rad:Ng}=G,{clamp:TI,correctFloat:$c,defined:_g,destroyObjectProperties:FI,extend:wy,fireEvent:Ja,getAlignFactor:AI,isNumber:qc,merge:PI,objectEach:kI,pick:bn}=ce,Ro=class{constructor(C,o,l,d,h){this.isNew=!0,this.isNewLabel=!0,this.axis=C,this.pos=o,this.type=l||"",this.parameters=h||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,Ja(this,"init"),l||d||this.addLabel()}addLabel(){let C=this,o=C.axis,l=o.options,d=o.chart,h=o.categories,g=o.logarithmic,p=o.names,f=C.pos,m=bn(C.options&&C.options.labels,l.labels),w=o.tickPositions,S=f===w[0],y=f===w[w.length-1],E=(!m.step||m.step===1)&&o.tickInterval===1,M=w.info,R=C.label,T,F,I,P=this.parameters.category||(h?bn(h[f],p[f],f):f);g&&qc(P)&&(P=$c(g.lin2log(P))),o.dateTime&&(M?T=(F=d.time.resolveDTLFormat(l.dateTimeLabelFormats[!l.grid&&M.higherRanks[f]||M.unitName])).main:qc(P)&&(T=o.dateTime.getXDateFormat(P,l.dateTimeLabelFormats||{}))),C.isFirst=S,C.isLast=y;let k={axis:o,chart:d,dateTimeLabelFormat:T,isFirst:S,isLast:y,pos:f,tick:C,tickPositionInfo:M,value:P};Ja(this,"labelFormat",k);let H=V=>m.formatter?m.formatter.call(V,V):m.format?(V.text=o.defaultLabelFormatter.call(V),wn.format(m.format,V,d)):o.defaultLabelFormatter.call(V),j=H.call(k,k),z=F&&F.list;z?C.shortenLabel=function(){for(I=0;I<z.length;I++)if(wy(k,{dateTimeLabelFormat:z[I]}),R.attr({text:H.call(k,k)}),R.getBBox().width<o.getSlotWidth(C)-2*(m.padding||0))return;R.attr({text:""})}:C.shortenLabel=void 0,E&&o._addedPlotLB&&C.moveLabel(j,m),_g(R)||C.movedLabel?R&&R.textStr!==j&&!E&&(!R.textWidth||m.style.width||R.styles.width||R.css({width:null}),R.attr({text:j}),R.textPxLength=R.getBBox().width):(C.label=R=C.createLabel(j,m),C.rotation=0)}createLabel(C,o,l){let d=this.axis,{renderer:h,styledMode:g}=d.chart,p=_g(C)&&o.enabled?h.text(C,l?.x,l?.y,o.useHTML).add(d.labelGroup):void 0;if(p){let f=o.style.whiteSpace||"normal";g||p.css(PI(o.style,{whiteSpace:"nowrap"})),p.textPxLength=p.getBBox().width,g||p.css({whiteSpace:f})}return p}destroy(){FI(this,this.axis)}getPosition(C,o,l,d){let h=this.axis,g=h.chart,p=d&&g.oldChartHeight||g.chartHeight,f={x:C?$c(h.translate(o+l,void 0,void 0,d)+h.transB):h.left+h.offset+(h.opposite?(d&&g.oldChartWidth||g.chartWidth)-h.right-h.left:0),y:C?p-h.bottom+h.offset-(h.opposite?h.height:0):$c(p-h.translate(o+l,void 0,void 0,d)-h.transB)};return f.y=TI(f.y,-1e9,1e9),Ja(this,"afterGetPosition",{pos:f}),f}getLabelPosition(C,o,l,d,h,g,p,f){let m,w,S=this.axis,y=S.transA,E=S.isLinked&&S.linkedParent?S.linkedParent.reversed:S.reversed,M=S.staggerLines,R=S.tickRotCorr||{x:0,y:0},T=d||S.reserveSpaceDefault?0:-S.labelOffset*(S.labelAlign==="center"?.5:1),F=h.distance,I={};return m=S.side===0?l.rotation?-F:-l.getBBox().height:S.side===2?R.y+F:Math.cos(l.rotation*Ng)*(R.y-l.getBBox(!1,0).height/2),_g(h.y)&&(m=S.side===0&&S.horiz?h.y+m:h.y),C=C+bn(h.x,[0,1,0,-1][S.side]*F)+T+R.x-(g&&d?g*y*(E?-1:1):0),o=o+m-(g&&!d?g*y*(E?1:-1):0),M&&(w=p/(f||1)%M,S.opposite&&(w=M-w-1),o+=w*(S.labelOffset/M)),I.x=C,I.y=Math.round(o),Ja(this,"afterGetLabelPosition",{pos:I,tickmarkOffset:g,index:p}),I}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(C,o,l,d,h=!1,g){return g.crispLine([["M",C,o],["L",C+(h?0:-l),o+(h?l:0)]],d)}handleOverflow(C){let o=this.axis,l=o.options.labels,d=C.x,h=o.chart.chartWidth,g=o.chart.spacing,p=bn(o.labelLeft,Math.min(o.pos,g[3])),f=bn(o.labelRight,Math.max(o.isRadial?0:o.pos+o.len,h-g[1])),m=this.label,w=this.rotation,S=AI(o.labelAlign||m.attr("align")),y=m.getBBox().width,E=o.getSlotWidth(this),M=E,R=1,T,F,I;w||l.overflow!=="justify"?w<0&&d-S*y<p?I=Math.round(d/Math.cos(w*Ng)-p):w>0&&d+S*y>f&&(I=Math.round((h-d)/Math.cos(w*Ng))):(T=d-S*y,F=d+(1-S)*y,T<p?M=C.x+M*(1-S)-p:F>f&&(M=f-C.x+M*S,R=-1),(M=Math.min(E,M))<E&&o.labelAlign==="center"&&(C.x+=R*(E-M-S*(E-Math.min(y,M)))),(y>M||o.autoRotation&&(m.styles||{}).width)&&(I=M)),I&&m&&(this.shortenLabel?this.shortenLabel():m.css(wy({},{width:Math.floor(I)+"px",lineClamp:o.isRadial?0:1})))}moveLabel(C,o){let l=this,d=l.label,h=l.axis,g=!1,p;d&&d.textStr===C?(l.movedLabel=d,g=!0,delete l.label):kI(h.ticks,function(f){g||f.isNew||f===l||!f.label||f.label.textStr!==C||(l.movedLabel=f.label,g=!0,f.labelPos=l.movedLabel.xy,delete f.label)}),!g&&(l.labelPos||d)&&(p=l.labelPos||d.xy,l.movedLabel=l.createLabel(C,o,p),l.movedLabel&&l.movedLabel.attr({opacity:0}))}render(C,o,l){let d=this.axis,h=d.horiz,g=this.pos,p=bn(this.tickmarkOffset,d.tickmarkOffset),f=this.getPosition(h,g,p,o),m=f.x,w=f.y,S=d.pos,y=S+d.len,E=h?m:w;!d.chart.polar&&this.isNew&&($c(E)<S||E>y)&&(l=0);let M=bn(l,this.label&&this.label.newOpacity,1);l=bn(l,1),this.isActive=!0,this.renderGridLine(o,l),this.renderMark(f,l),this.renderLabel(f,o,M,C),this.isNew=!1,Ja(this,"afterRender")}renderGridLine(C,o){let l=this.axis,d=l.options,h={},g=this.pos,p=this.type,f=bn(this.tickmarkOffset,l.tickmarkOffset),m=l.chart.renderer,w=this.gridLine,S,y=d.gridLineWidth,E=d.gridLineColor,M=d.gridLineDashStyle;this.type==="minor"&&(y=d.minorGridLineWidth,E=d.minorGridLineColor,M=d.minorGridLineDashStyle),w||(l.chart.styledMode||(h.stroke=E,h["stroke-width"]=y||0,h.dashstyle=M),p||(h.zIndex=1),C&&(o=0),this.gridLine=w=m.path().attr(h).addClass("highcharts-"+(p?p+"-":"")+"grid-line").add(l.gridGroup)),w&&(S=l.getPlotLinePath({value:g+f,lineWidth:w.strokeWidth(),force:"pass",old:C,acrossPanes:!1}))&&w[C||this.isNew?"attr":"animate"]({d:S,opacity:o})}renderMark(C,o){let l=this.axis,d=l.options,h=l.chart.renderer,g=this.type,p=l.tickSize(g?g+"Tick":"tick"),f=C.x,m=C.y,w=bn(d[g!=="minor"?"tickWidth":"minorTickWidth"],!g&&l.isXAxis?1:0),S=d[g!=="minor"?"tickColor":"minorTickColor"],y=this.mark,E=!y;p&&(l.opposite&&(p[0]=-p[0]),y||(this.mark=y=h.path().addClass("highcharts-"+(g?g+"-":"")+"tick").add(l.axisGroup),l.chart.styledMode||y.attr({stroke:S,"stroke-width":w})),y[E?"attr":"animate"]({d:this.getMarkPath(f,m,p[0],y.strokeWidth(),l.horiz,h),opacity:o}))}renderLabel(C,o,l,d){let h=this.axis,g=h.horiz,p=h.options,f=this.label,m=p.labels,w=m.step,S=bn(this.tickmarkOffset,h.tickmarkOffset),y=C.x,E=C.y,M=!0;f&&qc(y)&&(f.xy=C=this.getLabelPosition(y,E,f,g,m,S,d,w),(!this.isFirst||this.isLast||p.showFirstLabel)&&(!this.isLast||this.isFirst||p.showLastLabel)?!g||m.step||m.rotation||o||l===0||this.handleOverflow(C):M=!1,w&&d%w&&(M=!1),M&&qc(C.y)?(C.opacity=l,f[this.isNewLabel?"attr":"animate"](C).show(!0),this.isNewLabel=!1):(f.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let C=this.label,o=this.axis;C&&!this.isNew&&(C.animate({opacity:0},void 0,C.destroy),delete this.label),o.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}},{animObject:OI}=ii,{xAxis:yy,yAxis:LI}=EI,{defaultOptions:Bg}=Ci,{registerEventOptions:NI}=Uc,{deg2rad:_I}=G,{arrayMax:by,arrayMin:BI,clamp:Vg,correctFloat:zi,defined:lt,destroyObjectProperties:VI,erase:Sy,error:Hg,extend:Kc,fireEvent:Mt,getClosestDistance:xy,insertItem:HI,isArray:Ey,isNumber:ye,isString:Dy,merge:Yc,normalizeTickInterval:GI,objectEach:Xc,pick:ke,relativeLength:Zc,removeEvent:zI,splat:WI,syncTimeout:jI}=ce,My=(C,o)=>GI(o,void 0,void 0,ke(C.options.allowDecimals,o<.5||C.tickAmount!==void 0),!!C.tickAmount);Kc(Bg,{xAxis:yy,yAxis:Yc(yy,LI)});let Gg=(()=>{class C{constructor(l,d,h){this.init(l,d,h)}init(l,d,h=this.coll){let g=h==="xAxis",p=this.isZAxis||(l.inverted?!g:g);this.chart=l,this.horiz=p,this.isXAxis=g,this.coll=h,Mt(this,"init",{userOptions:d}),this.opposite=ke(d.opposite,this.opposite),this.side=ke(d.side,this.side,p?this.opposite?0:2:this.opposite?1:3),this.setOptions(d);let f=this.options,m=f.labels;this.type??(this.type=f.type||"linear"),this.uniqueNames??(this.uniqueNames=f.uniqueNames??!0),Mt(this,"afterSetType"),this.userOptions=d,this.minPixelPadding=0,this.reversed=ke(f.reversed,this.reversed),this.visible=f.visible,this.zoomEnabled=f.zoomEnabled,this.hasNames=this.type==="category"||f.categories===!0,this.categories=Ey(f.categories)&&f.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=lt(f.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=f.minRange||f.maxZoom,this.range=f.range,this.offset=f.offset||0,this.max=void 0,this.min=void 0;let w=ke(f.crosshair,WI(l.options.tooltip.crosshairs)[g?0:1]);this.crosshair=w===!0?{}:w,l.axes.indexOf(this)===-1&&(g?l.axes.splice(l.xAxis.length,0,this):l.axes.push(this),HI(this,l[this.coll])),l.orderItems(this.coll),this.series=this.series||[],l.inverted&&!this.isZAxis&&g&&!lt(this.reversed)&&(this.reversed=!0),this.labelRotation=ye(m.rotation)?m.rotation:void 0,NI(this,f),Mt(this,"afterInit")}setOptions(l){let d=this.horiz?{labels:{autoRotation:[-45],padding:3},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=Yc(d,Bg[this.coll],l),Mt(this,"afterSetOptions",{userOptions:l})}defaultLabelFormatter(){let l=this.axis,{numberFormatter:d}=this.chart,h=ye(this.value)?this.value:NaN,g=l.chart.time,p=l.categories,f=this.dateTimeLabelFormat,m=Bg.lang,w=m.numericSymbols,S=m.numericSymbolMagnitude||1e3,y=l.logarithmic?Math.abs(h):l.tickInterval,E=w&&w.length,M,R;if(p)R=`${this.value}`;else if(f)R=g.dateFormat(f,h,!0);else if(E&&w&&y>=1e3)for(;E--&&R===void 0;)y>=(M=Math.pow(S,E+1))&&10*h%M==0&&w[E]!==null&&h!==0&&(R=d(h/M,-1)+w[E]);return R===void 0&&(R=Math.abs(h)>=1e4?d(h,-1):d(h,-1,void 0,"")),R}getSeriesExtremes(){let l,d=this;Mt(this,"getSeriesExtremes",null,function(){d.hasVisibleSeries=!1,d.dataMin=d.dataMax=d.threshold=void 0,d.softThreshold=!d.isXAxis,d.series.forEach(h=>{if(h.reserveSpace()){let g=h.options,p,f=g.threshold,m,w;if(d.hasVisibleSeries=!0,d.positiveValuesOnly&&0>=(f||0)&&(f=void 0),d.isXAxis)(p=h.getColumn("x")).length&&(p=d.logarithmic?p.filter(S=>S>0):p,m=(l=h.getXExtremes(p)).min,w=l.max,ye(m)||m instanceof Date||(p=p.filter(ye),m=(l=h.getXExtremes(p)).min,w=l.max),p.length&&(d.dataMin=Math.min(ke(d.dataMin,m),m),d.dataMax=Math.max(ke(d.dataMax,w),w)));else{let S=h.applyExtremes();ye(S.dataMin)&&(m=S.dataMin,d.dataMin=Math.min(ke(d.dataMin,m),m)),ye(S.dataMax)&&(w=S.dataMax,d.dataMax=Math.max(ke(d.dataMax,w),w)),lt(f)&&(d.threshold=f),(!g.softThreshold||d.positiveValuesOnly)&&(d.softThreshold=!1)}}})}),Mt(this,"afterGetSeriesExtremes")}translate(l,d,h,g,p,f){let m=this.linkedParent||this,w=g&&m.old?m.old.min:m.min;if(!ye(w))return NaN;let S=m.minPixelPadding,y=(m.isOrdinal||m.brokenAxis?.hasBreaks||m.logarithmic&&p)&&m.lin2val,E=1,M=0,R=g&&m.old?m.old.transA:m.transA,T=0;return R||(R=m.transA),h&&(E*=-1,M=m.len),m.reversed&&(E*=-1,M-=E*(m.sector||m.len)),d?(T=(l=l*E+M-S)/R+w,y&&(T=m.lin2val(T))):(y&&(l=m.val2lin(l)),T=E*(l-w)*R+M+E*S+(ye(f)?R*f:0),m.isRadial||(T=zi(T))),T}toPixels(l,d){return this.translate(this.chart.time.parse(l)??NaN,!1,!this.horiz,void 0,!0)+(d?0:this.pos)}toValue(l,d){return this.translate(l-(d?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(l){let d=this,h=d.chart,g=d.left,p=d.top,f=l.old,m=l.value,w=l.lineWidth,S=f&&h.oldChartHeight||h.chartHeight,y=f&&h.oldChartWidth||h.chartWidth,E=d.transB,M=l.translatedValue,R=l.force,T,F,I,P,k;function H(z,V,W){return R!=="pass"&&(z<V||z>W)&&(R?z=Vg(z,V,W):k=!0),z}let j={value:m,lineWidth:w,old:f,force:R,acrossPanes:l.acrossPanes,translatedValue:M};return Mt(this,"getPlotLinePath",j,function(z){T=I=(M=Vg(M=ke(M,d.translate(m,void 0,void 0,f)),-1e9,1e9))+E,F=P=S-M-E,ye(M)?d.horiz?(F=p,P=S-d.bottom+(d.options.isInternal?0:h.scrollablePixelsY||0),T=I=H(T,g,g+d.width)):(T=g,I=y-d.right+(h.scrollablePixelsX||0),F=P=H(F,p,p+d.height)):(k=!0,R=!1),z.path=k&&!R?void 0:h.renderer.crispLine([["M",T,F],["L",I,P]],w||1)}),j.path}getLinearTickPositions(l,d,h){let g,p,f,m=zi(Math.floor(d/l)*l),w=zi(Math.ceil(h/l)*l),S=[];if(zi(m+l)===m&&(f=20),this.single)return[d];for(g=m;g<=w&&(S.push(g),(g=zi(g+l,f))!==p);)p=g;return S}getMinorTickInterval(){let{minorTicks:l,minorTickInterval:d}=this.options;return l===!0?ke(d,"auto"):l!==!1?d:void 0}getMinorTickPositions(){let l=this.options,d=this.tickPositions,h=this.minorTickInterval,g=this.pointRangePadding||0,p=(this.min||0)-g,f=(this.max||0)+g,m=this.brokenAxis?.hasBreaks?this.brokenAxis.unitLength:f-p,w=[],S;if(m&&m/h<this.len/3){let y=this.logarithmic;if(y)this.paddedTicks.forEach(function(E,M,R){M&&w.push.apply(w,y.getLogTickPositions(h,R[M-1],R[M],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")w=w.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(h),p,f,l.startOfWeek));else for(S=p+(d[0]-p)%h;S<=f&&S!==w[0];S+=h)w.push(S)}return w.length!==0&&this.trimTicks(w),w}adjustForMinRange(){let l=this.options,d=this.logarithmic,h=this.chart.time,{max:g,min:p,minRange:f}=this,m,w,S,y;this.isXAxis&&f===void 0&&!d&&(f=lt(l.min)||lt(l.max)||lt(l.floor)||lt(l.ceiling)?null:Math.min(5*(xy(this.series.map(E=>{let M=E.getColumn("x");return E.xIncrement?M.slice(0,2):M}))||0),this.dataMax-this.dataMin)),ye(g)&&ye(p)&&ye(f)&&g-p<f&&(w=this.dataMax-this.dataMin>=f,m=(f-g+p)/2,S=[p-m,h.parse(l.min)??p-m],w&&(S[2]=d?d.log2lin(this.dataMin):this.dataMin),y=[(p=by(S))+f,h.parse(l.max)??p+f],w&&(y[2]=d?d.log2lin(this.dataMax):this.dataMax),(g=BI(y))-p<f&&(S[0]=g-f,S[1]=h.parse(l.min)??g-f,p=by(S))),this.minRange=f,this.min=p,this.max=g}getClosest(){let l,d;if(this.categories)d=1;else{let h=[];this.series.forEach(function(g){let p=g.closestPointRange,f=g.getColumn("x");f.length===1?h.push(f[0]):g.sorted&&lt(p)&&g.reserveSpace()&&(d=lt(d)?Math.min(d,p):p)}),h.length&&(h.sort((g,p)=>g-p),l=xy([h]))}return l&&d?Math.min(l,d):l||d}nameToX(l){let d=Ey(this.options.categories),h=d?this.categories:this.names,g=l.options.x,p;return l.series.requireSorting=!1,lt(g)||(g=this.uniqueNames&&h?d?h.indexOf(l.name):ke(h.keys[l.name],-1):l.series.autoIncrement()),g===-1?!d&&h&&(p=h.length):ye(g)&&(p=g),p!==void 0?(this.names[p]=l.name,this.names.keys[l.name]=p):l.x&&(p=l.x),p}updateNames(){let l=this,d=this.names;d.length>0&&(Object.keys(d.keys).forEach(function(h){delete d.keys[h]}),d.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(h=>{h.xIncrement=null,(!h.points||h.isDirtyData)&&(l.max=Math.max(l.max||0,h.dataTable.rowCount-1),h.processData(),h.generatePoints());let g=h.getColumn("x").slice();h.data.forEach((p,f)=>{let m=g[f];p?.options&&p.name!==void 0&&(m=l.nameToX(p))!==void 0&&m!==p.x&&(g[f]=p.x=m)}),h.dataTable.setColumn("x",g)}))}setAxisTranslation(){let l=this,d=l.max-l.min,h=l.linkedParent,g=!!l.categories,p=l.isXAxis,f=l.axisPointRange||0,m,w=0,S=0,y,E=l.transA;(p||g||f)&&(m=l.getClosest(),h?(w=h.minPointOffset,S=h.pointRangePadding):l.series.forEach(function(M){let R=g?1:p?ke(M.options.pointRange,m,0):l.axisPointRange||0,T=M.options.pointPlacement;if(f=Math.max(f,R),!l.single||g){let F=M.is("xrange")?!p:p;w=Math.max(w,F&&Dy(T)?0:R/2),S=Math.max(S,F&&T==="on"?0:R)}}),y=l.ordinal&&l.ordinal.slope&&m?l.ordinal.slope/m:1,l.minPointOffset=w*=y,l.pointRangePadding=S*=y,l.pointRange=Math.min(f,l.single&&g?1:d),p&&m&&(l.closestPointRange=m)),l.translationSlope=l.transA=E=l.staticScale||l.len/(d+S||1),l.transB=l.horiz?l.left:l.bottom,l.minPixelPadding=E*w,Mt(this,"afterSetAxisTranslation")}minFromRange(){let{max:l,min:d}=this;return ye(l)&&ye(d)&&l-d||void 0}setTickInterval(l){let{categories:d,chart:h,dataMax:g,dataMin:p,dateTime:f,isXAxis:m,logarithmic:w,options:S,softThreshold:y}=this,E=h.time,M=ye(this.threshold)?this.threshold:void 0,R=this.minRange||0,{ceiling:T,floor:F,linkedTo:I,softMax:P,softMin:k}=S,H=ye(I)&&h[this.coll]?.[I],j=S.tickPixelInterval,z=S.maxPadding,V=S.minPadding,W=0,X,Q=ye(S.tickInterval)&&S.tickInterval>=0?S.tickInterval:void 0,te,de,le,ge;if(f||d||H||this.getTickAmount(),le=ke(this.userMin,E.parse(S.min)),ge=ke(this.userMax,E.parse(S.max)),H?(this.linkedParent=H,X=H.getExtremes(),this.min=ke(X.min,X.dataMin),this.max=ke(X.max,X.dataMax),this.type!==H.type&&Hg(11,!0,h)):(y&&lt(M)&&ye(g)&&ye(p)&&(p>=M?(te=M,V=0):g<=M&&(de=M,z=0)),this.min=ke(le,te,p),this.max=ke(ge,de,g)),ye(this.max)&&ye(this.min)&&(w&&(this.positiveValuesOnly&&!l&&0>=Math.min(this.min,ke(p,this.min))&&Hg(10,!0,h),this.min=zi(w.log2lin(this.min),16),this.max=zi(w.log2lin(this.max),16)),this.range&&ye(p)&&(this.userMin=this.min=le=Math.max(p,this.minFromRange()||0),this.userMax=ge=this.max,this.range=void 0)),Mt(this,"foundExtremes"),this.adjustForMinRange(),ye(this.min)&&ye(this.max)){if(!ye(this.userMin)&&ye(k)&&k<this.min&&(this.min=le=k),!ye(this.userMax)&&ye(P)&&P>this.max&&(this.max=ge=P),d||this.axisPointRange||this.stacking?.usePercentage||H||!(W=this.max-this.min)||(!lt(le)&&V&&(this.min-=W*V),lt(ge)||!z||(this.max+=W*z)),!ye(this.userMin)&&ye(F)&&(this.min=Math.max(this.min,F)),!ye(this.userMax)&&ye(T)&&(this.max=Math.min(this.max,T)),y&&ye(p)&&ye(g)){let he=M||0;!lt(le)&&this.min<he&&p>=he?this.min=S.minRange?Math.min(he,this.max-R):he:!lt(ge)&&this.max>he&&g<=he&&(this.max=S.minRange?Math.max(he,this.min+R):he)}!h.polar&&this.min>this.max&&(lt(S.min)?this.max=this.min:lt(S.max)&&(this.min=this.max)),W=this.max-this.min}if(this.min!==this.max&&ye(this.min)&&ye(this.max)?H&&!Q&&j===H.options.tickPixelInterval?this.tickInterval=Q=H.tickInterval:this.tickInterval=ke(Q,this.tickAmount?W/Math.max(this.tickAmount-1,1):void 0,d?1:W*j/Math.max(this.len,j)):this.tickInterval=1,m&&!l){let he=this.min!==this.old?.min||this.max!==this.old?.max;this.series.forEach(function(Le){Le.forceCrop=Le.forceCropping?.(),Le.processData(he)}),Mt(this,"postProcessData",{hasExtremesChanged:he})}this.setAxisTranslation(),Mt(this,"initialAxisTranslation"),this.pointRange&&!Q&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let me=ke(S.minTickInterval,f&&!this.series.some(he=>!he.sorted)?this.closestPointRange:0);!Q&&this.tickInterval<me&&(this.tickInterval=me),f||w||Q||(this.tickInterval=My(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){let l=this.options,d=l.tickPositions,h=l.tickPositioner,g=this.getMinorTickInterval(),p=!this.isPanning,f=p&&l.startOnTick,m=p&&l.endOnTick,w=[],S;if(this.tickmarkOffset=this.categories&&l.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&lt(this.min)&&!this.tickAmount&&(this.min%1==0||l.allowDecimals!==!1),d)w=d.slice();else if(ye(this.min)&&ye(this.max)){if(!this.ordinal?.positions&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))w=[this.min,this.max],Hg(19,!1,this.chart);else if(this.dateTime)w=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,l.units),this.min,this.max,l.startOfWeek,this.ordinal?.positions,this.closestPointRange,!0);else if(this.logarithmic)w=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let y=this.tickInterval,E=y;for(;E<=2*y&&(w=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&w.length>this.tickAmount);)this.tickInterval=My(this,E*=1.1)}w.length>this.len&&(w=[w[0],w[w.length-1]])[0]===w[1]&&(w.length=1),h&&(this.tickPositions=w,(S=h.apply(this,[this.min,this.max]))&&(w=S))}this.tickPositions=w,this.minorTickInterval=g==="auto"&&this.tickInterval?this.tickInterval/l.minorTicksPerMajor:g,this.paddedTicks=w.slice(0),this.trimTicks(w,f,m),!this.isLinked&&ye(this.min)&&ye(this.max)&&(this.single&&w.length<2&&!this.categories&&!this.series.some(y=>y.is("heatmap")&&y.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),d||S||this.adjustTickAmount()),Mt(this,"afterSetTickPositions")}trimTicks(l,d,h){let g=l[0],p=l[l.length-1],f=!this.isOrdinal&&this.minPointOffset||0;if(Mt(this,"trimTicks"),!this.isLinked){if(d&&g!==-1/0)this.min=g;else for(;this.min-f>l[0];)l.shift();if(h)this.max=p;else for(;this.max+f<l[l.length-1];)l.pop();l.length===0&&lt(g)&&!this.options.tickPositions&&l.push((p+g)/2)}}alignToOthers(){let l,d=this,h=d.chart,g=[this],p=d.options,f=h.options.chart,m=this.coll==="yAxis"&&f.alignThresholds,w=[];if(d.thresholdAlignment=void 0,(f.alignTicks!==!1&&p.alignTicks||m)&&p.startOnTick!==!1&&p.endOnTick!==!1&&!d.logarithmic){let S=E=>{let{horiz:M,options:R}=E;return[M?R.left:R.top,R.width,R.height,R.pane].join(",")},y=S(this);h[this.coll].forEach(function(E){let{series:M}=E;M.length&&M.some(R=>R.visible)&&E!==d&&S(E)===y&&(l=!0,g.push(E))})}if(l&&m){g.forEach(y=>{let E=y.getThresholdAlignment(d);ye(E)&&w.push(E)});let S=w.length>1?w.reduce((y,E)=>y+=E,0)/w.length:void 0;g.forEach(y=>{y.thresholdAlignment=S})}return l}getThresholdAlignment(l){if((!ye(this.dataMin)||this!==l&&this.series.some(d=>d.isDirty||d.isDirtyData))&&this.getSeriesExtremes(),ye(this.threshold)){let d=Vg((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(d=1-d),d}}getTickAmount(){let l=this.options,d=l.tickPixelInterval,h=l.tickAmount;lt(l.tickInterval)||h||!(this.len<d)||this.isRadial||this.logarithmic||!l.startOnTick||!l.endOnTick||(h=2),!h&&this.alignToOthers()&&(h=Math.ceil(this.len/d)+1),h<4&&(this.finalTickAmt=h,h=5),this.tickAmount=h}adjustTickAmount(){let l=this,{finalTickAmt:d,max:h,min:g,options:p,tickPositions:f,tickAmount:m,thresholdAlignment:w}=l,S=f?.length,y=ke(l.threshold,l.softThreshold?0:null),E,M,R=l.tickInterval,T,F=()=>f.push(zi(f[f.length-1]+R)),I=()=>f.unshift(zi(f[0]-R));if(ye(w)&&(T=w<.5?Math.ceil(w*(m-1)):Math.floor(w*(m-1)),p.reversed&&(T=m-1-T)),l.hasData()&&ye(g)&&ye(h)){let P=()=>{l.transA*=(S-1)/(m-1),l.min=p.startOnTick?f[0]:Math.min(g,f[0]),l.max=p.endOnTick?f[f.length-1]:Math.max(h,f[f.length-1])};if(ye(T)&&ye(l.threshold)){for(;f[T]!==y||f.length!==m||f[0]>g||f[f.length-1]<h;){for(f.length=0,f.push(l.threshold);f.length<m;)f[T]===void 0||f[T]>l.threshold?I():F();if(R>8*l.tickInterval)break;R*=2}P()}else if(S<m){for(;f.length<m;)f.length%2||g===y?F():I();P()}if(lt(d)){for(M=E=f.length;M--;)(d===3&&M%2==1||d<=2&&M>0&&M<E-1)&&f.splice(M,1);l.finalTickAmt=void 0}}}setScale(){let{coll:l,stacking:d}=this,h=!1,g=!1;this.series.forEach(f=>{h=h||f.isDirtyData||f.isDirty,g=g||f.xAxis&&f.xAxis.isDirty||!1}),this.setAxisSize();let p=this.len!==(this.old&&this.old.len);p||h||g||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(d&&l==="yAxis"&&d.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),d&&l==="xAxis"&&d.buildStacks(),this.isDirty||(this.isDirty=p||this.min!==this.old?.min||this.max!==this.old?.max)):d&&d.cleanStacks(),h&&delete this.allExtremes,Mt(this,"afterSetScale")}setExtremes(l,d,h=!0,g,p){let f=this.chart;this.series.forEach(m=>{delete m.kdTree}),l=f.time.parse(l),d=f.time.parse(d),Mt(this,"setExtremes",p=Kc(p,{min:l,max:d}),m=>{this.userMin=m.min,this.userMax=m.max,this.eventArgs=m,h&&f.redraw(g)})}setAxisSize(){let l=this.chart,d=this.options,h=d.offsets||[0,0,0,0],g=this.horiz,p=this.width=Math.round(Zc(ke(d.width,l.plotWidth-h[3]+h[1]),l.plotWidth)),f=this.height=Math.round(Zc(ke(d.height,l.plotHeight-h[0]+h[2]),l.plotHeight)),m=this.top=Math.round(Zc(ke(d.top,l.plotTop+h[0]),l.plotHeight,l.plotTop)),w=this.left=Math.round(Zc(ke(d.left,l.plotLeft+h[3]),l.plotWidth,l.plotLeft));this.bottom=l.chartHeight-f-m,this.right=l.chartWidth-p-w,this.len=Math.max(g?p:f,0),this.pos=g?w:m}getExtremes(){let l=this.logarithmic;return{min:l?zi(l.lin2log(this.min)):this.min,max:l?zi(l.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(l){let d=this.logarithmic,h=d?d.lin2log(this.min):this.min,g=d?d.lin2log(this.max):this.max;return l===null||l===-1/0?l=h:l===1/0?l=g:h>l?l=h:g<l&&(l=g),this.translate(l,0,1,0,1)}autoLabelAlign(l){let d=(ke(l,0)-90*this.side+720)%360,h={align:"center"};return Mt(this,"autoLabelAlign",h,function(g){d>15&&d<165?g.align="right":d>195&&d<345&&(g.align="left")}),h.align}tickSize(l){let d=this.options,h=ke(d[l==="tick"?"tickWidth":"minorTickWidth"],l==="tick"&&this.isXAxis&&!this.categories?1:0),g=d[l==="tick"?"tickLength":"minorTickLength"],p;h&&g&&(d[l+"Position"]==="inside"&&(g=-g),p=[g,h]);let f={tickSize:p};return Mt(this,"afterTickSize",f),f.tickSize}labelMetrics(){let l=this.chart.renderer,d=this.ticks,h=d[Object.keys(d)[0]]||{};return this.chart.renderer.fontMetrics(h.label||h.movedLabel||l.box)}unsquish(){let l=this.options.labels,d=l.padding||0,h=this.horiz,g=this.tickInterval,p=this.len/(((this.categories?1:0)+this.max-this.min)/g),f=l.rotation,m=zi(.8*this.labelMetrics().h),w=Math.max(this.max-this.min,0),S=function(T){let F=(T+2*d)/(p||1);return(F=F>1?Math.ceil(F):1)*g>w&&T!==1/0&&p!==1/0&&w&&(F=Math.ceil(w/g)),zi(F*g)},y=g,E,M=Number.MAX_VALUE,R;if(h){if(!l.staggerLines&&(ye(f)?R=[f]:p<l.autoRotationLimit&&(R=l.autoRotation)),R){let T,F;for(let I of R)(I===f||I&&I>=-90&&I<=90)&&(F=(T=S(Math.abs(m/Math.sin(_I*I))))+Math.abs(I/360))<M&&(M=F,E=I,y=T)}}else y=S(.75*m);return this.autoRotation=R,this.labelRotation=ke(E,ye(f)?f:0),l.step?g:y}getSlotWidth(l){let d=this.chart,h=this.horiz,g=this.options.labels,p=Math.max(this.tickPositions.length-(this.categories?0:1),1),f=d.margin[3];if(l&&ye(l.slotWidth))return l.slotWidth;if(h&&g.step<2&&!this.isRadial)return g.rotation?0:(this.staggerLines||1)*this.len/p;if(!h){let m=g.style.width;if(m!==void 0)return parseInt(String(m),10);if(f)return f-d.spacing[3]}return .33*d.chartWidth}renderUnsquish(){let l=this.chart,d=l.renderer,h=this.tickPositions,g=this.ticks,p=this.options.labels,f=p.style,m=this.horiz,w=this.getSlotWidth(),S=Math.max(1,Math.round(w-(m?2*(p.padding||0):p.distance||0))),y={},E=this.labelMetrics(),M=f.lineClamp,R,T=M??(Math.floor(this.len/(h.length*E.h))||1),F=0;Dy(p.rotation)||(y.rotation=p.rotation||0),h.forEach(function(I){let P=g[I];P.movedLabel&&P.replaceMovedLabel();let k=P.label?.textPxLength||0;k>F&&(F=k)}),this.maxLabelLength=F,this.autoRotation?F>S&&F>E.h?y.rotation=this.labelRotation:this.labelRotation=0:w&&(R=S),y.rotation&&(R=F>.5*l.chartHeight?.33*l.chartHeight:F,M||(T=1)),this.labelAlign=p.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(y.align=this.labelAlign),h.forEach(function(I){let P=g[I],k=P&&P.label,H=f.width,j={};k&&(k.attr(y),P.shortenLabel?P.shortenLabel():R&&!H&&f.whiteSpace!=="nowrap"&&(R<(k.textPxLength||0)||k.element.tagName==="SPAN")?k.css(Kc(j,{width:`${R}px`,lineClamp:T})):!k.styles.width||j.width||H||k.css({width:"auto"}),P.rotation=y.rotation)},this),this.tickRotCorr=d.rotCorr(E.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(l){return l.hasData()})||this.options.showEmpty&&lt(this.min)&&lt(this.max)}addTitle(l){let d,h=this.chart.renderer,g=this.horiz,p=this.opposite,f=this.options.title,m=this.chart.styledMode;this.axisTitle||((d=f.textAlign)||(d=(g?{low:"left",middle:"center",high:"right"}:{low:p?"right":"left",middle:"center",high:p?"left":"right"})[f.align]),this.axisTitle=h.text(f.text||"",0,0,f.useHTML).attr({zIndex:7,rotation:f.rotation||0,align:d}).addClass("highcharts-axis-title"),m||this.axisTitle.css(Yc(f.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),m||f.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[l?"show":"hide"](l)}generateTick(l){let d=this.ticks;d[l]?d[l].addLabel():d[l]=new Ro(this,l)}createGroups(){let{axisParent:l,chart:d,coll:h,options:g}=this,p=d.renderer,f=(m,w,S)=>p.g(m).attr({zIndex:S}).addClass(`highcharts-${h.toLowerCase()}${w} `+(this.isRadial?`highcharts-radial-axis${w} `:"")+(g.className||"")).add(l);this.axisGroup||(this.gridGroup=f("grid","-grid",g.gridZIndex),this.axisGroup=f("axis","",g.zIndex),this.labelGroup=f("axis-labels","-labels",g.labels.zIndex))}getOffset(){let l=this,{chart:d,horiz:h,options:g,side:p,ticks:f,tickPositions:m,coll:w}=l,S=d.inverted&&!l.isZAxis?[1,0,3,2][p]:p,y=l.hasData(),E=g.title,M=g.labels,R=ye(g.crossing),T=d.axisOffset,F=d.clipOffset,I=[-1,1,1,-1][p],P,k=0,H,j=0,z=0,V,W;if(l.showAxis=P=y||g.showEmpty,l.staggerLines=l.horiz&&M.staggerLines||void 0,l.createGroups(),y||l.isLinked?(m.forEach(function(X){l.generateTick(X)}),l.renderUnsquish(),l.reserveSpaceDefault=p===0||p===2||{1:"left",3:"right"}[p]===l.labelAlign,ke(M.reserveSpace,!R&&null,l.labelAlign==="center"||null,l.reserveSpaceDefault)&&m.forEach(function(X){z=Math.max(f[X].getLabelSize(),z)}),l.staggerLines&&(z*=l.staggerLines),l.labelOffset=z*(l.opposite?-1:1)):Xc(f,function(X,Q){X.destroy(),delete f[Q]}),E?.text&&E.enabled!==!1&&(l.addTitle(P),P&&!R&&E.reserveSpace!==!1&&(l.titleOffset=k=l.axisTitle.getBBox()[h?"height":"width"],j=lt(H=E.offset)?0:ke(E.margin,h?5:10))),l.renderLine(),l.offset=I*ke(g.offset,T[p]?T[p]+(g.margin||0):0),l.tickRotCorr=l.tickRotCorr||{x:0,y:0},W=p===0?-l.labelMetrics().h:p===2?l.tickRotCorr.y:0,V=Math.abs(z)+j,z&&(V-=W,V+=I*(h?ke(M.y,l.tickRotCorr.y+I*M.distance):ke(M.x,I*M.distance))),l.axisTitleMargin=ke(H,V),l.getMaxLabelDimensions&&(l.maxLabelDimensions=l.getMaxLabelDimensions(f,m)),w!=="colorAxis"&&F){let X=this.tickSize("tick");T[p]=Math.max(T[p],(l.axisTitleMargin||0)+k+I*l.offset,V,m&&m.length&&X?X[0]+I*l.offset:0);let Q=!l.axisLine||g.offset?0:l.axisLine.strokeWidth()/2;F[S]=Math.max(F[S],Q)}Mt(this,"afterGetOffset")}getLinePath(l){let d=this.chart,h=this.opposite,g=this.offset,p=this.horiz,f=this.left+(h?this.width:0)+g,m=d.chartHeight-this.bottom-(h?this.height:0)+g;return h&&(l*=-1),d.renderer.crispLine([["M",p?this.left:f,p?m:this.top],["L",p?d.chartWidth-this.right:f,p?m:d.chartHeight-this.bottom]],l)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(l){let d=this.horiz,h=this.left,g=this.top,p=this.len,f=this.options.title,m=d?h:g,w=this.opposite,S=this.offset,y=f.x,E=f.y,M=this.chart.renderer.fontMetrics(l),R=l?Math.max(l.getBBox(!1,0).height-M.h-1,0):0,T={low:m+(d?0:p),middle:m+p/2,high:m+(d?p:0)}[f.align],F=(d?g+this.height:h)+(d?1:-1)*(w?-1:1)*(this.axisTitleMargin||0)+[-R,R,M.f,-R][this.side],I={x:d?T+y:F+(w?this.width:0)+S+y,y:d?F+E-(w?this.height:0)+S:T+E};return Mt(this,"afterGetTitlePosition",{titlePosition:I}),I}renderMinorTick(l,d){let h=this.minorTicks;h[l]||(h[l]=new Ro(this,l,"minor")),d&&h[l].isNew&&h[l].render(null,!0),h[l].render(null,!1,1)}renderTick(l,d,h){let g=this.isLinked,p=this.ticks;(!g||l>=this.min&&l<=this.max||this.grid&&this.grid.isColumn)&&(p[l]||(p[l]=new Ro(this,l)),h&&p[l].isNew&&p[l].render(d,!0,-1),p[l].render(d))}render(){let l,d,h=this,g=h.chart,p=h.logarithmic,f=g.renderer,m=h.options,w=h.isLinked,S=h.tickPositions,y=h.axisTitle,E=h.ticks,M=h.minorTicks,R=h.alternateBands,T=m.stackLabels,F=m.alternateGridColor,I=m.crossing,P=h.tickmarkOffset,k=h.axisLine,H=h.showAxis,j=OI(f.globalAnimation);if(h.labelEdge.length=0,h.overlap=!1,[E,M,R].forEach(function(z){Xc(z,function(V){V.isActive=!1})}),ye(I)){let z=this.isXAxis?g.yAxis[0]:g.xAxis[0],V=[1,-1,-1,1][this.side];if(z){let W=z.toPixels(I,!0);h.horiz&&(W=z.len-W),h.offset=V*W}}if(h.hasData()||w){let z=h.chart.hasRendered&&h.old&&ye(h.old.min);h.minorTickInterval&&!h.categories&&h.getMinorTickPositions().forEach(function(V){h.renderMinorTick(V,z)}),S.length&&(S.forEach(function(V,W){h.renderTick(V,W,z)}),P&&(h.min===0||h.single)&&(E[-1]||(E[-1]=new Ro(h,-1,null,!0)),E[-1].render(-1))),F&&S.forEach(function(V,W){d=S[W+1]!==void 0?S[W+1]+P:h.max-P,W%2==0&&V<h.max&&d<=h.max+(g.polar?-P:P)&&(R[V]||(R[V]=new G.PlotLineOrBand(h,{})),l=V+P,R[V].options={from:p?p.lin2log(l):l,to:p?p.lin2log(d):d,color:F,className:"highcharts-alternate-grid"},R[V].render(),R[V].isActive=!0)}),h._addedPlotLB||(h._addedPlotLB=!0,(m.plotLines||[]).concat(m.plotBands||[]).forEach(function(V){h.addPlotBandOrLine(V)}))}[E,M,R].forEach(function(z){let V=[],W=j.duration;Xc(z,function(X,Q){X.isActive||(X.render(Q,!1,0),X.isActive=!1,V.push(Q))}),jI(function(){let X=V.length;for(;X--;)z[V[X]]&&!z[V[X]].isActive&&(z[V[X]].destroy(),delete z[V[X]])},z!==R&&g.hasRendered&&W?W:0)}),k&&(k[k.isPlaced?"animate":"attr"]({d:this.getLinePath(k.strokeWidth())}),k.isPlaced=!0,k[H?"show":"hide"](H)),y&&H&&(y[y.isNew?"attr":"animate"](h.getTitlePosition(y)),y.isNew=!1),T&&T.enabled&&h.stacking&&h.stacking.renderStackTotals(),h.old={len:h.len,max:h.max,min:h.min,transA:h.transA,userMax:h.userMax,userMin:h.userMin},h.isDirty=!1,Mt(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(l){l.render()})),this.series.forEach(function(l){l.isDirty=!0})}getKeepProps(){return this.keepProps||C.keepProps}destroy(l){let d=this,h=d.plotLinesAndBands,g=this.eventOptions;if(Mt(this,"destroy",{keepEvents:l}),l||zI(d),[d.ticks,d.minorTicks,d.alternateBands].forEach(function(p){VI(p)}),h){let p=h.length;for(;p--;)h[p].destroy()}for(let p in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(f){d[f]&&(d[f]=d[f].destroy())}),d.plotLinesAndBandsGroups)d.plotLinesAndBandsGroups[p]=d.plotLinesAndBandsGroups[p].destroy();Xc(d,function(p,f){d.getKeepProps().indexOf(f)===-1&&delete d[f]}),this.eventOptions=g}drawCrosshair(l,d){let h=this.crosshair,g=ke(h&&h.snap,!0),p=this.chart,f,m,w,S=this.cross,y;if(Mt(this,"drawCrosshair",{e:l,point:d}),l||(l=this.cross&&this.cross.e),h&&(lt(d)||!g)!==!1){if(g?lt(d)&&(m=ke(this.coll!=="colorAxis"?d.crosshairPos:null,this.isXAxis?d.plotX:this.len-d.plotY)):m=l&&(this.horiz?l.chartX-this.pos:this.len-l.chartY+this.pos),lt(m)&&(y={value:d&&(this.isXAxis?d.x:ke(d.stackY,d.y)),translatedValue:m},p.polar&&Kc(y,{isCrosshair:!0,chartX:l&&l.chartX,chartY:l&&l.chartY,point:d}),f=this.getPlotLinePath(y)||null),!lt(f)){this.hideCrosshair();return}w=this.categories&&!this.isRadial,S||(this.cross=S=p.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(w?"category ":"thin ")+(h.className||"")).attr({zIndex:ke(h.zIndex,2)}).add(),!p.styledMode&&(S.attr({stroke:h.color||(w?Ht.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":ke(h.width,1)}).css({"pointer-events":"none"}),h.dashStyle&&S.attr({dashstyle:h.dashStyle}))),S.show().attr({d:f}),w&&!h.width&&S.attr({"stroke-width":this.transA}),this.cross.e=l}else this.hideCrosshair();Mt(this,"afterDrawCrosshair",{e:l,point:d})}hideCrosshair(){this.cross&&this.cross.hide(),Mt(this,"afterHideCrosshair")}update(l,d){let h=this.chart;l=Yc(this.userOptions,l),this.destroy(!0),this.init(h,l),h.isDirtyBox=!0,ke(d,!0)&&h.redraw()}remove(l){let d=this.chart,h=this.coll,g=this.series,p=g.length;for(;p--;)g[p]&&g[p].remove(!1);Sy(d.axes,this),Sy(d[h]||[],this),d.orderItems(h),this.destroy(),d.isDirtyBox=!0,ke(l,!0)&&d.redraw()}setTitle(l,d){this.update({title:l},d)}setCategories(l,d){this.update({categories:l},d)}}return C.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"],C})(),{addEvent:UI,getMagnitude:$I,normalizeTickInterval:qI,timeUnits:Qc}=ce;(function(C){function o(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function l(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new d(this))}C.compose=function(h){return h.keepProps.includes("dateTime")||(h.keepProps.push("dateTime"),h.prototype.getTimeTicks=o,UI(h,"afterSetType",l)),h};class d{constructor(g){this.axis=g}normalizeTimeTickInterval(g,p){let f=p||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],m=f[f.length-1],w=Qc[m[0]],S=m[1],y;for(y=0;y<f.length&&(w=Qc[(m=f[y])[0]],S=m[1],!f[y+1]||!(g<=(w*S[S.length-1]+Qc[f[y+1][0]])/2));y++);w===Qc.year&&g<5*w&&(S=[1,2,5]);let E=qI(g/w,S,m[0]==="year"?Math.max($I(g/w),1):1);return{unitRange:w,count:E,unitName:m[0]}}getXDateFormat(g,p){let{axis:f}=this,m=f.chart.time;return f.closestPointRange?m.getDateFormat(f.closestPointRange,g,f.options.startOfWeek,p)||m.resolveDTLFormat(p.year).main:m.resolveDTLFormat(p.day).main}}C.Additions=d})(c||(c={}));let KI=c,{addEvent:Ry,normalizeTickInterval:YI,pick:XI}=ce;(function(C){function o(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new d(this))}function l(){let h=this.logarithmic;h&&(this.lin2val=function(g){return h.lin2log(g)},this.val2lin=function(g){return h.log2lin(g)})}C.compose=function(h){return h.keepProps.includes("logarithmic")||(h.keepProps.push("logarithmic"),Ry(h,"afterSetType",o),Ry(h,"afterInit",l)),h};class d{constructor(g){this.axis=g}getLogTickPositions(g,p,f,m){let w=this.axis,S=w.len,y=w.options,E=[];if(m||(this.minorAutoInterval=void 0),g>=.5)g=Math.round(g),E=w.getLinearTickPositions(g,p,f);else if(g>=.08){let M,R,T,F,I,P,k,H=Math.floor(p);for(M=g>.3?[1,2,4]:g>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],R=H;R<f+1&&!k;R++)for(T=0,F=M.length;T<F&&!k;T++)(I=this.log2lin(this.lin2log(R)*M[T]))>p&&(!m||P<=f)&&P!==void 0&&E.push(P),P>f&&(k=!0),P=I}else{let M=this.lin2log(p),R=this.lin2log(f),T=m?w.getMinorTickInterval():y.tickInterval,F=y.tickPixelInterval/(m?5:1),I=m?S/w.tickPositions.length:S;g=YI(g=XI(T==="auto"?null:T,this.minorAutoInterval,(R-M)*F/(I||1))),E=w.getLinearTickPositions(g,M,R).map(this.log2lin),m||(this.minorAutoInterval=g/5)}return m||(w.tickInterval=g),E}lin2log(g){return Math.pow(10,g)}log2lin(g){return Math.log(g)/Math.LN10}}C.Additions=d})(u||(u={}));let ZI=u,{erase:QI,extend:JI,isNumber:Iy}=ce;(function(C){let o;function l(w){return this.addPlotBandOrLine(w,"plotBands")}function d(w,S){let y=this.userOptions,E=new o(this,w);if(this.visible&&(E=E.render()),E){if(this._addedPlotLB||(this._addedPlotLB=!0,(y.plotLines||[]).concat(y.plotBands||[]).forEach(M=>{this.addPlotBandOrLine(M)})),S){let M=y[S]||[];M.push(w),y[S]=M}this.plotLinesAndBands.push(E)}return E}function h(w){return this.addPlotBandOrLine(w,"plotLines")}function g(w,S,y){y=y||this.options;let E=this.getPlotLinePath({value:S,force:!0,acrossPanes:y.acrossPanes}),M=[],R=this.horiz,T=!Iy(this.min)||!Iy(this.max)||w<this.min&&S<this.min||w>this.max&&S>this.max,F=this.getPlotLinePath({value:w,force:!0,acrossPanes:y.acrossPanes}),I,P=1,k;if(F&&E)for(T&&(k=F.toString()===E.toString(),P=0),I=0;I<F.length;I+=2){let H=F[I],j=F[I+1],z=E[I],V=E[I+1];(H[0]==="M"||H[0]==="L")&&(j[0]==="M"||j[0]==="L")&&(z[0]==="M"||z[0]==="L")&&(V[0]==="M"||V[0]==="L")&&(R&&z[1]===H[1]?(z[1]+=P,V[1]+=P):R||z[2]!==H[2]||(z[2]+=P,V[2]+=P),M.push(["M",H[1],H[2]],["L",j[1],j[2]],["L",V[1],V[2]],["L",z[1],z[2]],["Z"])),M.isFlat=k}return M}function p(w){this.removePlotBandOrLine(w)}function f(w){let S=this.plotLinesAndBands,y=this.options,E=this.userOptions;if(S){let M=S.length;for(;M--;)S[M].id===w&&S[M].destroy();[y.plotLines||[],E.plotLines||[],y.plotBands||[],E.plotBands||[]].forEach(function(R){for(M=R.length;M--;)(R[M]||{}).id===w&&QI(R,R[M])})}}function m(w){this.removePlotBandOrLine(w)}C.compose=function(w,S){let y=S.prototype;return y.addPlotBand||(o=w,JI(y,{addPlotBand:l,addPlotLine:h,addPlotBandOrLine:d,getPlotBandPath:g,removePlotBand:p,removePlotLine:m,removePlotBandOrLine:f})),S}})(v||(v={}));let eT=v,{addEvent:tT,arrayMax:Ty,arrayMin:Fy,defined:zn,destroyObjectProperties:iT,erase:nT,fireEvent:rT,merge:Ay,objectEach:sT,pick:oT}=ce;class Jc{static compose(o,l){return tT(o,"afterInit",function(){this.labelCollectors.push(()=>{let d=[];for(let h of this.axes)for(let{label:g,options:p}of h.plotLinesAndBands)g&&!p?.label?.allowOverlap&&d.push(g);return d})}),eT.compose(Jc,l)}constructor(o,l){this.axis=o,this.options=l,this.id=l.id}render(){rT(this,"render");let{axis:o,options:l}=this,{horiz:d,logarithmic:h}=o,{color:g,events:p,zIndex:f=0}=l,{renderer:m,time:w}=o.chart,S={},y=w.parse(l.to),E=w.parse(l.from),M=w.parse(l.value),R=l.borderWidth,T=l.label,{label:F,svgElem:I}=this,P=[],k,H=zn(E)&&zn(y),j=zn(M),z=!I,V={class:"highcharts-plot-"+(H?"band ":"line ")+(l.className||"")},W=H?"bands":"lines";if(!o.chart.styledMode&&(j?(V.stroke=g||"#999999",V["stroke-width"]=oT(l.width,1),l.dashStyle&&(V.dashstyle=l.dashStyle)):H&&(V.fill=g||"#e6e9ff",R&&(V.stroke=l.borderColor,V["stroke-width"]=R))),S.zIndex=f,W+="-"+f,(k=o.plotLinesAndBandsGroups[W])||(o.plotLinesAndBandsGroups[W]=k=m.g("plot-"+W).attr(S).add()),I||(this.svgElem=I=m.path().attr(V).add(k)),zn(M))P=o.getPlotLinePath({value:h?.log2lin(M)??M,lineWidth:I.strokeWidth(),acrossPanes:l.acrossPanes});else{if(!(zn(E)&&zn(y)))return;P=o.getPlotBandPath(h?.log2lin(E)??E,h?.log2lin(y)??y,l)}return!this.eventsAdded&&p&&(sT(p,(X,Q)=>{I?.on(Q,te=>{p[Q].apply(this,[te])})}),this.eventsAdded=!0),(z||!I.d)&&P?.length?I.attr({d:P}):I&&(P?(I.show(),I.animate({d:P})):I.d&&(I.hide(),F&&(this.label=F=F.destroy()))),T&&(zn(T.text)||zn(T.formatter))&&P?.length&&o.width>0&&o.height>0&&!P.isFlat?(T=Ay(q({align:d&&H?"center":void 0,x:d?!H&&4:10,verticalAlign:!d&&H?"middle":void 0,y:d?H?16:10:H?6:-4,rotation:d&&!H?90:0},H?{inside:!0}:{}),T),this.renderLabel(T,P,H,f)):F&&F.hide(),this}renderLabel(o,l,d,h){let g=this.axis,p=g.chart.renderer,f=o.inside,m=this.label;m||(this.label=m=p.text(this.getLabelText(o),0,0,o.useHTML).attr({align:o.textAlign||o.align,rotation:o.rotation,class:"highcharts-plot-"+(d?"band":"line")+"-label "+(o.className||""),zIndex:h}),g.chart.styledMode||m.css(Ay({fontSize:"0.8em",textOverflow:d&&!f?"":"ellipsis"},o.style)),m.add());let w=l.xBounds||[l[0][1],l[1][1],d?l[2][1]:l[0][1]],S=l.yBounds||[l[0][2],l[1][2],d?l[2][2]:l[0][2]],y=Fy(w),E=Fy(S),M=Ty(w)-y;m.align(o,!1,{x:y,y:E,width:M,height:Ty(S)-E}),(!m.alignValue||m.alignValue==="left"||zn(f))&&m.css({width:(o.style?.width||(d&&f?M:m.rotation===90?g.height-(m.alignAttr.y-g.top):(o.clip?g.width:g.chart.chartWidth)-(m.alignAttr.x-g.left)))+"px"}),m.show(!0)}getLabelText(o){return zn(o.formatter)?o.formatter.call(this):o.text}destroy(){nT(this.axis.plotLinesAndBands,this),delete this.axis,iT(this)}}let{animObject:aT}=ii,{format:Py}=wn,{composed:lT,dateFormats:cT,doc:ky,isSafari:dT}=G,{distribute:uT}=Nc,{addEvent:hT,clamp:Io,css:Oy,discardElement:gT,extend:pT,fireEvent:Ly,isArray:fT,isNumber:mT,isObject:vT,isString:zg,merge:CT,pick:To,pushUnique:wT,splat:Wg,syncTimeout:yT}=ce;class jg{constructor(o,l,d){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=o,this.init(o,l),this.pointer=d}bodyFormatter(o){return o.map(l=>{let d=l.series.tooltipOptions,h=l.formatPrefix||"point";return(d[h+"Formatter"]||l.tooltipFormatter).call(l,d[h+"Format"]||"")})}cleanSplit(o){this.chart.series.forEach(function(l){let d=l&&l.tt;d&&(!d.isActive||o?l.tt=d.destroy():d.isActive=!1)})}defaultFormatter(o){let l,d=this.points||Wg(this);return(l=(l=[o.headerFooterFormatter(d[0])]).concat(o.bodyFormatter(d))).push(o.headerFooterFormatter(d[0],!0)),l}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),gT(this.container)),ce.clearTimeout(this.hideTimer)}getAnchor(o,l){let d,{chart:h,pointer:g}=this,p=h.inverted,f=h.plotTop,m=h.plotLeft;if((o=Wg(o))[0].series&&o[0].series.yAxis&&!o[0].series.yAxis.options.reversedStacks&&(o=o.slice().reverse()),this.followPointer&&l)l.chartX===void 0&&(l=g.normalize(l)),d=[l.chartX-m,l.chartY-f];else if(o[0].tooltipPos)d=o[0].tooltipPos;else{let w=0,S=0;o.forEach(function(y){let E=y.pos(!0);E&&(w+=E[0],S+=E[1])}),w/=o.length,S/=o.length,this.shared&&o.length>1&&l&&(p?w=l.chartX:S=l.chartY),d=[w-m,S-f]}return d.map(Math.round)}getClassName(o,l,d){let h=this.options,g=o.series,p=g.options;return[h.className,"highcharts-label",d&&"highcharts-tooltip-header",l?"highcharts-tooltip-box":"highcharts-tooltip",!d&&"highcharts-color-"+To(o.colorIndex,g.colorIndex),p&&p.className].filter(zg).join(" ")}getLabel({anchorX:o,anchorY:l}={anchorX:0,anchorY:0}){let d=this,h=this.chart.styledMode,g=this.options,p=this.split&&this.allowShared,f=this.container,m=this.chart.renderer;if(this.label){let w=!this.label.hasClass("highcharts-label");(!p&&w||p&&!w)&&this.destroy()}if(!this.label){if(this.outside){let w=this.chart,S=w.options.chart.style,y=Ua.getRendererType();this.container=f=G.doc.createElement("div"),f.className="highcharts-tooltip-container "+(w.renderTo.className.match(/(highcharts[a-zA-Z0-9-]+)\s?/gm)||""),Oy(f,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(S&&S.zIndex||0)+3)}),this.renderer=m=new y(f,0,0,S,void 0,void 0,m.styledMode)}if(p?this.label=m.g("tooltip"):(this.label=m.label("",o,l,g.shape,void 0,void 0,g.useHTML,void 0,"tooltip").attr({padding:g.padding,r:g.borderRadius}),h||this.label.attr({fill:g.backgroundColor,"stroke-width":g.borderWidth||0}).css(g.style).css({pointerEvents:g.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),d.outside){let w=this.label;[w.xSetter,w.ySetter].forEach((S,y)=>{w[y?"ySetter":"xSetter"]=E=>{S.call(w,d.distance),w[y?"y":"x"]=E,f&&(f.style[y?"top":"left"]=`${E}px`)}})}this.label.attr({zIndex:8}).shadow(g.shadow).add()}return f&&!f.parentElement&&G.doc.body.appendChild(f),this.label}getPlayingField(){let{body:o,documentElement:l}=ky,{chart:d,distance:h,outside:g}=this;return{width:g?Math.max(o.scrollWidth,l.scrollWidth,o.offsetWidth,l.offsetWidth,l.clientWidth)-2*h-2:d.chartWidth,height:g?Math.max(o.scrollHeight,l.scrollHeight,o.offsetHeight,l.offsetHeight,l.clientHeight):d.chartHeight}}getPosition(o,l,d){let{distance:h,chart:g,outside:p,pointer:f}=this,{inverted:m,plotLeft:w,plotTop:S,polar:y}=g,{plotX:E=0,plotY:M=0}=d,R={},T=m&&d.h||0,{height:F,width:I}=this.getPlayingField(),P=f.getChartPosition(),k=me=>me*P.scaleX,H=me=>me*P.scaleY,j=me=>{let he=me==="x";return[me,he?I:F,he?o:l].concat(p?[he?k(o):H(l),he?P.left-h+k(E+w):P.top-h+H(M+S),0,he?I:F]:[he?o:l,he?E+w:M+S,he?w:S,he?w+g.plotWidth:S+g.plotHeight])},z=j("y"),V=j("x"),W,X=!!d.negative;!y&&g.hoverSeries?.yAxis?.reversed&&(X=!X);let Q=!this.followPointer&&To(d.ttBelow,!y&&!m===X),te=function(me,he,Le,Te,Re,Be,Se){let Pt=p?me==="y"?H(h):k(h):h,Rt=(Le-Te)/2,ze=Te<Re-h,ct=Re+h+Te<he,Gt=Re-Pt-Le+Rt,bt=Re+Pt-Rt;if(Q&&ct)R[me]=bt;else if(!Q&&ze)R[me]=Gt;else if(ze)R[me]=Math.min(Se-Te,Gt-T<0?Gt:Gt-T);else{if(!ct)return!1;R[me]=Math.max(Be,bt+T+Le>he?bt:bt+T)}},de=function(me,he,Le,Te,Re){if(Re<h||Re>he-h)return!1;Re<Le/2?R[me]=1:Re>he-Te/2?R[me]=he-Te-2:R[me]=Re-Le/2},le=function(me){[z,V]=[V,z],W=me},ge=()=>{te.apply(0,z)!==!1?de.apply(0,V)!==!1||W||(le(!0),ge()):W?R.x=R.y=0:(le(!0),ge())};return(m&&!y||this.len>1)&&le(),ge(),R}hide(o){let l=this;ce.clearTimeout(this.hideTimer),o=To(o,this.options.hideDelay),this.isHidden||(this.hideTimer=yT(function(){let d=l.getLabel();l.getLabel().animate({opacity:0},{duration:o&&150,complete:()=>{d.hide(),l.container&&l.container.remove()}}),l.isHidden=!0},o))}init(o,l){this.chart=o,this.options=l,this.crosshairs=[],this.isHidden=!0,this.split=l.split&&!o.inverted&&!o.polar,this.shared=l.shared||this.split,this.outside=To(l.outside,!!(o.scrollablePixelsX||o.scrollablePixelsY))}shouldStickOnContact(o){return!!(!this.followPointer&&this.options.stickOnContact&&(!o||this.pointer.inClass(o.target,"highcharts-tooltip")))}move(o,l,d,h){let g=this,p=aT(!g.isHidden&&g.options.animation),f=g.followPointer||(g.len||0)>1,m={x:o,y:l};f||(m.anchorX=d,m.anchorY=h),p.step=()=>g.drawTracker(),g.getLabel().animate(m,p)}refresh(o,l){let{chart:d,options:h,pointer:g,shared:p}=this,f=Wg(o),m=f[0],w=h.format,S=h.formatter||this.defaultFormatter,y=d.styledMode,E=this.allowShared;if(!h.enabled||!m.series)return;ce.clearTimeout(this.hideTimer),this.allowShared=!(!fT(o)&&o.series&&o.series.noSharedTooltip),E=E&&!this.allowShared,this.followPointer=!this.split&&m.series.tooltipOptions.followPointer;let M=this.getAnchor(o,l),R=M[0],T=M[1];p&&this.allowShared&&(g.applyInactiveState(f),f.forEach(P=>P.setState("hover")),m.points=f),this.len=f.length;let F=zg(w)?Py(w,m,d):S.call(m,this);m.points=void 0;let I=m.series;if(this.distance=To(I.tooltipOptions.distance,16),F===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(F,f);else{let P=R,k=T;if(l&&g.isDirectTouch&&(P=l.chartX-d.plotLeft,k=l.chartY-d.plotTop),d.polar||I.options.clip===!1||f.some(H=>g.isDirectTouch||H.series.shouldShowTooltip(P,k))){let H=this.getLabel(E&&this.tt||{});(!h.style.width||y)&&H.css({width:(this.outside?this.getPlayingField():d.spacingBox).width+"px"}),H.attr({class:this.getClassName(m),text:F&&F.join?F.join(""):F}),this.outside&&H.attr({x:Io(H.x||0,0,this.getPlayingField().width-(H.width||0))}),y||H.attr({stroke:h.borderColor||m.color||I.color||"#666666"}),this.updatePosition({plotX:R,plotY:T,negative:m.negative,ttBelow:m.ttBelow,h:M[2]||0})}else{this.hide();return}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}Ly(this,"refresh")}renderSplit(o,l){let d=this,{chart:h,chart:{chartWidth:g,chartHeight:p,plotHeight:f,plotLeft:m,plotTop:w,scrollablePixelsY:S=0,scrollablePixelsX:y,styledMode:E},distance:M,options:R,options:{positioner:T},pointer:F}=d,{scrollLeft:I=0,scrollTop:P=0}=h.scrollablePlotArea?.scrollingContainer||{},k=d.outside&&typeof y!="number"?ky.documentElement.getBoundingClientRect():{left:I,right:I+g,top:P,bottom:P+p},H=d.getLabel(),j=this.renderer||h.renderer,z=!!(h.xAxis[0]&&h.xAxis[0].opposite),{left:V,top:W}=F.getChartPosition(),X=w+P,Q=0,te=f-S;function de(Te,Re,Be,Se,Pt=!0){let Rt,ze;return Be?(Rt=z?0:te,ze=Io(Te-Se/2,k.left,k.right-Se-(d.outside?V:0))):(Rt=Re-X,ze=Io(ze=Pt?Te-Se-M:Te+M,Pt?ze:k.left,k.right)),{x:ze,y:Rt}}zg(o)&&(o=[!1,o]);let le=o.slice(0,l.length+1).reduce(function(Te,Re,Be){if(Re!==!1&&Re!==""){let Se=l[Be-1]||{isHeader:!0,plotX:l[0].plotX,plotY:f,series:{}},Pt=Se.isHeader,Rt=Pt?d:Se.series,ze=Rt.tt=function(zt,yi,Wn){let Vr=zt,{isHeader:al,series:Ed}=yi;if(!Vr){let No={padding:R.padding,r:R.borderRadius};E||(No.fill=R.backgroundColor,No["stroke-width"]=R.borderWidth??1),Vr=j.label("",0,0,R[al?"headerShape":"shape"],void 0,void 0,R.useHTML).addClass(d.getClassName(yi,!0,al)).attr(No).add(H)}return Vr.isActive=!0,Vr.attr({text:Wn}),E||Vr.css(R.style).attr({stroke:R.borderColor||yi.color||Ed.color||"#333333"}),Vr}(Rt.tt,Se,Re.toString()),ct=ze.getBBox(),Gt=ct.width+ze.strokeWidth();Pt&&(Q=ct.height,te+=Q,z&&(X-=Q));let{anchorX:bt,anchorY:ri}=function(zt){let yi,Wn,{isHeader:Vr,plotX:al=0,plotY:Ed=0,series:No}=zt;if(Vr)yi=Math.max(m+al,m),Wn=w+f/2;else{let{xAxis:Q0,yAxis:J0}=No;yi=Q0.pos+Io(al,-M,Q0.len+M),No.shouldShowTooltip(0,J0.pos-w+Ed,{ignoreX:!0})&&(Wn=J0.pos+Ed)}return{anchorX:yi=Io(yi,k.left-M,k.right+M),anchorY:Wn}}(Se);if(typeof ri=="number"){let zt=ct.height+1,yi=T?T.call(d,Gt,zt,Se):de(bt,ri,Pt,Gt);Te.push({align:T?0:void 0,anchorX:bt,anchorY:ri,boxWidth:Gt,point:Se,rank:To(yi.rank,Pt?1:0),size:zt,target:yi.y,tt:ze,x:yi.x})}else ze.isActive=!1}return Te},[]);!T&&le.some(Te=>{let{outside:Re}=d,Be=(Re?V:0)+Te.anchorX;return Be<k.left&&Be+Te.boxWidth<k.right||Be<V-k.left+Te.boxWidth&&k.right-Be>Be})&&(le=le.map(Te=>{let{x:Re,y:Be}=de(Te.anchorX,Te.anchorY,Te.point.isHeader,Te.boxWidth,!1);return pT(Te,{target:Be,x:Re})})),d.cleanSplit(),uT(le,te);let ge={left:V,right:V};le.forEach(function(Te){let{x:Re,boxWidth:Be,isHeader:Se}=Te;!Se&&(d.outside&&V+Re<ge.left&&(ge.left=V+Re),!Se&&d.outside&&ge.left+Be>ge.right&&(ge.right=V+Re))}),le.forEach(function(Te){let{x:Re,anchorX:Be,anchorY:Se,pos:Pt,point:{isHeader:Rt}}=Te,ze={visibility:Pt===void 0?"hidden":"inherit",x:Re,y:(Pt||0)+X,anchorX:Be,anchorY:Se};if(d.outside&&Re<Be){let ct=V-ge.left;ct>0&&(Rt||(ze.x=Re+ct,ze.anchorX=Be+ct),Rt&&(ze.x=(ge.right-ge.left)/2,ze.anchorX=Be+ct))}Te.tt.attr(ze)});let{container:me,outside:he,renderer:Le}=d;if(he&&me&&Le){let{width:Te,height:Re,x:Be,y:Se}=H.getBBox();Le.setSize(Te+Be,Re+Se,!1),me.style.left=ge.left+"px",me.style.top=W+"px"}dT&&H.attr({opacity:H.opacity===1?.999:1})}drawTracker(){if(!this.shouldStickOnContact()){this.tracker&&(this.tracker=this.tracker.destroy());return}let o=this.chart,l=this.label,d=this.shared?o.hoverPoints:o.hoverPoint;if(!l||!d)return;let h={x:0,y:0,width:0,height:0},g=this.getAnchor(d),p=l.getBBox();g[0]+=o.plotLeft-(l.translateX||0),g[1]+=o.plotTop-(l.translateY||0),h.x=Math.min(0,g[0]),h.y=Math.min(0,g[1]),h.width=g[0]<0?Math.max(Math.abs(g[0]),p.width-g[0]):Math.max(Math.abs(g[0]),p.width),h.height=g[1]<0?Math.max(Math.abs(g[1]),p.height-Math.abs(g[1])):Math.max(Math.abs(g[1]),p.height),this.tracker?this.tracker.attr(h):(this.tracker=l.renderer.rect(h).addClass("highcharts-tracker").add(l),o.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(o){return o.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}headerFooterFormatter(o,l){let d=o.series,h=d.tooltipOptions,g=d.xAxis,p=g&&g.dateTime,f={isFooter:l,point:o},m=h.xDateFormat||"",w=h[l?"footerFormat":"headerFormat"];return Ly(this,"headerFormatter",f,function(S){if(p&&!m&&mT(o.key)&&(m=p.getXDateFormat(o.key,h.dateTimeLabelFormats)),p&&m){if(vT(m)){let y=m;cT[0]=E=>d.chart.time.dateFormat(y,E),m="%0"}(o.tooltipDateKeys||["key"]).forEach(y=>{w=w.replace(RegExp("point\\."+y+"([ \\)}])",""),`(point.${y}:${m})$1`)})}d.chart.styledMode&&(w=this.styledModeFormat(w)),S.text=Py(w,o,this.chart)}),f.text||""}update(o){this.destroy(),this.init(this.chart,CT(!0,this.options,o))}updatePosition(o){let{chart:l,container:d,distance:h,options:g,pointer:p,renderer:f}=this,{height:m=0,width:w=0}=this.getLabel(),{left:S,top:y,scaleX:E,scaleY:M}=p.getChartPosition(),R=(g.positioner||this.getPosition).call(this,w,m,o),T=G.doc,F=(o.plotX||0)+l.plotLeft,I=(o.plotY||0)+l.plotTop,P;f&&d&&(g.positioner&&(R.x+=S-h,R.y+=y-h),P=(g.borderWidth||0)+2*h+2,f.setSize(Io(w+P,0,T.documentElement.clientWidth)-1,m+P,!1),(E!==1||M!==1)&&(Oy(d,{transform:`scale(${E}, ${M})`}),F*=E,I*=M),F+=S-R.x,I+=y-R.y),this.move(Math.round(R.x),Math.round(R.y||0),F,I)}}(function(C){C.compose=function(o){wT(lT,"Core.Tooltip")&&hT(o,"afterInit",function(){let l=this.chart;l.options.tooltip&&(l.tooltip=new C(l,l.options.tooltip,this))})}})(jg||(jg={}));let Ny=jg,{animObject:bT}=ii,{defaultOptions:ST}=Ci,{format:xT}=wn,{addEvent:ET,crisp:DT,erase:MT,extend:ed,fireEvent:Ug,getNestedProperty:RT,isArray:IT,isFunction:TT,isNumber:Fr,isObject:td,merge:_y,pick:Ar,syncTimeout:FT,removeEvent:By,uniqueKey:AT}=ce;class el{animateBeforeDestroy(){let o=this,l={x:o.startXPos,opacity:0},d=o.getGraphicalProps();d.singular.forEach(function(h){o[h]=o[h].animate(h==="dataLabel"?{x:o[h].startXPos,y:o[h].startYPos,opacity:0}:l)}),d.plural.forEach(function(h){o[h].forEach(function(g){g.element&&g.animate(ed({x:o.startXPos},g.startYPos?{x:g.startXPos,y:g.startYPos}:{}))})})}applyOptions(o,l){let d=this.series,h=d.options.pointValKey||d.pointValKey;return ed(this,o=el.prototype.optionsToObject.call(this,o)),this.options=this.options?ed(this.options,o):o,o.group&&delete this.group,o.dataLabels&&delete this.dataLabels,h&&(this.y=el.prototype.getNestedProperty.call(this,h)),this.selected&&(this.state="select"),"name"in this&&l===void 0&&d.xAxis&&d.xAxis.hasNames&&(this.x=d.xAxis.nameToX(this)),this.x===void 0&&d?this.x=l??d.autoIncrement():Fr(o.x)&&d.options.relativeXValue?this.x=d.autoIncrement(o.x):typeof this.x=="string"&&(l??(l=d.chart.time.parse(this.x)),Fr(l)&&(this.x=l)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let o=this,l=o.series,d=l.chart,h=l.options.dataSorting,g=d.hoverPoints,p=bT(o.series.chart.renderer.globalAnimation),f=()=>{for(let m in(o.graphic||o.graphics||o.dataLabel||o.dataLabels)&&(By(o),o.destroyElements()),o)delete o[m]};o.legendItem&&d.legend.destroyItem(o),g&&(o.setState(),MT(g,o),g.length||(d.hoverPoints=null)),o===d.hoverPoint&&o.onMouseOut(),h&&h.enabled?(this.animateBeforeDestroy(),FT(f,p.duration)):f(),d.pointCount--}this.destroyed=!0}destroyElements(o){let l=this,d=l.getGraphicalProps(o);d.singular.forEach(function(h){l[h]=l[h].destroy()}),d.plural.forEach(function(h){l[h].forEach(function(g){g&&g.element&&g.destroy()}),delete l[h]})}firePointEvent(o,l,d){let h=this,g=this.series.options;h.manageEvent(o),o==="click"&&g.allowPointSelect&&(d=function(p){!h.destroyed&&h.select&&h.select(null,p.ctrlKey||p.metaKey||p.shiftKey)}),Ug(h,o,l,d)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(o){let l,d,h=this,g=[],p={singular:[],plural:[]};for((o=o||{graphic:1,dataLabel:1}).graphic&&g.push("graphic","connector"),o.dataLabel&&g.push("dataLabel","dataLabelPath","dataLabelUpper"),d=g.length;d--;)h[l=g[d]]&&p.singular.push(l);return["graphic","dataLabel"].forEach(function(f){let m=f+"s";o[f]&&h[m]&&p.plural.push(m)}),p}getNestedProperty(o){return o?o.indexOf("custom.")===0?RT(o,this.options):this[o]:void 0}getZone(){let o=this.series,l=o.zones,d=o.zoneAxis||"y",h,g=0;for(h=l[0];this[d]>=h.value;)h=l[++g];return this.nonZonedColor||(this.nonZonedColor=this.color),h&&h.color&&!this.options.color?this.color=h.color:this.color=this.nonZonedColor,h}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(o,l,d){this.formatPrefix="point",this.visible=!0,this.point=this,this.series=o,this.applyOptions(l,d),this.id??(this.id=AT()),this.resolveColor(),o.chart.pointCount++,Ug(this,"afterInit")}isValid(){return(Fr(this.x)||this.x instanceof Date)&&Fr(this.y)}optionsToObject(o){let l=this.series,d=l.options.keys,h=d||l.pointArrayMap||["y"],g=h.length,p={},f,m=0,w=0;if(Fr(o)||o===null)p[h[0]]=o;else if(IT(o))for(!d&&o.length>g&&((f=typeof o[0])=="string"?l.xAxis?.dateTime?p.x=l.chart.time.parse(o[0]):p.name=o[0]:f==="number"&&(p.x=o[0]),m++);w<g;)d&&o[m]===void 0||(h[w].indexOf(".")>0?el.prototype.setNestedProperty(p,o[m],h[w]):p[h[w]]=o[m]),m++,w++;else typeof o=="object"&&(p=o,o.dataLabels&&(l.hasDataLabels=()=>!0),o.marker&&(l._hasPointMarkers=!0));return p}pos(o,l=this.plotY){if(!this.destroyed){let{plotX:d,series:h}=this,{chart:g,xAxis:p,yAxis:f}=h,m=0,w=0;if(Fr(d)&&Fr(l))return o&&(m=p?p.pos:g.plotLeft,w=f?f.pos:g.plotTop),g.inverted&&p&&f?[f.len-l+w,p.len-d+m]:[d+m,l+w]}}resolveColor(){let o=this.series,l=o.chart.options.chart,d=o.chart.styledMode,h,g,p=l.colorCount,f;delete this.nonZonedColor,o.options.colorByPoint?(d||(h=(g=o.options.colors||o.chart.options.colors)[o.colorCounter],p=g.length),f=o.colorCounter,o.colorCounter++,o.colorCounter===p&&(o.colorCounter=0)):(d||(h=o.color),f=o.colorIndex),this.colorIndex=Ar(this.options.colorIndex,f),this.color=Ar(this.options.color,h)}setNestedProperty(o,l,d){return d.split(".").reduce(function(h,g,p,f){let m=f.length-1===p;return h[g]=m?l:td(h[g],!0)?h[g]:{},h[g]},o),o}shouldDraw(){return!this.isNull}tooltipFormatter(o){let{chart:l,pointArrayMap:d=["y"],tooltipOptions:h}=this.series,{valueDecimals:g="",valuePrefix:p="",valueSuffix:f=""}=h;return l.styledMode&&(o=l.tooltip?.styledModeFormat(o)||o),d.forEach(m=>{m="{point."+m,(p||f)&&(o=o.replace(RegExp(m+"}","g"),p+m+"}"+f)),o=o.replace(RegExp(m+"}","g"),m+":,."+g+"f}")}),xT(o,this,l)}update(o,l,d,h){let g,p=this,f=p.series,m=p.graphic,w=f.chart,S=f.options;function y(){p.applyOptions(o);let E=m&&p.hasMockGraphic,M=p.y===null?!E:E;m&&M&&(p.graphic=m.destroy(),delete p.hasMockGraphic),td(o,!0)&&(m&&m.element&&o&&o.marker&&o.marker.symbol!==void 0&&(p.graphic=m.destroy()),o?.dataLabels&&p.dataLabel&&(p.dataLabel=p.dataLabel.destroy())),g=p.index;let R={};for(let T of f.dataColumnKeys())R[T]=p[T];f.dataTable.setRow(R,g),S.data[g]=td(S.data[g],!0)||td(o,!0)?p.options:Ar(o,S.data[g]),f.isDirty=f.isDirtyData=!0,!f.fixedBox&&f.hasCartesianSeries&&(w.isDirtyBox=!0),S.legendType==="point"&&(w.isDirtyLegend=!0),l&&w.redraw(d)}l=Ar(l,!0),h===!1?y():p.firePointEvent("update",{options:o},y)}remove(o,l){this.series.removePoint(this.series.data.indexOf(this),o,l)}select(o,l){let d=this,h=d.series,g=h.chart;o=Ar(o,!d.selected),this.selectedStaging=o,d.firePointEvent(o?"select":"unselect",{accumulate:l},function(){d.selected=d.options.selected=o,h.options.data[h.data.indexOf(d)]=d.options,d.setState(o&&"select"),l||g.getSelectedPoints().forEach(function(p){let f=p.series;p.selected&&p!==d&&(p.selected=p.options.selected=!1,f.options.data[f.data.indexOf(p)]=p.options,p.setState(g.hoverPoints&&f.options.inactiveOtherPoints?"inactive":""),p.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver(o){let{inverted:l,pointer:d}=this.series.chart;d&&(o=o?d.normalize(o):d.getChartCoordinatesFromPoint(this,l),d.runPointActions(o,this))}onMouseOut(){let o=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(o.hoverPoints||[]).forEach(function(l){l.setState()}),o.hoverPoints=o.hoverPoint=null}manageEvent(o){let l=_y(this.series.options.point,this.options),d=l.events?.[o];TT(d)&&(!this.hcEvents?.[o]||this.hcEvents?.[o]?.map(h=>h.fn).indexOf(d)===-1)?(this.importedUserEvent?.(),this.importedUserEvent=ET(this,o,d),this.hcEvents&&(this.hcEvents[o].userEvent=!0)):this.importedUserEvent&&!d&&this.hcEvents?.[o]&&this.hcEvents?.[o].userEvent&&(By(this,o),delete this.hcEvents[o],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState(o,l){let d=this.series,h=this.state,g=d.options.states[o||"normal"]||{},p=ST.plotOptions[d.type].marker&&d.options.marker,f=p&&p.enabled===!1,m=p&&p.states&&p.states[o||"normal"]||{},w=m.enabled===!1,S=this.marker||{},y=d.chart,E=p&&d.markerAttribs,M=d.halo,R,T,F,I=d.stateMarkerGraphic,P;if((o=o||"")===this.state&&!l||this.selected&&o!=="select"||g.enabled===!1||o&&(w||f&&m.enabled===!1)||o&&S.states&&S.states[o]&&S.states[o].enabled===!1)return;if(this.state=o,E&&(R=d.markerAttribs(this,o)),this.graphic&&!this.hasMockGraphic){if(h&&this.graphic.removeClass("highcharts-point-"+h),o&&this.graphic.addClass("highcharts-point-"+o),!y.styledMode){T=d.pointAttribs(this,o),F=Ar(y.options.chart.animation,g.animation);let z=T.opacity;d.options.inactiveOtherPoints&&Fr(z)&&(this.dataLabels||[]).forEach(function(V){V&&!V.hasClass("highcharts-data-label-hidden")&&(V.animate({opacity:z},F),V.connector&&V.connector.animate({opacity:z},F))}),this.graphic.animate(T,F)}R&&this.graphic.animate(R,Ar(y.options.chart.animation,m.animation,p.animation)),I&&I.hide()}else o&&m&&(P=S.symbol||d.symbol,I&&I.currentSymbol!==P&&(I=I.destroy()),R&&(I?I[l?"animate":"attr"]({x:R.x,y:R.y}):P&&(d.stateMarkerGraphic=I=y.renderer.symbol(P,R.x,R.y,R.width,R.height,_y(p,m)).add(d.markerGroup),I.currentSymbol=P)),!y.styledMode&&I&&this.state!=="inactive"&&I.attr(d.pointAttribs(this,o))),I&&(I[o&&this.isInside?"show":"hide"](),I.element.point=this,I.addClass(this.getClassName(),!0));let k=g.halo,H=this.graphic||I,j=H&&H.visibility||"inherit";k&&k.size&&H&&j!=="hidden"&&!this.isCluster?(M||(d.halo=M=y.renderer.path().add(H.parentGroup)),M.show()[l?"animate":"attr"]({d:this.haloPath(k.size)}),M.attr({class:"highcharts-halo highcharts-color-"+Ar(this.colorIndex,d.colorIndex)+(this.className?" "+this.className:""),visibility:j,zIndex:-1}),M.point=this,y.styledMode||M.attr(ed({fill:this.color||d.color,"fill-opacity":k.opacity},Ct.filterUserAttributes(k.attributes||{})))):M?.point?.haloPath&&!M.point.destroyed&&M.animate({d:M.point.haloPath(0)},null,M.hide),Ug(this,"afterSetState",{state:o})}haloPath(o){let l=this.pos();return l?this.series.chart.renderer.symbols.circle(DT(l[0],1)-o,l[1]-o,2*o,2*o):[]}}let Pr=el,{parse:PT}=Ht,{charts:$g,composed:kT,isTouchDevice:OT}=G,{addEvent:sn,attr:LT,css:qg,extend:Kg,find:Vy,fireEvent:kr,isNumber:id,isObject:nd,objectEach:NT,offset:_T,pick:Sn,pushUnique:BT,splat:Hy}=ce;class qt{applyInactiveState(o){let l=[],d;(o||[]).forEach(function(h){d=h.series,l.push(d),d.linkedParent&&l.push(d.linkedParent),d.linkedSeries&&(l=l.concat(d.linkedSeries)),d.navigatorSeries&&l.push(d.navigatorSeries)}),this.chart.series.forEach(function(h){l.indexOf(h)===-1?h.setState("inactive",!0):h.options.inactiveOtherPoints&&h.setAllPointsToState("inactive")})}destroy(){let o=this;this.eventsToUnbind.forEach(l=>l()),this.eventsToUnbind=[],!G.chartCount&&(qt.unbindDocumentMouseUp.forEach(l=>l.unbind()),qt.unbindDocumentMouseUp.length=0,qt.unbindDocumentTouchEnd&&(qt.unbindDocumentTouchEnd=qt.unbindDocumentTouchEnd())),clearInterval(o.tooltipTimeout),NT(o,function(l,d){o[d]=void 0})}getSelectionMarkerAttrs(o,l){let d={args:{chartX:o,chartY:l},attrs:{},shapeType:"rect"};return kr(this,"getSelectionMarkerAttrs",d,h=>{let g,{chart:p,zoomHor:f,zoomVert:m}=this,{mouseDownX:w=0,mouseDownY:S=0}=p,y=h.attrs;y.x=p.plotLeft,y.y=p.plotTop,y.width=f?1:p.plotWidth,y.height=m?1:p.plotHeight,f&&(g=o-w,y.width=Math.max(1,Math.abs(g)),y.x=(g>0?0:g)+w),m&&(g=l-S,y.height=Math.max(1,Math.abs(g)),y.y=(g>0?0:g)+S)}),d}drag(o){let{chart:l}=this,{mouseDownX:d=0,mouseDownY:h=0}=l,{panning:g,panKey:p,selectionMarkerFill:f}=l.options.chart,m=l.plotLeft,w=l.plotTop,S=l.plotWidth,y=l.plotHeight,E=nd(g)?g.enabled:g,M=p&&o[`${p}Key`],R=o.chartX,T=o.chartY,F,I=this.selectionMarker;if((!I||!I.touch)&&(R<m?R=m:R>m+S&&(R=m+S),T<w?T=w:T>w+y&&(T=w+y),this.hasDragged=Math.sqrt(Math.pow(d-R,2)+Math.pow(h-T,2)),this.hasDragged>10)){F=l.isInsidePlot(d-m,h-w,{visiblePlotOnly:!0});let{shapeType:P,attrs:k}=this.getSelectionMarkerAttrs(R,T);(l.hasCartesianSeries||l.mapView)&&this.hasZoom&&F&&!M&&!I&&(this.selectionMarker=I=l.renderer[P](),I.attr({class:"highcharts-selection-marker",zIndex:7}).add(),l.styledMode||I.attr({fill:f||PT("#334eff").setOpacity(.25).get()})),I&&I.attr(k),F&&!I&&E&&l.pan(o,g)}}dragStart(o){let l=this.chart;l.mouseIsDown=o.type,l.cancelClick=!1,l.mouseDownX=o.chartX,l.mouseDownY=o.chartY}getSelectionBox(o){let l={args:{marker:o},result:o.getBBox()};return kr(this,"getSelectionBox",l),l.result}drop(o){let l,{chart:d,selectionMarker:h}=this;for(let g of d.axes)g.isPanning&&(g.isPanning=!1,(g.options.startOnTick||g.options.endOnTick||g.series.some(p=>p.boosted))&&(g.forceRedraw=!0,g.setExtremes(g.userMin,g.userMax,!1),l=!0));if(l&&d.redraw(),h&&o){if(this.hasDragged){let g=this.getSelectionBox(h);d.transform({axes:d.axes.filter(p=>p.zoomEnabled&&(p.coll==="xAxis"&&this.zoomX||p.coll==="yAxis"&&this.zoomY)),selection:q({originalEvent:o,xAxis:[],yAxis:[]},g),from:g})}id(d.index)&&(this.selectionMarker=h.destroy())}d&&id(d.index)&&(qg(d.container,{cursor:d._cursor}),d.cancelClick=this.hasDragged>10,d.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[])}findNearestKDPoint(o,l,d){let h;return o.forEach(function(g){let p=!(g.noSharedTooltip&&l)&&0>g.options.findNearestPointBy.indexOf("y"),f=g.searchPoint(d,p);nd(f,!0)&&f.series&&(!nd(h,!0)||function(m,w){let S=m.distX-w.distX,y=m.dist-w.dist,E=w.series.group?.zIndex-m.series.group?.zIndex;return S!==0&&l?S:y!==0?y:E!==0?E:m.series.index>w.series.index?-1:1}(h,f)>0)&&(h=f)}),h}getChartCoordinatesFromPoint(o,l){let{xAxis:d,yAxis:h}=o.series,g=o.shapeArgs;if(d&&h){let p=o.clientX??o.plotX??0,f=o.plotY||0;return o.isNode&&g&&id(g.x)&&id(g.y)&&(p=g.x,f=g.y),l?{chartX:h.len+h.pos-f,chartY:d.len+d.pos-p}:{chartX:p+d.pos,chartY:f+h.pos}}if(g&&g.x&&g.y)return{chartX:g.x,chartY:g.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:o}=this.chart,l=_T(o);this.chartPosition={left:l.left,top:l.top,scaleX:1,scaleY:1};let{offsetHeight:d,offsetWidth:h}=o;return h>2&&d>2&&(this.chartPosition.scaleX=l.width/h,this.chartPosition.scaleY=l.height/d),this.chartPosition}getCoordinates(o){let l={xAxis:[],yAxis:[]};for(let d of this.chart.axes)l[d.isXAxis?"xAxis":"yAxis"].push({axis:d,value:d.toValue(o[d.horiz?"chartX":"chartY"])});return l}getHoverData(o,l,d,h,g,p){let f=[],m=function(M){return M.visible&&!(!g&&M.directTouch)&&Sn(M.options.enableMouseTracking,!0)},w=l,S,y={chartX:p?p.chartX:void 0,chartY:p?p.chartY:void 0,shared:g};kr(this,"beforeGetHoverData",y),S=w&&!w.stickyTracking?[w]:d.filter(M=>M.stickyTracking&&(y.filter||m)(M));let E=h&&o||!p?o:this.findNearestKDPoint(S,g,p);return w=E&&E.series,E&&(g&&!w.noSharedTooltip?(S=d.filter(function(M){return y.filter?y.filter(M):m(M)&&!M.noSharedTooltip})).forEach(function(M){let R=Vy(M.points,function(T){return T.x===E.x&&!T.isNull});nd(R)&&(M.boosted&&M.boost&&(R=M.boost.getPoint(R)),f.push(R))}):f.push(E)),kr(this,"afterGetHoverData",y={hoverPoint:E}),{hoverPoint:y.hoverPoint,hoverSeries:w,hoverPoints:f}}getPointFromEvent(o){let l=o.target,d;for(;l&&!d;)d=l.point,l=l.parentNode;return d}onTrackerMouseOut(o){let l=this.chart,d=o.relatedTarget,h=l.hoverSeries;this.isDirectTouch=!1,!h||!d||h.stickyTracking||this.inClass(d,"highcharts-tooltip")||this.inClass(d,"highcharts-series-"+h.index)&&this.inClass(d,"highcharts-tracker")||h.onMouseOut()}inClass(o,l){let d=o,h;for(;d;){if(h=LT(d,"class")){if(h.indexOf(l)!==-1)return!0;if(h.indexOf("highcharts-container")!==-1)return!1}d=d.parentElement}}constructor(o,l){this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=l,this.chart=o,this.runChartClick=!!l.chart.events?.click,this.pinchDown=[],this.setDOMEvents(),kr(this,"afterInit")}normalize(o,l){let d=o.touches,h=d?d.length?d.item(0):Sn(d.changedTouches,o.changedTouches)[0]:o;l||(l=this.getChartPosition());let g=h.pageX-l.left,p=h.pageY-l.top;return Kg(o,{chartX:Math.round(g/=l.scaleX),chartY:Math.round(p/=l.scaleY)})}onContainerClick(o){let l=this.chart,d=l.hoverPoint,h=this.normalize(o),g=l.plotLeft,p=l.plotTop;!l.cancelClick&&(d&&this.inClass(h.target,"highcharts-tracker")?(kr(d.series,"click",Kg(h,{point:d})),l.hoverPoint&&d.firePointEvent("click",h)):(Kg(h,this.getCoordinates(h)),l.isInsidePlot(h.chartX-g,h.chartY-p,{visiblePlotOnly:!0})&&kr(l,"click",h)))}onContainerMouseDown(o){let l=(1&(o.buttons||o.button))==1;o=this.normalize(o),G.isFirefox&&o.button!==0&&this.onContainerMouseMove(o),(o.button===void 0||l)&&(this.zoomOption(o),l&&o.preventDefault?.(),this.dragStart(o))}onContainerMouseLeave(o){let{pointer:l}=$g[Sn(qt.hoverChartIndex,-1)]||{};o=this.normalize(o),this.onContainerMouseMove(o),l&&!this.inClass(o.relatedTarget,"highcharts-tooltip")&&(l.reset(),l.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(o){let l=this.chart,d=l.tooltip,h=this.normalize(o);this.setHoverChartIndex(o),(l.mouseIsDown==="mousedown"||this.touchSelect(h))&&this.drag(h),!l.openMenu&&(this.inClass(h.target,"highcharts-tracker")||l.isInsidePlot(h.chartX-l.plotLeft,h.chartY-l.plotTop,{visiblePlotOnly:!0}))&&!(d&&d.shouldStickOnContact(h))&&(this.inClass(h.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(h))}onDocumentTouchEnd(o){this.onDocumentMouseUp(o)}onContainerTouchMove(o){this.touchSelect(o)?this.onContainerMouseMove(o):this.touch(o)}onContainerTouchStart(o){this.touchSelect(o)?this.onContainerMouseDown(o):(this.zoomOption(o),this.touch(o,!0))}onDocumentMouseMove(o){let l=this.chart,d=l.tooltip,h=this.chartPosition,g=this.normalize(o,h);!h||l.isInsidePlot(g.chartX-l.plotLeft,g.chartY-l.plotTop,{visiblePlotOnly:!0})||d&&d.shouldStickOnContact(g)||g.target!==l.container.ownerDocument&&this.inClass(g.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(o){$g[Sn(qt.hoverChartIndex,-1)]?.pointer?.drop(o)}pinch(o){let l=this,{chart:d,hasZoom:h,lastTouches:g}=l,p=[].map.call(o.touches||[],y=>l.normalize(y)),f=p.length,m=f===1&&(l.inClass(o.target,"highcharts-tracker")&&d.runTrackerClick||l.runChartClick),w=d.tooltip,S=f===1&&Sn(w?.options.followTouchMove,!0);f>1?l.initiated=!0:S&&(l.initiated=!1),h&&l.initiated&&!m&&o.cancelable!==!1&&o.preventDefault(),o.type==="touchstart"?(l.pinchDown=p,l.res=!0,d.mouseDownX=o.chartX):S?this.runPointActions(l.normalize(o)):g&&(kr(d,"touchpan",{originalEvent:o,touches:p},()=>{let y=E=>{let M=E[0],R=E[1]||M;return{x:M.chartX,y:M.chartY,width:R.chartX-M.chartX,height:R.chartY-M.chartY}};d.transform({axes:d.axes.filter(E=>E.zoomEnabled&&(this.zoomHor&&E.horiz||this.zoomVert&&!E.horiz)),to:y(p),from:y(g),trigger:o.type})}),l.res&&(l.res=!1,this.reset(!1,0))),l.lastTouches=p}reset(o,l){let d=this.chart,h=d.hoverSeries,g=d.hoverPoint,p=d.hoverPoints,f=d.tooltip,m=f&&f.shared?p:g;o&&m&&Hy(m).forEach(function(w){w.series.isCartesian&&w.plotX===void 0&&(o=!1)}),o?f&&m&&Hy(m).length&&(f.refresh(m),f.shared&&p?p.forEach(function(w){w.setState(w.state,!0),w.series.isCartesian&&(w.series.xAxis.crosshair&&w.series.xAxis.drawCrosshair(null,w),w.series.yAxis.crosshair&&w.series.yAxis.drawCrosshair(null,w))}):g&&(g.setState(g.state,!0),d.axes.forEach(function(w){w.crosshair&&g.series[w.coll]===w&&w.drawCrosshair(null,g)}))):(g&&g.onMouseOut(),p&&p.forEach(function(w){w.setState()}),h&&h.onMouseOut(),f&&f.hide(l),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),d.axes.forEach(function(w){w.hideCrosshair()}),d.hoverPoints=d.hoverPoint=void 0)}runPointActions(o,l,d){let h=this.chart,g=h.series,p=h.tooltip&&h.tooltip.options.enabled?h.tooltip:void 0,f=!!p&&p.shared,m=l||h.hoverPoint,w=m&&m.series||h.hoverSeries,S=(!o||o.type!=="touchmove")&&(!!l||w&&w.directTouch&&this.isDirectTouch),y=this.getHoverData(m,w,g,S,f,o);m=y.hoverPoint,w=y.hoverSeries;let E=y.hoverPoints,M=w&&w.tooltipOptions.followPointer&&!w.tooltipOptions.split,R=f&&w&&!w.noSharedTooltip;if(m&&(d||m!==h.hoverPoint||p&&p.isHidden)){if((h.hoverPoints||[]).forEach(function(T){E.indexOf(T)===-1&&T.setState()}),h.hoverSeries!==w&&w.onMouseOver(),this.applyInactiveState(E),(E||[]).forEach(function(T){T.setState("hover")}),h.hoverPoint&&h.hoverPoint.firePointEvent("mouseOut"),!m.series)return;h.hoverPoints=E,h.hoverPoint=m,m.firePointEvent("mouseOver",void 0,()=>{p&&m&&p.refresh(R?E:m,o)})}else if(M&&p&&!p.isHidden){let T=p.getAnchor([{}],o);h.isInsidePlot(T[0],T[1],{visiblePlotOnly:!0})&&p.updatePosition({plotX:T[0],plotY:T[1]})}this.unDocMouseMove||(this.unDocMouseMove=sn(h.container.ownerDocument,"mousemove",T=>$g[qt.hoverChartIndex??-1]?.pointer?.onDocumentMouseMove(T)),this.eventsToUnbind.push(this.unDocMouseMove)),h.axes.forEach(function(T){let F,I=Sn((T.crosshair||{}).snap,!0);!I||(F=h.hoverPoint)&&F.series[T.coll]===T||(F=Vy(E,P=>P.series&&P.series[T.coll]===T)),F||!I?T.drawCrosshair(o,F):T.hideCrosshair()})}setDOMEvents(){let o=this.chart.container,l=o.ownerDocument;o.onmousedown=this.onContainerMouseDown.bind(this),o.onmousemove=this.onContainerMouseMove.bind(this),o.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(sn(o,"mouseenter",this.onContainerMouseEnter.bind(this)),sn(o,"mouseleave",this.onContainerMouseLeave.bind(this))),qt.unbindDocumentMouseUp.some(h=>h.doc===l)||qt.unbindDocumentMouseUp.push({doc:l,unbind:sn(l,"mouseup",this.onDocumentMouseUp.bind(this))});let d=this.chart.renderTo.parentElement;for(;d&&d.tagName!=="BODY";)this.eventsToUnbind.push(sn(d,"scroll",()=>{delete this.chartPosition})),d=d.parentElement;this.eventsToUnbind.push(sn(o,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),sn(o,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),qt.unbindDocumentTouchEnd||(qt.unbindDocumentTouchEnd=sn(l,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),sn(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){if(!OT)return;let o=this.pointerCaptureEventsToUnbind,l=this.chart,d=l.container,h=Sn(l.options.tooltip?.followTouchMove,!0)&&l.series.some(g=>g.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&h?(o.push(sn(d,"pointerdown",g=>{g.target?.hasPointerCapture(g.pointerId)&&g.target?.releasePointerCapture(g.pointerId)}),sn(d,"pointermove",g=>{l.pointer?.getPointFromEvent(g)?.onMouseOver(g)})),l.styledMode||qg(d,{"touch-action":"none"}),d.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!h&&(o.forEach(g=>g()),o.length=0,l.styledMode||qg(d,{"touch-action":Sn(l.options.chart.style?.["touch-action"],"manipulation")}),d.className=d.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(o){let l=this.chart,d=G.charts[Sn(qt.hoverChartIndex,-1)];if(d&&d!==l){let h={relatedTarget:l.container};o&&!o?.relatedTarget&&(o=q(q({},h),o)),d.pointer?.onContainerMouseLeave(o||h)}d&&d.mouseIsDown||(qt.hoverChartIndex=l.index)}touch(o,l){let d,{chart:h,pinchDown:g=[]}=this;this.setHoverChartIndex(),(o=this.normalize(o)).touches.length===1?h.isInsidePlot(o.chartX-h.plotLeft,o.chartY-h.plotTop,{visiblePlotOnly:!0})&&!h.openMenu?(l&&this.runPointActions(o),o.type==="touchmove"&&(d=!!g[0]&&Math.pow(g[0].chartX-o.chartX,2)+Math.pow(g[0].chartY-o.chartY,2)>=16),Sn(d,!0)&&this.pinch(o)):l&&this.reset():o.touches.length===2&&this.pinch(o)}touchSelect(o){return!!(this.chart.zooming.singleTouch&&o.touches&&o.touches.length===1)}zoomOption(o){let l=this.chart,d=l.inverted,h=l.zooming.type||"",g,p;/touch/.test(o.type)&&(h=Sn(l.zooming.pinchType,h)),this.zoomX=g=/x/.test(h),this.zoomY=p=/y/.test(h),this.zoomHor=g&&!d||p&&d,this.zoomVert=p&&!d||g&&d,this.hasZoom=g||p}}qt.unbindDocumentMouseUp=[],function(C){C.compose=function(o){BT(kT,"Core.Pointer")&&sn(o,"beforeRender",function(){this.pointer=new C(this,this.options)})}}(qt||(qt={}));let Gy=qt,{fireEvent:zy,isArray:VT,objectEach:rd,uniqueKey:sd}=ce,od=class{constructor(C={}){this.autoId=!C.id,this.columns={},this.id=C.id||sd(),this.modified=this,this.rowCount=0,this.versionTag=sd();let o=0;rd(C.columns||{},(l,d)=>{this.columns[d]=l.slice(),o=Math.max(o,l.length)}),this.applyRowCount(o)}applyRowCount(C){this.rowCount=C,rd(this.columns,o=>{VT(o)&&(o.length=C)})}getColumn(C,o){return this.columns[C]}getColumns(C,o){return(C||Object.keys(this.columns)).reduce((l,d)=>(l[d]=this.columns[d],l),{})}getRow(C,o){return(o||Object.keys(this.columns)).map(l=>this.columns[l]?.[C])}setColumn(C,o=[],l=0,d){this.setColumns({[C]:o},l,d)}setColumns(C,o,l){let d=this.rowCount;rd(C,(h,g)=>{this.columns[g]=h.slice(),d=h.length}),this.applyRowCount(d),l?.silent||(zy(this,"afterSetColumns"),this.versionTag=sd())}setRow(C,o=this.rowCount,l,d){let{columns:h}=this,g=l?this.rowCount+1:o+1;rd(C,(p,f)=>{let m=h[f]||d?.addColumns!==!1&&Array(g);m&&(l?m.splice(o,0,p):m[o]=p,h[f]=m)}),g>this.rowCount&&this.applyRowCount(g),d?.silent||(zy(this,"afterSetRows"),this.versionTag=sd())}},{extend:HT,merge:GT,pick:Wy}=ce;(function(C){function o(l,d,h){let g=this.legendItem=this.legendItem||{},{chart:p,options:f}=this,{baseline:m=0,symbolWidth:w,symbolHeight:S}=l,y=this.symbol||"circle",E=S/2,M=p.renderer,R=g.group,T=m-Math.round((l.fontMetrics?.b||S)*(h?.4:.3)),F={},I,P=f.marker,k=0;if(p.styledMode||(F["stroke-width"]=Math.min(f.lineWidth||0,24),f.dashStyle?F.dashstyle=f.dashStyle:f.linecap==="square"||(F["stroke-linecap"]="round")),g.line=M.path().addClass("highcharts-graph").attr(F).add(R),h&&(g.area=M.path().addClass("highcharts-area").add(R)),F["stroke-linecap"]&&(k=Math.min(g.line.strokeWidth(),w)/2),w){let H=[["M",k,T],["L",w-k,T]];g.line.attr({d:H}),g.area?.attr({d:[...H,["L",w-k,m],["L",k,m]]})}if(P&&P.enabled!==!1&&w){let H=Math.min(Wy(P.radius,E),E);y.indexOf("url")===0&&(P=GT(P,{width:S,height:S}),H=0),g.symbol=I=M.symbol(y,w/2-H,T-H,2*H,2*H,HT({context:"legend"},P)).addClass("highcharts-point").add(R),I.isMarker=!0}}C.areaMarker=function(l,d){o.call(this,l,d,!0)},C.lineMarker=o,C.rectangle=function(l,d){let h=d.legendItem||{},g=l.options,p=l.symbolHeight,f=g.squareSymbol,m=f?p:l.symbolWidth;h.symbol=this.chart.renderer.rect(f?(l.symbolWidth-p)/2:0,l.baseline-p+1,m,p,Wy(l.options.symbolRadius,p/2)).addClass("highcharts-point").attr({zIndex:3}).add(h.group)}})(b||(b={}));let jy=b,{defaultOptions:Uy}=Ci,{extend:zT,extendClass:WT,merge:jT}=ce;(function(C){function o(l,d){let h=Uy.plotOptions||{},g=d.defaultOptions,p=d.prototype;return p.type=l,p.pointClass||(p.pointClass=Pr),!C.seriesTypes[l]&&(g&&(h[l]=g),C.seriesTypes[l]=d,!0)}C.seriesTypes=G.seriesTypes,C.registerSeriesType=o,C.seriesType=function(l,d,h,g,p){let f=Uy.plotOptions||{};if(d=d||"",f[l]=jT(f[d],h),delete C.seriesTypes[l],o(l,WT(C.seriesTypes[d]||function(){},g)),C.seriesTypes[l].prototype.type=l,p){class m extends Pr{}zT(m.prototype,p),C.seriesTypes[l].prototype.pointClass=m}return C.seriesTypes[l]}})(x||(x={}));let Tt=x,{animObject:$y,setAnimation:UT}=ii,{defaultOptions:ad}=Ci,{registerEventOptions:$T}=Uc,{svg:qT,win:KT}=G,{seriesTypes:Fo}=Tt,{arrayMax:Yg,arrayMin:qy,clamp:Ky,correctFloat:Yy,crisp:YT,defined:Kt,destroyObjectProperties:XT,diffObjects:ZT,erase:Xy,error:ld,extend:Ao,find:QT,fireEvent:wt,getClosestDistance:JT,getNestedProperty:Zy,insertItem:Qy,isArray:Jy,isNumber:ei,isString:eF,merge:Po,objectEach:Xg,pick:yt,removeEvent:tF,syncTimeout:e0}=ce;class ko{constructor(){this.zoneAxis="y"}init(o,l){let d;wt(this,"init",{options:l}),this.dataTable??(this.dataTable=new od);let h=o.series;this.eventsToUnbind=[],this.chart=o,this.options=this.setOptions(l);let g=this.options,p=g.visible!==!1;this.linkedSeries=[],this.bindAxes(),Ao(this,{name:g.name,state:"",visible:p,selected:g.selected===!0}),$T(this,g);let f=g.events;(f&&f.click||g.point&&g.point.events&&g.point.events.click||g.allowPointSelect)&&(o.runTrackerClick=!0),this.getColor(),this.getSymbol(),this.isCartesian&&(o.hasCartesianSeries=!0),h.length&&(d=h[h.length-1]),this._i=yt(d&&d._i,-1)+1,this.opacity=this.options.opacity,o.orderItems("series",Qy(this,h)),g.dataSorting&&g.dataSorting.enabled?this.setDataSortingOptions():this.points||this.data||this.setData(g.data,!1),wt(this,"afterInit")}is(o){return Fo[o]&&this instanceof Fo[o]}bindAxes(){let o,l=this,d=l.options,h=l.chart;wt(this,"bindAxes",null,function(){(l.axisTypes||[]).forEach(function(g){(h[g]||[]).forEach(function(p){o=p.options,(yt(d[g],0)===p.index||d[g]!==void 0&&d[g]===o.id)&&(Qy(l,p.series),l[g]=p,p.isDirty=!0)}),l[g]||l.optionalAxis===g||ld(18,!0,h)})}),wt(this,"afterBindAxes")}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.dataTable.rowCount>0}hasMarkerChanged(o,l){let d=o.marker,h=l.marker||{};return d&&(h.enabled&&!d.enabled||h.symbol!==d.symbol||h.height!==d.height||h.width!==d.width)}autoIncrement(o){let l,d=this.options,{pointIntervalUnit:h,relativeXValue:g}=this.options,p=this.chart.time,f=this.xIncrement??p.parse(d.pointStart)??0;if(this.pointInterval=l=yt(this.pointInterval,d.pointInterval,1),g&&ei(o)&&(l*=o),h){let m=p.toParts(f);h==="day"?m[2]+=l:h==="month"?m[1]+=l:h==="year"&&(m[0]+=l),l=p.makeTime.apply(p,m)-f}return g&&ei(o)?f+l:(this.xIncrement=f+l,f)}setDataSortingOptions(){let o=this.options;Ao(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),Kt(o.pointRange)||(o.pointRange=1)}setOptions(o){let l,d=this.chart,h=d.options.plotOptions,g=d.userOptions||{},p=Po(o),f=d.styledMode,m={plotOptions:h,userOptions:p};wt(this,"setOptions",m);let w=m.plotOptions[this.type],S=g.plotOptions||{},y=S.series||{},E=ad.plotOptions[this.type]||{},M=S[this.type]||{};this.userOptions=m.userOptions;let R=Po(w,h.series,M,p);this.tooltipOptions=Po(ad.tooltip,ad.plotOptions.series?.tooltip,E?.tooltip,d.userOptions.tooltip,S.series?.tooltip,M.tooltip,p.tooltip),this.stickyTracking=yt(p.stickyTracking,M.stickyTracking,y.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||R.stickyTracking),w.marker===null&&delete R.marker,this.zoneAxis=R.zoneAxis||"y";let T=this.zones=(R.zones||[]).map(F=>q({},F));return(R.negativeColor||R.negativeFillColor)&&!R.zones&&(l={value:R[this.zoneAxis+"Threshold"]||R.threshold||0,className:"highcharts-negative"},f||(l.color=R.negativeColor,l.fillColor=R.negativeFillColor),T.push(l)),T.length&&Kt(T[T.length-1].value)&&T.push(f?{}:{color:this.color,fillColor:this.fillColor}),wt(this,"afterSetOptions",{options:R}),R}getName(){return yt(this.options.name,"Series "+(this.index+1))}getCyclic(o,l,d){let h,g,p=this.chart,f=`${o}Index`,m=`${o}Counter`,w=d?.length||p.options.chart.colorCount;!l&&(Kt(g=yt(o==="color"?this.options.colorIndex:void 0,this[f]))?h=g:(p.series.length||(p[m]=0),h=p[m]%w,p[m]+=1),d&&(l=d[h])),h!==void 0&&(this[f]=h),this[o]=l}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||ad.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let o=this.options.marker;this.getCyclic("symbol",o.symbol,this.chart.options.symbols)}getColumn(o,l){return(l?this.dataTable.modified:this.dataTable).getColumn(o,!0)||[]}findPointIndex(o,l){let d,h,g,p=o.id,f=o.x,m=this.points,w=this.options.dataSorting;if(p){let S=this.chart.get(p);S instanceof Pr&&(d=S)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let S=y=>!y.touched&&y.index===o.index;if(w&&w.matchByName?S=y=>!y.touched&&y.name===o.name:this.options.relativeXValue&&(S=y=>!y.touched&&y.options.x===o.x),!(d=QT(m,S)))return}return d&&(g=d&&d.index)!==void 0&&(h=!0),g===void 0&&ei(f)&&(g=this.getColumn("x").indexOf(f,l)),g!==-1&&g!==void 0&&this.cropped&&(g=g>=this.cropStart?g-this.cropStart:g),!h&&ei(g)&&m[g]&&m[g].touched&&(g=void 0),g}updateData(o,l){let d=this.options,h=d.dataSorting,g=this.points,p=[],f=this.requireSorting,m=o.length===g.length,w,S,y,E,M=!0;if(this.xIncrement=null,o.forEach(function(T,F){let I,P=Kt(T)&&this.pointClass.prototype.optionsToObject.call({series:this},T)||{},k=P.x;P.id||ei(k)?((I=this.findPointIndex(P,E))===-1||I===void 0?p.push(T):g[I]&&T!==d.data[I]?(g[I].update(T,!1,null,!1),g[I].touched=!0,f&&(E=I+1)):g[I]&&(g[I].touched=!0),(!m||F!==I||h&&h.enabled||this.hasDerivedData)&&(w=!0)):p.push(T)},this),w)for(S=g.length;S--;)(y=g[S])&&!y.touched&&y.remove&&y.remove(!1,l);else!m||h&&h.enabled?M=!1:(o.forEach(function(T,F){T===g[F].y||g[F].destroyed||g[F].update(T,!1,null,!1)}),p.length=0);if(g.forEach(function(T){T&&(T.touched=!1)}),!M)return!1;p.forEach(function(T){this.addPoint(T,!1,null,null,!1)},this);let R=this.getColumn("x");return this.xIncrement===null&&R.length&&(this.xIncrement=Yg(R),this.autoIncrement()),!0}dataColumnKeys(){return["x",...this.pointArrayMap||["y"]]}setData(o,l=!0,d,h){let g=this.points,p=g&&g.length||0,f=this.options,m=this.chart,w=f.dataSorting,S=this.xAxis,y=f.turboThreshold,E=this.dataTable,M=this.dataColumnKeys(),R=this.pointValKey||"y",T=(this.pointArrayMap||[]).length,F=f.keys,I,P,k=0,H=1,j;m.options.chart.allowMutatingData||(f.data&&delete this.options.data,this.userOptions.data&&delete this.userOptions.data,j=Po(!0,o));let z=(o=j||o||[]).length;if(w&&w.enabled&&(o=this.sortData(o)),m.options.chart.allowMutatingData&&h!==!1&&z&&p&&!this.cropped&&!this.hasGroupedData&&this.visible&&!this.boosted&&(P=this.updateData(o,d)),!P){this.xIncrement=null,this.colorCounter=0;let V=y&&z>y;if(V){let W=this.getFirstValidPoint(o),X=this.getFirstValidPoint(o,z-1,-1),Q=te=>!!(Jy(te)&&(F||ei(te[0])));if(ei(W)&&ei(X)){let te=[],de=[];for(let le of o)te.push(this.autoIncrement()),de.push(le);E.setColumns({x:te,[R]:de})}else if(Q(W)&&Q(X))if(T){let te=W.length===T?1:0,de=Array(M.length).fill(0).map(()=>[]);for(let le of o){te&&de[0].push(this.autoIncrement());for(let ge=te;ge<=T;ge++)de[ge]?.push(le[ge-te])}E.setColumns(M.reduce((le,ge,me)=>(le[ge]=de[me],le),{}))}else{F&&(k=F.indexOf("x"),H=F.indexOf("y"),k=k>=0?k:0,H=H>=0?H:1),W.length===1&&(H=0);let te=[],de=[];if(k===H)for(let le of o)te.push(this.autoIncrement()),de.push(le[H]);else for(let le of o)te.push(le[k]),de.push(le[H]);E.setColumns({x:te,[R]:de})}else V=!1}if(!V){let W=M.reduce((X,Q)=>(X[Q]=[],X),{});for(I=0;I<z;I++){let X=this.pointClass.prototype.applyOptions.apply({series:this},[o[I]]);for(let Q of M)W[Q][I]=X[Q]}E.setColumns(W)}for(eF(this.getColumn("y")[0])&&ld(14,!0,m),this.data=[],this.options.data=this.userOptions.data=o,I=p;I--;)g[I]?.destroy();S&&(S.minRange=S.userMinRange),this.isDirty=m.isDirtyBox=!0,this.isDirtyData=!!g,d=!1}f.legendType==="point"&&(this.processData(),this.generatePoints()),l&&m.redraw(d)}sortData(o){let l=this,d=l.options.dataSorting.sortKey||"y",h=function(g,p){return Kt(p)&&g.pointClass.prototype.optionsToObject.call({series:g},p)||{}};return o.forEach(function(g,p){o[p]=h(l,g),o[p].index=p},this),o.concat().sort((g,p)=>{let f=Zy(d,g),m=Zy(d,p);return m<f?-1:m>f?1:0}).forEach(function(g,p){g.x=p},this),l.linkedSeries&&l.linkedSeries.forEach(function(g){let p=g.options,f=p.data;p.dataSorting&&p.dataSorting.enabled||!f||(f.forEach(function(m,w){f[w]=h(g,m),o[w]&&(f[w].x=o[w].x,f[w].index=w)}),g.setData(f,!1))}),o}getProcessedData(o){let l=this,{dataTable:d,isCartesian:h,options:g,xAxis:p}=l,f=g.cropThreshold,m=o||l.getExtremesFromAll,w=p?.logarithmic,S=d.rowCount,y,E,M=0,R,T,F,I=l.getColumn("x"),P=d,k=!1;return p&&(T=(R=p.getExtremes()).min,F=R.max,k=!!(p.categories&&!p.names.length),h&&l.sorted&&!m&&(!f||S>f||l.forceCrop)&&(I[S-1]<T||I[0]>F?P=new od:l.getColumn(l.pointValKey||"y").length&&(I[0]<T||I[S-1]>F)&&(P=(y=this.cropData(d,T,F)).modified,M=y.start,E=!0))),I=P.getColumn("x")||[],{modified:P,cropped:E,cropStart:M,closestPointRange:JT([w?I.map(w.log2lin):I],()=>l.requireSorting&&!k&&ld(15,!1,l.chart))}}processData(o){let l=this.xAxis,d=this.dataTable;if(this.isCartesian&&!this.isDirty&&!l.isDirty&&!this.yAxis.isDirty&&!o)return!1;let h=this.getProcessedData();d.modified=h.modified,this.cropped=h.cropped,this.cropStart=h.cropStart,this.closestPointRange=this.basePointRange=h.closestPointRange,wt(this,"afterProcessData")}cropData(o,l,d){let h=o.getColumn("x",!0)||[],g=h.length,p={},f,m,w=0,S=g;for(f=0;f<g;f++)if(h[f]>=l){w=Math.max(0,f-1);break}for(m=f;m<g;m++)if(h[m]>d){S=m+1;break}for(let y of this.dataColumnKeys()){let E=o.getColumn(y,!0);E&&(p[y]=E.slice(w,S))}return{modified:new od({columns:p}),start:w,end:S}}generatePoints(){let o=this.options,l=this.processedData||o.data,d=this.dataTable.modified,h=this.getColumn("x",!0),g=this.pointClass,p=d.rowCount,f=this.cropStart||0,m=this.hasGroupedData,w=o.keys,S=[],y=o.dataGrouping&&o.dataGrouping.groupAll?f:0,E=this.xAxis?.categories,M=this.pointArrayMap||["y"],R=this.dataColumnKeys(),T,F,I,P,k=this.data,H;if(!k&&!m){let j=[];j.length=l?.length||0,k=this.data=j}for(w&&m&&(this.options.keys=!1),P=0;P<p;P++)F=f+P,m?((I=new g(this,d.getRow(P,R)||[])).dataGroup=this.groupMap[y+P],I.dataGroup?.options&&(I.options=I.dataGroup.options,Ao(I,I.dataGroup.options),delete I.dataLabels)):(I=k[F],H=l?l[F]:d.getRow(P,M),I||H===void 0||(k[F]=I=new g(this,H,h[P]))),I&&(I.index=m?y+P:F,S[P]=I,I.category=E?.[I.x]??I.x,I.key=I.name??I.category);if(this.options.keys=w,k&&(p!==(T=k.length)||m))for(P=0;P<T;P++)P!==f||m||(P+=p),k[P]&&(k[P].destroyElements(),k[P].plotX=void 0);this.data=k,this.points=S,wt(this,"afterGeneratePoints")}getXExtremes(o){return{min:qy(o),max:Yg(o)}}getExtremes(o,l){let{xAxis:d,yAxis:h}=this,g=l||this.getExtremesFromAll||this.options.getExtremesFromAll,p=g&&this.cropped?this.dataTable:this.dataTable.modified,f=p.rowCount,m=o||this.stackedYData,w=m?[m]:(this.keysAffectYAxis||this.pointArrayMap||["y"])?.map(j=>p.getColumn(j,!0)||[])||[],S=this.getColumn("x",!0),y=[],E=this.requireSorting&&!this.is("column")?1:0,M=!!h&&h.positiveValuesOnly,R=g||this.cropped||!d,T,F,I,P=0,k=0;for(d&&(P=(T=d.getExtremes()).min,k=T.max),I=0;I<f;I++)if(F=S[I],R||(S[I+E]||F)>=P&&(S[I-E]||F)<=k)for(let j of w){let z=j[I];ei(z)&&(z>0||!M)&&y.push(z)}let H={activeYData:y,dataMin:qy(y),dataMax:Yg(y)};return wt(this,"afterGetExtremes",{dataExtremes:H}),H}applyExtremes(){let o=this.getExtremes();return this.dataMin=o.dataMin,this.dataMax=o.dataMax,o}getFirstValidPoint(o,l=0,d=1){let h=o.length,g=l;for(;g>=0&&g<h;){if(Kt(o[g]))return o[g];g+=d}}translate(){this.generatePoints();let o=this.options,l=o.stacking,d=this.xAxis,h=this.enabledDataSorting,g=this.yAxis,p=this.points,f=p.length,m=this.pointPlacementToXValue(),w=!!m,S=o.threshold,y=o.startFromThreshold?S:0,E,M,R,T,F=Number.MAX_VALUE;function I(P){return Ky(P,-1e9,1e9)}for(E=0;E<f;E++){let P,k=p[E],H=k.x,j,z,V=k.y,W=k.low,X=l&&g.stacking?.stacks[(this.negStacks&&V<(y?0:S)?"-":"")+this.stackKey];M=d.translate(H,!1,!1,!1,!0,m),k.plotX=ei(M)?Yy(I(M)):void 0,l&&this.visible&&X&&X[H]&&(T=this.getStackIndicator(T,H,this.index),!k.isNull&&T.key&&(z=(j=X[H]).points[T.key]),j&&Jy(z)&&(W=z[0],V=z[1],W===y&&T.key===X[H].base&&(W=yt(ei(S)?S:g.min)),g.positiveValuesOnly&&Kt(W)&&W<=0&&(W=void 0),k.total=k.stackTotal=yt(j.total),k.percentage=Kt(k.y)&&j.total?k.y/j.total*100:void 0,k.stackY=V,this.irregularWidths||j.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),k.yBottom=Kt(W)?I(g.translate(W,!1,!0,!1,!0)):void 0,this.dataModify&&(V=this.dataModify.modifyValue(V,E)),ei(V)&&k.plotX!==void 0&&(P=ei(P=g.translate(V,!1,!0,!1,!0))?I(P):void 0),k.plotY=P,k.isInside=this.isPointInside(k),k.clientX=w?Yy(d.translate(H,!1,!1,!1,!0,m)):M,k.negative=(k.y||0)<(S||0),k.isNull||k.visible===!1||(R!==void 0&&(F=Math.min(F,Math.abs(M-R))),R=M),k.zone=this.zones.length?k.getZone():void 0,!k.graphic&&this.group&&h&&(k.isNew=!0)}this.closestPointRangePx=F,wt(this,"afterTranslate")}getValidPoints(o,l,d){let h=this.chart;return(o||this.points||[]).filter(function(g){let{plotX:p,plotY:f}=g;return!!((d||!g.isNull&&ei(f))&&(!l||h.isInsidePlot(p,f,{inverted:h.inverted})))&&g.visible!==!1})}getClipBox(){let{chart:o,xAxis:l,yAxis:d}=this,{x:h,y:g,width:p,height:f}=Po(o.clipBox);return l&&l.len!==o.plotSizeX&&(p=l.len),d&&d.len!==o.plotSizeY&&(f=d.len),o.inverted&&!this.invertible&&([p,f]=[f,p]),{x:h,y:g,width:p,height:f}}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:o,group:l,markerGroup:d}=this,h=o.sharedClips,g=o.renderer,p=this.getClipBox(),f=this.getSharedClipKey(),m=h[f];m?m.animate(p):h[f]=m=g.clipRect(p),l&&l.clip(this.options.clip===!1?void 0:m),d&&d.clip()}animate(o){let{chart:l,group:d,markerGroup:h}=this,g=l.inverted,p=$y(this.options.animation),f=[this.getSharedClipKey(),p.duration,p.easing,p.defer].join(","),m=l.sharedClips[f],w=l.sharedClips[f+"m"];if(o&&d){let S=this.getClipBox();if(m)m.attr("height",S.height);else{S.width=0,g&&(S.x=l.plotHeight),m=l.renderer.clipRect(S),l.sharedClips[f]=m;let y={x:-99,y:-99,width:g?l.plotWidth+199:99,height:g?99:l.plotHeight+199};w=l.renderer.clipRect(y),l.sharedClips[f+"m"]=w}d.clip(m),h?.clip(w)}else if(m&&!m.hasClass("highcharts-animating")){let S=this.getClipBox(),y=p.step;(h?.element.childNodes.length||l.series.length>1)&&(p.step=function(E,M){y&&y.apply(M,arguments),M.prop==="width"&&w?.element&&w.attr(g?"height":"width",E+99)}),m.addClass("highcharts-animating").animate(S,p)}}afterAnimate(){this.setClip(),Xg(this.chart.sharedClips,(o,l,d)=>{o&&!this.chart.container.querySelector(`[clip-path="url(#${o.id})"]`)&&(o.destroy(),delete d[l])}),this.finishedAnimating=!0,wt(this,"afterAnimate")}drawPoints(o=this.points){let l,d,h,g,p,f,m,w=this.chart,S=w.styledMode,{colorAxis:y,options:E}=this,M=E.marker,R=this[this.specialGroup||"markerGroup"],T=this.xAxis,F=yt(M.enabled,!T||!!T.isRadial||null,this.closestPointRangePx>=M.enabledThreshold*M.radius);if(M.enabled!==!1||this._hasPointMarkers)for(l=0;l<o.length;l++)if(g=(h=(d=o[l]).graphic)?"animate":"attr",p=d.marker||{},f=!!d.marker,(F&&p.enabled===void 0||p.enabled)&&!d.isNull&&d.visible!==!1){let I=yt(p.symbol,this.symbol,"rect");m=this.markerAttribs(d,d.selected&&"select"),this.enabledDataSorting&&(d.startXPos=T.reversed?-(m.width||0):T.width);let P=d.isInside!==!1;if(!h&&P&&((m.width||0)>0||d.hasImage)&&(d.graphic=h=w.renderer.symbol(I,m.x,m.y,m.width,m.height,f?p:M).add(R),this.enabledDataSorting&&w.hasRendered&&(h.attr({x:d.startXPos}),g="animate")),h&&g==="animate"&&h[P?"show":"hide"](P).animate(m),h){let k=this.pointAttribs(d,S||!d.selected?void 0:"select");S?y&&h.css({fill:k.fill}):h[g](k)}h&&h.addClass(d.getClassName(),!0)}else h&&(d.graphic=h.destroy())}markerAttribs(o,l){let d=this.options,h=d.marker,g=o.marker||{},p=g.symbol||h.symbol,f={},m,w,S=yt(g.radius,h&&h.radius);l&&(m=h.states[l],S=yt((w=g.states&&g.states[l])&&w.radius,m&&m.radius,S&&S+(m&&m.radiusPlus||0))),o.hasImage=p&&p.indexOf("url")===0,o.hasImage&&(S=0);let y=o.pos();return ei(S)&&y&&(d.crisp&&(y[0]=YT(y[0],o.hasImage?0:p==="rect"?h?.lineWidth||0:1)),f.x=y[0]-S,f.y=y[1]-S),S&&(f.width=f.height=2*S),f}pointAttribs(o,l){let d=this.options.marker,h=o&&o.options,g=h&&h.marker||{},p=h&&h.color,f=o&&o.color,m=o&&o.zone&&o.zone.color,w,S,y=this.color,E,M,R=yt(g.lineWidth,d.lineWidth),T=1;return y=p||m||f||y,E=g.fillColor||d.fillColor||y,M=g.lineColor||d.lineColor||y,l=l||"normal",w=d.states[l]||{},R=yt((S=g.states&&g.states[l]||{}).lineWidth,w.lineWidth,R+yt(S.lineWidthPlus,w.lineWidthPlus,0)),E=S.fillColor||w.fillColor||E,{stroke:M=S.lineColor||w.lineColor||M,"stroke-width":R,fill:E,opacity:T=yt(S.opacity,w.opacity,T)}}destroy(o){let l,d,h,g=this,p=g.chart,f=/AppleWebKit\/533/.test(KT.navigator.userAgent),m=g.data||[];for(wt(g,"destroy",{keepEventsForUpdate:o}),this.removeEvents(o),(g.axisTypes||[]).forEach(function(w){(h=g[w])&&h.series&&(Xy(h.series,g),h.isDirty=h.forceRedraw=!0)}),g.legendItem&&g.chart.legend.destroyItem(g),l=m.length;l--;)(d=m[l])&&d.destroy&&d.destroy();for(let w of g.zones)XT(w,void 0,!0);ce.clearTimeout(g.animationTimeout),Xg(g,function(w,S){w instanceof Gn&&!w.survive&&w[f&&S==="group"?"hide":"destroy"]()}),p.hoverSeries===g&&(p.hoverSeries=void 0),Xy(p.series,g),p.orderItems("series"),Xg(g,function(w,S){o&&S==="hcEvents"||delete g[S]})}applyZones(){let{area:o,chart:l,graph:d,zones:h,points:g,xAxis:p,yAxis:f,zoneAxis:m}=this,{inverted:w,renderer:S}=l,y=this[`${m}Axis`],{isXAxis:E,len:M=0,minPointOffset:R=0}=y||{},T=(d?.strokeWidth()||0)/2+1,F=(I,P=0,k=0)=>{w&&(k=M-k);let{translated:H=0,lineClip:j}=I,z=k-H;j?.push(["L",P,Math.abs(z)<T?k-T*(z<=0?-1:1):H])};if(h.length&&(d||o)&&y&&ei(y.min)){let I=y.getExtremes().max+R,P=j=>{j.forEach((z,V)=>{(z[0]==="M"||z[0]==="L")&&(j[V]=[z[0],E?M-z[1]:z[1],E?z[2]:M-z[2]])})};if(h.forEach(j=>{j.lineClip=[],j.translated=Ky(y.toPixels(yt(j.value,I),!0)||0,0,M)}),d&&!this.showLine&&d.hide(),o&&o.hide(),m==="y"&&g.length<p.len)for(let j of g){let{plotX:z,plotY:V,zone:W}=j,X=W&&h[h.indexOf(W)-1];W&&F(W,z,V),X&&F(X,z,V)}let k=[],H=y.toPixels(y.getExtremes().min-R,!0);h.forEach(j=>{let z=j.lineClip||[],V=Math.round(j.translated||0);p.reversed&&z.reverse();let{clip:W,simpleClip:X}=j,Q=0,te=0,de=p.len,le=f.len;E?(Q=V,de=H):(te=V,le=H);let ge=[["M",Q,te],["L",de,te],["L",de,le],["L",Q,le],["Z"]],me=[ge[0],...z,ge[1],ge[2],...k,ge[3],ge[4]];k=z.reverse(),H=V,w&&(P(me),o&&P(ge)),W?(W.animate({d:me}),X?.animate({d:ge})):(W=j.clip=S.path(me),o&&(X=j.simpleClip=S.path(ge))),d&&j.graph?.clip(W),o&&j.area?.clip(X)})}else this.visible&&(d&&d.show(),o&&o.show())}plotGroup(o,l,d,h,g){let p=this[o],f=!p,m={visibility:d,zIndex:h||.1};return Kt(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(m.opacity=this.opacity),p||(this[o]=p=this.chart.renderer.g().add(g)),p.addClass("highcharts-"+l+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(Kt(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(p.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),p.attr(m)[f?"attr":"animate"](this.getPlotBox(l)),p}getPlotBox(o){let l=this.xAxis,d=this.yAxis,h=this.chart,g=h.inverted&&!h.polar&&l&&this.invertible&&o==="series";return h.inverted&&(l=d,d=this.xAxis),{translateX:l?l.left:h.plotLeft,translateY:d?d.top:h.plotTop,rotation:g?90:0,rotationOriginX:g?(l.len-d.len)/2:0,rotationOriginY:g?(l.len+d.len)/2:0,scaleX:g?-1:1,scaleY:1}}removeEvents(o){let{eventsToUnbind:l}=this;o||tF(this),l.length&&(l.forEach(d=>{d()}),l.length=0)}render(){let o=this,{chart:l,options:d,hasRendered:h}=o,g=$y(d.animation),p=o.visible?"inherit":"hidden",f=d.zIndex,m=l.seriesGroup,w=o.finishedAnimating?0:g.duration;wt(this,"render"),o.plotGroup("group","series",p,f,m),o.markerGroup=o.plotGroup("markerGroup","markers",p,f,m),d.clip!==!1&&o.setClip(),w&&o.animate?.(!0),o.drawGraph&&(o.drawGraph(),o.applyZones()),o.visible&&o.drawPoints(),o.drawDataLabels?.(),o.redrawPoints?.(),d.enableMouseTracking&&o.drawTracker?.(),w&&o.animate?.(),h||(w&&g.defer&&(w+=g.defer),o.animationTimeout=e0(()=>{o.afterAnimate()},w||0)),o.isDirty=!1,o.hasRendered=!0,wt(o,"afterRender")}redraw(){let o=this.isDirty||this.isDirtyData;this.translate(),this.render(),o&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(o,l){let{xAxis:d,yAxis:h}=this,g=this.chart.inverted;return this.searchKDTree({clientX:g?d.len-o.chartY+d.pos:o.chartX-d.pos,plotY:g?h.len-o.chartX+h.pos:o.chartY-h.pos},l,o)}buildKDTree(o){this.buildingKdTree=!0;let l=this,d=l.options.findNearestPointBy.indexOf("y")>-1?2:1;delete l.kdTree,e0(function(){l.kdTree=function h(g,p,f){let m,w,S=g?.length;if(S)return m=l.kdAxisArray[p%f],g.sort((y,E)=>(y[m]||0)-(E[m]||0)),{point:g[w=Math.floor(S/2)],left:h(g.slice(0,w),p+1,f),right:h(g.slice(w+1),p+1,f)}}(l.getValidPoints(void 0,!l.directTouch),d,d),l.buildingKdTree=!1},l.options.kdNow||o?.type==="touchstart"?0:1)}searchKDTree(o,l,d){let h=this,[g,p]=this.kdAxisArray,f=l?"distX":"dist",m=(h.options.findNearestPointBy||"").indexOf("y")>-1?2:1,w=!!h.isBubble;if(this.kdTree||this.buildingKdTree||this.buildKDTree(d),this.kdTree)return function S(y,E,M,R){let T=E.point,F=h.kdAxisArray[M%R],I,P,k=T;(function(V,W){let X=V[g],Q=W[g],te=Kt(X)&&Kt(Q)?X-Q:null,de=V[p],le=W[p],ge=Kt(de)&&Kt(le)?de-le:0,me=w&&W.marker?.radius||0;W.dist=Math.sqrt((te&&te*te||0)+ge*ge)-me,W.distX=Kt(te)?Math.abs(te)-me:Number.MAX_VALUE})(y,T);let H=(y[F]||0)-(T[F]||0)+(w&&T.marker?.radius||0),j=H<0?"left":"right",z=H<0?"right":"left";return E[j]&&(k=(I=S(y,E[j],M+1,R))[f]<k[f]?I:T),E[z]&&Math.sqrt(H*H)<k[f]&&(k=(P=S(y,E[z],M+1,R))[f]<k[f]?P:k),k}(o,this.kdTree,m,m)}pointPlacementToXValue(){let{options:o,xAxis:l}=this,d=o.pointPlacement;return d==="between"&&(d=l.reversed?-.5:.5),ei(d)?d*(o.pointRange||l.pointRange):0}isPointInside(o){let{chart:l,xAxis:d,yAxis:h}=this,{plotX:g=-1,plotY:p=-1}=o;return p>=0&&p<=(h?h.len:l.plotHeight)&&g>=0&&g<=(d?d.len:l.plotWidth)}drawTracker(){let o=this,l=o.options,d=l.trackByArea,h=[].concat((d?o.areaPath:o.graphPath)||[]),g=o.chart,p=g.pointer,f=g.renderer,m=g.options.tooltip?.snap||0,w=()=>{l.enableMouseTracking&&g.hoverSeries!==o&&o.onMouseOver()},S="rgba(192,192,192,"+(qT?1e-4:.002)+")",y=o.tracker;y?y.attr({d:h}):o.graph&&(o.tracker=y=f.path(h).attr({visibility:o.visible?"inherit":"hidden",zIndex:2}).addClass(d?"highcharts-tracker-area":"highcharts-tracker-line").add(o.group),g.styledMode||y.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:S,fill:d?S:"none","stroke-width":o.graph.strokeWidth()+(d?0:2*m)}),[o.tracker,o.markerGroup,o.dataLabelsGroup].forEach(E=>{E&&(E.addClass("highcharts-tracker").on("mouseover",w).on("mouseout",M=>{p?.onTrackerMouseOut(M)}),l.cursor&&!g.styledMode&&E.css({cursor:l.cursor}),E.on("touchstart",w))})),wt(this,"afterDrawTracker")}addPoint(o,l,d,h,g){let p,f,m=this.options,{chart:w,data:S,dataTable:y,xAxis:E}=this,M=E&&E.hasNames&&E.names,R=m.data,T=this.getColumn("x");l=yt(l,!0);let F={series:this};this.pointClass.prototype.applyOptions.apply(F,[o]);let I=F.x;if(f=T.length,this.requireSorting&&I<T[f-1])for(p=!0;f&&T[f-1]>I;)f--;y.setRow(F,f,!0,{addColumns:!1}),M&&F.name&&(M[I]=F.name),R?.splice(f,0,o),(p||this.processedData)&&(this.data.splice(f,0,null),this.processData()),m.legendType==="point"&&this.generatePoints(),d&&(S[0]&&S[0].remove?S[0].remove(!1):([S,R,...Object.values(y.getColumns())].filter(Kt).forEach(P=>{P.shift()}),y.rowCount-=1,wt(y,"afterDeleteRows"))),g!==!1&&wt(this,"addPoint",{point:F}),this.isDirty=!0,this.isDirtyData=!0,l&&w.redraw(h)}removePoint(o,l,d){let h=this,{chart:g,data:p,points:f,dataTable:m}=h,w=p[o],S=function(){[f?.length===p.length?f:void 0,p,h.options.data,...Object.values(m.getColumns())].filter(Kt).forEach(y=>{y.splice(o,1)}),m.rowCount-=1,wt(m,"afterDeleteRows"),w?.destroy(),h.isDirty=!0,h.isDirtyData=!0,l&&g.redraw()};UT(d,g),l=yt(l,!0),w?w.firePointEvent("remove",null,S):S()}remove(o,l,d,h){let g=this,p=g.chart;function f(){g.destroy(h),p.isDirtyLegend=p.isDirtyBox=!0,p.linkSeries(h),yt(o,!0)&&p.redraw(l)}d!==!1?wt(g,"remove",null,f):f()}update(o,l){wt(this,"update",{options:o=ZT(o,this.userOptions)});let d=this,h=d.chart,g=d.userOptions,p=d.initialType||d.type,f=h.options.plotOptions,m=Fo[p].prototype,w=d.finishedAnimating&&{animation:!1},S={},y,E,M=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],R=o.type||g.type||h.options.chart.type,T=!(this.hasDerivedData||R&&R!==this.type||o.keys!==void 0||o.pointStart!==void 0||o.pointInterval!==void 0||o.relativeXValue!==void 0||o.joinBy||o.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(I=>d.hasOptionChanged(I)));R=R||p,T?(M.push("data","isDirtyData","isDirtyCanvas","points","dataTable","processedData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"),o.visible!==!1&&M.push("area","graph"),d.parallelArrays.forEach(function(I){M.push(I+"Data")}),o.data&&(o.dataSorting&&Ao(d.options.dataSorting,o.dataSorting),this.setData(o.data,!1))):this.dataTable.modified=this.dataTable,o=Po(g,{index:g.index===void 0?d.index:g.index,pointStart:f?.series?.pointStart??g.pointStart??d.getColumn("x")[0]},!T&&{data:d.options.data},o,w),T&&o.data&&(o.data=d.options.data),(M=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(M)).forEach(function(I){M[I]=d[I],delete d[I]});let F=!1;if(Fo[R]){if(F=R!==d.type,d.remove(!1,!1,!1,!0),F)if(h.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(d,Fo[R].prototype);else{let I=Object.hasOwnProperty.call(d,"hcEvents")&&d.hcEvents;for(E in m)d[E]=void 0;Ao(d,Fo[R].prototype),I?d.hcEvents=I:delete d.hcEvents}}else ld(17,!0,h,{missingModuleFor:R});if(M.forEach(function(I){d[I]=M[I]}),d.init(h,o),T&&this.points)for(let I of((y=d.options).visible===!1?(S.graphic=1,S.dataLabel=1):(this.hasMarkerChanged(y,g)&&(S.graphic=1),d.hasDataLabels?.()||(S.dataLabel=1)),this.points))I&&I.series&&(I.resolveColor(),Object.keys(S).length&&I.destroyElements(S),y.showInLegend===!1&&I.legendItem&&h.legend.destroyItem(I));d.initialType=p,h.linkSeries(),h.setSortedData(),F&&d.linkedSeries.length&&(d.isDirtyData=!0),wt(this,"afterUpdate"),yt(l,!0)&&h.redraw(!!T&&void 0)}setName(o){this.name=this.options.name=this.userOptions.name=o,this.chart.isDirtyLegend=!0}hasOptionChanged(o){let l=this.chart,d=this.options[o],h=l.options.plotOptions,g=this.userOptions[o],p=yt(h?.[this.type]?.[o],h?.series?.[o]);return g&&!Kt(p)?d!==g:d!==yt(p,d)}onMouseOver(){let o=this.chart,l=o.hoverSeries;o.pointer?.setHoverChartIndex(),l&&l!==this&&l.onMouseOut(),this.options.events.mouseOver&&wt(this,"mouseOver"),this.setState("hover"),o.hoverSeries=this}onMouseOut(){let o=this.options,l=this.chart,d=l.tooltip,h=l.hoverPoint;l.hoverSeries=null,h&&h.onMouseOut(),this&&o.events.mouseOut&&wt(this,"mouseOut"),d&&!this.stickyTracking&&(!d.shared||this.noSharedTooltip)&&d.hide(),l.series.forEach(function(g){g.setState("",!0)})}setState(o,l){let d=this,h=d.options,g=d.graph,p=h.inactiveOtherPoints,f=h.states,m=yt(f[o||"normal"]&&f[o||"normal"].animation,d.chart.options.chart.animation),w=h.lineWidth,S=h.opacity;if(o=o||"",d.state!==o&&([d.group,d.markerGroup,d.dataLabelsGroup].forEach(function(y){y&&(d.state&&y.removeClass("highcharts-series-"+d.state),o&&y.addClass("highcharts-series-"+o))}),d.state=o,!d.chart.styledMode)){if(f[o]&&f[o].enabled===!1)return;if(o&&(w=f[o].lineWidth||w+(f[o].lineWidthPlus||0),S=yt(f[o].opacity,S)),g&&!g.dashstyle&&ei(w))for(let y of[g,...this.zones.map(E=>E.graph)])y?.animate({"stroke-width":w},m);p||[d.group,d.markerGroup,d.dataLabelsGroup,d.labelBySeries].forEach(function(y){y&&y.animate({opacity:S},m)})}l&&p&&d.points&&d.setAllPointsToState(o||void 0)}setAllPointsToState(o){this.points.forEach(function(l){l.setState&&l.setState(o)})}setVisible(o,l){let d=this,h=d.chart,g=h.options.chart.ignoreHiddenSeries,p=d.visible;d.visible=o=d.options.visible=d.userOptions.visible=o===void 0?!p:o;let f=o?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(m=>{d[m]?.[f]()}),(h.hoverSeries===d||h.hoverPoint?.series===d)&&d.onMouseOut(),d.legendItem&&h.legend.colorizeItem(d,o),d.isDirty=!0,d.options.stacking&&h.series.forEach(m=>{m.options.stacking&&m.visible&&(m.isDirty=!0)}),d.linkedSeries.forEach(m=>{m.setVisible(o,!1)}),g&&(h.isDirtyBox=!0),wt(d,f),l!==!1&&h.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(o){this.selected=o=this.options.selected=o===void 0?!this.selected:o,this.checkbox&&(this.checkbox.checked=o),wt(this,o?"select":"unselect")}shouldShowTooltip(o,l,d={}){return d.series=this,d.visiblePlotOnly=!0,this.chart.isInsidePlot(o,l,d)}drawLegendSymbol(o,l){jy[this.options.legendSymbol||"rectangle"]?.call(this,o,l)}}ko.defaultOptions={lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:C}=this.series.chart;return typeof this.y!="number"?"":C(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},ko.types=Tt.seriesTypes,ko.registerType=Tt.registerSeriesType,Ao(ko.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:Pr,requireSorting:!0,sorted:!0}),Tt.series=ko;let Wi=ko,{animObject:iF,setAnimation:nF}=ii,{registerEventOptions:t0}=Uc,{composed:rF,marginNames:i0}=G,{distribute:sF}=Nc,{format:oF}=wn,{addEvent:cd,createElement:aF,css:lF,defined:Zg,discardElement:cF,find:dF,fireEvent:rr,isNumber:n0,merge:As,pick:on,pushUnique:uF,relativeLength:hF,stableSort:gF,syncTimeout:pF}=ce;class Qg{constructor(o,l){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=o,this.setOptions(l),l.enabled&&(this.render(),t0(this,l),cd(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),cd(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(o){let l=on(o.padding,8);this.options=o,this.chart.styledMode||(this.itemStyle=o.itemStyle,this.itemHiddenStyle=As(this.itemStyle,o.itemHiddenStyle)),this.itemMarginTop=o.itemMarginTop,this.itemMarginBottom=o.itemMarginBottom,this.padding=l,this.initialItemY=l-5,this.symbolWidth=on(o.symbolWidth,16),this.pages=[],this.proximate=o.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(o,l){let d=this.chart;this.setOptions(As(!0,this.options,o)),"events"in this.options&&t0(this,this.options),this.destroy(),d.isDirtyLegend=d.isDirtyBox=!0,on(l,!0)&&d.redraw(),rr(this,"afterUpdate",{redraw:l})}colorizeItem(o,l){let d=o.color,{area:h,group:g,label:p,line:f,symbol:m}=o.legendItem||{};if((o instanceof Wi||o instanceof Pr)&&(o.color=o.options?.legendSymbolColor||d),g?.[l?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:w={}}=this,S=w.color,{fillColor:y,fillOpacity:E,lineColor:M,marker:R}=o.options,T=F=>(!l&&(F.fill&&(F.fill=S),F.stroke&&(F.stroke=S)),F);p?.css(As(l?this.itemStyle:w)),f?.attr(T({stroke:M||o.color})),m&&m.attr(T(R&&m.isMarker?o.pointAttribs():{fill:o.color})),h?.attr(T({fill:y||o.color,"fill-opacity":y?1:E??.75}))}o.color=d,rr(this,"afterColorizeItem",{item:o,visible:l})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(o){let{group:l,x:d=0,y:h=0}=o.legendItem||{},g=this.options,p=g.symbolPadding,f=!g.rtl,m=o.checkbox;if(l&&l.element){let w={translateX:f?d:this.legendWidth-d-2*p-4,translateY:h};l[Zg(l.translateY)?"animate":"attr"](w,void 0,()=>{rr(this,"afterPositionItem",{item:o})})}m&&(m.x=d,m.y=h)}destroyItem(o){let l=o.checkbox,d=o.legendItem||{};for(let h of["group","label","line","symbol"])d[h]&&(d[h]=d[h].destroy());l&&cF(l),o.legendItem=void 0}destroy(){for(let o of this.getAllItems())this.destroyItem(o);for(let o of["clipRect","up","down","pager","nav","box","title","group"])this[o]&&(this[o]=this[o].destroy());this.display=null}positionCheckboxes(){let o,l=this.group&&this.group.alignAttr,d=this.clipHeight||this.legendHeight,h=this.titleHeight;l&&(o=l.translateY,this.allItems.forEach(function(g){let p,f=g.checkbox;f&&(p=o+h+f.y+(this.scrollOffset||0)+3,lF(f,{left:l.translateX+g.checkboxOffset+f.x-20+"px",top:p+"px",display:this.proximate||p>o-6&&p<o+d-6?"":"none"}))},this))}renderTitle(){let o=this.options,l=this.padding,d=o.title,h,g=0;d.text&&(this.title||(this.title=this.chart.renderer.label(d.text,l-3,l-4,void 0,void 0,void 0,o.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(d.style),this.title.add(this.group)),d.width||this.title.css({width:this.maxLegendWidth+"px"}),g=(h=this.title.getBBox()).height,this.offsetWidth=h.width,this.contentGroup.attr({translateY:g})),this.titleHeight=g}setText(o){let l=this.options;o.legendItem.label.attr({text:l.labelFormat?oF(l.labelFormat,o,this.chart):l.labelFormatter.call(o)})}renderItem(o){let l=o.legendItem=o.legendItem||{},d=this.chart,h=d.renderer,g=this.options,p=g.layout==="horizontal",f=this.symbolWidth,m=g.symbolPadding||0,w=this.itemStyle,S=this.itemHiddenStyle,y=p?on(g.itemDistance,20):0,E=!g.rtl,M=!o.series,R=!M&&o.series.drawLegendSymbol?o.series:o,T=R.options,F=!!this.createCheckboxForItem&&T&&T.showCheckbox,I=g.useHTML,P=o.options.className,k=l.label,H=f+m+y+(F?20:0);!k&&(l.group=h.g("legend-item").addClass("highcharts-"+R.type+"-series highcharts-color-"+o.colorIndex+(P?" "+P:"")+(M?" highcharts-series-"+o.index:"")).attr({zIndex:1}).add(this.scrollGroup),l.label=k=h.text("",E?f+m:-m,this.baseline||0,I),d.styledMode||k.css(As(o.visible?w:S)),k.attr({align:E?"left":"right",zIndex:2}).add(l.group),!this.baseline&&(this.fontMetrics=h.fontMetrics(k),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,k.attr("y",this.baseline),this.symbolHeight=on(g.symbolHeight,this.fontMetrics.f),g.squareSymbol&&(this.symbolWidth=on(g.symbolWidth,Math.max(this.symbolHeight,16)),H=this.symbolWidth+m+y+(F?20:0),E&&k.attr("x",this.symbolWidth+m))),R.drawLegendSymbol(this,o),this.setItemEvents&&this.setItemEvents(o,k,I)),F&&!o.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(o),this.colorizeItem(o,o.visible),(d.styledMode||!w.width)&&k.css({width:(g.itemWidth||this.widthOption||d.spacingBox.width)-H+"px"}),this.setText(o);let j=k.getBBox(),z=this.fontMetrics&&this.fontMetrics.h||0;o.itemWidth=o.checkboxOffset=g.itemWidth||l.labelWidth||j.width+H,this.maxItemWidth=Math.max(this.maxItemWidth,o.itemWidth),this.totalItemWidth+=o.itemWidth,this.itemHeight=o.itemHeight=Math.round(l.labelHeight||(j.height>1.5*z?j.height:z))}layoutItem(o){let l=this.options,d=this.padding,h=l.layout==="horizontal",g=o.itemHeight,p=this.itemMarginBottom,f=this.itemMarginTop,m=h?on(l.itemDistance,20):0,w=this.maxLegendWidth,S=l.alignColumns&&this.totalItemWidth>w?this.maxItemWidth:o.itemWidth,y=o.legendItem||{};h&&this.itemX-d+S>w&&(this.itemX=d,this.lastLineHeight&&(this.itemY+=f+this.lastLineHeight+p),this.lastLineHeight=0),this.lastItemY=f+this.itemY+p,this.lastLineHeight=Math.max(g,this.lastLineHeight),y.x=this.itemX,y.y=this.itemY,h?this.itemX+=S:(this.itemY+=f+g+p,this.lastLineHeight=g),this.offsetWidth=this.widthOption||Math.max((h?this.itemX-d-(o.checkbox?0:m):S)+d,this.offsetWidth)}getAllItems(){let o=[];return this.chart.series.forEach(function(l){let d=l&&l.options;l&&on(d.showInLegend,!Zg(d.linkedTo)&&void 0,!0)&&(o=o.concat((l.legendItem||{}).labels||(d.legendType==="point"?l.data:l)))}),rr(this,"afterGetAllItems",{allItems:o}),o}getAlignment(){let o=this.options;return this.proximate?o.align.charAt(0)+"tv":o.floating?"":o.align.charAt(0)+o.verticalAlign.charAt(0)+o.layout.charAt(0)}adjustMargins(o,l){let d=this.chart,h=this.options,g=this.getAlignment();g&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(p,f){p.test(g)&&!Zg(o[f])&&(d[i0[f]]=Math.max(d[i0[f]],d.legend[(f+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][f]*h[f%2?"x":"y"]+on(h.margin,12)+l[f]+(d.titleOffset[f]||0)))})}proximatePositions(){let o,l=this.chart,d=[],h=this.options.align==="left";for(let g of(this.allItems.forEach(function(p){let f,m,w=h,S,y;p.yAxis&&(p.xAxis.options.reversed&&(w=!w),p.points&&(f=dF(w?p.points:p.points.slice(0).reverse(),function(E){return n0(E.plotY)})),m=this.itemMarginTop+p.legendItem.label.getBBox().height+this.itemMarginBottom,y=p.yAxis.top-l.plotTop,S=p.visible?(f?f.plotY:p.yAxis.height)+(y-.3*m):y+p.yAxis.height,d.push({target:S,size:m,item:p}))},this),sF(d,l.plotHeight)))o=g.item.legendItem||{},n0(g.pos)&&(o.y=l.plotTop-l.spacing[0]+g.pos)}render(){let o=this.chart,l=o.renderer,d=this.options,h=this.padding,g=this.getAllItems(),p,f,m,w=this.group,S,y=this.box;this.itemX=h,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=hF(d.width,o.spacingBox.width-h),S=o.spacingBox.width-2*h-d.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(S/=2),this.maxLegendWidth=this.widthOption||S,w||(this.group=w=l.g("legend").addClass(d.className||"").attr({zIndex:7}).add(),this.contentGroup=l.g().attr({zIndex:1}).add(w),this.scrollGroup=l.g().add(this.contentGroup)),this.renderTitle(),gF(g,(E,M)=>(E.options&&E.options.legendIndex||0)-(M.options&&M.options.legendIndex||0)),d.reversed&&g.reverse(),this.allItems=g,this.display=p=!!g.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,g.forEach(this.renderItem,this),g.forEach(this.layoutItem,this),f=(this.widthOption||this.offsetWidth)+h,m=this.lastItemY+this.lastLineHeight+this.titleHeight,m=this.handleOverflow(m)+h,y||(this.box=y=l.rect().addClass("highcharts-legend-box").attr({r:d.borderRadius}).add(w)),o.styledMode||y.attr({stroke:d.borderColor,"stroke-width":d.borderWidth||0,fill:d.backgroundColor||"none"}).shadow(d.shadow),f>0&&m>0&&y[y.placed?"animate":"attr"](y.crisp.call({},{x:0,y:0,width:f,height:m},y.strokeWidth())),w[p?"show":"hide"](),o.styledMode&&w.getStyle("display")==="none"&&(f=m=0),this.legendWidth=f,this.legendHeight=m,p&&this.align(),this.proximate||this.positionItems(),rr(this,"afterRender")}align(o=this.chart.spacingBox){let l=this.chart,d=this.options,h=o.y;/(lth|ct|rth)/.test(this.getAlignment())&&l.titleOffset[0]>0?h+=l.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&l.titleOffset[2]>0&&(h-=l.titleOffset[2]),h!==o.y&&(o=As(o,{y:h})),l.hasRendered||(this.group.placed=!1),this.group.align(As(d,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":d.verticalAlign}),!0,o)}handleOverflow(o){let l=this,d=this.chart,h=d.renderer,g=this.options,p=g.y,f=g.verticalAlign==="top",m=this.padding,w=g.maxHeight,S=g.navigation,y=on(S.animation,!0),E=S.arrowSize||12,M=this.pages,R=this.allItems,T=function(V){typeof V=="number"?z.attr({height:V}):z&&(l.clipRect=z.destroy(),l.contentGroup.clip()),l.contentGroup.div&&(l.contentGroup.div.style.clip=V?"rect("+m+"px,9999px,"+(m+V)+"px,0)":"auto")},F=function(V){return l[V]=h.circle(0,0,1.3*E).translate(E/2,E/2).add(j),d.styledMode||l[V].attr("fill","rgba(0,0,0,0.0001)"),l[V]},I,P,k,H=d.spacingBox.height+(f?-p:p)-m,j=this.nav,z=this.clipRect;return g.layout!=="horizontal"||g.verticalAlign==="middle"||g.floating||(H/=2),w&&(H=Math.min(H,w)),M.length=0,o&&H>0&&o>H&&S.enabled!==!1?(this.clipHeight=I=Math.max(H-20-this.titleHeight-m,0),this.currentPage=on(this.currentPage,1),this.fullHeight=o,R.forEach((V,W)=>{let X=(k=V.legendItem||{}).y||0,Q=Math.round(k.label.getBBox().height),te=M.length;(!te||X-M[te-1]>I&&(P||X)!==M[te-1])&&(M.push(P||X),te++),k.pageIx=te-1,P&&((R[W-1].legendItem||{}).pageIx=te-1),W===R.length-1&&X+Q-M[te-1]>I&&X>M[te-1]&&(M.push(X),k.pageIx=te),X!==P&&(P=X)}),z||(z=l.clipRect=h.clipRect(0,m-2,9999,0),l.contentGroup.clip(z)),T(I),j||(this.nav=j=h.g().attr({zIndex:1}).add(this.group),this.up=h.symbol("triangle",0,0,E,E).add(j),F("upTracker").on("click",function(){l.scroll(-1,y)}),this.pager=h.text("",15,10).addClass("highcharts-legend-navigation"),!d.styledMode&&S.style&&this.pager.css(S.style),this.pager.add(j),this.down=h.symbol("triangle-down",0,0,E,E).add(j),F("downTracker").on("click",function(){l.scroll(1,y)})),l.scroll(0),o=H):j&&(T(),this.nav=j.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),o}scroll(o,l){let d=this.chart,h=this.pages,g=h.length,p=this.clipHeight,f=this.options.navigation,m=this.pager,w=this.padding,S=this.currentPage+o;S>g&&(S=g),S>0&&(l!==void 0&&nF(l,d),this.nav.attr({translateX:w,translateY:p+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(y){y.attr({class:S===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),m.attr({text:S+"/"+g}),[this.down,this.downTracker].forEach(function(y){y.attr({x:18+this.pager.getBBox().width,class:S===g?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),d.styledMode||(this.up.attr({fill:S===1?f.inactiveColor:f.activeColor}),this.upTracker.css({cursor:S===1?"default":"pointer"}),this.down.attr({fill:S===g?f.inactiveColor:f.activeColor}),this.downTracker.css({cursor:S===g?"default":"pointer"})),this.scrollOffset=-h[S-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=S,this.positionCheckboxes(),pF(()=>{rr(this,"afterScroll",{currentPage:S})},iF(on(l,d.renderer.globalAnimation,!0)).duration))}setItemEvents(o,l,d){let h=this,g=o.legendItem||{},p=h.chart.renderer.boxWrapper,f=o instanceof Pr,m=o instanceof Wi,w="highcharts-legend-"+(f?"point":"series")+"-active",S=h.chart.styledMode,y=d?[l,g.symbol]:[g.group],E=M=>{h.allItems.forEach(R=>{o!==R&&[R].concat(R.linkedSeries||[]).forEach(T=>{T.setState(M,!f)})})};for(let M of y)M&&M.on("mouseover",function(){o.visible&&E("inactive"),o.setState("hover"),o.visible&&p.addClass(w),S||l.css(h.options.itemHoverStyle)}).on("mouseout",function(){h.chart.styledMode||l.css(As(o.visible?h.itemStyle:h.itemHiddenStyle)),E(""),p.removeClass(w),o.setState()}).on("click",function(R){let T=function(){o.setVisible&&o.setVisible(),E(o.visible?"inactive":"")};p.removeClass(w),rr(h,"itemClick",{browserEvent:R,legendItem:o},T),f?o.firePointEvent("legendItemClick",{browserEvent:R}):m&&rr(o,"legendItemClick",{browserEvent:R})})}createCheckboxForItem(o){o.checkbox=aF("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:o.selected,defaultChecked:o.selected},this.options.itemCheckboxStyle,this.chart.container),cd(o.checkbox,"click",function(l){let d=l.target;rr(o.series||o,"checkboxClick",{checked:d.checked,item:o},function(){o.select()})})}}(function(C){C.compose=function(o){uF(rF,"Core.Legend")&&cd(o,"beforeMargins",function(){this.legend=new C(this,this.options.legend)})}})(Qg||(Qg={}));let r0=Qg,{animate:Jg,animObject:fF,setAnimation:ep}=ii,{defaultOptions:tp}=Ci,{numberFormat:mF}=wn,{registerEventOptions:s0}=Uc,{charts:Ps,doc:tl,marginNames:o0,svg:vF,win:a0}=G,{seriesTypes:ip}=Tt,{addEvent:np,attr:l0,createElement:rp,css:xn,defined:Or,diffObjects:c0,discardElement:CF,erase:wF,error:sp,extend:Lr,find:op,fireEvent:Ke,getAlignFactor:yF,getStyle:ap,isArray:bF,isNumber:Oo,isObject:SF,isString:dd,merge:sr,objectEach:lp,pick:ni,pInt:xF,relativeLength:d0,removeEvent:u0,splat:ud,syncTimeout:EF,uniqueKey:DF}=ce;class Nr{static chart(o,l,d){return new Nr(o,l,d)}constructor(o,l,d){this.sharedClips={};let h=[...arguments];(dd(o)||o.nodeName)&&(this.renderTo=h.shift()),this.init(h[0],h[1])}setZoomOptions(){let o=this.options.chart,l=o.zooming;this.zooming=ue(q({},l),{type:ni(o.zoomType,l.type),key:ni(o.zoomKey,l.key),pinchType:ni(o.pinchType,l.pinchType),singleTouch:ni(o.zoomBySingleTouch,l.singleTouch,!1),resetButton:sr(l.resetButton,o.resetZoomButton)})}init(o,l){Ke(this,"init",{args:arguments},function(){let d=sr(tp,o),h=d.chart,g=this.renderTo||h.renderTo;this.userOptions=Lr({},o),(this.renderTo=dd(g)?tl.getElementById(g):g)||sp(13,!0,this),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=l,this.isResizing=0,this.options=d,this.axes=[],this.series=[],this.locale=d.lang.locale??this.renderTo.closest("[lang]")?.lang,this.time=new rn(Lr(d.time||{},{locale:this.locale})),d.time=this.time.options,this.numberFormatter=(h.numberFormatter||mF).bind(this),this.styledMode=h.styledMode,this.hasCartesianSeries=h.showAxes,this.index=Ps.length,Ps.push(this),G.chartCount++,s0(this,h),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),Ke(this,"afterInit"),this.firstRender()})}initSeries(o){let l=this.options.chart,d=o.type||l.type,h=ip[d];h||sp(17,!0,this,{missingModuleFor:d});let g=new h;return typeof g.init=="function"&&g.init(this,o),g}setSortedData(){this.getSeriesOrderByLinks().forEach(function(o){o.points||o.data||!o.enabledDataSorting||o.setData(o.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(o,l){return o.linkedSeries.length||l.linkedSeries.length?l.linkedSeries.length-o.linkedSeries.length:0})}orderItems(o,l=0){let d=this[o],h=this.options[o]=ud(this.options[o]).slice(),g=this.userOptions[o]=this.userOptions[o]?ud(this.userOptions[o]).slice():[];if(this.hasRendered&&(h.splice(l),g.splice(l)),d)for(let p=l,f=d.length;p<f;++p){let m=d[p];m&&(m.index=p,m instanceof Wi&&(m.name=m.getName()),m.options.isInternal||(h[p]=m.options,g[p]=m.userOptions))}}isInsidePlot(o,l,d={}){let{inverted:h,plotBox:g,plotLeft:p,plotTop:f,scrollablePlotBox:m}=this,{scrollLeft:w=0,scrollTop:S=0}=d.visiblePlotOnly&&this.scrollablePlotArea?.scrollingContainer||{},y=d.series,E=d.visiblePlotOnly&&m||g,M=d.inverted?l:o,R=d.inverted?o:l,T={x:M,y:R,isInsidePlot:!0,options:d};if(!d.ignoreX){let F=y&&(h&&!this.polar?y.yAxis:y.xAxis)||{pos:p,len:1/0},I=d.paneCoordinates?F.pos+M:p+M;I>=Math.max(w+p,F.pos)&&I<=Math.min(w+p+E.width,F.pos+F.len)||(T.isInsidePlot=!1)}if(!d.ignoreY&&T.isInsidePlot){let F=!h&&d.axis&&!d.axis.isXAxis&&d.axis||y&&(h?y.xAxis:y.yAxis)||{pos:f,len:1/0},I=d.paneCoordinates?F.pos+R:f+R;I>=Math.max(S+f,F.pos)&&I<=Math.min(S+f+E.height,F.pos+F.len)||(T.isInsidePlot=!1)}return Ke(this,"afterIsInsidePlot",T),T.isInsidePlot}redraw(o){Ke(this,"beforeRedraw");let l=this.hasCartesianSeries?this.axes:this.colorAxis||[],d=this.series,h=this.pointer,g=this.legend,p=this.userOptions.legend,f=this.renderer,m=f.isHidden(),w=[],S,y,E,M=this.isDirtyBox,R=this.isDirtyLegend,T;for(f.rootFontSize=f.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),ep(!!this.hasRendered&&o,this),m&&this.temporaryDisplay(),this.layOutTitles(!1),E=d.length;E--;)if(((T=d[E]).options.stacking||T.options.centerInCategory)&&(y=!0,T.isDirty)){S=!0;break}if(S)for(E=d.length;E--;)(T=d[E]).options.stacking&&(T.isDirty=!0);d.forEach(function(F){F.isDirty&&(F.options.legendType==="point"?(typeof F.updateTotals=="function"&&F.updateTotals(),R=!0):p&&(p.labelFormatter||p.labelFormat)&&(R=!0)),F.isDirtyData&&Ke(F,"updatedData")}),R&&g&&g.options.enabled&&(g.render(),this.isDirtyLegend=!1),y&&this.getStacks(),l.forEach(function(F){F.updateNames(),F.setScale()}),this.getMargins(),l.forEach(function(F){F.isDirty&&(M=!0)}),l.forEach(function(F){let I=F.min+","+F.max;F.extKey!==I&&(F.extKey=I,w.push(function(){Ke(F,"afterSetExtremes",Lr(F.eventArgs,F.getExtremes())),delete F.eventArgs})),(M||y)&&F.redraw()}),M&&this.drawChartBox(),Ke(this,"predraw"),d.forEach(function(F){(M||F.isDirty)&&F.visible&&F.redraw(),F.isDirtyData=!1}),h&&h.reset(!0),f.draw(),Ke(this,"redraw"),Ke(this,"render"),m&&this.temporaryDisplay(!0),w.forEach(function(F){F.call()})}get(o){let l=this.series;function d(g){return g.id===o||g.options&&g.options.id===o}let h=op(this.axes,d)||op(this.series,d);for(let g=0;!h&&g<l.length;g++)h=op(l[g].points||[],d);return h}createAxes(){let o=this.userOptions;for(let l of(Ke(this,"createAxes"),["xAxis","yAxis"]))for(let d of o[l]=ud(o[l]||{}))new Gg(this,d,l);Ke(this,"afterCreateAxes")}getSelectedPoints(){return this.series.reduce((o,l)=>(l.getPointsCollection().forEach(d=>{ni(d.selectedStaging,d.selected)&&o.push(d)}),o),[])}getSelectedSeries(){return this.series.filter(o=>o.selected)}setTitle(o,l,d){this.applyDescription("title",o),this.applyDescription("subtitle",l),this.applyDescription("caption",void 0),this.layOutTitles(d)}applyDescription(o,l){let d=this,h=this.options[o]=sr(this.options[o],l),g=this[o];g&&l&&(this[o]=g=g.destroy()),h&&!g&&((g=this.renderer.text(h.text,0,0,h.useHTML).attr({align:h.align,class:"highcharts-"+o,zIndex:h.zIndex||4}).css({textOverflow:"ellipsis",whiteSpace:"nowrap"}).add()).update=function(p,f){d.applyDescription(o,p),d.layOutTitles(f)},this.styledMode||g.css(Lr(o==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},h.style)),g.textPxLength=g.getBBox().width,g.css({whiteSpace:h.style?.whiteSpace}),this[o]=g)}layOutTitles(o=!0){let l=[0,0,0],{options:d,renderer:h,spacingBox:g}=this;["title","subtitle","caption"].forEach(f=>{let m=this[f],w=this.options[f],S=sr(g),y=m?.textPxLength||0;if(m&&w){Ke(this,"layOutTitle",{alignTo:S,key:f,textPxLength:y});let E=h.fontMetrics(m),M=E.b,R=E.h,T=w.verticalAlign||"top",F=T==="top",I=F&&w.minScale||1,P=f==="title"?F?-3:0:F?l[0]+2:0,k=Math.min(S.width/y,1),H=Math.max(I,k),j=sr({y:T==="bottom"?M:P+M},{align:f==="title"?k<I?"left":"center":this.title?.alignValue},w),z=w.width||(k>I?this.chartWidth:S.width)/H;m.alignValue!==j.align&&(m.placed=!1);let V=Math.round(m.css({width:`${z}px`}).getBBox(w.useHTML).height);if(j.height=V,m.align(j,!1,S).attr({align:j.align,scaleX:H,scaleY:H,"transform-origin":`${S.x+y*H*yF(j.align)} ${R}`}),!w.floating){let W=V*(V<1.2*R?1:H);T==="top"?l[0]=Math.ceil(l[0]+W):T==="bottom"&&(l[2]=Math.ceil(l[2]+W))}}},this),l[0]&&(d.title?.verticalAlign||"top")==="top"&&(l[0]+=d.title?.margin||0),l[2]&&d.caption?.verticalAlign==="bottom"&&(l[2]+=d.caption?.margin||0);let p=!this.titleOffset||this.titleOffset.join(",")!==l.join(",");this.titleOffset=l,Ke(this,"afterLayOutTitles"),!this.isDirtyBox&&p&&(this.isDirtyBox=this.isDirtyLegend=p,this.hasRendered&&o&&this.isDirtyBox&&this.redraw())}getContainerBox(){let o=[].map.call(this.renderTo.children,d=>{if(d!==this.container){let h=d.style.display;return d.style.display="none",[d,h]}}),l={width:ap(this.renderTo,"width",!0)||0,height:ap(this.renderTo,"height",!0)||0};return o.filter(Boolean).forEach(([d,h])=>{d.style.display=h}),l}getChartSize(){let o=this.options.chart,l=o.width,d=o.height,h=this.getContainerBox(),g=h.height<=1||!this.renderTo.parentElement?.style.height&&this.renderTo.style.height==="100%";this.chartWidth=Math.max(0,l||h.width||600),this.chartHeight=Math.max(0,d0(d,this.chartWidth)||(g?400:h.height)),this.containerBox=h}temporaryDisplay(o){let l=this.renderTo,d;if(o)for(;l&&l.style;)l.hcOrigStyle&&(xn(l,l.hcOrigStyle),delete l.hcOrigStyle),l.hcOrigDetached&&(tl.body.removeChild(l),l.hcOrigDetached=!1),l=l.parentNode;else for(;l&&l.style&&(tl.body.contains(l)||l.parentNode||(l.hcOrigDetached=!0,tl.body.appendChild(l)),(ap(l,"display",!1)==="none"||l.hcOricDetached)&&(l.hcOrigStyle={display:l.style.display,height:l.style.height,overflow:l.style.overflow},d={display:"block",overflow:"hidden"},l!==this.renderTo&&(d.height=0),xn(l,d),l.offsetWidth||l.style.setProperty("display","block","important")),(l=l.parentNode)!==tl.body););}setClassName(o){this.container.className="highcharts-container "+(o||"")}getContainer(){let o,l=this.options,d=l.chart,h="data-highcharts-chart",g=DF(),p=this.renderTo,f=xF(l0(p,h));Oo(f)&&Ps[f]&&Ps[f].hasRendered&&Ps[f].destroy(),l0(p,h,this.index),p.innerHTML=Ct.emptyHTML,d.skipClone||p.offsetWidth||this.temporaryDisplay(),this.getChartSize();let m=this.chartHeight,w=this.chartWidth;xn(p,{overflow:"hidden"}),this.styledMode||(o=Lr({position:"relative",overflow:"hidden",width:w+"px",height:m+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},d.style||{}));let S=rp("div",{id:g},o,p);this.container=S,this.getChartSize(),w===this.chartWidth||(w=this.chartWidth,this.styledMode||xn(S,{width:ni(d.style?.width,w+"px")})),this.containerBox=this.getContainerBox(),this._cursor=S.style.cursor;let y=d.renderer||!vF?Ua.getRendererType(d.renderer):jc;if(this.renderer=new y(S,w,m,void 0,d.forExport,l.exporting&&l.exporting.allowHTML,this.styledMode),ep(void 0,this),this.setClassName(d.className),this.styledMode)for(let E in l.defs)this.renderer.definition(l.defs[E]);else this.renderer.setStyle(d.style);this.renderer.chartIndex=this.index,Ke(this,"afterGetContainer")}getMargins(o){let{spacing:l,margin:d,titleOffset:h}=this;this.resetMargins(),h[0]&&!Or(d[0])&&(this.plotTop=Math.max(this.plotTop,h[0]+l[0])),h[2]&&!Or(d[2])&&(this.marginBottom=Math.max(this.marginBottom,h[2]+l[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(d,l),Ke(this,"getMargins"),o||this.getAxisMargins()}getAxisMargins(){let o=this,l=o.axisOffset=[0,0,0,0],d=o.colorAxis,h=o.margin,g=function(p){p.forEach(function(f){f.visible&&f.getOffset()})};o.hasCartesianSeries?g(o.axes):d&&d.length&&g(d),o0.forEach(function(p,f){Or(h[f])||(o[p]+=l[f])}),o.setChartSize()}getOptions(){return c0(this.userOptions,tp)}reflow(o){let l=this,d=l.containerBox,h=l.getContainerBox();delete l.pointer?.chartPosition,!l.isPrinting&&!l.isResizing&&d&&h.width&&((h.width!==d.width||h.height!==d.height)&&(ce.clearTimeout(l.reflowTimeout),l.reflowTimeout=EF(function(){l.container&&l.setSize(void 0,void 0,!1)},o?100:0)),l.containerBox=h)}setReflow(){let o=this,l=d=>{o.options?.chart.reflow&&o.hasLoaded&&o.reflow(d)};if(typeof ResizeObserver=="function")new ResizeObserver(l).observe(o.renderTo);else{let d=np(a0,"resize",l);np(this,"destroy",d)}}setSize(o,l,d){let h=this,g=h.renderer;h.isResizing+=1,ep(d,h);let p=g.globalAnimation;h.oldChartHeight=h.chartHeight,h.oldChartWidth=h.chartWidth,o!==void 0&&(h.options.chart.width=o),l!==void 0&&(h.options.chart.height=l),h.getChartSize();let{chartWidth:f,chartHeight:m,scrollablePixelsX:w=0,scrollablePixelsY:S=0}=h;(h.isDirtyBox||f!==h.oldChartWidth||m!==h.oldChartHeight)&&(h.styledMode||(p?Jg:xn)(h.container,{width:`${f+w}px`,height:`${m+S}px`},p),h.setChartSize(!0),g.setSize(f,m,p),h.axes.forEach(function(y){y.isDirty=!0,y.setScale()}),h.isDirtyLegend=!0,h.isDirtyBox=!0,h.layOutTitles(),h.getMargins(),h.redraw(p),h.oldChartHeight=void 0,Ke(h,"resize"),setTimeout(()=>{h&&Ke(h,"endResize")},fF(p).duration)),h.isResizing-=1}setChartSize(o){let l,d,h,g,{chartHeight:p,chartWidth:f,inverted:m,spacing:w,renderer:S}=this,y=this.clipOffset,E=Math[m?"floor":"round"];this.plotLeft=l=Math.round(this.plotLeft),this.plotTop=d=Math.round(this.plotTop),this.plotWidth=h=Math.max(0,Math.round(f-l-this.marginRight)),this.plotHeight=g=Math.max(0,Math.round(p-d-this.marginBottom)),this.plotSizeX=m?g:h,this.plotSizeY=m?h:g,this.spacingBox=S.spacingBox={x:w[3],y:w[0],width:f-w[3]-w[1],height:p-w[0]-w[2]},this.plotBox=S.plotBox={x:l,y:d,width:h,height:g},y&&(this.clipBox={x:E(y[3]),y:E(y[0]),width:E(this.plotSizeX-y[1]-y[3]),height:E(this.plotSizeY-y[0]-y[2])}),o||(this.axes.forEach(function(M){M.setAxisSize(),M.setAxisTranslation()}),S.alignElements()),Ke(this,"afterSetChartSize",{skipAxes:o})}resetMargins(){Ke(this,"resetMargins");let o=this,l=o.options.chart,d=l.plotBorderWidth||0,h=d/2;["margin","spacing"].forEach(function(g){let p=l[g],f=SF(p)?p:[p,p,p,p];["Top","Right","Bottom","Left"].forEach(function(m,w){o[g][w]=ni(l[g+m],f[w])})}),o0.forEach(function(g,p){o[g]=ni(o.margin[p],o.spacing[p])}),o.axisOffset=[0,0,0,0],o.clipOffset=[h,h,h,h],o.plotBorderWidth=d}drawChartBox(){let o=this.options.chart,l=this.renderer,d=this.chartWidth,h=this.chartHeight,g=this.styledMode,p=this.plotBGImage,f=o.backgroundColor,m=o.plotBackgroundColor,w=o.plotBackgroundImage,S=this.plotLeft,y=this.plotTop,E=this.plotWidth,M=this.plotHeight,R=this.plotBox,T=this.clipRect,F=this.clipBox,I=this.chartBackground,P=this.plotBackground,k=this.plotBorder,H,j,z,V="animate";I||(this.chartBackground=I=l.rect().addClass("highcharts-background").add(),V="attr"),g?H=j=I.strokeWidth():(j=(H=o.borderWidth||0)+(o.shadow?8:0),z={fill:f||"none"},(H||I["stroke-width"])&&(z.stroke=o.borderColor,z["stroke-width"]=H),I.attr(z).shadow(o.shadow)),I[V]({x:j/2,y:j/2,width:d-j-H%2,height:h-j-H%2,r:o.borderRadius}),V="animate",P||(V="attr",this.plotBackground=P=l.rect().addClass("highcharts-plot-background").add()),P[V](R),!g&&(P.attr({fill:m||"none"}).shadow(o.plotShadow),w&&(p?(w!==p.attr("href")&&p.attr("href",w),p.animate(R)):this.plotBGImage=l.image(w,S,y,E,M).add())),T?T.animate({width:F.width,height:F.height}):this.clipRect=l.clipRect(F),V="animate",k||(V="attr",this.plotBorder=k=l.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),g||k.attr({stroke:o.plotBorderColor,"stroke-width":o.plotBorderWidth||0,fill:"none"}),k[V](k.crisp({x:S,y,width:E,height:M},-k.strokeWidth())),this.isDirtyBox=!1,Ke(this,"afterDrawChartBox")}propFromSeries(){let o,l,d,h=this,g=h.options.chart,p=h.options.series;["inverted","angular","polar"].forEach(function(f){for(l=ip[g.type],d=g[f]||l&&l.prototype[f],o=p&&p.length;!d&&o--;)(l=ip[p[o].type])&&l.prototype[f]&&(d=!0);h[f]=d})}linkSeries(o){let l=this,d=l.series;d.forEach(function(h){h.linkedSeries.length=0}),d.forEach(function(h){let{linkedTo:g}=h.options;if(dd(g)){let p;(p=g===":previous"?l.series[h.index-1]:l.get(g))&&p.linkedParent!==h&&(p.linkedSeries.push(h),h.linkedParent=p,p.enabledDataSorting&&h.setDataSortingOptions(),h.visible=ni(h.options.visible,p.options.visible,h.visible))}}),Ke(this,"afterLinkSeries",{isUpdating:o})}renderSeries(){this.series.forEach(function(o){o.translate(),o.render()})}render(){let o=this.axes,l=this.colorAxis,d=this.renderer,h=this.options.chart.axisLayoutRuns||2,g=S=>{S.forEach(y=>{y.visible&&y.render()})},p=0,f=!0,m,w=0;for(let S of(this.setTitle(),Ke(this,"beforeMargins"),this.getStacks?.(),this.getMargins(!0),this.setChartSize(),o)){let{options:y}=S,{labels:E}=y;if(this.hasCartesianSeries&&S.horiz&&S.visible&&E.enabled&&S.series.length&&S.coll!=="colorAxis"&&!this.polar){p=y.tickLength,S.createGroups();let M=new Ro(S,0,"",!0),R=M.createLabel("x",E);if(M.destroy(),R&&ni(E.reserveSpace,!Oo(y.crossing))&&(p=R.getBBox().height+E.distance+Math.max(y.offset||0,0)),p){R?.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-p,0);(f||m||h>1)&&w<h;){let S=this.plotWidth,y=this.plotHeight;for(let E of o)w===0?E.setScale():(E.horiz&&f||!E.horiz&&m)&&E.setTickInterval(!0);w===0?this.getAxisMargins():this.getMargins(),f=S/this.plotWidth>(w?1:1.1),m=y/this.plotHeight>(w?1:1.05),w++}this.drawChartBox(),this.hasCartesianSeries?g(o):l&&l.length&&g(l),this.seriesGroup||(this.seriesGroup=d.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(o){let l=this,d=sr(!0,this.options.credits,o);d.enabled&&!this.credits&&(this.credits=this.renderer.text(d.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){d.href&&(a0.location.href=d.href)}).attr({align:d.position.align,zIndex:8}),l.styledMode||this.credits.css(d.style),this.credits.add().align(d.position),this.credits.update=function(h){l.credits=l.credits.destroy(),l.addCredits(h)})}destroy(){let o,l=this,d=l.axes,h=l.series,g=l.container,p=g&&g.parentNode;for(Ke(l,"destroy"),l.renderer.forExport?wF(Ps,l):Ps[l.index]=void 0,G.chartCount--,l.renderTo.removeAttribute("data-highcharts-chart"),u0(l),o=d.length;o--;)d[o]=d[o].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),o=h.length;o--;)h[o]=h[o].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(function(f){let m=l[f];m&&m.destroy&&(l[f]=m.destroy())}),g&&(g.innerHTML=Ct.emptyHTML,u0(g),p&&CF(g)),lp(l,function(f,m){delete l[m]})}firstRender(){let o=this,l=o.options;o.getContainer(),o.resetMargins(),o.setChartSize(),o.propFromSeries(),o.createAxes();let d=bF(l.series)?l.series:[];l.series=[],d.forEach(function(h){o.initSeries(h)}),o.linkSeries(),o.setSortedData(),Ke(o,"beforeRender"),o.render(),o.pointer?.getChartPosition(),o.renderer.imgCount||o.hasLoaded||o.onload(),o.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(o){o&&this.index!==void 0&&o.apply(this,[this])},this),Ke(this,"load"),Ke(this,"render"),Or(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:o,title:l}=this;!o||this.accessibility||(this.renderer.boxWrapper.attr({role:"img","aria-label":(l&&l.element.textContent||"").replace(/</g,"&lt;")}),o.accessibility&&o.accessibility.enabled===!1||sp('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(o,l,d){let h,g=this;return o&&(l=ni(l,!0),Ke(g,"addSeries",{options:o},function(){h=g.initSeries(o),g.isDirtyLegend=!0,g.linkSeries(),h.enabledDataSorting&&h.setData(o.data,!1),Ke(g,"afterAddSeries",{series:h}),l&&g.redraw(d)})),h}addAxis(o,l,d,h){return this.createAxis(l?"xAxis":"yAxis",{axis:o,redraw:d,animation:h})}addColorAxis(o,l,d){return this.createAxis("colorAxis",{axis:o,redraw:l,animation:d})}createAxis(o,l){let d=new Gg(this,l.axis,o);return ni(l.redraw,!0)&&this.redraw(l.animation),d}showLoading(o){let l=this,d=l.options,h=d.loading,g=function(){p&&xn(p,{left:l.plotLeft+"px",top:l.plotTop+"px",width:l.plotWidth+"px",height:l.plotHeight+"px"})},p=l.loadingDiv,f=l.loadingSpan;p||(l.loadingDiv=p=rp("div",{className:"highcharts-loading highcharts-loading-hidden"},null,l.container)),f||(l.loadingSpan=f=rp("span",{className:"highcharts-loading-inner"},null,p),np(l,"redraw",g)),p.className="highcharts-loading",Ct.setElementHTML(f,ni(o,d.lang.loading,"")),l.styledMode||(xn(p,Lr(h.style,{zIndex:10})),xn(f,h.labelStyle),l.loadingShown||(xn(p,{opacity:0,display:""}),Jg(p,{opacity:h.style.opacity||.5},{duration:h.showDuration||0}))),l.loadingShown=!0,g()}hideLoading(){let o=this.options,l=this.loadingDiv;l&&(l.className="highcharts-loading highcharts-loading-hidden",this.styledMode||Jg(l,{opacity:0},{duration:o.loading.hideDuration||100,complete:function(){xn(l,{display:"none"})}})),this.loadingShown=!1}update(o,l,d,h){let g,p,f,m=this,w={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},S=o.isResponsiveOptions,y=[];Ke(m,"update",{options:o}),S||m.setResponsive(!1,!0),o=c0(o,m.options),m.userOptions=sr(m.userOptions,o);let E=o.chart;E&&(sr(!0,m.options.chart,E),this.setZoomOptions(),"className"in E&&m.setClassName(E.className),("inverted"in E||"polar"in E||"type"in E)&&(m.propFromSeries(),g=!0),"alignTicks"in E&&(g=!0),"events"in E&&s0(this,E),lp(E,function(T,F){m.propsRequireUpdateSeries.indexOf("chart."+F)!==-1&&(p=!0),m.propsRequireDirtyBox.indexOf(F)!==-1&&(m.isDirtyBox=!0),m.propsRequireReflow.indexOf(F)===-1||(m.isDirtyBox=!0,S||(f=!0))}),!m.styledMode&&E.style&&m.renderer.setStyle(m.options.chart.style||{})),!m.styledMode&&o.colors&&(this.options.colors=o.colors),lp(o,function(T,F){m[F]&&typeof m[F].update=="function"?m[F].update(T,!1):typeof m[w[F]]=="function"?m[w[F]](T):F!=="colors"&&m.collectionsWithUpdate.indexOf(F)===-1&&sr(!0,m.options[F],o[F]),F!=="chart"&&m.propsRequireUpdateSeries.indexOf(F)!==-1&&(p=!0)}),this.collectionsWithUpdate.forEach(function(T){o[T]&&(ud(o[T]).forEach(function(F,I){let P,k=Or(F.id);k&&(P=m.get(F.id)),!P&&m[T]&&(P=m[T][ni(F.index,I)])&&(k&&Or(P.options.id)||P.options.isInternal)&&(P=void 0),P&&P.coll===T&&(P.update(F,!1),d&&(P.touched=!0)),!P&&d&&m.collectionsWithInit[T]&&(m.collectionsWithInit[T][0].apply(m,[F].concat(m.collectionsWithInit[T][1]||[]).concat([!1])).touched=!0)}),d&&m[T].forEach(function(F){F.touched||F.options.isInternal?delete F.touched:y.push(F)}))}),y.forEach(function(T){T.chart&&T.remove&&T.remove(!1)}),g&&m.axes.forEach(function(T){T.update({},!1)}),p&&m.getSeriesOrderByLinks().forEach(function(T){T.chart&&T.update({},!1)},this);let M=E&&E.width,R=E&&(dd(E.height)?d0(E.height,M||m.chartWidth):E.height);f||Oo(M)&&M!==m.chartWidth||Oo(R)&&R!==m.chartHeight?m.setSize(M,R,h):ni(l,!0)&&m.redraw(h),Ke(m,"afterUpdate",{options:o,redraw:l,animation:h})}setSubtitle(o,l){this.applyDescription("subtitle",o),this.layOutTitles(l)}setCaption(o,l){this.applyDescription("caption",o),this.layOutTitles(l)}showResetZoom(){let o=this,l=tp.lang,d=o.zooming.resetButton,h=d.theme,g=d.relativeTo==="chart"||d.relativeTo==="spacingBox"?null:"plotBox";function p(){o.zoomOut()}Ke(this,"beforeShowResetZoom",null,function(){o.resetZoomButton=o.renderer.button(l.resetZoom,null,null,p,h).attr({align:d.position.align,title:l.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(d.position,!1,g)}),Ke(this,"afterShowResetZoom")}zoomOut(){Ke(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(o,l){let d=this,h=typeof l=="object"?l:{enabled:l,type:"x"},g=h.type,p=g&&d[{x:"xAxis",xy:"axes",y:"yAxis"}[g]].filter(m=>m.options.panningEnabled&&!m.options.isInternal),f=d.options.chart;f?.panning&&(f.panning=h),Ke(this,"pan",{originalEvent:o},()=>{d.transform({axes:p,event:o,to:{x:o.chartX-(d.mouseDownX||0),y:o.chartY-(d.mouseDownY||0)},trigger:"pan"}),xn(d.container,{cursor:"move"})})}transform(o){let{axes:l=this.axes,event:d,from:h={},reset:g,selection:p,to:f={},trigger:m}=o,{inverted:w,time:S}=this,y=!1,E,M;for(let R of(this.hoverPoints?.forEach(T=>T.setState()),l)){let{horiz:T,len:F,minPointOffset:I=0,options:P,reversed:k}=R,H=T?"width":"height",j=T?"x":"y",z=ni(f[H],R.len),V=ni(h[H],R.len),W=10>Math.abs(z)?1:z/V,X=(h[j]||0)+V/2-R.pos,Q=X-((f[j]??R.pos)+z/2-R.pos)/W,te=k&&!w||!k&&w?-1:1;if(!g&&(X<0||X>R.len))continue;let de=R.toValue(Q,!0)+(p||R.isOrdinal?0:I*te),le=R.toValue(Q+F/W,!0)-(p||R.isOrdinal?0:I*te||0),ge=R.allExtremes;if(de>le&&([de,le]=[le,de]),W===1&&!g&&R.coll==="yAxis"&&!ge){for(let yi of R.series){let Wn=yi.getExtremes(yi.getProcessedData(!0).modified.getColumn("y")||[],!0);ge??(ge={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),Oo(Wn.dataMin)&&Oo(Wn.dataMax)&&(ge.dataMin=Math.min(Wn.dataMin,ge.dataMin),ge.dataMax=Math.max(Wn.dataMax,ge.dataMax))}R.allExtremes=ge}let{dataMin:me,dataMax:he,min:Le,max:Te}=Lr(R.getExtremes(),ge||{}),Re=S.parse(P.min),Be=S.parse(P.max),Se=me??Re,Pt=he??Be,Rt=le-de,ze=R.categories?0:Math.min(Rt,Pt-Se),ct=Se-ze*(Or(Re)?0:P.minPadding),Gt=Pt+ze*(Or(Be)?0:P.maxPadding),bt=R.allowZoomOutside||W===1||m!=="zoom"&&W>1,ri=Math.min(Re??ct,ct,bt?Le:ct),zt=Math.max(Be??Gt,Gt,bt?Te:Gt);(!R.isOrdinal||R.options.overscroll||W!==1||g)&&(de<ri&&(de=ri,W>=1&&(le=de+Rt)),le>zt&&(le=zt,W>=1&&(de=le-Rt)),(g||R.series.length&&(de!==Le||le!==Te)&&de>=ri&&le<=zt)&&(p?p[R.coll].push({axis:R,min:de,max:le}):(R.isPanning=m!=="zoom",R.isPanning&&(M=!0),R.setExtremes(g?void 0:de,g?void 0:le,!1,!1,{move:Q,trigger:m,scale:W}),!g&&(de>ri||le<zt)&&m!=="mousewheel"&&(E=!0)),y=!0),d&&(this[T?"mouseDownX":"mouseDownY"]=d[T?"chartX":"chartY"]))}return y&&(p?Ke(this,"selection",p,()=>{delete o.selection,o.trigger="zoom",this.transform(o)}):(!E||M||this.resetZoomButton?!E&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(m==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),y}}Lr(Nr.prototype,{callbacks:[],collectionsWithInit:{xAxis:[Nr.prototype.addAxis,[!0]],yAxis:[Nr.prototype.addAxis,[!1]],series:[Nr.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]});let{stop:MF}=ii,{composed:RF}=G,{addEvent:_r,createElement:hd,css:cp,defined:dp,erase:IF,merge:h0,pushUnique:g0}=ce;function TF(){let C=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!C&&(this.scrollablePlotArea=C=new f0(this)),C?.applyFixed()}function p0(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}let f0=(()=>{class C{static compose(l,d,h){g0(RF,this.compose)&&(_r(l,"afterInit",p0),_r(d,"afterSetChartSize",g=>this.afterSetSize(g.target,g)),_r(d,"render",TF),_r(h,"show",p0))}static afterSetSize(l,d){let h,g,p,{minWidth:f,minHeight:m}=l.options.chart.scrollablePlotArea||{},{clipBox:w,plotBox:S,inverted:y,renderer:E}=l;if(!E.forExport&&(f?(l.scrollablePixelsX=h=Math.max(0,f-l.chartWidth),h&&(l.scrollablePlotBox=h0(l.plotBox),S.width=l.plotWidth+=h,w[y?"height":"width"]+=h,p=!0)):m&&(l.scrollablePixelsY=g=Math.max(0,m-l.chartHeight),dp(g)&&(l.scrollablePlotBox=h0(l.plotBox),S.height=l.plotHeight+=g,w[y?"width":"height"]+=g,p=!1)),dp(p)&&!d.skipAxes))for(let M of l.axes)(M.horiz===p||l.hasParallelCoordinates&&M.coll==="yAxis")&&(M.setAxisSize(),M.setAxisTranslation())}constructor(l){let d,h=l.options.chart,g=Ua.getRendererType(),p=h.scrollablePlotArea||{},f=this.moveFixedElements.bind(this),m={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};l.scrollablePixelsX&&(m.overflowX="auto"),l.scrollablePixelsY&&(m.overflowY="auto"),this.chart=l;let w=this.parentDiv=hd("div",{className:"highcharts-scrolling-parent"},{position:"relative"},l.renderTo),S=this.scrollingContainer=hd("div",{className:"highcharts-scrolling"},m,w),y=this.innerContainer=hd("div",{className:"highcharts-inner-container"},void 0,S),E=this.fixedDiv=hd("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(h.style?.zIndex||0)+2,top:0},void 0,!0),M=this.fixedRenderer=new g(E,l.chartWidth,l.chartHeight,h.style);this.mask=M.path().attr({fill:h.backgroundColor||"#fff","fill-opacity":p.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),S.parentNode.insertBefore(E,S),cp(l.renderTo,{overflow:"visible"}),_r(l,"afterShowResetZoom",f),_r(l,"afterApplyDrilldown",f),_r(l,"afterLayOutTitles",f),_r(S,"scroll",()=>{let{pointer:R,hoverPoint:T}=l;R&&(delete R.chartPosition,T&&(d=T),R.runPointActions(void 0,d,!0))}),y.appendChild(l.container)}applyFixed(){let{chart:l,fixedRenderer:d,isDirty:h,scrollingContainer:g}=this,{axisOffset:p,chartWidth:f,chartHeight:m,container:w,plotHeight:S,plotLeft:y,plotTop:E,plotWidth:M,scrollablePixelsX:R=0,scrollablePixelsY:T=0}=l,{scrollPositionX:F=0,scrollPositionY:I=0}=l.options.chart.scrollablePlotArea||{},P=f+R,k=m+T;d.setSize(f,m),(h??!0)&&(this.isDirty=!1,this.moveFixedElements()),MF(l.container),cp(w,{width:`${P}px`,height:`${k}px`}),l.renderer.boxWrapper.attr({width:P,height:k,viewBox:[0,0,P,k].join(" ")}),l.chartBackground?.attr({width:P,height:k}),cp(g,{width:`${f}px`,height:`${m}px`}),dp(h)||(g.scrollLeft=R*F,g.scrollTop=T*I);let H=E-p[0]-1,j=y-p[3]-1,z=E+S+p[2]+1,V=y+M+p[1]+1,W=y+M-R,X=E+S-T,Q=[["M",0,0]];R?Q=[["M",0,H],["L",y-1,H],["L",y-1,z],["L",0,z],["Z"],["M",W,H],["L",f,H],["L",f,z],["L",W,z],["Z"]]:T&&(Q=[["M",j,0],["L",j,E-1],["L",V,E-1],["L",V,0],["Z"],["M",j,X],["L",j,m],["L",V,m],["L",V,X],["Z"]]),l.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:Q})}moveFixedElements(){let l,{container:d,inverted:h,scrollablePixelsX:g,scrollablePixelsY:p}=this.chart,f=this.fixedRenderer,m=C.fixedSelectors;if(g&&!h?l=".highcharts-yaxis":g&&h||p&&!h?l=".highcharts-xaxis":p&&h&&(l=".highcharts-yaxis"),l&&!(this.chart.hasParallelCoordinates&&l===".highcharts-yaxis"))for(let w of[`${l}:not(.highcharts-radial-axis)`,`${l}-labels:not(.highcharts-radial-axis-labels)`])g0(m,w);else for(let w of[".highcharts-xaxis",".highcharts-yaxis"])for(let S of[`${w}:not(.highcharts-radial-axis)`,`${w}-labels:not(.highcharts-radial-axis-labels)`])IF(m,S);for(let w of m)[].forEach.call(d.querySelectorAll(w),S=>{(S.namespaceURI===f.SVG_NS?f.box:f.box.parentNode).appendChild(S),S.style.pointerEvents="auto"})}}return C.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"],C})(),{format:FF}=wn,{series:AF}=Tt,{destroyObjectProperties:PF,fireEvent:m0,getAlignFactor:up,isNumber:hp,pick:il}=ce,v0=class{constructor(C,o,l,d,h){let g=C.chart.inverted,p=C.reversed;this.axis=C;let f=this.isNegative=!!l!=!!p;this.options=o=o||{},this.x=d,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=h,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:o.align||(g?f?"left":"right":"center"),verticalAlign:o.verticalAlign||(g?"middle":f?"bottom":"top"),y:o.y,x:o.x},this.textAlign=o.textAlign||(g?f?"right":"left":"center")}destroy(){PF(this,this.axis)}render(C){let o=this.axis.chart,l=this.options,d=l.format,h=d?FF(d,this,o):l.formatter.call(this);if(this.label)this.label.attr({text:h,visibility:"hidden"});else{this.label=o.renderer.label(h,null,void 0,l.shape,void 0,void 0,l.useHTML,!1,"stack-labels");let g={r:l.borderRadius||0,text:h,padding:il(l.padding,5),visibility:"hidden"};o.styledMode||(g.fill=l.backgroundColor,g.stroke=l.borderColor,g["stroke-width"]=l.borderWidth,this.label.css(l.style||{})),this.label.attr(g),this.label.added||this.label.add(C)}this.label.labelrank=o.plotSizeY,m0(this,"afterRender")}setOffset(C,o,l,d,h,g){let{alignOptions:p,axis:f,label:m,options:w,textAlign:S}=this,y=f.chart,E=this.getStackBox({xOffset:C,width:o,boxBottom:l,boxTop:d,defaultX:h,xAxis:g}),{verticalAlign:M}=p;if(m&&E){let R=m.getBBox(void 0,0),T=m.padding,F=il(w.overflow,"justify")==="justify",I;p.x=w.x||0,p.y=w.y||0;let{x:P,y:k}=this.adjustStackPosition({labelBox:R,verticalAlign:M,textAlign:S});E.x-=P,E.y-=k,m.align(p,!1,E),(I=y.isInsidePlot(m.alignAttr.x+p.x+P,m.alignAttr.y+p.y+k))||(F=!1),F&&AF.prototype.justifyDataLabel.call(f,m,p,m.alignAttr,R,E),m.attr({x:m.alignAttr.x,y:m.alignAttr.y,rotation:w.rotation,rotationOriginX:R.width*up(w.textAlign||"center"),rotationOriginY:R.height/2}),il(!F&&w.crop,!0)&&(I=hp(m.x)&&hp(m.y)&&y.isInsidePlot(m.x-T+(m.width||0),m.y)&&y.isInsidePlot(m.x+T,m.y)),m[I?"show":"hide"]()}m0(this,"afterSetOffset",{xOffset:C,width:o})}adjustStackPosition({labelBox:C,verticalAlign:o,textAlign:l}){return{x:C.width/2+C.width/2*(2*up(l)-1),y:C.height/2*2*(1-up(o))}}getStackBox(C){let o=this.axis,l=o.chart,{boxTop:d,defaultX:h,xOffset:g,width:p,boxBottom:f}=C,m=o.stacking.usePercentage?100:il(d,this.total,0),w=o.toPixels(m),S=C.xAxis||l.xAxis[0],y=il(h,S.translate(this.x))+g,E=Math.abs(w-o.toPixels(f||hp(o.min)&&o.logarithmic&&o.logarithmic.lin2log(o.min)||0)),M=l.inverted,R=this.isNegative;return M?{x:(R?w:w-E)-l.plotLeft,y:S.height-y-p+S.top-l.plotTop,width:E,height:p}:{x:y+S.transB-l.plotLeft,y:(R?w-E:w)-l.plotTop,width:p,height:E}}},{getDeferredAnimation:kF}=ii,{series:{prototype:OF}}=Tt,{addEvent:C0,correctFloat:nl,defined:w0,destroyObjectProperties:LF,fireEvent:NF,isNumber:gp,objectEach:ks,pick:pp}=ce;function _F(){let C=this.inverted;this.axes.forEach(o=>{o.stacking&&o.stacking.stacks&&o.hasVisibleSeries&&(o.stacking.oldStacks=o.stacking.stacks)}),this.series.forEach(o=>{let l=o.xAxis&&o.xAxis.options||{};o.options.stacking&&o.reserveSpace()&&(o.stackKey=[o.type,pp(o.options.stack,""),C?l.top:l.left,C?l.height:l.width].join(","))})}function BF(){let C=this.stacking;if(C){let o=C.stacks;ks(o,(l,d)=>{LF(l),delete o[d]}),C.stackTotalGroup?.destroy()}}function VF(){this.stacking||(this.stacking=new UF(this))}function HF(C,o,l,d){return!w0(C)||C.x!==o||d&&C.stackKey!==d?C={x:o,index:0,key:d,stackKey:d}:C.index++,C.key=[l,o,C.index].join(","),C}function GF(){let C,o=this,l=o.yAxis,d=o.stackKey||"",h=l.stacking.stacks,g=o.getColumn("x",!0),p=o.options.stacking,f=o[p+"Stacker"];f&&[d,"-"+d].forEach(m=>{let w=g.length,S,y,E;for(;w--;)S=g[w],C=o.getStackIndicator(C,S,o.index,m),y=h[m]?.[S],(E=y?.points[C.key||""])&&f.call(o,E,y,w)})}function zF(C,o,l){let d=o.total?100/o.total:0;C[0]=nl(C[0]*d),C[1]=nl(C[1]*d),this.stackedYData[l]=C[1]}function WF(C){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&this.chart.series.length>1?OF.setStackedPoints.call(this,C,"group"):C.stacking.resetStacks())}function jF(C,o){let l,d,h,g,p,f,m,w=o||this.options.stacking;if(!w||!this.reserveSpace()||({group:"xAxis"}[w]||"yAxis")!==C.coll)return;let S=this.getColumn("x",!0),y=this.getColumn(this.pointValKey||"y",!0),E=[],M=y.length,R=this.options,T=R.threshold||0,F=R.startFromThreshold?T:0,I=R.stack,P=o?`${this.type},${w}`:this.stackKey||"",k="-"+P,H=this.negStacks,j=C.stacking,z=j.stacks,V=j.oldStacks;for(j.stacksTouched+=1,m=0;m<M;m++){let W=S[m]||0,X=y[m],Q=gp(X)&&X||0;f=(l=this.getStackIndicator(l,W,this.index)).key||"",z[p=(d=H&&Q<(F?0:T))?k:P]||(z[p]={}),z[p][W]||(V[p]?.[W]?(z[p][W]=V[p][W],z[p][W].total=null):z[p][W]=new v0(C,C.options.stackLabels,!!d,W,I)),h=z[p][W],X!==null?(h.points[f]=h.points[this.index]=[pp(h.cumulative,F)],w0(h.cumulative)||(h.base=f),h.touched=j.stacksTouched,l.index>0&&this.singleStacks===!1&&(h.points[f][0]=h.points[this.index+","+W+",0"][0])):(delete h.points[f],delete h.points[this.index]);let te=h.total||0;w==="percent"?(g=d?P:k,te=H&&z[g]?.[W]?(g=z[g][W]).total=Math.max(g.total||0,te)+Math.abs(Q):nl(te+Math.abs(Q))):w==="group"?gp(X)&&te++:te=nl(te+Q),w==="group"?h.cumulative=(te||1)-1:h.cumulative=nl(pp(h.cumulative,F)+Q),h.total=te,X!==null&&(h.points[f].push(h.cumulative),E[m]=h.cumulative,h.hasValidPoints=!0)}w==="percent"&&(j.usePercentage=!0),w!=="group"&&(this.stackedYData=E),j.oldStacks={}}class UF{constructor(o){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=o}buildStacks(){let o,l,d=this.axis,h=d.series,g=d.coll==="xAxis",p=d.options.reversedStacks,f=h.length;for(this.resetStacks(),this.usePercentage=!1,l=f;l--;)o=h[p?l:f-l-1],g&&o.setGroupedPoints(d),o.setStackedPoints(d);if(!g)for(l=0;l<f;l++)h[l].modifyStacks();NF(d,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,ks(this.stacks,o=>{ks(o,l=>{l.cumulative=l.total})}))}resetStacks(){ks(this.stacks,o=>{ks(o,(l,d)=>{gp(l.touched)&&l.touched<this.stacksTouched?(l.destroy(),delete o[d]):(l.total=null,l.cumulative=null)})})}renderStackTotals(){let o=this.axis,l=o.chart,d=l.renderer,h=this.stacks,g=kF(l,o.options.stackLabels?.animation||!1),p=this.stackTotalGroup=this.stackTotalGroup||d.g("stack-labels").attr({zIndex:6,opacity:0}).add();p.translate(l.plotLeft,l.plotTop),ks(h,f=>{ks(f,m=>{m.render(p)})}),p.animate({opacity:1},g)}}(D||(D={})).compose=function(C,o,l){let d=o.prototype,h=l.prototype;d.getStacks||(C0(C,"init",VF),C0(C,"destroy",BF),d.getStacks=_F,h.getStackIndicator=HF,h.modifyStacks=GF,h.percentStacker=zF,h.setGroupedPoints=WF,h.setStackedPoints=jF)};let $F=D,{defined:qF,merge:y0,isObject:KF}=ce;class b0 extends Wi{drawGraph(){let o=this.options,l=(this.gappedPath||this.getGraphPath).call(this),d=this.chart.styledMode;[this,...this.zones].forEach((h,g)=>{let p,f=h.graph,m=f?"animate":"attr",w=h.dashStyle||o.dashStyle;f?(f.endX=this.preventGraphAnimation?null:l.xMap,f.animate({d:l})):l.length&&(h.graph=f=this.chart.renderer.path(l).addClass("highcharts-graph"+(g?` highcharts-zone-graph-${g-1} `:" ")+(g&&h.className||"")).attr({zIndex:1}).add(this.group)),f&&!d&&(p={stroke:!g&&o.lineColor||h.color||this.color||"#cccccc","stroke-width":o.lineWidth||0,fill:this.fillGraph&&this.color||"none"},w?p.dashstyle=w:o.linecap!=="square"&&(p["stroke-linecap"]=p["stroke-linejoin"]="round"),f[m](p).shadow(g<2&&o.shadow&&y0({filterUnits:"userSpaceOnUse"},KF(o.shadow)?o.shadow:{}))),f&&(f.startX=l.xMap,f.isArea=l.isArea)})}getGraphPath(o,l,d){let h=this,g=h.options,p=[],f=[],m,w=g.step,S=(o=o||h.points).reversed;return S&&o.reverse(),(w={right:1,center:2}[w]||w&&3)&&S&&(w=4-w),(o=this.getValidPoints(o,!1,!(g.connectNulls&&!l&&!d))).forEach(function(y,E){let M,R=y.plotX,T=y.plotY,F=o[E-1],I=y.isNull||typeof T!="number";(y.leftCliff||F&&F.rightCliff)&&!d&&(m=!0),I&&!qF(l)&&E>0?m=!g.connectNulls:I&&!l?m=!0:(E===0||m?M=[["M",y.plotX,y.plotY]]:h.getPointSpline?M=[h.getPointSpline(o,y,E)]:w?(M=w===1?[["L",F.plotX,T]]:w===2?[["L",(F.plotX+R)/2,F.plotY],["L",(F.plotX+R)/2,T]]:[["L",R,F.plotY]]).push(["L",R,T]):M=[["L",R,T]],f.push(y.x),w&&(f.push(y.x),w===2&&f.push(y.x)),p.push.apply(p,M),m=!1)}),p.xMap=f,h.graphPath=p,p}}b0.defaultOptions=y0(Wi.defaultOptions,{legendSymbol:"lineMarker"}),Tt.registerSeriesType("line",b0);let{seriesTypes:{line:fp}}=Tt,{extend:YF,merge:XF,objectEach:ZF,pick:gd}=ce;class mp extends fp{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:o,options:l}=this;[this,...this.zones].forEach((d,h)=>{let g={},p=d.fillColor||l.fillColor,f=d.area,m=f?"animate":"attr";f?(f.endX=this.preventGraphAnimation?null:o.xMap,f.animate({d:o})):(g.zIndex=0,(f=d.area=this.chart.renderer.path(o).addClass("highcharts-area"+(h?` highcharts-zone-area-${h-1} `:" ")+(h&&d.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(g.fill=p||d.color||this.color,g["fill-opacity"]=p?1:l.fillOpacity??.75,f.css({pointerEvents:this.stickyTracking?"none":"auto"})),f[m](g),f.startX=o.xMap,f.shiftUnit=l.step?2:1})}getGraphPath(o){let l,d,h,g=fp.prototype.getGraphPath,p=this.options,f=p.stacking,m=this.yAxis,w=[],S=[],y=this.index,E=m.stacking.stacks[this.stackKey],M=p.threshold,R=Math.round(m.getThreshold(p.threshold)),T=gd(p.connectNulls,f==="percent"),F=function(z,V,W){let X=o[z],Q=f&&E[X.x].points[y],te=X[W+"Null"]||0,de=X[W+"Cliff"]||0,le,ge,me=!0;de||te?(le=(te?Q[0]:Q[1])+de,ge=Q[0]+de,me=!!te):!f&&o[V]&&o[V].isNull&&(le=ge=M),le!==void 0&&(S.push({plotX:l,plotY:le===null?R:m.getThreshold(le),isNull:me,isCliff:!0}),w.push({plotX:l,plotY:ge===null?R:m.getThreshold(ge),doCurve:!1}))};o=o||this.points,f&&(o=this.getStackPoints(o));for(let z=0,V=o.length;z<V;++z)f||(o[z].leftCliff=o[z].rightCliff=o[z].leftNull=o[z].rightNull=void 0),d=o[z].isNull,l=gd(o[z].rectPlotX,o[z].plotX),h=f?gd(o[z].yBottom,R):R,d&&!T||(T||F(z,z-1,"left"),d&&!f&&T||(S.push(o[z]),w.push({x:z,plotX:l,plotY:h})),T||F(z,z+1,"right"));let I=g.call(this,S,!0,!0);w.reversed=!0;let P=g.call(this,w,!0,!0),k=P[0];k&&k[0]==="M"&&(P[0]=["L",k[1],k[2]]);let H=I.concat(P);H.length&&H.push(["Z"]);let j=g.call(this,S,!1,T);return this.chart.series.length>1&&f&&S.some(z=>z.isCliff)&&(H.hasStackedCliffs=j.hasStackedCliffs=!0),H.xMap=I.xMap,this.areaPath=H,j}getStackPoints(o){let l=this,d=[],h=[],g=this.xAxis,p=this.yAxis,f=p.stacking.stacks[this.stackKey],m={},w=p.series,S=w.length,y=p.options.reversedStacks?1:-1,E=w.indexOf(l);if(o=o||this.points,this.options.stacking){for(let R=0;R<o.length;R++)o[R].leftNull=o[R].rightNull=void 0,m[o[R].x]=o[R];ZF(f,function(R,T){R.total!==null&&h.push(T)}),h.sort(function(R,T){return R-T});let M=w.map(R=>R.visible);h.forEach(function(R,T){let F=0,I,P;if(m[R]&&!m[R].isNull)d.push(m[R]),[-1,1].forEach(function(k){let H=k===1?"rightNull":"leftNull",j=f[h[T+k]],z=0;if(j){let V=E;for(;V>=0&&V<S;){let W=w[V].index;!(I=j.points[W])&&(W===l.index?m[R][H]=!0:M[V]&&(P=f[R].points[W])&&(z-=P[1]-P[0])),V+=y}}m[R][k===1?"rightCliff":"leftCliff"]=z});else{let k=E;for(;k>=0&&k<S;){let H=w[k].index;if(I=f[R].points[H]){F=I[1];break}k+=y}F=gd(F,0),F=p.translate(F,0,1,0,1),d.push({isNull:!0,plotX:g.translate(R,0,0,0,1),x:R,plotY:F,yBottom:F})}})}return d}}mp.defaultOptions=XF(fp.defaultOptions,{threshold:0,legendSymbol:"areaMarker"}),YF(mp.prototype,{singleStacks:!1}),Tt.registerSeriesType("area",mp);let{line:S0}=Tt.seriesTypes,{merge:QF,pick:pd}=ce;class vp extends S0{getPointSpline(o,l,d){let h,g,p,f,m=l.plotX||0,w=l.plotY||0,S=o[d-1],y=o[d+1];function E(R){return R&&!R.isNull&&R.doCurve!==!1&&!l.isCliff}if(E(S)&&E(y)){let R=S.plotX||0,T=S.plotY||0,F=y.plotX||0,I=y.plotY||0,P=0;h=(1.5*m+R)/2.5,g=(1.5*w+T)/2.5,p=(1.5*m+F)/2.5,f=(1.5*w+I)/2.5,p!==h&&(P=(f-g)*(p-m)/(p-h)+w-f),g+=P,f+=P,g>T&&g>w?(g=Math.max(T,w),f=2*w-g):g<T&&g<w&&(g=Math.min(T,w),f=2*w-g),f>I&&f>w?(f=Math.max(I,w),g=2*w-f):f<I&&f<w&&(f=Math.min(I,w),g=2*w-f),l.rightContX=p,l.rightContY=f,l.controlPoints={low:[h,g],high:[p,f]}}let M=["C",pd(S.rightContX,S.plotX,0),pd(S.rightContY,S.plotY,0),pd(h,m,0),pd(g,w,0),m,w];return S.rightContX=S.rightContY=void 0,M}}vp.defaultOptions=QF(S0.defaultOptions),Tt.registerSeriesType("spline",vp);let x0=vp,{area:JF,area:{prototype:Cp}}=Tt.seriesTypes,{extend:eA,merge:tA}=ce;class wp extends x0{}wp.defaultOptions=tA(x0.defaultOptions,JF.defaultOptions),eA(wp.prototype,{getGraphPath:Cp.getGraphPath,getStackPoints:Cp.getStackPoints,drawGraph:Cp.drawGraph}),Tt.registerSeriesType("areaspline",wp);let{animObject:iA}=ii,{parse:nA}=Ht,{noop:rA}=G,{clamp:fd,crisp:md,defined:E0,extend:D0,fireEvent:M0,isArray:R0,isNumber:vd,merge:yp,pick:Lo,objectEach:sA}=ce;class Cd extends Wi{animate(o){let l,d,h=this,g=this.yAxis,p=g.pos,f=g.reversed,m=h.options,{clipOffset:w,inverted:S}=this.chart,y={},E=S?"translateX":"translateY";o&&w?(y.scaleY=.001,d=fd(g.toPixels(m.threshold||0),p,p+g.len),S?(d+=f?-Math.floor(w[0]):Math.ceil(w[2]),y.translateX=d-g.len):(d+=f?Math.ceil(w[0]):-Math.floor(w[2]),y.translateY=d),h.clipBox&&h.setClip(),h.group.attr(y)):(l=Number(h.group.attr(E)),h.group.animate({scaleY:1},D0(iA(h.options.animation),{step:function(M,R){h.group&&(y[E]=l+R.pos*(p-l),h.group.attr(y))}})))}init(o,l){super.init.apply(this,arguments);let d=this;(o=d.chart).hasRendered&&o.series.forEach(function(h){h.type===d.type&&(h.isDirty=!0)})}getColumnMetrics(){let o=this,l=o.options,d=o.xAxis,h=o.yAxis,g=d.options.reversedStacks,p=d.reversed&&!g||!d.reversed&&g,f={},m,w=0;l.grouping===!1?w=1:o.chart.series.forEach(function(T){let F,I=T.yAxis,P=T.options;T.type===o.type&&T.reserveSpace()&&h.len===I.len&&h.pos===I.pos&&(P.stacking&&P.stacking!=="group"?(f[m=T.stackKey]===void 0&&(f[m]=w++),F=f[m]):P.grouping!==!1&&(F=w++),T.columnIndex=F)});let S=Math.min(Math.abs(d.transA)*(!d.brokenAxis?.hasBreaks&&d.ordinal?.slope||l.pointRange||d.closestPointRange||d.tickInterval||1),d.len),y=S*l.groupPadding,E=(S-2*y)/(w||1),M=Math.min(l.maxPointWidth||d.len,Lo(l.pointWidth,E*(1-2*l.pointPadding))),R=(o.columnIndex||0)+(p?1:0);return o.columnMetrics={width:M,offset:(E-M)/2+(y+R*E-S/2)*(p?-1:1),paddedWidth:E,columnCount:w},o.columnMetrics}crispCol(o,l,d,h){let g=this.borderWidth,p=this.chart.inverted;return h=md(l+h,g,p)-(l=md(l,g,p)),this.options.crisp&&(d=md(o+d,g)-(o=md(o,g))),{x:o,y:l,width:d,height:h}}adjustForMissingColumns(o,l,d,h){if(!d.isNull&&h.columnCount>1){let g=this.xAxis.series.filter(w=>w.visible).map(w=>w.index),p=0,f=0;sA(this.xAxis.stacking?.stacks,w=>{let S=typeof d.x=="number"?w[d.x.toString()]?.points:void 0,y=S?.[this.index],E={};if(S&&R0(y)){let M=this.index,R=Object.keys(S).filter(T=>!T.match(",")&&S[T]&&S[T].length>1).map(parseFloat).filter(T=>g.indexOf(T)!==-1).filter(T=>{let F=this.chart.series[T].options,I=F.stacking&&F.stack;if(E0(I)){if(vd(E[I]))return M===T&&(M=E[I]),!1;E[I]=T}return!0}).sort((T,F)=>F-T);p=R.indexOf(M),f=R.length}}),p=this.xAxis.reversed?f-1-p:p;let m=(f-1)*h.paddedWidth+l;o=(d.plotX||0)+m/2-l-p*h.paddedWidth}return o}translate(){let o=this,l=o.chart,d=o.options,h=o.dense=o.closestPointRange*o.xAxis.transA<2,g=o.borderWidth=Lo(d.borderWidth,h?0:1),p=o.xAxis,f=o.yAxis,m=d.threshold,w=Lo(d.minPointLength,5),S=o.getColumnMetrics(),y=S.width,E=o.pointXOffset=S.offset,M=o.dataMin,R=o.dataMax,T=o.translatedThreshold=f.getThreshold(m),F=o.barW=Math.max(y,1+2*g);d.pointPadding&&d.crisp&&(F=Math.ceil(F)),Wi.prototype.translate.apply(o),o.points.forEach(function(I){let P=Lo(I.yBottom,T),k=999+Math.abs(P),H=I.plotX||0,j=fd(I.plotY,-k,f.len+k),z,V=Math.min(j,P),W=Math.max(j,P)-V,X=y,Q=H+E,te=F;w&&Math.abs(W)<w&&(W=w,z=!f.reversed&&!I.negative||f.reversed&&I.negative,vd(m)&&vd(R)&&I.y===m&&R<=m&&(f.min||0)<m&&(M!==R||(f.max||0)<=m)&&(z=!z,I.negative=!I.negative),V=Math.abs(V-T)>w?P-w:T-(z?w:0)),E0(I.options.pointWidth)&&(Q-=Math.round(((X=te=Math.ceil(I.options.pointWidth))-y)/2)),d.centerInCategory&&(Q=o.adjustForMissingColumns(Q,X,I,S)),I.barX=Q,I.pointWidth=X,I.tooltipPos=l.inverted?[fd(f.len+f.pos-l.plotLeft-j,f.pos-l.plotLeft,f.len+f.pos-l.plotLeft),p.len+p.pos-l.plotTop-Q-te/2,W]:[p.left-l.plotLeft+Q+te/2,fd(j+f.pos-l.plotTop,f.pos-l.plotTop,f.len+f.pos-l.plotTop),W],I.shapeType=o.pointClass.prototype.shapeType||"roundedRect",I.shapeArgs=o.crispCol(Q,I.isNull?T:V,te,I.isNull?0:W)}),M0(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(o,l){let d=this.options,h=this.pointAttrToOptions||{},g=h.stroke||"borderColor",p=h["stroke-width"]||"borderWidth",f,m,w,S=o&&o.color||this.color,y=o&&o[g]||d[g]||S,E=o&&o.options.dashStyle||d.dashStyle,M=o&&o[p]||d[p]||this[p]||0,R=Lo(o&&o.opacity,d.opacity,1);o&&this.zones.length&&(m=o.getZone(),S=o.options.color||m&&(m.color||o.nonZonedColor)||this.color,m&&(y=m.borderColor||y,E=m.dashStyle||E,M=m.borderWidth||M)),l&&o&&(w=(f=yp(d.states[l],o.options.states&&o.options.states[l]||{})).brightness,S=f.color||w!==void 0&&nA(S).brighten(f.brightness).get()||S,y=f[g]||y,M=f[p]||M,E=f.dashStyle||E,R=Lo(f.opacity,R));let T={fill:S,stroke:y,"stroke-width":M,opacity:R};return E&&(T.dashstyle=E),T}drawPoints(o=this.points){let l,d=this,h=this.chart,g=d.options,p=h.renderer,f=g.animationLimit||250;o.forEach(function(m){let w=m.plotY,S=m.graphic,y=!!S,E=S&&h.pointCount<f?"animate":"attr";vd(w)&&m.y!==null?(l=m.shapeArgs,S&&m.hasNewShapeType()&&(S=S.destroy()),d.enabledDataSorting&&(m.startXPos=d.xAxis.reversed?-(l&&l.width||0):d.xAxis.width),!S&&(m.graphic=S=p[m.shapeType](l).add(m.group||d.group),S&&d.enabledDataSorting&&h.hasRendered&&h.pointCount<f&&(S.attr({x:m.startXPos}),y=!0,E="animate")),S&&y&&S[E](yp(l)),h.styledMode||S[E](d.pointAttribs(m,m.selected&&"select")).shadow(m.allowShadow!==!1&&g.shadow),S&&(S.addClass(m.getClassName(),!0),S.attr({visibility:m.visible?"inherit":"hidden"}))):S&&(m.graphic=S.destroy())})}drawTracker(o=this.points){let l,d=this,h=d.chart,g=h.pointer,p=function(f){g?.normalize(f);let m=g?.getPointFromEvent(f),w=!h.scrollablePlotArea||h.isInsidePlot(f.chartX-h.plotLeft,f.chartY-h.plotTop,{visiblePlotOnly:!0});g&&m&&d.options.enableMouseTracking&&w&&(g.isDirectTouch=!0,m.onMouseOver(f))};o.forEach(function(f){l=R0(f.dataLabels)?f.dataLabels:f.dataLabel?[f.dataLabel]:[],f.graphic&&(f.graphic.element.point=f),l.forEach(function(m){(m.div||m.element).point=f})}),d._hasTracking||(d.trackerGroups.forEach(function(f){d[f]&&(d[f].addClass("highcharts-tracker").on("mouseover",p).on("mouseout",function(m){g?.onTrackerMouseOut(m)}).on("touchstart",p),!h.styledMode&&d.options.cursor&&d[f].css({cursor:d.options.cursor}))}),d._hasTracking=!0),M0(this,"afterDrawTracker")}remove(){let o=this,l=o.chart;l.hasRendered&&l.series.forEach(function(d){d.type===o.type&&(d.isDirty=!0)}),Wi.prototype.remove.apply(o,arguments)}}Cd.defaultOptions=yp(Wi.defaultOptions,{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}),D0(Cd.prototype,{directTouch:!0,getSymbol:rA,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),Tt.registerSeriesType("column",Cd);let wd=Cd,{getDeferredAnimation:oA}=ii,{format:aA}=wn,{defined:Os,extend:I0,fireEvent:bp,getAlignFactor:T0,isArray:Br,isString:Sp,merge:rl,objectEach:lA,pick:sl,pInt:cA,splat:F0}=ce;(function(C){function o(){return m(this).some(S=>S?.enabled)}function l(S,y,E,M,R){let{chart:T,enabledDataSorting:F}=this,I=this.isCartesian&&T.inverted,P=S.plotX,k=S.plotY,H=E.rotation||0,j=Os(P)&&Os(k)&&T.isInsidePlot(P,Math.round(k),{inverted:I,paneCoordinates:!0,series:this}),z=H===0&&sl(E.overflow,F?"none":"justify")==="justify",V=this.visible&&S.visible!==!1&&Os(P)&&(S.series.forceDL||F&&!z||j||sl(E.inside,!!this.options.stacking)&&M&&T.isInsidePlot(P,I?M.x+1:M.y+M.height-1,{inverted:I,paneCoordinates:!0,series:this})),W=S.pos();if(V&&W){var X;let Q=y.getBBox(),te=y.getBBox(void 0,0);if(M=I0({x:W[0],y:Math.round(W[1]),width:0,height:0},M||{}),E.alignTo==="plotEdges"&&this.isCartesian&&(M[I?"x":"y"]=0,M[I?"width":"height"]=this.yAxis?.len||0),I0(E,{width:Q.width,height:Q.height}),X=M,F&&this.xAxis&&!z&&this.setDataLabelStartPos(S,y,R,j,X),y.align(rl(E,{width:te.width,height:te.height}),!1,M,!1),y.alignAttr.x+=T0(E.align)*(te.width-Q.width),y.alignAttr.y+=T0(E.verticalAlign)*(te.height-Q.height),y[y.placed?"animate":"attr"]({x:y.alignAttr.x+(Q.width-te.width)/2,y:y.alignAttr.y+(Q.height-te.height)/2,rotationOriginX:(y.width||0)/2,rotationOriginY:(y.height||0)/2}),z&&M.height>=0)this.justifyDataLabel(y,E,y.alignAttr,Q,M,R);else if(sl(E.crop,!0)){let{x:de,y:le}=y.alignAttr;V=T.isInsidePlot(de,le,{paneCoordinates:!0,series:this})&&T.isInsidePlot(de+Q.width-1,le+Q.height-1,{paneCoordinates:!0,series:this})}E.shape&&!H&&y[R?"attr":"animate"]({anchorX:W[0],anchorY:W[1]})}R&&F&&(y.placed=!1),V||F&&!z?(y.show(),y.placed=!0):(y.hide(),y.placed=!1)}function d(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function h(S){let y=this.hasRendered||0,E=this.initDataLabelsGroup().attr({opacity:+y});return!y&&E&&(this.visible&&E.show(),this.options.animation?E.animate({opacity:1},S):E.attr({opacity:1})),E}function g(S){let y;S=S||this.points;let E=this,M=E.chart,R=E.options,T=M.renderer,{backgroundColor:F,plotBackgroundColor:I}=M.options.chart,P=T.getContrast(Sp(I)&&I||Sp(F)&&F||"#000000"),k=m(E),{animation:H,defer:j}=k[0],z=j?oA(M,H,E):{defer:0,duration:0};bp(this,"drawDataLabels"),E.hasDataLabels?.()&&(y=this.initDataLabels(z),S.forEach(V=>{let W=V.dataLabels||[];F0(f(k,V.dlOptions||V.options?.dataLabels)).forEach((Q,te)=>{let de=Q.enabled&&(V.visible||V.dataLabelOnHidden)&&(!V.isNull||V.dataLabelOnNull)&&function(ze,ct){let Gt=ct.filter;if(Gt){let bt=Gt.operator,ri=ze[Gt.property],zt=Gt.value;return bt===">"&&ri>zt||bt==="<"&&ri<zt||bt===">="&&ri>=zt||bt==="<="&&ri<=zt||bt==="=="&&ri==zt||bt==="==="&&ri===zt||bt==="!="&&ri!=zt||bt==="!=="&&ri!==zt}return!0}(V,Q),{backgroundColor:le,borderColor:ge,distance:me,style:he={}}=Q,Le,Te,Re,Be={},Se=W[te],Pt=!Se,Rt;de&&(Te=Os(Le=sl(Q[V.formatPrefix+"Format"],Q.format))?aA(Le,V,M):(Q[V.formatPrefix+"Formatter"]||Q.formatter).call(V,Q),Re=Q.rotation,!M.styledMode&&(he.color=sl(Q.color,he.color,Sp(E.color)?E.color:void 0,"#000000"),he.color==="contrast"?(le!=="none"&&(Rt=le),V.contrastColor=T.getContrast(Rt!=="auto"&&Rt||V.color||E.color),he.color=Rt||!Os(me)&&Q.inside||0>cA(me||0)||R.stacking?V.contrastColor:P):delete V.contrastColor,R.cursor&&(he.cursor=R.cursor)),Be={r:Q.borderRadius||0,rotation:Re,padding:Q.padding,zIndex:1},M.styledMode||(Be.fill=le==="auto"?V.color:le,Be.stroke=ge==="auto"?V.color:ge,Be["stroke-width"]=Q.borderWidth),lA(Be,(ze,ct)=>{ze===void 0&&delete Be[ct]})),!Se||de&&Os(Te)&&!!Se.div==!!Q.useHTML&&(Se.rotation&&Q.rotation||Se.rotation===Q.rotation)||(Se=void 0,Pt=!0),de&&Os(Te)&&(Se?Be.text=Te:(Se=T.label(Te,0,0,Q.shape,void 0,void 0,Q.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+V.colorIndex+" "+(Q.className||"")+(Q.useHTML?" highcharts-tracker":"")),Se&&(Se.options=Q,Se.attr(Be),M.styledMode?he.width&&Se.css({width:he.width,textOverflow:he.textOverflow,whiteSpace:he.whiteSpace}):Se.css(he).shadow(Q.shadow),bp(Se,"beforeAddingDataLabel",{labelOptions:Q,point:V}),Se.added||Se.add(y),E.alignDataLabel(V,Se,Q,void 0,Pt),Se.isActive=!0,W[te]&&W[te]!==Se&&W[te].destroy(),W[te]=Se))});let X=W.length;for(;X--;)W[X]&&W[X].isActive?W[X].isActive=!1:(W[X]?.destroy(),W.splice(X,1));V.dataLabel=W[0],V.dataLabels=W})),bp(this,"afterDrawDataLabels")}function p(S,y,E,M,R,T){let F=this.chart,I=y.align,P=y.verticalAlign,k=S.box?0:S.padding||0,H=F.inverted?this.yAxis:this.xAxis,j=H?H.left-F.plotLeft:0,z=F.inverted?this.xAxis:this.yAxis,V=z?z.top-F.plotTop:0,{x:W=0,y:X=0}=y,Q,te;return(Q=(E.x||0)+k+j)<0&&(I==="right"&&W>=0?(y.align="left",y.inside=!0):W-=Q,te=!0),(Q=(E.x||0)+M.width-k+j)>F.plotWidth&&(I==="left"&&W<=0?(y.align="right",y.inside=!0):W+=F.plotWidth-Q,te=!0),(Q=E.y+k+V)<0&&(P==="bottom"&&X>=0?(y.verticalAlign="top",y.inside=!0):X-=Q,te=!0),(Q=(E.y||0)+M.height-k+V)>F.plotHeight&&(P==="top"&&X<=0?(y.verticalAlign="bottom",y.inside=!0):X+=F.plotHeight-Q,te=!0),te&&(y.x=W,y.y=X,S.placed=!T,S.align(y,void 0,R)),te}function f(S,y){let E=[],M;if(Br(S)&&!Br(y))E=S.map(function(R){return rl(R,y)});else if(Br(y)&&!Br(S))E=y.map(function(R){return rl(S,R)});else if(Br(S)||Br(y)){if(Br(S)&&Br(y))for(M=Math.max(S.length,y.length);M--;)E[M]=rl(S[M],y[M])}else E=rl(S,y);return E}function m(S){let y=S.chart.options.plotOptions;return F0(f(f(y?.series?.dataLabels,y?.[S.type]?.dataLabels),S.options.dataLabels))}function w(S,y,E,M,R){let T=this.chart,F=T.inverted,I=this.xAxis,P=I.reversed,k=((F?y.height:y.width)||0)/2,H=S.pointWidth,j=H?H/2:0;y.startXPos=F?R.x:P?-k-j:I.width-k+j,y.startYPos=F?P?this.yAxis.height-k+j:-k-j:R.y,M?y.visibility==="hidden"&&(y.show(),y.attr({opacity:0}).animate({opacity:1})):y.attr({opacity:1}).animate({opacity:0},void 0,y.hide),T.hasRendered&&(E&&y.attr({x:y.startXPos,y:y.startYPos}),y.placed=!0)}C.compose=function(S){let y=S.prototype;y.initDataLabels||(y.initDataLabels=h,y.initDataLabelsGroup=d,y.alignDataLabel=l,y.drawDataLabels=g,y.justifyDataLabel=p,y.setDataLabelStartPos=w,y.hasDataLabels=o)}})(A||(A={}));let yd=A,{composed:dA}=G,{series:A0}=Tt,{merge:uA,pick:ol,pushUnique:hA}=ce;(function(C){function o(l,d,h,g,p){let f=this.chart.inverted,m=l.series,w=(m.xAxis?m.xAxis.len:this.chart.plotSizeX)||0,S=(m.yAxis?m.yAxis.len:this.chart.plotSizeY)||0,y=l.dlBox||l.shapeArgs,E=ol(l.below,l.plotY>ol(this.translatedThreshold,S)),M=ol(h.inside,!!this.options.stacking);if(y){if(g=uA(y),!(h.overflow==="allow"&&h.crop===!1)){g.y<0&&(g.height+=g.y,g.y=0);let R=g.y+g.height-S;R>0&&R<g.height-1&&(g.height-=R)}f&&(g={x:S-g.y-g.height,y:w-g.x-g.width,width:g.height,height:g.width}),M||(f?(g.x+=E?0:g.width,g.width=0):(g.y+=E?g.height:0,g.height=0))}h.align=ol(h.align,!f||M?"center":E?"right":"left"),h.verticalAlign=ol(h.verticalAlign,f||M?"middle":E?"top":"bottom"),A0.prototype.alignDataLabel.call(this,l,d,h,g,p),h.inside&&l.contrastColor&&d.css({color:l.contrastColor})}C.compose=function(l){yd.compose(A0),hA(dA,"ColumnDataLabel")&&(l.prototype.alignDataLabel=o)}})(O||(O={}));let gA=O,{extend:pA,merge:fA}=ce;class xp extends wd{}xp.defaultOptions=fA(wd.defaultOptions,{}),pA(xp.prototype,{inverted:!0}),Tt.registerSeriesType("bar",xp);let{column:mA,line:P0}=Tt.seriesTypes,{addEvent:vA,extend:CA,merge:wA}=ce;class bd extends P0{applyJitter(){let o=this,l=this.options.jitter,d=this.points.length;l&&this.points.forEach(function(h,g){["x","y"].forEach(function(p,f){if(l[p]&&!h.isNull){let m=`plot${p.toUpperCase()}`,w=o[`${p}Axis`],S=l[p]*w.transA;if(w&&!w.logarithmic){let y=Math.max(0,(h[m]||0)-S),E=Math.min(w.len,(h[m]||0)+S);h[m]=y+(E-y)*function(M){let R=1e4*Math.sin(M);return R-Math.floor(R)}(g+f*d),p==="x"&&(h.clientX=h.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}bd.defaultOptions=wA(P0.defaultOptions,{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25CF</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),CA(bd.prototype,{drawTracker:mA.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),vA(bd,"afterTranslate",function(){this.applyJitter()}),Tt.registerSeriesType("scatter",bd);let{deg2rad:k0}=G,{fireEvent:yA,isNumber:Ep,pick:Sd,relativeLength:bA}=ce;(function(C){C.getCenter=function(){let o=this.options,l=this.chart,d=2*(o.slicedOffset||0),h=l.plotWidth-2*d,g=l.plotHeight-2*d,p=o.center,f=Math.min(h,g),m=o.thickness,w,S=o.size,y=o.innerSize||0,E,M;typeof S=="string"&&(S=parseFloat(S)),typeof y=="string"&&(y=parseFloat(y));let R=[Sd(p?.[0],"50%"),Sd(p?.[1],"50%"),Sd(S&&S<0?void 0:o.size,"100%"),Sd(y&&y<0?void 0:o.innerSize||0,"0%")];for(!l.angular||this instanceof Wi||(R[3]=0),E=0;E<4;++E)M=R[E],w=E<2||E===2&&/%$/.test(M),R[E]=bA(M,[h,g,f,R[2]][E])+(w?d:0);return R[3]>R[2]&&(R[3]=R[2]),Ep(m)&&2*m<R[2]&&m>0&&(R[3]=R[2]-2*m),yA(this,"afterGetCenter",{positions:R}),R},C.getStartAndEndRadians=function(o,l){let d=Ep(o)?o:0,h=Ep(l)&&l>d&&l-d<360?l:d+360;return{start:k0*(d+-90),end:k0*(h+-90)}}})(B||(B={}));let O0=B,{setAnimation:SA}=ii,{addEvent:L0,defined:xA,extend:EA,isNumber:DA,pick:MA,relativeLength:RA}=ce;class N0 extends Pr{getConnectorPath(o){let l=o.dataLabelPosition,d=o.options||{},h=d.connectorShape,g=this.connectorShapes[h]||h;return l&&g.call(this,ue(q({},l.computed),{alignment:l.alignment}),l.connectorPosition,d)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(o){let l=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(l.x,l.y,l.r+o,l.r+o,{innerR:l.r-1,start:l.start,end:l.end,borderRadius:l.borderRadius})}constructor(o,l,d){super(o,l,d),this.half=0,this.name??(this.name="Slice");let h=g=>{this.slice(g.type==="select")};L0(this,"select",h),L0(this,"unselect",h)}isValid(){return DA(this.y)&&this.y>=0}setVisible(o,l=!0){o!==this.visible&&this.update({visible:o??!this.visible},l,void 0,!1)}slice(o,l,d){let h=this.series;SA(d,h.chart),l=MA(l,!0),this.sliced=this.options.sliced=o=xA(o)?o:!this.sliced,h.options.data[h.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}EA(N0.prototype,{connectorShapes:{fixedOffset:function(C,o,l){let d=o.breakAt,h=o.touchingSliceAt,g=l.softConnector?["C",C.x+(C.alignment==="left"?-5:5),C.y,2*d.x-h.x,2*d.y-h.y,d.x,d.y]:["L",d.x,d.y];return[["M",C.x,C.y],g,["L",h.x,h.y]]},straight:function(C,o){let l=o.touchingSliceAt;return[["M",C.x,C.y],["L",l.x,l.y]]},crookedLine:function(C,o,l){let{angle:d=this.angle||0,breakAt:h,touchingSliceAt:g}=o,{series:p}=this,[f,m,w]=p.center,S=w/2,{plotLeft:y,plotWidth:E}=p.chart,M=C.alignment==="left",{x:R,y:T}=C,F=h.x;if(l.crookDistance){let P=RA(l.crookDistance,1);F=M?f+S+(E+y-f-S)*(1-P):y+(f-S)*P}else F=f+(m-T)*Math.tan(d-Math.PI/2);let I=[["M",R,T]];return(M?F<=R&&F>=h.x:F>=R&&F<=h.x)&&I.push(["L",F,T]),I.push(["L",h.x,h.y],["L",g.x,g.y]),I}}});let{getStartAndEndRadians:IA}=O0,{noop:_0}=G,{clamp:TA,extend:FA,fireEvent:B0,merge:Dp,pick:AA}=ce;class Mp extends Wi{animate(o){let l=this,d=l.points,h=l.startAngleRad;o||d.forEach(function(g){let p=g.graphic,f=g.shapeArgs;p&&f&&(p.attr({r:AA(g.startR,l.center&&l.center[3]/2),start:h,end:h}),p.animate({r:f.r,start:f.start,end:f.end},l.options.animation))})}drawEmpty(){let o,l,d=this.startAngleRad,h=this.endAngleRad,g=this.options;this.total===0&&this.center?(o=this.center[0],l=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(o,l,this.center[1]/2,0,d,h).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:uy.arc(o,l,this.center[2]/2,0,{start:d,end:h,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":g.borderWidth,fill:g.fillColor||"none",stroke:g.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let o=this.chart.renderer;this.points.forEach(function(l){l.graphic&&l.hasNewShapeType()&&(l.graphic=l.graphic.destroy()),l.graphic||(l.graphic=o[l.shapeType](l.shapeArgs).add(l.series.group),l.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(o,l,d,h){let g=this.center,p=this.radii?this.radii[d.index]||0:g[2]/2,f=h.dataLabelPosition,m=f?.distance||0,w=Math.asin(TA((o-g[1])/(p+m),-1,1));return g[0]+Math.cos(w)*(p+m)*(l?-1:1)+(m>0?(l?-1:1)*(h.padding||0):0)}hasData(){return!!this.dataTable.rowCount}redrawPoints(){let o,l,d,h,g=this,p=g.chart;this.drawEmpty(),g.group&&!p.styledMode&&g.group.shadow(g.options.shadow),g.points.forEach(function(f){let m={};l=f.graphic,!f.isNull&&l?(h=f.shapeArgs,o=f.getTranslate(),p.styledMode||(d=g.pointAttribs(f,f.selected&&"select")),f.delayedRendering?(l.setRadialReference(g.center).attr(h).attr(o),p.styledMode||l.attr(d).attr({"stroke-linejoin":"round"}),f.delayedRendering=!1):(l.setRadialReference(g.center),p.styledMode||Dp(!0,m,d),Dp(!0,m,h,o),l.animate(m)),l.attr({visibility:f.visible?"inherit":"hidden"}),l.addClass(f.getClassName(),!0)):l&&(f.graphic=l.destroy())})}sortByAngle(o,l){o.sort(function(d,h){return d.angle!==void 0&&(h.angle-d.angle)*l})}translate(o){B0(this,"translate"),this.generatePoints();let l=this.options,d=l.slicedOffset,h=IA(l.startAngle,l.endAngle),g=this.startAngleRad=h.start,p=(this.endAngleRad=h.end)-g,f=this.points,m=l.ignoreHiddenPoint,w=f.length,S,y,E,M,R,T,F,I=0;for(o||(this.center=o=this.getCenter()),T=0;T<w;T++){F=f[T],S=g+I*p,F.isValid()&&(!m||F.visible)&&(I+=F.percentage/100),y=g+I*p;let P={x:o[0],y:o[1],r:o[2]/2,innerR:o[3]/2,start:Math.round(1e3*S)/1e3,end:Math.round(1e3*y)/1e3};F.shapeType="arc",F.shapeArgs=P,(E=(y+S)/2)>1.5*Math.PI?E-=2*Math.PI:E<-Math.PI/2&&(E+=2*Math.PI),F.slicedTranslation={translateX:Math.round(Math.cos(E)*d),translateY:Math.round(Math.sin(E)*d)},M=Math.cos(E)*o[2]/2,R=Math.sin(E)*o[2]/2,F.tooltipPos=[o[0]+.7*M,o[1]+.7*R],F.half=E<-Math.PI/2||E>Math.PI/2?1:0,F.angle=E}B0(this,"afterTranslate")}updateTotals(){let o=this.points,l=o.length,d=this.options.ignoreHiddenPoint,h,g,p=0;for(h=0;h<l;h++)(g=o[h]).isValid()&&(!d||g.visible)&&(p+=g.y);for(h=0,this.total=p;h<l;h++)(g=o[h]).percentage=p>0&&(g.visible||!d)?g.y/p*100:0,g.total=p}}Mp.defaultOptions=Dp(Wi.defaultOptions,{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.isNull?void 0:this.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}),FA(Mp.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:wd.prototype.drawTracker,getCenter:O0.getCenter,getSymbol:_0,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:wd.prototype.pointAttribs,pointClass:N0,requireSorting:!1,searchPoint:_0,trackerGroups:["group","dataLabelsGroup"]}),Tt.registerSeriesType("pie",Mp);let{composed:PA,noop:kA}=G,{distribute:OA}=Nc,{series:V0}=Tt,{arrayMax:LA,clamp:H0,defined:G0,pick:NA,pushUnique:_A,relativeLength:z0}=ce;(function(C){let o={radialDistributionY:function(p,f){return(f.dataLabelPosition?.top||0)+p.distributeBox.pos},radialDistributionX:function(p,f,m,w,S){let y=S.dataLabelPosition;return p.getX(m<(y?.top||0)+2||m>(y?.bottom||0)-2?w:m,f.half,f,S)},justify:function(p,f,m,w){return w[0]+(p.half?-1:1)*(m+(f.dataLabelPosition?.distance||0))},alignToPlotEdges:function(p,f,m,w){let S=p.getBBox().width;return f?S+w:m-S-w},alignToConnectors:function(p,f,m,w){let S=0,y;return p.forEach(function(E){(y=E.dataLabel.getBBox().width)>S&&(S=y)}),f?S+w:m-S-w}};function l(p,f){let m=Math.PI/2,{start:w=0,end:S=0}=p.shapeArgs||{},y=p.angle||0;f>0&&w<m&&S>m&&y>m/2&&y<1.5*m&&(y=y<=m?Math.max(m/2,(w+m)/2):Math.min(1.5*m,(m+S)/2));let{center:E,options:M}=this,R=E[2]/2,T=Math.cos(y),F=Math.sin(y),I=E[0]+T*R,P=E[1]+F*R,k=Math.min((M.slicedOffset||0)+(M.borderWidth||0),f/5);return{natural:{x:I+T*f,y:P+F*f},computed:{},alignment:f<0?"center":p.half?"right":"left",connectorPosition:{angle:y,breakAt:{x:I+T*k,y:P+F*k},touchingSliceAt:{x:I,y:P}},distance:f}}function d(){let p=this,f=p.points,m=p.chart,w=m.plotWidth,S=m.plotHeight,y=m.plotLeft,E=Math.round(m.chartWidth/3),M=p.center,R=M[2]/2,T=M[1],F=[[],[]],I=[0,0,0,0],P=p.dataLabelPositioners,k,H,j,z=0;p.visible&&p.hasDataLabels?.()&&(f.forEach(V=>{(V.dataLabels||[]).forEach(W=>{W.shortened&&(W.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),W.shortened=!1)})}),V0.prototype.drawDataLabels.apply(p),f.forEach(V=>{(V.dataLabels||[]).forEach((W,X)=>{let Q=M[2]/2,te=W.options,de=z0(te?.distance||0,Q);X===0&&F[V.half].push(V),!G0(te?.style?.width)&&W.getBBox().width>E&&(W.css({width:Math.round(.7*E)+"px"}),W.shortened=!0),W.dataLabelPosition=this.getDataLabelPosition(V,de),z=Math.max(z,de)})}),F.forEach((V,W)=>{let X=V.length,Q=[],te,de,le=0,ge;X&&(p.sortByAngle(V,W-.5),z>0&&(te=Math.max(0,T-R-z),de=Math.min(T+R+z,m.plotHeight),V.forEach(me=>{(me.dataLabels||[]).forEach(he=>{let Le=he.dataLabelPosition;Le&&Le.distance>0&&(Le.top=Math.max(0,T-R-Le.distance),Le.bottom=Math.min(T+R+Le.distance,m.plotHeight),le=he.getBBox().height||21,he.lineHeight=m.renderer.fontMetrics(he.text||he).h+2*he.padding,me.distributeBox={target:(he.dataLabelPosition?.natural.y||0)-Le.top+he.lineHeight/2,size:le,rank:me.y},Q.push(me.distributeBox))})}),OA(Q,ge=de+le-te,ge/5)),V.forEach(me=>{(me.dataLabels||[]).forEach(he=>{let Le=he.options||{},Te=me.distributeBox,Re=he.dataLabelPosition,Be=Re?.natural.y||0,Se=Le.connectorPadding||0,Pt=he.lineHeight||21,Rt=(Pt-he.getBBox().height)/2,ze=0,ct=Be,Gt="inherit";if(Re){if(Q&&G0(Te)&&Re.distance>0&&(Te.pos===void 0?Gt="hidden":(j=Te.size,ct=P.radialDistributionY(me,he))),Le.justify)ze=P.justify(me,he,R,M);else switch(Le.alignTo){case"connectors":ze=P.alignToConnectors(V,W,w,y);break;case"plotEdges":ze=P.alignToPlotEdges(he,W,w,y);break;default:ze=P.radialDistributionX(p,me,ct-Rt,Be,he)}if(Re.attribs={visibility:Gt,align:Re.alignment},Re.posAttribs={x:ze+(Le.x||0)+({left:Se,right:-Se}[Re.alignment]||0),y:ct+(Le.y||0)-Pt/2},Re.computed.x=ze,Re.computed.y=ct-Rt,NA(Le.crop,!0)){let bt;ze-(H=he.getBBox().width)<Se&&W===1?(bt=Math.round(H-ze+Se),I[3]=Math.max(bt,I[3])):ze+H>w-Se&&W===0&&(bt=Math.round(ze+H-w+Se),I[1]=Math.max(bt,I[1])),ct-j/2<0?I[0]=Math.max(Math.round(-ct+j/2),I[0]):ct+j/2>S&&(I[2]=Math.max(Math.round(ct+j/2-S),I[2])),Re.sideOverflow=bt}}})}))}),(LA(I)===0||this.verifyDataLabelOverflow(I))&&(this.placeDataLabels(),this.points.forEach(V=>{(V.dataLabels||[]).forEach(W=>{let{connectorColor:X,connectorWidth:Q=1}=W.options||{},te=W.dataLabelPosition;if(Q){let de;k=W.connector,te&&te.distance>0?(de=!k,k||(W.connector=k=m.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+V.colorIndex+(V.className?" "+V.className:"")).add(p.dataLabelsGroup)),m.styledMode||k.attr({"stroke-width":Q,stroke:X||V.color||"#666666"}),k[de?"attr":"animate"]({d:V.getConnectorPath(W)}),k.attr({visibility:te.attribs?.visibility})):k&&(W.connector=k.destroy())}})})))}function h(){this.points.forEach(p=>{(p.dataLabels||[]).forEach(f=>{let m=f.dataLabelPosition;m?(m.sideOverflow&&(f.css({width:Math.max(f.getBBox().width-m.sideOverflow,0)+"px",textOverflow:(f.options?.style||{}).textOverflow||"ellipsis"}),f.shortened=!0),f.attr(m.attribs),f[f.moved?"animate":"attr"](m.posAttribs),f.moved=!0):f&&f.attr({y:-9999})}),delete p.distributeBox},this)}function g(p){let f=this.center,m=this.options,w=m.center,S=m.minSize||80,y=S,E=m.size!==null;return!E&&(w[0]!==null?y=Math.max(f[2]-Math.max(p[1],p[3]),S):(y=Math.max(f[2]-p[1]-p[3],S),f[0]+=(p[3]-p[1])/2),w[1]!==null?y=H0(y,S,f[2]-Math.max(p[0],p[2])):(y=H0(y,S,f[2]-p[0]-p[2]),f[1]+=(p[0]-p[2])/2),y<f[2]?(f[2]=y,f[3]=Math.min(m.thickness?Math.max(0,y-2*m.thickness):Math.max(0,z0(m.innerSize||0,y)),y),this.translate(f),this.drawDataLabels&&this.drawDataLabels()):E=!0),E}C.compose=function(p){if(yd.compose(V0),_A(PA,"PieDataLabel")){let f=p.prototype;f.dataLabelPositioners=o,f.alignDataLabel=kA,f.drawDataLabels=d,f.getDataLabelPosition=l,f.placeDataLabels=h,f.verifyDataLabelOverflow=g}}})(L||(L={}));let BA=L;(function(C){C.getCenterOfPoints=function(o){let l=o.reduce((d,h)=>(d.x+=h.x,d.y+=h.y,d),{x:0,y:0});return{x:l.x/o.length,y:l.y/o.length}},C.getDistanceBetweenPoints=function(o,l){return Math.sqrt(Math.pow(l.x-o.x,2)+Math.pow(l.y-o.y,2))},C.getAngleBetweenPoints=function(o,l){return Math.atan2(l.x-o.x,l.y-o.y)},C.pointInPolygon=function({x:o,y:l},d){let h=d.length,g,p,f=!1;for(g=0,p=h-1;g<h;p=g++){let[m,w]=d[g],[S,y]=d[p];w>l!=y>l&&o<(S-m)*(l-w)/(y-w)+m&&(f=!f)}return f}})(U||(U={}));let{pointInPolygon:VA}=U,{addEvent:HA,fireEvent:W0,objectEach:j0,pick:GA}=ce;function zA(C){let o=C.length,l=(S,y)=>!(y.x>=S.x+S.width||y.x+y.width<=S.x||y.y>=S.y+S.height||y.y+y.height<=S.y),d=(S,y)=>{for(let E of S)if(VA({x:E[0],y:E[1]},y))return!0;return!1},h,g,p,f,m,w=!1;for(let S=0;S<o;S++)(h=C[S])&&(h.oldOpacity=h.opacity,h.newOpacity=1,h.absoluteBox=function(y){if(y&&(!y.alignAttr||y.placed)){let E=y.box?0:y.padding||0,M=y.alignAttr||{x:y.attr("x"),y:y.attr("y")},R=y.getBBox();return y.width=R.width,y.height=R.height,{x:M.x+(y.parentGroup?.translateX||0)+E,y:M.y+(y.parentGroup?.translateY||0)+E,width:(y.width||0)-2*E,height:(y.height||0)-2*E,polygon:R?.polygon}}}(h));C.sort((S,y)=>(y.labelrank||0)-(S.labelrank||0));for(let S=0;S<o;++S){f=(g=C[S])&&g.absoluteBox;let y=f?.polygon;for(let E=S+1;E<o;++E){m=(p=C[E])&&p.absoluteBox;let M=!1;if(f&&m&&g!==p&&g.newOpacity!==0&&p.newOpacity!==0&&g.visibility!=="hidden"&&p.visibility!=="hidden"){let R=m.polygon;if(y&&R&&y!==R?d(y,R)&&(M=!0):l(f,m)&&(M=!0),M){let T=g.labelrank<p.labelrank?g:p,F=T.text;T.newOpacity=0,F?.element.querySelector("textPath")&&F.hide()}}}}for(let S of C)U0(S,this)&&(w=!0);w&&W0(this,"afterHideAllOverlappingLabels")}function U0(C,o){let l,d,h=!1;return C&&(d=C.newOpacity,C.oldOpacity!==d&&(C.hasClass("highcharts-data-label")?(C[d?"removeClass":"addClass"]("highcharts-data-label-hidden"),l=function(){o.styledMode||C.css({pointerEvents:d?"auto":"none"})},h=!0,C[C.isOld?"animate":"attr"]({opacity:d},void 0,l),W0(o,"afterHideOverlappingLabel")):C.attr({opacity:d})),C.isOld=!0),h}function WA(){let C=this,o=[];for(let l of C.labelCollectors||[])o=o.concat(l());for(let l of C.yAxis||[])l.stacking&&l.options.stackLabels&&!l.options.stackLabels.allowOverlap&&j0(l.stacking.stacks,d=>{j0(d,h=>{h.label&&o.push(h.label)})});for(let l of C.series||[])if(l.visible&&l.hasDataLabels?.()){let d=h=>{for(let g of h)g.visible&&(g.dataLabels||[]).forEach(p=>{let f=p.options||{};p.labelrank=GA(f.labelrank,g.labelrank,g.shapeArgs?.height),f.allowOverlap??Number(f.distance)>0?(p.oldOpacity=p.opacity,p.newOpacity=1,U0(p,C)):o.push(p)})};d(l.nodes||[]),d(l.points)}this.hideOverlappingLabels(o)}let $0={compose:function(C){let o=C.prototype;o.hideOverlappingLabels||(o.hideOverlappingLabels=zA,HA(C,"render",WA))}},{defaultOptions:jA}=Ci,{noop:q0}=G,{addEvent:K0,extend:UA,isObject:Y0,merge:$A,relativeLength:Rp}=ce,qA={radius:0,scope:"stack",where:void 0},X0=q0,Z0=q0;function KA(C,o,l,d,h={}){let g=X0(C,o,l,d,h),{innerR:p=0,r:f=l,start:m=0,end:w=0}=h;if(h.open||!h.borderRadius)return g;let S=w-m,y=Math.sin(S/2),E=Math.max(Math.min(Rp(h.borderRadius||0,f-p),(f-p)/2,f*y/(1+y)),0),M=Math.min(E,S/Math.PI*2*p),R=g.length-1;for(;R--;)(function(T,F,I){let P,k,H,j=T[F],z=T[F+1];if(z[0]==="Z"&&(z=T[0]),(j[0]==="M"||j[0]==="L")&&z[0]==="A"?(P=j,k=z,H=!0):j[0]==="A"&&(z[0]==="M"||z[0]==="L")&&(P=z,k=j),P&&k&&k.params){let V=k[1],W=k[5],X=k.params,{start:Q,end:te,cx:de,cy:le}=X,ge=W?V-I:V+I,me=ge?Math.asin(I/ge):0,he=W?me:-me,Le=Math.cos(me)*ge;H?(X.start=Q+he,P[1]=de+Le*Math.cos(Q),P[2]=le+Le*Math.sin(Q),T.splice(F+1,0,["A",I,I,0,0,1,de+V*Math.cos(X.start),le+V*Math.sin(X.start)])):(X.end=te-he,k[6]=de+V*Math.cos(X.end),k[7]=le+V*Math.sin(X.end),T.splice(F+1,0,["A",I,I,0,0,1,de+Le*Math.cos(te),le+Le*Math.sin(te)])),k[4]=Math.abs(X.end-X.start)<Math.PI?0:1}})(g,R,R>1?M:E);return g}function YA(){if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:C,yAxis:o}=this,l=C.stacking==="percent",d=jA.plotOptions?.[this.type]?.borderRadius,h=Ip(C.borderRadius,Y0(d)?d:{}),g=o.options.reversed;for(let p of this.points){let{shapeArgs:f}=p;if(p.shapeType==="roundedRect"&&f){let{width:m=0,height:w=0,y:S=0}=f,y=S,E=w;if(h.scope==="stack"&&p.stackTotal){let F=o.translate(l?100:p.stackTotal,!1,!0,!1,!0),I=o.translate(C.threshold||0,!1,!0,!1,!0),P=this.crispCol(0,Math.min(F,I),0,Math.abs(F-I));y=P.y,E=P.height}let M=(p.negative?-1:1)*(g?-1:1)==-1,R=h.where;!R&&this.is("waterfall")&&Math.abs((p.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(R="all"),R||(R="end");let T=Math.min(Rp(h.radius,m),m/2,R==="all"?w/2:1/0)||0;R==="end"&&(M&&(y-=T),E+=T),UA(f,{brBoxHeight:E,brBoxY:y,r:T})}}}}function Ip(C,o){return Y0(C)||(C={radius:C||0}),$A(qA,o,C)}function XA(){let C=Ip(this.options.borderRadius);for(let o of this.points){let l=o.shapeArgs;l&&(l.borderRadius=Rp(C.radius,(l.r||0)-(l.innerR||0)))}}function ZA(C,o,l,d,h={}){let g=Z0(C,o,l,d,h),{r:p=0,brBoxHeight:f=d,brBoxY:m=o}=h,w=o-m,S=m+f-(o+d),y=w-p>-.1?0:p,E=S-p>-.1?0:p,M=Math.max(y&&w,0),R=Math.max(E&&S,0),T=[C+y,o],F=[C+l-y,o],I=[C+l,o+y],P=[C+l,o+d-E],k=[C+l-E,o+d],H=[C+E,o+d],j=[C,o+d-E],z=[C,o+y],V=(W,X)=>Math.sqrt(Math.pow(W,2)-Math.pow(X,2));if(M){let W=V(y,y-M);T[0]-=W,F[0]+=W,I[1]=z[1]=o+y-M}if(d<y-M){let W=V(y,y-M-d);I[0]=P[0]=C+l-y+W,k[0]=Math.min(I[0],k[0]),H[0]=Math.max(P[0],H[0]),j[0]=z[0]=C+y-W,I[1]=z[1]=o+d}if(R){let W=V(E,E-R);k[0]+=W,H[0]-=W,P[1]=j[1]=o+d-E+R}if(d<E-R){let W=V(E,E-R-d);I[0]=P[0]=C+l-E+W,F[0]=Math.min(I[0],F[0]),T[0]=Math.max(P[0],T[0]),j[0]=z[0]=C+E-W,P[1]=j[1]=o}return g.length=0,g.push(["M",...T],["L",...F],["A",y,y,0,0,1,...I],["L",...P],["A",E,E,0,0,1,...k],["L",...H],["A",E,E,0,0,1,...j],["L",...z],["A",y,y,0,0,1,...T],["Z"]),g}let{diffObjects:QA,extend:JA,find:eP,merge:tP,pick:xd,uniqueKey:iP}=ce;(function(C){function o(d,h){let g=d.condition;(g.callback||function(){return this.chartWidth<=xd(g.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=xd(g.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=xd(g.minWidth,0)&&this.chartHeight>=xd(g.minHeight,0)}).call(this)&&h.push(d._id)}function l(d,h){let g=this.options.responsive,p=this.currentResponsive,f=[],m;!h&&g&&g.rules&&g.rules.forEach(y=>{y._id===void 0&&(y._id=iP()),this.matchResponsiveRule(y,f)},this);let w=tP(...f.map(y=>eP((g||{}).rules||[],E=>E._id===y)).map(y=>y&&y.chartOptions));w.isResponsiveOptions=!0,f=f.toString()||void 0;let S=p&&p.ruleIds;f===S||(p&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(p.undoOptions,d,!0),this.updatingResponsive=!1),f?((m=QA(w,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:f,mergedOptions:w,undoOptions:m},this.updatingResponsive||this.update(w,d,!0)):this.currentResponsive=void 0)}C.compose=function(d){let h=d.prototype;return h.matchResponsiveRule||JA(h,{matchResponsiveRule:o,setResponsive:l}),d}})(K||(K={}));let nP=K;G.AST=Ct,G.Axis=Gg,G.Chart=Nr,G.Color=Ht,G.DataLabel=yd,G.DataTableCore=od,G.Fx=Ms,G.HTMLElement=Qa,G.Legend=r0,G.LegendSymbol=jy,G.OverlappingDataLabels=G.OverlappingDataLabels||$0,G.PlotLineOrBand=Jc,G.Point=Pr,G.Pointer=Gy,G.RendererRegistry=Ua,G.Series=Wi,G.SeriesRegistry=Tt,G.StackItem=v0,G.SVGElement=Gn,G.SVGRenderer=jc,G.Templating=wn,G.Tick=Ro,G.Time=rn,G.Tooltip=Ny,G.animate=ii.animate,G.animObject=ii.animObject,G.chart=Nr.chart,G.color=Ht.parse,G.dateFormat=wn.dateFormat,G.defaultOptions=Ci.defaultOptions,G.distribute=Nc.distribute,G.format=wn.format,G.getDeferredAnimation=ii.getDeferredAnimation,G.getOptions=Ci.getOptions,G.numberFormat=wn.numberFormat,G.seriesType=Tt.seriesType,G.setAnimation=ii.setAnimation,G.setOptions=Ci.setOptions,G.stop=ii.stop,G.time=Ci.defaultTime,G.timers=Ms.timers,{compose:function(C,o,l){let d=C.types.pie;if(!o.symbolCustomAttribs.includes("borderRadius")){let h=l.prototype.symbols;K0(C,"afterColumnTranslate",YA,{order:9}),K0(d,"afterTranslate",XA),o.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY"),X0=h.arc,Z0=h.roundedRect,h.arc=KA,h.roundedRect=ZA}},optionsToObject:Ip}.compose(G.Series,G.SVGElement,G.SVGRenderer),gA.compose(G.Series.types.column),yd.compose(G.Series),KI.compose(G.Axis),Qa.compose(G.SVGRenderer),r0.compose(G.Chart),ZI.compose(G.Axis),$0.compose(G.Chart),BA.compose(G.Series.types.pie),Jc.compose(G.Chart,G.Axis),Gy.compose(G.Chart),nP.compose(G.Chart),f0.compose(G.Axis,G.Chart,G.Series),$F.compose(G.Axis,G.Chart,G.Series),Ny.compose(G.Pointer),ce.extend(G,ce);let rP=G;return ne.default})())});function Lp(e,t){return Object.is(e,t)}var Yt=null,Md=!1,Np=1,ji=Symbol("SIGNAL");function We(e){let t=Yt;return Yt=e,t}function rb(){return Yt}var cl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Id(e){if(Md)throw new Error("");if(Yt===null)return;Yt.consumerOnSignalRead(e);let t=Yt.nextProducerIndex++;if(Ad(Yt),t<Yt.producerNode.length&&Yt.producerNode[t]!==e&&ll(Yt)){let i=Yt.producerNode[t];Fd(i,Yt.producerIndexOfThis[t])}Yt.producerNode[t]!==e&&(Yt.producerNode[t]=e,Yt.producerIndexOfThis[t]=ll(Yt)?ab(e,Yt,t):0),Yt.producerLastReadVersion[t]=e.version}function hP(){Np++}function _p(e){if(!(ll(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Np)){if(!e.producerMustRecompute(e)&&!Vp(e)){Op(e);return}e.producerRecomputeValue(e),Op(e)}}function sb(e){if(e.liveConsumerNode===void 0)return;let t=Md;Md=!0;try{for(let i of e.liveConsumerNode)i.dirty||gP(i)}finally{Md=t}}function ob(){return Yt?.consumerAllowSignalWrites!==!1}function gP(e){e.dirty=!0,sb(e),e.consumerMarkedDirty?.(e)}function Op(e){e.dirty=!1,e.lastCleanEpoch=Np}function Td(e){return e&&(e.nextProducerIndex=0),We(e)}function Bp(e,t){if(We(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(ll(e))for(let i=e.nextProducerIndex;i<e.producerNode.length;i++)Fd(e.producerNode[i],e.producerIndexOfThis[i]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Vp(e){Ad(e);for(let t=0;t<e.producerNode.length;t++){let i=e.producerNode[t],n=e.producerLastReadVersion[t];if(n!==i.version||(_p(i),n!==i.version))return!0}return!1}function Hp(e){if(Ad(e),ll(e))for(let t=0;t<e.producerNode.length;t++)Fd(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function ab(e,t,i){if(lb(e),e.liveConsumerNode.length===0&&cb(e))for(let n=0;n<e.producerNode.length;n++)e.producerIndexOfThis[n]=ab(e.producerNode[n],e,n);return e.liveConsumerIndexOfThis.push(i),e.liveConsumerNode.push(t)-1}function Fd(e,t){if(lb(e),e.liveConsumerNode.length===1&&cb(e))for(let n=0;n<e.producerNode.length;n++)Fd(e.producerNode[n],e.producerIndexOfThis[n]);let i=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[i],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[i],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let n=e.liveConsumerIndexOfThis[t],r=e.liveConsumerNode[t];Ad(r),r.producerIndexOfThis[n]=t}}function ll(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ad(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function lb(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function cb(e){return e.producerNode!==void 0}function db(e){let t=Object.create(pP);t.computation=e;let i=()=>{if(_p(t),Id(t),t.value===Rd)throw t.error;return t.value};return i[ji]=t,i}var Pp=Symbol("UNSET"),kp=Symbol("COMPUTING"),Rd=Symbol("ERRORED"),pP=ue(q({},cl),{value:Pp,dirty:!0,error:null,equal:Lp,producerMustRecompute(e){return e.value===Pp||e.value===kp},producerRecomputeValue(e){if(e.value===kp)throw new Error("Detected cycle in computations.");let t=e.value;e.value=kp;let i=Td(e),n;try{n=e.computation()}catch(r){n=Rd,e.error=r}finally{Bp(e,i)}if(t!==Pp&&t!==Rd&&n!==Rd&&e.equal(t,n)){e.value=t;return}e.value=n,e.version++}});function fP(){throw new Error}var ub=fP;function hb(){ub()}function gb(e){ub=e}var mP=null;function pb(e){let t=Object.create(Gp);t.value=e;let i=()=>(Id(t),t.value);return i[ji]=t,i}function Pd(e,t){ob()||hb(),e.equal(e.value,t)||(e.value=t,vP(e))}function fb(e,t){ob()||hb(),Pd(e,t(e.value))}var Gp=ue(q({},cl),{equal:Lp,value:void 0});function vP(e){e.version++,hP(),sb(e),mP?.()}function Oe(e){return typeof e=="function"}function _o(e){let i=e(n=>{Error.call(n),n.stack=new Error().stack});return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var kd=_o(e=>function(i){e(this),this.message=i?`${i.length} errors occurred during unsubscription:
${i.map((n,r)=>`${r+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=i});function dl(e,t){if(e){let i=e.indexOf(t);0<=i&&e.splice(i,1)}}var Wt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:i}=this;if(i)if(this._parentage=null,Array.isArray(i))for(let s of i)s.remove(this);else i.remove(this);let{initialTeardown:n}=this;if(Oe(n))try{n()}catch(s){t=s instanceof kd?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{mb(s)}catch(a){t=t??[],a instanceof kd?t=[...t,...a.errors]:t.push(a)}}if(t)throw new kd(t)}}add(t){var i;if(t&&t!==this)if(this.closed)mb(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(t)}}_hasParent(t){let{_parentage:i}=this;return i===t||Array.isArray(i)&&i.includes(t)}_addParent(t){let{_parentage:i}=this;this._parentage=Array.isArray(i)?(i.push(t),i):i?[i,t]:t}_removeParent(t){let{_parentage:i}=this;i===t?this._parentage=null:Array.isArray(i)&&dl(i,t)}remove(t){let{_finalizers:i}=this;i&&dl(i,t),t instanceof e&&t._removeParent(this)}};Wt.EMPTY=(()=>{let e=new Wt;return e.closed=!0,e})();var zp=Wt.EMPTY;function Od(e){return e instanceof Wt||e&&"closed"in e&&Oe(e.remove)&&Oe(e.add)&&Oe(e.unsubscribe)}function mb(e){Oe(e)?e():e.unsubscribe()}var En={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Bo={setTimeout(e,t,...i){let{delegate:n}=Bo;return n?.setTimeout?n.setTimeout(e,t,...i):setTimeout(e,t,...i)},clearTimeout(e){let{delegate:t}=Bo;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ld(e){Bo.setTimeout(()=>{let{onUnhandledError:t}=En;if(t)t(e);else throw e})}function ul(){}var vb=Wp("C",void 0,void 0);function Cb(e){return Wp("E",void 0,e)}function wb(e){return Wp("N",e,void 0)}function Wp(e,t,i){return{kind:e,value:t,error:i}}var Ls=null;function Vo(e){if(En.useDeprecatedSynchronousErrorHandling){let t=!Ls;if(t&&(Ls={errorThrown:!1,error:null}),e(),t){let{errorThrown:i,error:n}=Ls;if(Ls=null,i)throw n}}else e()}function yb(e){En.useDeprecatedSynchronousErrorHandling&&Ls&&(Ls.errorThrown=!0,Ls.error=e)}var Ns=class extends Wt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Od(t)&&t.add(this)):this.destination=yP}static create(t,i,n){return new Ho(t,i,n)}next(t){this.isStopped?Up(wb(t),this):this._next(t)}error(t){this.isStopped?Up(Cb(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Up(vb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},CP=Function.prototype.bind;function jp(e,t){return CP.call(e,t)}var $p=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:i}=this;if(i.next)try{i.next(t)}catch(n){Nd(n)}}error(t){let{partialObserver:i}=this;if(i.error)try{i.error(t)}catch(n){Nd(n)}else Nd(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(i){Nd(i)}}},Ho=class extends Ns{constructor(t,i,n){super();let r;if(Oe(t)||!t)r={next:t??void 0,error:i??void 0,complete:n??void 0};else{let s;this&&En.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&jp(t.next,s),error:t.error&&jp(t.error,s),complete:t.complete&&jp(t.complete,s)}):r=t}this.destination=new $p(r)}};function Nd(e){En.useDeprecatedSynchronousErrorHandling?yb(e):Ld(e)}function wP(e){throw e}function Up(e,t){let{onStoppedNotification:i}=En;i&&Bo.setTimeout(()=>i(e,t))}var yP={closed:!0,next:ul,error:wP,complete:ul};var Go=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ui(e){return e}function qp(...e){return Kp(e)}function Kp(e){return e.length===0?Ui:e.length===1?e[0]:function(i){return e.reduce((n,r)=>r(n),i)}}var Xe=(()=>{class e{constructor(i){i&&(this._subscribe=i)}lift(i){let n=new e;return n.source=this,n.operator=i,n}subscribe(i,n,r){let s=SP(i)?i:new Ho(i,n,r);return Vo(()=>{let{operator:a,source:c}=this;s.add(a?a.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(i){try{return this._subscribe(i)}catch(n){i.error(n)}}forEach(i,n){return n=bb(n),new n((r,s)=>{let a=new Ho({next:c=>{try{i(c)}catch(u){s(u),a.unsubscribe()}},error:s,complete:r});this.subscribe(a)})}_subscribe(i){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(i)}[Go](){return this}pipe(...i){return Kp(i)(this)}toPromise(i){return i=bb(i),new i((n,r)=>{let s;this.subscribe(a=>s=a,a=>r(a),()=>n(s))})}}return e.create=t=>new e(t),e})();function bb(e){var t;return(t=e??En.Promise)!==null&&t!==void 0?t:Promise}function bP(e){return e&&Oe(e.next)&&Oe(e.error)&&Oe(e.complete)}function SP(e){return e&&e instanceof Ns||bP(e)&&Od(e)}function Yp(e){return Oe(e?.lift)}function Ze(e){return t=>{if(Yp(t))return t.lift(function(i){try{return e(i,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function $e(e,t,i,n,r){return new Xp(e,t,i,n,r)}var Xp=class extends Ns{constructor(t,i,n,r,s,a){super(t),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=i?function(c){try{i(c)}catch(u){t.error(u)}}:super._next,this._error=r?function(c){try{r(c)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:i}=this;super.unsubscribe(),!i&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function zo(){return Ze((e,t)=>{let i=null;e._refCount++;let n=$e(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){i=null;return}let r=e._connection,s=i;i=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});e.subscribe(n),n.closed||(i=e.connect())})}var Wo=class extends Xe{constructor(t,i){super(),this.source=t,this.subjectFactory=i,this._subject=null,this._refCount=0,this._connection=null,Yp(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Wt;let i=this.getSubject();t.add(this.source.subscribe($e(i,void 0,()=>{this._teardown(),i.complete()},n=>{this._teardown(),i.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Wt.EMPTY)}return t}refCount(){return zo()(this)}};var Sb=_o(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xt=(()=>{class e extends Xe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(i){let n=new _d(this,this);return n.operator=i,n}_throwIfClosed(){if(this.closed)throw new Sb}next(i){Vo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(i)}})}error(i){Vo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=i;let{observers:n}=this;for(;n.length;)n.shift().error(i)}})}complete(){Vo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:i}=this;for(;i.length;)i.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0}_trySubscribe(i){return this._throwIfClosed(),super._trySubscribe(i)}_subscribe(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)}_innerSubscribe(i){let{hasError:n,isStopped:r,observers:s}=this;return n||r?zp:(this.currentObservers=null,s.push(i),new Wt(()=>{this.currentObservers=null,dl(s,i)}))}_checkFinalizedStatuses(i){let{hasError:n,thrownError:r,isStopped:s}=this;n?i.error(r):s&&i.complete()}asObservable(){let i=new Xe;return i.source=this,i}}return e.create=(t,i)=>new _d(t,i),e})(),_d=class extends Xt{constructor(t,i){super(),this.destination=t,this.source=i}next(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.next)===null||n===void 0||n.call(i,t)}error(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.error)===null||n===void 0||n.call(i,t)}complete(){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||i===void 0||i.call(t)}_subscribe(t){var i,n;return(n=(i=this.source)===null||i===void 0?void 0:i.subscribe(t))!==null&&n!==void 0?n:zp}};var si=class extends Xt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let i=super._subscribe(t);return!i.closed&&t.next(this._value),i}getValue(){let{hasError:t,thrownError:i,_value:n}=this;if(t)throw i;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}};var $i=new Xe(e=>e.complete());function xb(e){return e&&Oe(e.schedule)}function Eb(e){return e[e.length-1]}function Bd(e){return Oe(Eb(e))?e.pop():void 0}function Hr(e){return xb(Eb(e))?e.pop():void 0}function Mb(e,t,i,n){function r(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function c(b){try{v(n.next(b))}catch(x){a(x)}}function u(b){try{v(n.throw(b))}catch(x){a(x)}}function v(b){b.done?s(b.value):r(b.value).then(c,u)}v((n=n.apply(e,t||[])).next())})}function Db(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _s(e){return this instanceof _s?(this.v=e,this):new _s(e)}function Rb(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i.apply(e,t||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(A){return function(O){return Promise.resolve(O).then(A,x)}}function c(A,O){n[A]&&(r[A]=function(B){return new Promise(function(L,U){s.push([A,B,L,U])>1||u(A,B)})},O&&(r[A]=O(r[A])))}function u(A,O){try{v(n[A](O))}catch(B){D(s[0][3],B)}}function v(A){A.value instanceof _s?Promise.resolve(A.value.v).then(b,x):D(s[0][2],A)}function b(A){u("next",A)}function x(A){u("throw",A)}function D(A,O){A(O),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Ib(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof Db=="function"?Db(e):e[Symbol.iterator](),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(s){i[s]=e[s]&&function(a){return new Promise(function(c,u){a=e[s](a),r(c,u,a.done,a.value)})}}function r(s,a,c,u){Promise.resolve(u).then(function(v){s({value:v,done:c})},a)}}var Vd=e=>e&&typeof e.length=="number"&&typeof e!="function";function Hd(e){return Oe(e?.then)}function Gd(e){return Oe(e[Go])}function zd(e){return Symbol.asyncIterator&&Oe(e?.[Symbol.asyncIterator])}function Wd(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function xP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var jd=xP();function Ud(e){return Oe(e?.[jd])}function $d(e){return Rb(this,arguments,function*(){let i=e.getReader();try{for(;;){let{value:n,done:r}=yield _s(i.read());if(r)return yield _s(void 0);yield yield _s(n)}}finally{i.releaseLock()}})}function qd(e){return Oe(e?.getReader)}function jt(e){if(e instanceof Xe)return e;if(e!=null){if(Gd(e))return EP(e);if(Vd(e))return DP(e);if(Hd(e))return MP(e);if(zd(e))return Tb(e);if(Ud(e))return RP(e);if(qd(e))return IP(e)}throw Wd(e)}function EP(e){return new Xe(t=>{let i=e[Go]();if(Oe(i.subscribe))return i.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function DP(e){return new Xe(t=>{for(let i=0;i<e.length&&!t.closed;i++)t.next(e[i]);t.complete()})}function MP(e){return new Xe(t=>{e.then(i=>{t.closed||(t.next(i),t.complete())},i=>t.error(i)).then(null,Ld)})}function RP(e){return new Xe(t=>{for(let i of e)if(t.next(i),t.closed)return;t.complete()})}function Tb(e){return new Xe(t=>{TP(e,t).catch(i=>t.error(i))})}function IP(e){return Tb($d(e))}function TP(e,t){var i,n,r,s;return Mb(this,void 0,void 0,function*(){try{for(i=Ib(e);n=yield i.next(),!n.done;){let a=n.value;if(t.next(a),t.closed)return}}catch(a){r={error:a}}finally{try{n&&!n.done&&(s=i.return)&&(yield s.call(i))}finally{if(r)throw r.error}}t.complete()})}function ki(e,t,i,n=0,r=!1){let s=t.schedule(function(){i(),r?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(s),!r)return s}function Kd(e,t=0){return Ze((i,n)=>{i.subscribe($e(n,r=>ki(n,e,()=>n.next(r),t),()=>ki(n,e,()=>n.complete(),t),r=>ki(n,e,()=>n.error(r),t)))})}function Yd(e,t=0){return Ze((i,n)=>{n.add(e.schedule(()=>i.subscribe(n),t))})}function Fb(e,t){return jt(e).pipe(Yd(t),Kd(t))}function Ab(e,t){return jt(e).pipe(Yd(t),Kd(t))}function Pb(e,t){return new Xe(i=>{let n=0;return t.schedule(function(){n===e.length?i.complete():(i.next(e[n++]),i.closed||this.schedule())})})}function kb(e,t){return new Xe(i=>{let n;return ki(i,t,()=>{n=e[jd](),ki(i,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(a){i.error(a);return}s?i.complete():i.next(r)},0,!0)}),()=>Oe(n?.return)&&n.return()})}function Xd(e,t){if(!e)throw new Error("Iterable cannot be null");return new Xe(i=>{ki(i,t,()=>{let n=e[Symbol.asyncIterator]();ki(i,t,()=>{n.next().then(r=>{r.done?i.complete():i.next(r.value)})},0,!0)})})}function Ob(e,t){return Xd($d(e),t)}function Lb(e,t){if(e!=null){if(Gd(e))return Fb(e,t);if(Vd(e))return Pb(e,t);if(Hd(e))return Ab(e,t);if(zd(e))return Xd(e,t);if(Ud(e))return kb(e,t);if(qd(e))return Ob(e,t)}throw Wd(e)}function Ft(e,t){return t?Lb(e,t):jt(e)}function Fe(...e){let t=Hr(e);return Ft(e,t)}function jo(e,t){let i=Oe(e)?e:()=>e,n=r=>r.error(i());return new Xe(t?r=>t.schedule(n,0,r):n)}function Zp(e){return!!e&&(e instanceof Xe||Oe(e.lift)&&Oe(e.subscribe))}var ar=_o(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Ne(e,t){return Ze((i,n)=>{let r=0;i.subscribe($e(n,s=>{n.next(e.call(t,s,r++))}))})}var{isArray:FP}=Array;function AP(e,t){return FP(t)?e(...t):e(t)}function Zd(e){return Ne(t=>AP(e,t))}var{isArray:PP}=Array,{getPrototypeOf:kP,prototype:OP,keys:LP}=Object;function Qd(e){if(e.length===1){let t=e[0];if(PP(t))return{args:t,keys:null};if(NP(t)){let i=LP(t);return{args:i.map(n=>t[n]),keys:i}}}return{args:e,keys:null}}function NP(e){return e&&typeof e=="object"&&kP(e)===OP}function Jd(e,t){return e.reduce((i,n,r)=>(i[n]=t[r],i),{})}function eu(...e){let t=Hr(e),i=Bd(e),{args:n,keys:r}=Qd(e);if(n.length===0)return Ft([],t);let s=new Xe(_P(n,t,r?a=>Jd(r,a):Ui));return i?s.pipe(Zd(i)):s}function _P(e,t,i=Ui){return n=>{Nb(t,()=>{let{length:r}=e,s=new Array(r),a=r,c=r;for(let u=0;u<r;u++)Nb(t,()=>{let v=Ft(e[u],t),b=!1;v.subscribe($e(n,x=>{s[u]=x,b||(b=!0,c--),c||n.next(i(s.slice()))},()=>{--a||n.complete()}))},n)},n)}}function Nb(e,t,i){e?ki(i,e,t):t()}function _b(e,t,i,n,r,s,a,c){let u=[],v=0,b=0,x=!1,D=()=>{x&&!u.length&&!v&&t.complete()},A=B=>v<n?O(B):u.push(B),O=B=>{s&&t.next(B),v++;let L=!1;jt(i(B,b++)).subscribe($e(t,U=>{r?.(U),s?A(U):t.next(U)},()=>{L=!0},void 0,()=>{if(L)try{for(v--;u.length&&v<n;){let U=u.shift();a?ki(t,a,()=>O(U)):O(U)}D()}catch(U){t.error(U)}}))};return e.subscribe($e(t,A,()=>{x=!0,D()})),()=>{c?.()}}function Zt(e,t,i=1/0){return Oe(t)?Zt((n,r)=>Ne((s,a)=>t(n,s,r,a))(jt(e(n,r))),i):(typeof t=="number"&&(i=t),Ze((n,r)=>_b(n,r,e,i)))}function Qp(e=1/0){return Zt(Ui,e)}function Bb(){return Qp(1)}function Uo(...e){return Bb()(Ft(e,Hr(e)))}function tu(e){return new Xe(t=>{jt(e()).subscribe(t)})}function Jp(...e){let t=Bd(e),{args:i,keys:n}=Qd(e),r=new Xe(s=>{let{length:a}=i;if(!a){s.complete();return}let c=new Array(a),u=a,v=a;for(let b=0;b<a;b++){let x=!1;jt(i[b]).subscribe($e(s,D=>{x||(x=!0,v--),c[b]=D},()=>u--,void 0,()=>{(!u||!x)&&(v||s.next(n?Jd(n,c):c),s.complete())}))}});return t?r.pipe(Zd(t)):r}function qi(e,t){return Ze((i,n)=>{let r=0;i.subscribe($e(n,s=>e.call(t,s,r++)&&n.next(s)))})}function Gr(e){return Ze((t,i)=>{let n=null,r=!1,s;n=t.subscribe($e(i,void 0,void 0,a=>{s=jt(e(a,Gr(e)(t))),n?(n.unsubscribe(),n=null,s.subscribe(i)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(i))})}function Vb(e,t,i,n,r){return(s,a)=>{let c=i,u=t,v=0;s.subscribe($e(a,b=>{let x=v++;u=c?e(u,b,x):(c=!0,b),n&&a.next(u)},r&&(()=>{c&&a.next(u),a.complete()})))}}function zr(e,t){return Oe(t)?Zt(e,t,1):Zt(e,1)}function Wr(e){return Ze((t,i)=>{let n=!1;t.subscribe($e(i,r=>{n=!0,i.next(r)},()=>{n||i.next(e),i.complete()}))})}function lr(e){return e<=0?()=>$i:Ze((t,i)=>{let n=0;t.subscribe($e(i,r=>{++n<=e&&(i.next(r),e<=n&&i.complete())}))})}function ef(e){return Ne(()=>e)}function iu(e=BP){return Ze((t,i)=>{let n=!1;t.subscribe($e(i,r=>{n=!0,i.next(r)},()=>n?i.complete():i.error(e())))})}function BP(){return new ar}function jr(e){return Ze((t,i)=>{try{t.subscribe(i)}finally{i.add(e)}})}function cr(e,t){let i=arguments.length>=2;return n=>n.pipe(e?qi((r,s)=>e(r,s,n)):Ui,lr(1),i?Wr(t):iu(()=>new ar))}function $o(e){return e<=0?()=>$i:Ze((t,i)=>{let n=[];t.subscribe($e(i,r=>{n.push(r),e<n.length&&n.shift()},()=>{for(let r of n)i.next(r);i.complete()},void 0,()=>{n=null}))})}function tf(e,t){let i=arguments.length>=2;return n=>n.pipe(e?qi((r,s)=>e(r,s,n)):Ui,$o(1),i?Wr(t):iu(()=>new ar))}function nf(e,t){return Ze(Vb(e,t,arguments.length>=2,!0))}function rf(...e){let t=Hr(e);return Ze((i,n)=>{(t?Uo(e,i,t):Uo(e,i)).subscribe(n)})}function Ki(e,t){return Ze((i,n)=>{let r=null,s=0,a=!1,c=()=>a&&!r&&n.complete();i.subscribe($e(n,u=>{r?.unsubscribe();let v=0,b=s++;jt(e(u,b)).subscribe(r=$e(n,x=>n.next(t?t(u,x,b,v++):x),()=>{r=null,c()}))},()=>{a=!0,c()}))})}function sf(e){return Ze((t,i)=>{jt(e).subscribe($e(i,()=>i.complete(),ul)),!i.closed&&t.subscribe(i)})}function ti(e,t,i){let n=Oe(e)||t||i?{next:e,error:t,complete:i}:e;return n?Ze((r,s)=>{var a;(a=n.subscribe)===null||a===void 0||a.call(n);let c=!0;r.subscribe($e(s,u=>{var v;(v=n.next)===null||v===void 0||v.call(n,u),s.next(u)},()=>{var u;c=!1,(u=n.complete)===null||u===void 0||u.call(n),s.complete()},u=>{var v;c=!1,(v=n.error)===null||v===void 0||v.call(n,u),s.error(u)},()=>{var u,v;c&&((u=n.unsubscribe)===null||u===void 0||u.call(n)),(v=n.finalize)===null||v===void 0||v.call(n)}))}):Ui}var VP="https://g.co/ng/security#xss",Me=class extends Error{code;constructor(t,i){super(Ou(t,i)),this.code=t}};function Ou(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var ES=Symbol("InputSignalNode#UNSET"),HP=ue(q({},Gp),{transformFn:void 0,applyValueToInputSignal(e,t){Pd(e,t)}});function DS(e,t){let i=Object.create(HP);i.value=e,i.transformFn=t?.transform;function n(){if(Id(i),i.value===ES)throw new Me(-950,!1);return i.value}return n[ji]=i,n}function Lu(e){return{toString:e}.toString()}function dt(e){for(let t in e)if(e[t]===dt)return t;throw Error("Could not find renamed property on target object.")}function GP(e,t){for(let i in t)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t[i])}function Oi(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Oi).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i===-1?t:t.substring(0,i)}function Hb(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var zP=dt({__forward_ref__:dt});function la(e){return e.__forward_ref__=la,e.toString=function(){return Oi(this())},e}function bi(e){return MS(e)?e():e}function MS(e){return typeof e=="function"&&e.hasOwnProperty(zP)&&e.__forward_ref__===la}function Ee(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Kn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Nu(e){return Gb(e,IS)||Gb(e,TS)}function RS(e){return Nu(e)!==null}function Gb(e,t){return e.hasOwnProperty(t)?e[t]:null}function WP(e){let t=e&&(e[IS]||e[TS]);return t||null}function zb(e){return e&&(e.hasOwnProperty(Wb)||e.hasOwnProperty(jP))?e[Wb]:null}var IS=dt({\u0275prov:dt}),Wb=dt({\u0275inj:dt}),TS=dt({ngInjectableDef:dt}),jP=dt({ngInjectorDef:dt}),we=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,i){this._desc=t,this.\u0275prov=void 0,typeof i=="number"?this.__NG_ELEMENT_ID__=i:i!==void 0&&(this.\u0275prov=Ee({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function FS(e){return e&&!!e.\u0275providers}var UP=dt({\u0275cmp:dt}),$P=dt({\u0275dir:dt}),qP=dt({\u0275pipe:dt}),KP=dt({\u0275mod:dt}),hu=dt({\u0275fac:dt}),pl=dt({__NG_ELEMENT_ID__:dt}),jb=dt({__NG_ENV_ID__:dt});function AS(e){return typeof e=="string"?e:e==null?"":String(e)}function YP(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():AS(e)}function XP(e,t){let i=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Me(-200,e)}function Cm(e,t){throw new Me(-201,!1)}var He=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(He||{}),wf;function PS(){return wf}function an(e){let t=wf;return wf=e,t}function kS(e,t,i){let n=Nu(e);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(i&He.Optional)return null;if(t!==void 0)return t;Cm(e,"Injector")}var ZP={},fl=ZP,QP="__NG_DI_FLAG__",gu="ngTempTokenPath",JP="ngTokenPath",e2=/\n/gm,t2="\u0275",Ub="__source",Xo;function i2(){return Xo}function Ur(e){let t=Xo;return Xo=e,t}function n2(e,t=He.Default){if(Xo===void 0)throw new Me(-203,!1);return Xo===null?kS(e,void 0,t):Xo.get(e,t&He.Optional?null:void 0,t)}function Ae(e,t=He.Default){return(PS()||n2)(bi(e),t)}function oe(e,t=He.Default){return Ae(e,_u(t))}function _u(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function yf(e){let t=[];for(let i=0;i<e.length;i++){let n=bi(e[i]);if(Array.isArray(n)){if(n.length===0)throw new Me(900,!1);let r,s=He.Default;for(let a=0;a<n.length;a++){let c=n[a],u=r2(c);typeof u=="number"?u===-1?r=c.token:s|=u:r=c}t.push(Ae(r,s))}else t.push(Ae(n))}return t}function r2(e){return e[QP]}function s2(e,t,i,n){let r=e[gu];throw t[Ub]&&r.unshift(t[Ub]),e.message=o2(`
`+e.message,r,i,n),e[JP]=r,e[gu]=null,e}function o2(e,t,i,n=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==t2?e.slice(2):e;let r=Oi(t);if(Array.isArray(t))r=t.map(Oi).join(" -> ");else if(typeof t=="object"){let s=[];for(let a in t)if(t.hasOwnProperty(a)){let c=t[a];s.push(a+":"+(typeof c=="string"?JSON.stringify(c):Oi(c)))}r=`{${s.join(", ")}}`}return`${i}${n?"("+n+")":""}[${r}]: ${e.replace(e2,`
  `)}`}function Qo(e,t){let i=e.hasOwnProperty(hu);return i?e[hu]:null}function a2(e,t,i){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],s=t[n];if(i&&(r=i(r),s=i(s)),s!==r)return!1}return!0}function l2(e){return e.flat(Number.POSITIVE_INFINITY)}function wm(e,t){e.forEach(i=>Array.isArray(i)?wm(i,t):t(i))}function OS(e,t,i){t>=e.length?e.push(i):e.splice(t,0,i)}function pu(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function c2(e,t,i,n){let r=e.length;if(r==t)e.push(i,n);else if(r===1)e.push(n,e[0]),e[0]=i;else{for(r--,e.push(e[r-1],e[r]);r>t;){let s=r-2;e[r]=e[s],r--}e[t]=i,e[t+1]=n}}function d2(e,t,i){let n=Il(e,t);return n>=0?e[n|1]=i:(n=~n,c2(e,n,t,i)),n}function of(e,t){let i=Il(e,t);if(i>=0)return e[i|1]}function Il(e,t){return u2(e,t,1)}function u2(e,t,i){let n=0,r=e.length>>i;for(;r!==n;){let s=n+(r-n>>1),a=e[s<<i];if(t===a)return s<<i;a>t?r=s:n=s+1}return~(r<<i)}var Jo={},ln=[],ea=new we(""),LS=new we("",-1),NS=new we(""),fu=class{get(t,i=fl){if(i===fl){let n=new Error(`NullInjectorError: No provider for ${Oi(t)}!`);throw n.name="NullInjectorError",n}return i}};function _S(e,t){let i=e[KP]||null;if(!i&&t===!0)throw new Error(`Type ${Oi(e)} does not have '\u0275mod' property.`);return i}function Vs(e){return e[UP]||null}function BS(e){return e[$P]||null}function VS(e){return e[qP]||null}function HS(e){let t=Vs(e)||BS(e)||VS(e);return t!==null?t.standalone:!1}function ca(e){return{\u0275providers:e}}function h2(...e){return{\u0275providers:GS(!0,e),\u0275fromNgModule:!0}}function GS(e,...t){let i=[],n=new Set,r,s=a=>{i.push(a)};return wm(t,a=>{let c=a;bf(c,s,[],n)&&(r||=[],r.push(c))}),r!==void 0&&zS(r,s),i}function zS(e,t){for(let i=0;i<e.length;i++){let{ngModule:n,providers:r}=e[i];ym(r,s=>{t(s,n)})}}function bf(e,t,i,n){if(e=bi(e),!e)return!1;let r=null,s=zb(e),a=!s&&Vs(e);if(!s&&!a){let u=e.ngModule;if(s=zb(u),s)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=e}let c=n.has(r);if(a){if(c)return!1;if(n.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let v of u)bf(v,t,i,n)}}else if(s){if(s.imports!=null&&!c){n.add(r);let v;try{wm(s.imports,b=>{bf(b,t,i,n)&&(v||=[],v.push(b))})}finally{}v!==void 0&&zS(v,t)}if(!c){let v=Qo(r)||(()=>new r);t({provide:r,useFactory:v,deps:ln},r),t({provide:NS,useValue:r,multi:!0},r),t({provide:ea,useValue:()=>Ae(r),multi:!0},r)}let u=s.providers;if(u!=null&&!c){let v=e;ym(u,b=>{t(b,v)})}}else return!1;return r!==e&&e.providers!==void 0}function ym(e,t){for(let i of e)FS(i)&&(i=i.\u0275providers),Array.isArray(i)?ym(i,t):t(i)}var g2=dt({provide:String,useValue:dt});function WS(e){return e!==null&&typeof e=="object"&&g2 in e}function p2(e){return!!(e&&e.useExisting)}function f2(e){return!!(e&&e.useFactory)}function ta(e){return typeof e=="function"}function m2(e){return!!e.useClass}var Bu=new we(""),ou={},v2={},af;function bm(){return af===void 0&&(af=new fu),af}var Li=class{},ml=class extends Li{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,i,n,r){super(),this.parent=i,this.source=n,this.scopes=r,xf(t,a=>this.processProvider(a)),this.records.set(LS,qo(void 0,this)),r.has("environment")&&this.records.set(Li,qo(void 0,this));let s=this.records.get(Bu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(NS,ln,He.Self))}destroy(){hl(this),this._destroyed=!0;let t=We(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let i=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of i)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),We(t)}}onDestroy(t){return hl(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){hl(this);let i=Ur(this),n=an(void 0),r;try{return t()}finally{Ur(i),an(n)}}get(t,i=fl,n=He.Default){if(hl(this),t.hasOwnProperty(jb))return t[jb](this);n=_u(n);let r,s=Ur(this),a=an(void 0);try{if(!(n&He.SkipSelf)){let u=this.records.get(t);if(u===void 0){let v=S2(t)&&Nu(t);v&&this.injectableDefInScope(v)?u=qo(Sf(t),ou):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u)}let c=n&He.Self?bm():this.parent;return i=n&He.Optional&&i===fl?null:i,c.get(t,i)}catch(c){if(c.name==="NullInjectorError"){if((c[gu]=c[gu]||[]).unshift(Oi(t)),s)throw c;return s2(c,t,"R3InjectorError",this.source)}else throw c}finally{an(a),Ur(s)}}resolveInjectorInitializers(){let t=We(null),i=Ur(this),n=an(void 0),r;try{let s=this.get(ea,ln,He.Self);for(let a of s)a()}finally{Ur(i),an(n),We(t)}}toString(){let t=[],i=this.records;for(let n of i.keys())t.push(Oi(n));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=bi(t);let i=ta(t)?t:bi(t&&t.provide),n=w2(t);if(!ta(t)&&t.multi===!0){let r=this.records.get(i);r||(r=qo(void 0,ou,!0),r.factory=()=>yf(r.multi),this.records.set(i,r)),i=t,r.multi.push(t)}this.records.set(i,n)}hydrate(t,i){let n=We(null);try{return i.value===ou&&(i.value=v2,i.value=i.factory()),typeof i.value=="object"&&i.value&&b2(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{We(n)}}injectableDefInScope(t){if(!t.providedIn)return!1;let i=bi(t.providedIn);return typeof i=="string"?i==="any"||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(t){let i=this._onDestroyHooks.indexOf(t);i!==-1&&this._onDestroyHooks.splice(i,1)}};function Sf(e){let t=Nu(e),i=t!==null?t.factory:Qo(e);if(i!==null)return i;if(e instanceof we)throw new Me(204,!1);if(e instanceof Function)return C2(e);throw new Me(204,!1)}function C2(e){if(e.length>0)throw new Me(204,!1);let i=WP(e);return i!==null?()=>i.factory(e):()=>new e}function w2(e){if(WS(e))return qo(void 0,e.useValue);{let t=jS(e);return qo(t,ou)}}function jS(e,t,i){let n;if(ta(e)){let r=bi(e);return Qo(r)||Sf(r)}else if(WS(e))n=()=>bi(e.useValue);else if(f2(e))n=()=>e.useFactory(...yf(e.deps||[]));else if(p2(e))n=()=>Ae(bi(e.useExisting));else{let r=bi(e&&(e.useClass||e.provide));if(y2(e))n=()=>new r(...yf(e.deps));else return Qo(r)||Sf(r)}return n}function hl(e){if(e.destroyed)throw new Me(205,!1)}function qo(e,t,i=!1){return{factory:e,value:t,multi:i?[]:void 0}}function y2(e){return!!e.deps}function b2(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function S2(e){return typeof e=="function"||typeof e=="object"&&e instanceof we}function xf(e,t){for(let i of e)Array.isArray(i)?xf(i,t):i&&FS(i)?xf(i.\u0275providers,t):t(i)}function Xi(e,t){e instanceof ml&&hl(e);let i,n=Ur(e),r=an(void 0);try{return t()}finally{Ur(n),an(r)}}function x2(){return PS()!==void 0||i2()!=null}function E2(e){return typeof e=="function"}var gr=0,Pe=1,Ie=2,pi=3,Mn=4,Tn=5,vl=6,mu=7,hi=8,ia=9,Kr=10,Qt=11,Cl=12,$b=13,da=14,Rn=15,Hs=16,Ko=17,dr=18,Vu=19,US=20,$r=21,lf=22,vu=23,Yi=24,In=25,$S=1;var Gs=7,Cu=8,na=9,gi=10,wu=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(wu||{});function qr(e){return Array.isArray(e)&&typeof e[$S]=="object"}function pr(e){return Array.isArray(e)&&e[$S]===!0}function qS(e){return(e.flags&4)!==0}function Hu(e){return e.componentOffset>-1}function Sm(e){return(e.flags&1)===1}function Yr(e){return!!e.template}function Ef(e){return(e[Ie]&512)!==0}var Df=class{previousValue;currentValue;firstChange;constructor(t,i,n){this.previousValue=t,this.currentValue=i,this.firstChange=n}isFirstChange(){return this.firstChange}};function KS(e,t,i,n){t!==null?t.applyValueToInputSignal(t,n):e[i]=n}var Jr=(()=>{let e=()=>YS;return e.ngInherit=!0,e})();function YS(e){return e.type.prototype.ngOnChanges&&(e.setInput=M2),D2}function D2(){let e=ZS(this),t=e?.current;if(t){let i=e.previous;if(i===Jo)e.previous=t;else for(let n in t)i[n]=t[n];e.current=null,this.ngOnChanges(t)}}function M2(e,t,i,n,r){let s=this.declaredInputs[n],a=ZS(e)||R2(e,{previous:Jo,current:null}),c=a.current||(a.current={}),u=a.previous,v=u[s];c[s]=new Df(v&&v.currentValue,i,u===Jo),KS(e,t,r,i)}var XS="__ngSimpleChanges__";function ZS(e){return e[XS]||null}function R2(e,t){return e[XS]=t}var qb=null;var jn=function(e,t,i){qb?.(e,t,i)},I2="svg",T2="math";function $n(e){for(;Array.isArray(e);)e=e[gr];return e}function QS(e,t){return $n(t[e])}function Fn(e,t){return $n(t[e.index])}function xm(e,t){return e.data[t]}function es(e,t){let i=t[e];return qr(i)?i:i[gr]}function F2(e){return(e[Ie]&4)===4}function Em(e){return(e[Ie]&128)===128}function A2(e){return pr(e[pi])}function ra(e,t){return t==null?null:e[t]}function JS(e){e[Ko]=0}function Dm(e){e[Ie]&1024||(e[Ie]|=1024,Em(e)&&zu(e))}function P2(e,t){for(;e>0;)t=t[da],e--;return t}function Gu(e){return!!(e[Ie]&9216||e[Yi]?.dirty)}function Mf(e){e[Kr].changeDetectionScheduler?.notify(9),e[Ie]&64&&(e[Ie]|=1024),Gu(e)&&zu(e)}function zu(e){e[Kr].changeDetectionScheduler?.notify(0);let t=zs(e);for(;t!==null&&!(t[Ie]&8192||(t[Ie]|=8192,!Em(t)));)t=zs(t)}function ex(e,t){if((e[Ie]&256)===256)throw new Me(911,!1);e[$r]===null&&(e[$r]=[]),e[$r].push(t)}function k2(e,t){if(e[$r]===null)return;let i=e[$r].indexOf(t);i!==-1&&e[$r].splice(i,1)}function zs(e){let t=e[pi];return pr(t)?t[pi]:t}var je={lFrame:lx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Rf=!1;function O2(){return je.lFrame.elementDepthCount}function L2(){je.lFrame.elementDepthCount++}function N2(){je.lFrame.elementDepthCount--}function tx(){return je.bindingsEnabled}function _2(){return je.skipHydrationRootTNode!==null}function B2(e){return je.skipHydrationRootTNode===e}function V2(){je.skipHydrationRootTNode=null}function nt(){return je.lFrame.lView}function fi(){return je.lFrame.tView}function ts(e){return je.lFrame.contextLView=e,e[hi]}function is(e){return je.lFrame.contextLView=null,e}function Ni(){let e=ix();for(;e!==null&&e.type===64;)e=e.parent;return e}function ix(){return je.lFrame.currentTNode}function H2(){let e=je.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Tl(e,t){let i=je.lFrame;i.currentTNode=e,i.isParent=t}function nx(){return je.lFrame.isParent}function G2(){je.lFrame.isParent=!1}function rx(){return Rf}function Kb(e){let t=Rf;return Rf=e,t}function z2(e){return je.lFrame.bindingIndex=e}function Fl(){return je.lFrame.bindingIndex++}function W2(e){let t=je.lFrame,i=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,i}function j2(){return je.lFrame.inI18n}function U2(e,t){let i=je.lFrame;i.bindingIndex=i.bindingRootIndex=e,If(t)}function $2(){return je.lFrame.currentDirectiveIndex}function If(e){je.lFrame.currentDirectiveIndex=e}function q2(e){let t=je.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function sx(){return je.lFrame.currentQueryIndex}function Mm(e){je.lFrame.currentQueryIndex=e}function K2(e){let t=e[Pe];return t.type===2?t.declTNode:t.type===1?e[Tn]:null}function ox(e,t,i){if(i&He.SkipSelf){let r=t,s=e;for(;r=r.parent,r===null&&!(i&He.Host);)if(r=K2(s),r===null||(s=s[da],r.type&10))break;if(r===null)return!1;t=r,e=s}let n=je.lFrame=ax();return n.currentTNode=t,n.lView=e,!0}function Rm(e){let t=ax(),i=e[Pe];je.lFrame=t,t.currentTNode=i.firstChild,t.lView=e,t.tView=i,t.contextLView=e,t.bindingIndex=i.bindingStartIndex,t.inI18n=!1}function ax(){let e=je.lFrame,t=e===null?null:e.child;return t===null?lx(e):t}function lx(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function cx(){let e=je.lFrame;return je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var dx=cx;function Im(){let e=cx();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Y2(e){return(je.lFrame.contextLView=P2(e,je.lFrame.contextLView))[hi]}function Ys(){return je.lFrame.selectedIndex}function Ws(e){je.lFrame.selectedIndex=e}function Tm(){let e=je.lFrame;return xm(e.tView,e.selectedIndex)}function X2(){return je.lFrame.currentNamespace}var ux=!0;function Fm(){return ux}function Am(e){ux=e}function Z2(e,t,i){let{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){let a=YS(t);(i.preOrderHooks??=[]).push(e,a),(i.preOrderCheckHooks??=[]).push(e,a)}r&&(i.preOrderHooks??=[]).push(0-e,r),s&&((i.preOrderHooks??=[]).push(e,s),(i.preOrderCheckHooks??=[]).push(e,s))}function Pm(e,t){for(let i=t.directiveStart,n=t.directiveEnd;i<n;i++){let s=e.data[i].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:v,ngOnDestroy:b}=s;a&&(e.contentHooks??=[]).push(-i,a),c&&((e.contentHooks??=[]).push(i,c),(e.contentCheckHooks??=[]).push(i,c)),u&&(e.viewHooks??=[]).push(-i,u),v&&((e.viewHooks??=[]).push(i,v),(e.viewCheckHooks??=[]).push(i,v)),b!=null&&(e.destroyHooks??=[]).push(i,b)}}function au(e,t,i){hx(e,t,3,i)}function lu(e,t,i,n){(e[Ie]&3)===i&&hx(e,t,i,n)}function cf(e,t){let i=e[Ie];(i&3)===t&&(i&=16383,i+=1,e[Ie]=i)}function hx(e,t,i,n){let r=n!==void 0?e[Ko]&65535:0,s=n??-1,a=t.length-1,c=0;for(let u=r;u<a;u++)if(typeof t[u+1]=="number"){if(c=t[u],n!=null&&c>=n)break}else t[u]<0&&(e[Ko]+=65536),(c<s||s==-1)&&(Q2(e,i,t,u),e[Ko]=(e[Ko]&4294901760)+u+2),u++}function Yb(e,t){jn(4,e,t);let i=We(null);try{t.call(e)}finally{We(i),jn(5,e,t)}}function Q2(e,t,i,n){let r=i[n]<0,s=i[n+1],a=r?-i[n]:i[n],c=e[a];r?e[Ie]>>14<e[Ko]>>16&&(e[Ie]&3)===t&&(e[Ie]+=16384,Yb(c,s)):Yb(c,s)}var Zo=-1,js=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,i,n){this.factory=t,this.canSeeViewProviders=i,this.injectImpl=n}};function J2(e){return e instanceof js}function ek(e){return(e.flags&8)!==0}function tk(e){return(e.flags&16)!==0}function Tf(e,t,i){let n=0;for(;n<i.length;){let r=i[n];if(typeof r=="number"){if(r!==0)break;n++;let s=i[n++],a=i[n++],c=i[n++];e.setAttribute(t,a,c,s)}else{let s=r,a=i[++n];nk(s)?e.setProperty(t,s,a):e.setAttribute(t,s,a),n++}}return n}function ik(e){return e===3||e===4||e===6}function nk(e){return e.charCodeAt(0)===64}function wl(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let i=-1;for(let n=0;n<t.length;n++){let r=t[n];typeof r=="number"?i=r:i===0||(i===-1||i===2?Xb(e,i,r,null,t[++n]):Xb(e,i,r,null,null))}}return e}function Xb(e,t,i,n,r){let s=0,a=e.length;if(t===-1)a=-1;else for(;s<e.length;){let c=e[s++];if(typeof c=="number"){if(c===t){a=-1;break}else if(c>t){a=s-1;break}}}for(;s<e.length;){let c=e[s];if(typeof c=="number")break;if(c===i){if(n===null){r!==null&&(e[s+1]=r);return}else if(n===e[s+1]){e[s+2]=r;return}}s++,n!==null&&s++,r!==null&&s++}a!==-1&&(e.splice(a,0,t),s=a+1),e.splice(s++,0,i),n!==null&&e.splice(s++,0,n),r!==null&&e.splice(s++,0,r)}var df={},Ff=class{injector;parentInjector;constructor(t,i){this.injector=t,this.parentInjector=i}get(t,i,n){n=_u(n);let r=this.injector.get(t,df,n);return r!==df||i===df?r:this.parentInjector.get(t,i,n)}};function gx(e){return e!==Zo}function yu(e){return e&32767}function rk(e){return e>>16}function bu(e,t){let i=rk(e),n=t;for(;i>0;)n=n[da],i--;return n}var Af=!0;function Zb(e){let t=Af;return Af=e,t}var sk=256,px=sk-1,fx=5,ok=0,Un={};function ak(e,t,i){let n;typeof i=="string"?n=i.charCodeAt(0)||0:i.hasOwnProperty(pl)&&(n=i[pl]),n==null&&(n=i[pl]=ok++);let r=n&px,s=1<<r;t.data[e+(r>>fx)]|=s}function Su(e,t){let i=mx(e,t);if(i!==-1)return i;let n=t[Pe];n.firstCreatePass&&(e.injectorIndex=t.length,uf(n.data,e),uf(t,null),uf(n.blueprint,null));let r=km(e,t),s=e.injectorIndex;if(gx(r)){let a=yu(r),c=bu(r,t),u=c[Pe].data;for(let v=0;v<8;v++)t[s+v]=c[a+v]|u[a+v]}return t[s+8]=r,s}function uf(e,t){e.push(0,0,0,0,0,0,0,0,t)}function mx(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function km(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let i=0,n=null,r=t;for(;r!==null;){if(n=bx(r),n===null)return Zo;if(i++,r=r[da],n.injectorIndex!==-1)return n.injectorIndex|i<<16}return Zo}function Pf(e,t,i){ak(e,t,i)}function vx(e,t,i){if(i&He.Optional||e!==void 0)return e;Cm(t,"NodeInjector")}function Cx(e,t,i,n){if(i&He.Optional&&n===void 0&&(n=null),!(i&(He.Self|He.Host))){let r=e[ia],s=an(void 0);try{return r?r.get(t,n,i&He.Optional):kS(t,n,i&He.Optional)}finally{an(s)}}return vx(n,t,i)}function wx(e,t,i,n=He.Default,r){if(e!==null){if(t[Ie]&2048&&!(n&He.Self)){let a=uk(e,t,i,n,Un);if(a!==Un)return a}let s=yx(e,t,i,n,Un);if(s!==Un)return s}return Cx(t,i,n,r)}function yx(e,t,i,n,r){let s=ck(i);if(typeof s=="function"){if(!ox(t,e,n))return n&He.Host?vx(r,i,n):Cx(t,i,n,r);try{let a;if(a=s(n),a==null&&!(n&He.Optional))Cm(i);else return a}finally{dx()}}else if(typeof s=="number"){let a=null,c=mx(e,t),u=Zo,v=n&He.Host?t[Rn][Tn]:null;for((c===-1||n&He.SkipSelf)&&(u=c===-1?km(e,t):t[c+8],u===Zo||!Jb(n,!1)?c=-1:(a=t[Pe],c=yu(u),t=bu(u,t)));c!==-1;){let b=t[Pe];if(Qb(s,c,b.data)){let x=lk(c,t,i,a,n,v);if(x!==Un)return x}u=t[c+8],u!==Zo&&Jb(n,t[Pe].data[c+8]===v)&&Qb(s,c,t)?(a=b,c=yu(u),t=bu(u,t)):c=-1}}return r}function lk(e,t,i,n,r,s){let a=t[Pe],c=a.data[e+8],u=n==null?Hu(c)&&Af:n!=a&&(c.type&3)!==0,v=r&He.Host&&s===c,b=cu(c,a,i,u,v);return b!==null?Us(t,a,b,c):Un}function cu(e,t,i,n,r){let s=e.providerIndexes,a=t.data,c=s&1048575,u=e.directiveStart,v=e.directiveEnd,b=s>>20,x=n?c:c+b,D=r?c+b:v;for(let A=x;A<D;A++){let O=a[A];if(A<u&&i===O||A>=u&&O.type===i)return A}if(r){let A=a[u];if(A&&Yr(A)&&A.type===i)return u}return null}function Us(e,t,i,n){let r=e[i],s=t.data;if(J2(r)){let a=r;a.resolving&&XP(YP(s[i]));let c=Zb(a.canSeeViewProviders);a.resolving=!0;let u,v=a.injectImpl?an(a.injectImpl):null,b=ox(e,n,He.Default);try{r=e[i]=a.factory(void 0,s,e,n),t.firstCreatePass&&i>=n.directiveStart&&Z2(i,s[i],t)}finally{v!==null&&an(v),Zb(c),a.resolving=!1,dx()}}return r}function ck(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(pl)?e[pl]:void 0;return typeof t=="number"?t>=0?t&px:dk:t}function Qb(e,t,i){let n=1<<e;return!!(i[t+(e>>fx)]&n)}function Jb(e,t){return!(e&He.Self)&&!(e&He.Host&&t)}var Bs=class{_tNode;_lView;constructor(t,i){this._tNode=t,this._lView=i}get(t,i,n){return wx(this._tNode,this._lView,t,_u(n),i)}};function dk(){return new Bs(Ni(),nt())}function ns(e){return Lu(()=>{let t=e.prototype.constructor,i=t[hu]||kf(t),n=Object.prototype,r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==n;){let s=r[hu]||kf(r);if(s&&s!==i)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function kf(e){return MS(e)?()=>{let t=kf(bi(e));return t&&t()}:Qo(e)}function uk(e,t,i,n,r){let s=e,a=t;for(;s!==null&&a!==null&&a[Ie]&2048&&!(a[Ie]&512);){let c=yx(s,a,i,n|He.Self,Un);if(c!==Un)return c;let u=s.parent;if(!u){let v=a[US];if(v){let b=v.get(i,Un,n);if(b!==Un)return b}u=bx(a),a=a[da]}s=u}return r}function bx(e){let t=e[Pe],i=t.type;return i===2?t.declTNode:i===1?e[Tn]:null}function eS(e,t=null,i=null,n){let r=Sx(e,t,i,n);return r.resolveInjectorInitializers(),r}function Sx(e,t=null,i=null,n,r=new Set){let s=[i||ln,h2(e)];return n=n||(typeof e=="object"?void 0:Oi(e)),new ml(s,t||bm(),n||null,r)}var ur=class e{static THROW_IF_NOT_FOUND=fl;static NULL=new fu;static create(t,i){if(Array.isArray(t))return eS({name:""},i,t,"");{let n=t.name??"";return eS({name:n},t.parent,t.providers,n)}}static \u0275prov=Ee({token:e,providedIn:"any",factory:()=>Ae(LS)});static __NG_ELEMENT_ID__=-1};var hk=new we("");hk.__NG_ELEMENT_ID__=e=>{let t=Ni();if(t===null)throw new Me(204,!1);if(t.type&2)return t.value;if(e&He.Optional)return null;throw new Me(204,!1)};var xx=!1,Ex=(()=>{class e{static __NG_ELEMENT_ID__=gk;static __NG_ENV_ID__=i=>i}return e})(),Of=class extends Ex{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return ex(this._lView,t),()=>k2(this._lView,t)}};function gk(){return new Of(nt())}var yl=class{},Wu=new we("",{providedIn:"root",factory:()=>!1});var Dx=new we(""),Mx=new we(""),fr=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new si(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}has(i){return this.pendingTasks.has(i)}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Ee({token:e,providedIn:"root",factory:()=>new e})}return e})();var Lf=class extends Xt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,x2()&&(this.destroyRef=oe(Ex,{optional:!0})??void 0,this.pendingTasks=oe(fr,{optional:!0})??void 0)}emit(t){let i=We(null);try{super.next(t)}finally{We(i)}}subscribe(t,i,n){let r=t,s=i||(()=>null),a=n;if(t&&typeof t=="object"){let u=t;r=u.next?.bind(u),s=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let c=super.subscribe({next:r,error:s,complete:a});return t instanceof Wt&&t.add(c),c}wrapInTimeout(t){return i=>{let n=this.pendingTasks?.add();setTimeout(()=>{t(i),n!==void 0&&this.pendingTasks?.remove(n)})}}},ie=Lf;function xu(...e){}function Rx(e){let t,i;function n(){e=xu;try{i!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(i),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),n()}),typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(()=>{e(),n()})),()=>n()}function tS(e){return queueMicrotask(()=>e()),()=>{e=xu}}var Om="isAngularZone",Eu=Om+"_ID",pk=0,gt=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ie(!1);onMicrotaskEmpty=new ie(!1);onStable=new ie(!1);onError=new ie(!1);constructor(t){let{enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=xx}=t;if(typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&n,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=s,vk(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Om)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Me(909,!1)}run(t,i,n){return this._inner.run(t,i,n)}runTask(t,i,n,r){let s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+r,t,fk,xu,xu);try{return s.runTask(a,i,n)}finally{s.cancelTask(a)}}runGuarded(t,i,n){return this._inner.runGuarded(t,i,n)}runOutsideAngular(t){return this._outer.run(t)}},fk={};function Lm(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function mk(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Rx(()=>{e.callbackScheduled=!1,Nf(e),e.isCheckStableRunning=!0,Lm(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Nf(e)}function vk(e){let t=()=>{mk(e)},i=pk++;e._inner=e._inner.fork({name:"angular",properties:{[Om]:!0,[Eu]:i,[Eu+i]:!0},onInvokeTask:(n,r,s,a,c,u)=>{if(Ck(u))return n.invokeTask(s,a,c,u);try{return iS(e),n.invokeTask(s,a,c,u)}finally{(e.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),nS(e)}},onInvoke:(n,r,s,a,c,u,v)=>{try{return iS(e),n.invoke(s,a,c,u,v)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!wk(u)&&t(),nS(e)}},onHasTask:(n,r,s,a)=>{n.hasTask(s,a),r===s&&(a.change=="microTask"?(e._hasPendingMicrotasks=a.microTask,Nf(e),Lm(e)):a.change=="macroTask"&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(n,r,s,a)=>(n.handleError(s,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}function Nf(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function iS(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function nS(e){e._nesting--,Lm(e)}var _f=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ie;onMicrotaskEmpty=new ie;onStable=new ie;onError=new ie;run(t,i,n){return t.apply(i,n)}runGuarded(t,i,n){return t.apply(i,n)}runOutsideAngular(t){return t()}runTask(t,i,n,r){return t.apply(i,n)}};function Ck(e){return Ix(e,"__ignore_ng_zone__")}function wk(e){return Ix(e,"__scheduler_tick__")}function Ix(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Xr=class{_console=console;handleError(t){this._console.error("ERROR",t)}},yk=new we("",{providedIn:"root",factory:()=>{let e=oe(gt),t=oe(Xr);return i=>e.runOutsideAngular(()=>t.handleError(i))}});function rS(e,t){return DS(e,t)}function bk(e){return DS(ES,e)}var Tx=(rS.required=bk,rS);function Sk(){return ua(Ni(),nt())}function ua(e,t){return new Zi(Fn(e,t))}var Zi=(()=>{class e{nativeElement;constructor(i){this.nativeElement=i}static __NG_ELEMENT_ID__=Sk}return e})();function xk(e){return e instanceof Zi?e.nativeElement:e}function Ek(){return this._results[Symbol.iterator]()}var Bf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Xt}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,i){return this._results.reduce(t,i)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,i){this.dirty=!1;let n=l2(t);(this._changesDetected=!a2(this._results,n,i))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Ek};function Fx(e){return(e.flags&128)===128}var Ax=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Ax||{}),Px=new Map,Dk=0;function Mk(){return Dk++}function Rk(e){Px.set(e[Vu],e)}function Vf(e){Px.delete(e[Vu])}var sS="__ngContext__";function $s(e,t){qr(t)?(e[sS]=t[Vu],Rk(t)):e[sS]=t}function kx(e){return Lx(e[Cl])}function Ox(e){return Lx(e[Mn])}function Lx(e){for(;e!==null&&!pr(e);)e=e[Mn];return e}var Hf;function Nx(e){Hf=e}function Ik(){if(Hf!==void 0)return Hf;if(typeof document<"u")return document;throw new Me(210,!1)}var Nm=new we("",{providedIn:"root",factory:()=>Tk}),Tk="ng",_m=new we(""),rs=new we("",{providedIn:"platform",factory:()=>"unknown"});var Bm=new we("",{providedIn:"root",factory:()=>Ik().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Fk="h",Ak="b";var _x=!1,Pk=new we("",{providedIn:"root",factory:()=>_x});var Bx=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(Bx||{}),Vx=new we(""),oS=new Set;function ss(e){oS.has(e)||(oS.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var kk=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ee({token:e,providedIn:"root",factory:()=>new e})}return e})();var Ok=()=>null;function Vm(e,t,i=!1){return Ok(e,t,i)}var qn=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(qn||{});var Gf=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${VP})`}};function Hm(e){return e instanceof Gf?e.changingThisBreaksApplicationSecurity:e}function Hx(e){return e instanceof Function?e():e}var Zr=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Zr||{}),hr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(hr||{}),Lk;function Gm(e,t){return Lk(e,t)}function Yo(e,t,i,n,r){if(n!=null){let s,a=!1;pr(n)?s=n:qr(n)&&(a=!0,n=n[gr]);let c=$n(n);e===0&&i!==null?r==null?jx(t,i,c):Du(t,i,c,r||null,!0):e===1&&i!==null?Du(t,i,c,r||null,!0):e===2?Xk(t,c,a):e===3&&t.destroyNode(c),s!=null&&Qk(t,e,s,i,r)}}function Nk(e,t){return e.createText(t)}function _k(e,t,i){e.setValue(t,i)}function Gx(e,t,i){return e.createElement(t,i)}function Bk(e,t){zx(e,t),t[gr]=null,t[Tn]=null}function Vk(e,t,i,n,r,s){n[gr]=r,n[Tn]=t,Uu(e,n,i,1,r,s)}function zx(e,t){t[Kr].changeDetectionScheduler?.notify(10),Uu(e,t,t[Qt],2,null,null)}function Hk(e){let t=e[Cl];if(!t)return hf(e[Pe],e);for(;t;){let i=null;if(qr(t))i=t[Cl];else{let n=t[gi];n&&(i=n)}if(!i){for(;t&&!t[Mn]&&t!==e;)qr(t)&&hf(t[Pe],t),t=t[pi];t===null&&(t=e),qr(t)&&hf(t[Pe],t),i=t&&t[Mn]}t=i}}function Gk(e,t,i,n){let r=gi+n,s=i.length;n>0&&(i[r-1][Mn]=t),n<s-gi?(t[Mn]=i[r],OS(i,gi+n,t)):(i.push(t),t[Mn]=null),t[pi]=i;let a=t[Hs];a!==null&&i!==a&&Wx(a,t);let c=t[dr];c!==null&&c.insertView(e),Mf(t),t[Ie]|=128}function Wx(e,t){let i=e[na],n=t[pi];if(qr(n))e[Ie]|=wu.HasTransplantedViews;else{let r=n[pi][Rn];t[Rn]!==r&&(e[Ie]|=wu.HasTransplantedViews)}i===null?e[na]=[t]:i.push(t)}function zm(e,t){let i=e[na],n=i.indexOf(t);i.splice(n,1)}function bl(e,t){if(e.length<=gi)return;let i=gi+t,n=e[i];if(n){let r=n[Hs];r!==null&&r!==e&&zm(r,n),t>0&&(e[i-1][Mn]=n[Mn]);let s=pu(e,gi+t);Bk(n[Pe],n);let a=s[dr];a!==null&&a.detachView(s[Pe]),n[pi]=null,n[Mn]=null,n[Ie]&=-129}return n}function ju(e,t){if(!(t[Ie]&256)){let i=t[Qt];i.destroyNode&&Uu(e,t,i,3,null,null),Hk(t)}}function hf(e,t){if(t[Ie]&256)return;let i=We(null);try{t[Ie]&=-129,t[Ie]|=256,t[Yi]&&Hp(t[Yi]),Wk(e,t),zk(e,t),t[Pe].type===1&&t[Qt].destroy();let n=t[Hs];if(n!==null&&pr(t[pi])){n!==t[pi]&&zm(n,t);let r=t[dr];r!==null&&r.detachView(e)}Vf(t)}finally{We(i)}}function zk(e,t){let i=e.cleanup,n=t[mu];if(i!==null)for(let a=0;a<i.length-1;a+=2)if(typeof i[a]=="string"){let c=i[a+3];c>=0?n[c]():n[-c].unsubscribe(),a+=2}else{let c=n[i[a+1]];i[a].call(c)}n!==null&&(t[mu]=null);let r=t[$r];if(r!==null){t[$r]=null;for(let a=0;a<r.length;a++){let c=r[a];c()}}let s=t[vu];if(s!==null){t[vu]=null;for(let a of s)a.destroy()}}function Wk(e,t){let i;if(e!=null&&(i=e.destroyHooks)!=null)for(let n=0;n<i.length;n+=2){let r=t[i[n]];if(!(r instanceof js)){let s=i[n+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){let c=r[s[a]],u=s[a+1];jn(4,c,u);try{u.call(c)}finally{jn(5,c,u)}}else{jn(4,r,s);try{s.call(r)}finally{jn(5,r,s)}}}}}function jk(e,t,i){return Uk(e,t.parent,i)}function Uk(e,t,i){let n=t;for(;n!==null&&n.type&168;)t=n,n=t.parent;if(n===null)return i[gr];{let{componentOffset:r}=n;if(r>-1){let{encapsulation:s}=e.data[n.directiveStart+r];if(s===qn.None||s===qn.Emulated)return null}return Fn(n,i)}}function Du(e,t,i,n,r){e.insertBefore(t,i,n,r)}function jx(e,t,i){e.appendChild(t,i)}function aS(e,t,i,n,r){n!==null?Du(e,t,i,n,r):jx(e,t,i)}function Ux(e,t){return e.parentNode(t)}function $k(e,t){return e.nextSibling(t)}function qk(e,t,i){return Yk(e,t,i)}function Kk(e,t,i){return e.type&40?Fn(e,i):null}var Yk=Kk,lS;function Wm(e,t,i,n){let r=jk(e,n,t),s=t[Qt],a=n.parent||t[Tn],c=qk(a,n,t);if(r!=null)if(Array.isArray(i))for(let u=0;u<i.length;u++)aS(s,r,i[u],c,!1);else aS(s,r,i,c,!1);lS!==void 0&&lS(s,n,t,i,r)}function gl(e,t){if(t!==null){let i=t.type;if(i&3)return Fn(t,e);if(i&4)return zf(-1,e[t.index]);if(i&8){let n=t.child;if(n!==null)return gl(e,n);{let r=e[t.index];return pr(r)?zf(-1,r):$n(r)}}else{if(i&128)return gl(e,t.next);if(i&32)return Gm(t,e)()||$n(e[t.index]);{let n=$x(e,t);if(n!==null){if(Array.isArray(n))return n[0];let r=zs(e[Rn]);return gl(r,n)}else return gl(e,t.next)}}}return null}function $x(e,t){if(t!==null){let n=e[Rn][Tn],r=t.projection;return n.projection[r]}return null}function zf(e,t){let i=gi+e+1;if(i<t.length){let n=t[i],r=n[Pe].firstChild;if(r!==null)return gl(n,r)}return t[Gs]}function Xk(e,t,i){e.removeChild(null,t,i)}function jm(e,t,i,n,r,s,a){for(;i!=null;){if(i.type===128){i=i.next;continue}let c=n[i.index],u=i.type;if(a&&t===0&&(c&&$s($n(c),n),i.flags|=2),(i.flags&32)!==32)if(u&8)jm(e,t,i.child,n,r,s,!1),Yo(t,e,r,c,s);else if(u&32){let v=Gm(i,n),b;for(;b=v();)Yo(t,e,r,b,s);Yo(t,e,r,c,s)}else u&16?Zk(e,t,n,i,r,s):Yo(t,e,r,c,s);i=a?i.projectionNext:i.next}}function Uu(e,t,i,n,r,s){jm(i,n,e.firstChild,t,r,s,!1)}function Zk(e,t,i,n,r,s){let a=i[Rn],u=a[Tn].projection[n.projection];if(Array.isArray(u))for(let v=0;v<u.length;v++){let b=u[v];Yo(t,e,r,b,s)}else{let v=u,b=a[pi];Fx(n)&&(v.flags|=128),jm(e,t,v,b,r,s,!0)}}function Qk(e,t,i,n,r){let s=i[Gs],a=$n(i);s!==a&&Yo(t,e,n,s,r);for(let c=gi;c<i.length;c++){let u=i[c];Uu(u[Pe],u,e,t,n,s)}}function Jk(e,t,i,n,r){if(t)r?e.addClass(i,n):e.removeClass(i,n);else{let s=n.indexOf("-")===-1?void 0:hr.DashCase;r==null?e.removeStyle(i,n,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=hr.Important),e.setStyle(i,n,r,s))}}function eO(e,t,i){e.setAttribute(t,"style",i)}function qx(e,t,i){i===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",i)}function Kx(e,t,i){let{mergedAttrs:n,classes:r,styles:s}=i;n!==null&&Tf(e,t,n),r!==null&&qx(e,t,r),s!==null&&eO(e,t,s)}function tO(e,t,i){let n=e.length;for(;;){let r=e.indexOf(t,i);if(r===-1)return r;if(r===0||e.charCodeAt(r-1)<=32){let s=t.length;if(r+s===n||e.charCodeAt(r+s)<=32)return r}i=r+1}}var Yx="ng-template";function iO(e,t,i,n){let r=0;if(n){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&tO(t[r+1].toLowerCase(),i,0)!==-1)return!0}else if(Um(e))return!1;if(r=t.indexOf(1,r),r>-1){let s;for(;++r<t.length&&typeof(s=t[r])=="string";)if(s.toLowerCase()===i)return!0}return!1}function Um(e){return e.type===4&&e.value!==Yx}function nO(e,t,i){let n=e.type===4&&!i?Yx:e.value;return t===n}function rO(e,t,i){let n=4,r=e.attrs,s=r!==null?aO(r):0,a=!1;for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="number"){if(!a&&!Dn(n)&&!Dn(u))return!1;if(a&&Dn(u))continue;a=!1,n=u|n&1;continue}if(!a)if(n&4){if(n=2|n&1,u!==""&&!nO(e,u,i)||u===""&&t.length===1){if(Dn(n))return!1;a=!0}}else if(n&8){if(r===null||!iO(e,r,u,i)){if(Dn(n))return!1;a=!0}}else{let v=t[++c],b=sO(u,r,Um(e),i);if(b===-1){if(Dn(n))return!1;a=!0;continue}if(v!==""){let x;if(b>s?x="":x=r[b+1].toLowerCase(),n&2&&v!==x){if(Dn(n))return!1;a=!0}}}}return Dn(n)||a}function Dn(e){return(e&1)===0}function sO(e,t,i,n){if(t===null)return-1;let r=0;if(n||!i){let s=!1;for(;r<t.length;){let a=t[r];if(a===e)return r;if(a===3||a===6)s=!0;else if(a===1||a===2){let c=t[++r];for(;typeof c=="string";)c=t[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=s?1:2}return-1}else return lO(t,e)}function oO(e,t,i=!1){for(let n=0;n<t.length;n++)if(rO(e,t[n],i))return!0;return!1}function aO(e){for(let t=0;t<e.length;t++){let i=e[t];if(ik(i))return t}return e.length}function lO(e,t){let i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){let n=e[i];if(typeof n=="number")return-1;if(n===t)return i;i++}return-1}function cS(e,t){return e?":not("+t.trim()+")":t}function cO(e){let t=e[0],i=1,n=2,r="",s=!1;for(;i<e.length;){let a=e[i];if(typeof a=="string")if(n&2){let c=e[++i];r+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else n&8?r+="."+a:n&4&&(r+=" "+a);else r!==""&&!Dn(a)&&(t+=cS(s,r),r=""),n=a,s=s||!Dn(n);i++}return r!==""&&(t+=cS(s,r)),t}function dO(e){return e.map(cO).join(",")}function uO(e){let t=[],i=[],n=1,r=2;for(;n<e.length;){let s=e[n];if(typeof s=="string")r===2?s!==""&&t.push(s,e[++n]):r===8&&i.push(s);else{if(!Dn(r))break;r=s}n++}return{attrs:t,classes:i}}var os={};function An(e=1){Xx(fi(),nt(),Ys()+e,!1)}function Xx(e,t,i,n){if(!n)if((t[Ie]&3)===3){let s=e.preOrderCheckHooks;s!==null&&au(t,s,i)}else{let s=e.preOrderHooks;s!==null&&lu(t,s,0,i)}Ws(i)}function pt(e,t=He.Default){let i=nt();if(i===null)return Ae(e,t);let n=Ni();return wx(n,i,bi(e),t)}function Zx(e,t,i,n,r,s){let a=We(null);try{let c=null;r&Zr.SignalBased&&(c=t[n][ji]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),r&Zr.HasDecoratorInputTransform&&(s=e.inputTransforms[n].call(t,s)),e.setInput!==null?e.setInput(t,c,s,i,n):KS(t,c,n,s)}finally{We(a)}}function hO(e,t){let i=e.hostBindingOpCodes;if(i!==null)try{for(let n=0;n<i.length;n++){let r=i[n];if(r<0)Ws(~r);else{let s=r,a=i[++n],c=i[++n];U2(a,s);let u=t[s];c(2,u)}}}finally{Ws(-1)}}function $u(e,t,i,n,r,s,a,c,u,v,b){let x=t.blueprint.slice();return x[gr]=r,x[Ie]=n|4|128|8|64|1024,(v!==null||e&&e[Ie]&2048)&&(x[Ie]|=2048),JS(x),x[pi]=x[da]=e,x[hi]=i,x[Kr]=a||e&&e[Kr],x[Qt]=c||e&&e[Qt],x[ia]=u||e&&e[ia]||null,x[Tn]=s,x[Vu]=Mk(),x[vl]=b,x[US]=v,x[Rn]=t.type==2?e[Rn]:x,x}function qu(e,t,i,n,r){let s=e.data[t];if(s===null)s=gO(e,t,i,n,r),j2()&&(s.flags|=32);else if(s.type&64){s.type=i,s.value=n,s.attrs=r;let a=H2();s.injectorIndex=a===null?-1:a.injectorIndex}return Tl(s,!0),s}function gO(e,t,i,n,r){let s=ix(),a=nx(),c=a?s:s&&s.parent,u=e.data[t]=wO(e,c,i,t,n,r);return e.firstChild===null&&(e.firstChild=u),s!==null&&(a?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function Qx(e,t,i,n){if(i===0)return-1;let r=t.length;for(let s=0;s<i;s++)t.push(n),e.blueprint.push(n),e.data.push(null);return r}function Jx(e,t,i,n,r){let s=Ys(),a=n&2;try{Ws(-1),a&&t.length>In&&Xx(e,t,In,!1),jn(a?2:0,r),i(n,r)}finally{Ws(s),jn(a?3:1,r)}}function e1(e,t,i){if(qS(t)){let n=We(null);try{let r=t.directiveStart,s=t.directiveEnd;for(let a=r;a<s;a++){let c=e.data[a];if(c.contentQueries){let u=i[a];c.contentQueries(1,u,a)}}}finally{We(n)}}}function t1(e,t,i){tx()&&(DO(e,t,i,Fn(i,t)),(i.flags&64)===64&&o1(e,t,i))}function i1(e,t,i=Fn){let n=t.localNames;if(n!==null){let r=t.index+1;for(let s=0;s<n.length;s+=2){let a=n[s+1],c=a===-1?i(t,e):e[a];e[r++]=c}}}function n1(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=$m(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function $m(e,t,i,n,r,s,a,c,u,v,b){let x=In+n,D=x+r,A=pO(x,D),O=typeof v=="function"?v():v;return A[Pe]={type:e,blueprint:A,template:i,queries:null,viewQuery:c,declTNode:t,data:A.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:D,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:O,incompleteFirstPass:!1,ssrId:b}}function pO(e,t){let i=[];for(let n=0;n<t;n++)i.push(n<e?null:os);return i}function fO(e,t,i,n){let s=n.get(Pk,_x)||i===qn.ShadowDom,a=e.selectRootElement(t,s);return mO(a),a}function mO(e){vO(e)}var vO=()=>null;function CO(e,t,i,n){let r=d1(t);r.push(i),e.firstCreatePass&&u1(e).push(n,r.length-1)}function wO(e,t,i,n,r,s){let a=t?t.injectorIndex:-1,c=0;return _2()&&(c|=128),{type:i,index:n,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function dS(e,t,i,n,r){for(let s in t){if(!t.hasOwnProperty(s))continue;let a=t[s];if(a===void 0)continue;n??={};let c,u=Zr.None;Array.isArray(a)?(c=a[0],u=a[1]):c=a;let v=s;if(r!==null){if(!r.hasOwnProperty(s))continue;v=r[s]}e===0?uS(n,i,v,c,u):uS(n,i,v,c)}return n}function uS(e,t,i,n,r){let s;e.hasOwnProperty(i)?(s=e[i]).push(t,n):s=e[i]=[t,n],r!==void 0&&s.push(r)}function yO(e,t,i){let n=t.directiveStart,r=t.directiveEnd,s=e.data,a=t.attrs,c=[],u=null,v=null;for(let b=n;b<r;b++){let x=s[b],D=i?i.get(x):null,A=D?D.inputs:null,O=D?D.outputs:null;u=dS(0,x.inputs,b,u,A),v=dS(1,x.outputs,b,v,O);let B=u!==null&&a!==null&&!Um(t)?OO(u,b,a):null;c.push(B)}u!==null&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=c,t.inputs=u,t.outputs=v}function bO(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function qm(e,t,i,n,r,s,a,c){let u=Fn(t,i),v=t.inputs,b;!c&&v!=null&&(b=v[n])?(Km(e,i,b,n,r),Hu(t)&&SO(i,t.index)):t.type&3?(n=bO(n),r=a!=null?a(r,t.value||"",n):r,s.setProperty(u,n,r)):t.type&12}function SO(e,t){let i=es(t,e);i[Ie]&16||(i[Ie]|=64)}function r1(e,t,i,n){if(tx()){let r=n===null?null:{"":-1},s=RO(e,i),a,c;s===null?a=c=null:[a,c]=s,a!==null&&s1(e,t,i,a,r,c),r&&IO(i,n,r)}i.mergedAttrs=wl(i.mergedAttrs,i.attrs)}function s1(e,t,i,n,r,s){for(let v=0;v<n.length;v++)Pf(Su(i,t),e,n[v].type);FO(i,e.data.length,n.length);for(let v=0;v<n.length;v++){let b=n[v];b.providersResolver&&b.providersResolver(b)}let a=!1,c=!1,u=Qx(e,t,n.length,null);for(let v=0;v<n.length;v++){let b=n[v];i.mergedAttrs=wl(i.mergedAttrs,b.hostAttrs),AO(e,i,t,u,b),TO(u,b,r),b.contentQueries!==null&&(i.flags|=4),(b.hostBindings!==null||b.hostAttrs!==null||b.hostVars!==0)&&(i.flags|=64);let x=b.type.prototype;!a&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((e.preOrderHooks??=[]).push(i.index),a=!0),!c&&(x.ngOnChanges||x.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(i.index),c=!0),u++}yO(e,i,s)}function xO(e,t,i,n,r){let s=r.hostBindings;if(s){let a=e.hostBindingOpCodes;a===null&&(a=e.hostBindingOpCodes=[]);let c=~t.index;EO(a)!=c&&a.push(c),a.push(i,n,s)}}function EO(e){let t=e.length;for(;t>0;){let i=e[--t];if(typeof i=="number"&&i<0)return i}return 0}function DO(e,t,i,n){let r=i.directiveStart,s=i.directiveEnd;Hu(i)&&PO(t,i,e.data[r+i.componentOffset]),e.firstCreatePass||Su(i,t),$s(n,t);let a=i.initialInputs;for(let c=r;c<s;c++){let u=e.data[c],v=Us(t,e,c,i);if($s(v,t),a!==null&&kO(t,c-r,v,u,i,a),Yr(u)){let b=es(i.index,t);b[hi]=Us(t,e,c,i)}}}function o1(e,t,i){let n=i.directiveStart,r=i.directiveEnd,s=i.index,a=$2();try{Ws(s);for(let c=n;c<r;c++){let u=e.data[c],v=t[c];If(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&MO(u,v)}}finally{Ws(-1),If(a)}}function MO(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function RO(e,t){let i=e.directiveRegistry,n=null,r=null;if(i)for(let s=0;s<i.length;s++){let a=i[s];if(oO(t,a.selectors,!1))if(n||(n=[]),Yr(a))if(a.findHostDirectiveDefs!==null){let c=[];r=r||new Map,a.findHostDirectiveDefs(a,c,r),n.unshift(...c,a);let u=c.length;Wf(e,t,u)}else n.unshift(a),Wf(e,t,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,n,r),n.push(a)}return n===null?null:[n,r]}function Wf(e,t,i){t.componentOffset=i,(e.components??=[]).push(t.index)}function IO(e,t,i){if(t){let n=e.localNames=[];for(let r=0;r<t.length;r+=2){let s=i[t[r+1]];if(s==null)throw new Me(-301,!1);n.push(t[r],s)}}}function TO(e,t,i){if(i){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)i[t.exportAs[n]]=e;Yr(t)&&(i[""]=e)}}function FO(e,t,i){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+i,e.providerIndexes=t}function AO(e,t,i,n,r){e.data[n]=r;let s=r.factory||(r.factory=Qo(r.type,!0)),a=new js(s,Yr(r),pt);e.blueprint[n]=a,i[n]=a,xO(e,t,n,Qx(e,i,r.hostVars,os),r)}function a1(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function PO(e,t,i){let n=Fn(t,e),r=n1(i),s=e[Kr].rendererFactory,a=Ku(e,$u(e,r,null,a1(i),n,t,null,s.createRenderer(n,i),null,null,null));e[t.index]=a}function kO(e,t,i,n,r,s){let a=s[t];if(a!==null)for(let c=0;c<a.length;){let u=a[c++],v=a[c++],b=a[c++],x=a[c++];Zx(n,i,u,v,b,x)}}function OO(e,t,i){let n=null,r=0;for(;r<i.length;){let s=i[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(e.hasOwnProperty(s)){n===null&&(n=[]);let a=e[s];for(let c=0;c<a.length;c+=3)if(a[c]===t){n.push(s,a[c+1],a[c+2],i[r+1]);break}}r+=2}return n}function l1(e,t,i,n){return[e,!0,0,t,null,n,null,i,null,null]}function c1(e,t){let i=e.contentQueries;if(i!==null){let n=We(null);try{for(let r=0;r<i.length;r+=2){let s=i[r],a=i[r+1];if(a!==-1){let c=e.data[a];Mm(s),c.contentQueries(2,t[a],a)}}}finally{We(n)}}}function Ku(e,t){return e[Cl]?e[$b][Mn]=t:e[Cl]=t,e[$b]=t,t}function jf(e,t,i){Mm(0);let n=We(null);try{t(e,i)}finally{We(n)}}function d1(e){return e[mu]??=[]}function u1(e){return e.cleanup??=[]}function h1(e,t){let i=e[ia],n=i?i.get(Xr,null):null;n&&n.handleError(t)}function Km(e,t,i,n,r){for(let s=0;s<i.length;){let a=i[s++],c=i[s++],u=i[s++],v=t[a],b=e.data[a];Zx(b,v,n,c,u,r)}}function LO(e,t,i){let n=QS(t,e);_k(e[Qt],n,i)}function NO(e,t){let i=es(t,e),n=i[Pe];_O(n,i);let r=i[gr];r!==null&&i[vl]===null&&(i[vl]=Vm(r,i[ia])),Ym(n,i,i[hi])}function _O(e,t){for(let i=t.length;i<e.blueprint.length;i++)t.push(e.blueprint[i])}function Ym(e,t,i){Rm(t);try{let n=e.viewQuery;n!==null&&jf(1,n,i);let r=e.template;r!==null&&Jx(e,t,r,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),t[dr]?.finishViewCreation(e),e.staticContentQueries&&c1(e,t),e.staticViewQueries&&jf(2,e.viewQuery,i);let s=e.components;s!==null&&BO(t,s)}catch(n){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),n}finally{t[Ie]&=-5,Im()}}function BO(e,t){for(let i=0;i<t.length;i++)NO(e,t[i])}function Yu(e,t,i,n){let r=We(null);try{let s=t.tView,c=e[Ie]&4096?4096:16,u=$u(e,s,i,c,null,t,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),v=e[t.index];u[Hs]=v;let b=e[dr];return b!==null&&(u[dr]=b.createEmbeddedView(s)),Ym(s,u,i),u}finally{We(r)}}function g1(e,t){let i=gi+t;if(i<e.length)return e[i]}function Sl(e,t){return!t||t.firstChild===null||Fx(e)}function Xu(e,t,i,n=!0){let r=t[Pe];if(Gk(r,t,e,i),n){let a=zf(i,e),c=t[Qt],u=Ux(c,e[Gs]);u!==null&&Vk(r,e[Tn],c,t,u,a)}let s=t[vl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function p1(e,t){let i=bl(e,t);return i!==void 0&&ju(i[Pe],i),i}function Mu(e,t,i,n,r=!1){for(;i!==null;){if(i.type===128){i=r?i.projectionNext:i.next;continue}let s=t[i.index];s!==null&&n.push($n(s)),pr(s)&&VO(s,n);let a=i.type;if(a&8)Mu(e,t,i.child,n);else if(a&32){let c=Gm(i,t),u;for(;u=c();)n.push(u)}else if(a&16){let c=$x(t,i);if(Array.isArray(c))n.push(...c);else{let u=zs(t[Rn]);Mu(u[Pe],u,c,n,!0)}}i=r?i.projectionNext:i.next}return n}function VO(e,t){for(let i=gi;i<e.length;i++){let n=e[i],r=n[Pe].firstChild;r!==null&&Mu(n[Pe],n,r,t)}e[Gs]!==e[gr]&&t.push(e[Gs])}var f1=[];function HO(e){return e[Yi]??GO(e)}function GO(e){let t=f1.pop()??Object.create(WO);return t.lView=e,t}function zO(e){e.lView[Yi]!==e&&(e.lView=null,f1.push(e))}var WO=ue(q({},cl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{zu(e.lView)},consumerOnSignalRead(){this.lView[Yi]=this}});function jO(e){let t=e[Yi]??Object.create(UO);return t.lView=e,t}var UO=ue(q({},cl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=zs(e.lView);for(;t&&!m1(t[Pe]);)t=zs(t);t&&Dm(t)},consumerOnSignalRead(){this.lView[Yi]=this}});function m1(e){return e.type!==2}function v1(e){if(e[vu]===null)return;let t=!0;for(;t;){let i=!1;for(let n of e[vu])n.dirty&&(i=!0,n.zone===null||Zone.current===n.zone?n.run():n.zone.run(()=>n.run()));t=i&&!!(e[Ie]&8192)}}var $O=100;function C1(e,t=!0,i=0){let r=e[Kr].rendererFactory,s=!1;s||r.begin?.();try{qO(e,i)}catch(a){throw t&&h1(e,a),a}finally{s||r.end?.()}}function qO(e,t){let i=rx();try{Kb(!0),Uf(e,t);let n=0;for(;Gu(e);){if(n===$O)throw new Me(103,!1);n++,Uf(e,1)}}finally{Kb(i)}}function KO(e,t,i,n){let r=t[Ie];if((r&256)===256)return;let s=!1,a=!1;Rm(t);let c=!0,u=null,v=null;s||(m1(e)?(v=HO(t),u=Td(v)):rb()===null?(c=!1,v=jO(t),u=Td(v)):t[Yi]&&(Hp(t[Yi]),t[Yi]=null));try{JS(t),z2(e.bindingStartIndex),i!==null&&Jx(e,t,i,2,n);let b=(r&3)===3;if(!s)if(b){let A=e.preOrderCheckHooks;A!==null&&au(t,A,null)}else{let A=e.preOrderHooks;A!==null&&lu(t,A,0,null),cf(t,0)}if(a||YO(t),v1(t),w1(t,0),e.contentQueries!==null&&c1(e,t),!s)if(b){let A=e.contentCheckHooks;A!==null&&au(t,A)}else{let A=e.contentHooks;A!==null&&lu(t,A,1),cf(t,1)}hO(e,t);let x=e.components;x!==null&&b1(t,x,0);let D=e.viewQuery;if(D!==null&&jf(2,D,n),!s)if(b){let A=e.viewCheckHooks;A!==null&&au(t,A)}else{let A=e.viewHooks;A!==null&&lu(t,A,2),cf(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[lf]){for(let A of t[lf])A();t[lf]=null}s||(t[Ie]&=-73)}catch(b){throw s||zu(t),b}finally{v!==null&&(Bp(v,u),c&&zO(v)),Im()}}function w1(e,t){for(let i=kx(e);i!==null;i=Ox(i))for(let n=gi;n<i.length;n++){let r=i[n];y1(r,t)}}function YO(e){for(let t=kx(e);t!==null;t=Ox(t)){if(!(t[Ie]&wu.HasTransplantedViews))continue;let i=t[na];for(let n=0;n<i.length;n++){let r=i[n];Dm(r)}}}function XO(e,t,i){let n=es(t,e);y1(n,i)}function y1(e,t){Em(e)&&Uf(e,t)}function Uf(e,t){let n=e[Pe],r=e[Ie],s=e[Yi],a=!!(t===0&&r&16);if(a||=!!(r&64&&t===0),a||=!!(r&1024),a||=!!(s?.dirty&&Vp(s)),a||=!1,s&&(s.dirty=!1),e[Ie]&=-9217,a)KO(n,e,n.template,e[hi]);else if(r&8192){v1(e),w1(e,1);let c=n.components;c!==null&&b1(e,c,1)}}function b1(e,t,i){for(let n=0;n<t.length;n++)XO(e,t[n],i)}function Xm(e,t){let i=rx()?64:1088;for(e[Kr].changeDetectionScheduler?.notify(t);e;){e[Ie]|=i;let n=zs(e);if(Ef(e)&&!n)return e;e=n}return null}var qs=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,i=t[Pe];return Mu(i,t,i.firstChild,[])}constructor(t,i,n=!0){this._lView=t,this._cdRefInjectingView=i,this.notifyErrorHandler=n}get context(){return this._lView[hi]}get dirty(){return!!(this._lView[Ie]&9280)||!!this._lView[Yi]?.dirty}set context(t){this._lView[hi]=t}get destroyed(){return(this._lView[Ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[pi];if(pr(t)){let i=t[Cu],n=i?i.indexOf(this):-1;n>-1&&(bl(t,n),pu(i,n))}this._attachedToViewContainer=!1}ju(this._lView[Pe],this._lView)}onDestroy(t){ex(this._lView,t)}markForCheck(){Xm(this._cdRefInjectingView||this._lView,4)}markForRefresh(){Dm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ie]&=-129}reattach(){Mf(this._lView),this._lView[Ie]|=128}detectChanges(){this._lView[Ie]|=1024,C1(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Ef(this._lView),i=this._lView[Hs];i!==null&&!t&&zm(i,this._lView),zx(this._lView[Pe],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=t;let i=Ef(this._lView),n=this._lView[Hs];n!==null&&!i&&Wx(n,this._lView),Mf(this._lView)}},xl=(()=>{class e{static __NG_ELEMENT_ID__=JO}return e})(),ZO=xl,QO=class extends ZO{_declarationLView;_declarationTContainer;elementRef;constructor(t,i,n){super(),this._declarationLView=t,this._declarationTContainer=i,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,n){let r=Yu(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:n});return new qs(r)}};function JO(){return Zm(Ni(),nt())}function Zm(e,t){return e.type&4?new QO(t,e,ua(e,t)):null}var bZ=new RegExp(`^(\\d+)*(${Ak}|${Fk})*(.*)`);var eL=()=>null;function El(e,t){return eL(e,t)}var $f=class{},Ru=class{},qf=class{resolveComponentFactory(t){throw Error(`No component factory found for ${Oi(t)}.`)}},sa=class{static NULL=new qf},oa=class{},ha=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>tL()}return e})();function tL(){let e=nt(),t=Ni(),i=es(t.index,e);return(qr(i)?i:e)[Qt]}var iL=(()=>{class e{static \u0275prov=Ee({token:e,providedIn:"root",factory:()=>null})}return e})();function Kf(e,t,i){let n=i?e.styles:null,r=i?e.classes:null,s=0;if(t!==null)for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number")s=c;else if(s==1)r=Hb(r,c);else if(s==2){let u=c,v=t[++a];n=Hb(n,u+": "+v+";")}}i?e.styles=n:e.stylesWithoutHost=n,i?e.classes=r:e.classesWithoutHost=r}var Iu=class extends sa{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let i=Vs(t);return new Dl(i,this.ngModule)}};function hS(e,t){let i=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];if(r===void 0)continue;let s=Array.isArray(r),a=s?r[0]:r,c=s?r[1]:Zr.None;t?i.push({propName:a,templateName:n,isSignal:(c&Zr.SignalBased)!==0}):i.push({propName:a,templateName:n})}return i}function nL(e){let t=e.toLowerCase();return t==="svg"?I2:t==="math"?T2:null}var Dl=class extends Ru{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,i=t.inputTransforms,n=hS(t.inputs,!0);if(i!==null)for(let r of n)i.hasOwnProperty(r.propName)&&(r.transform=i[r.propName]);return n}get outputs(){return hS(this.componentDef.outputs,!1)}constructor(t,i){super(),this.componentDef=t,this.ngModule=i,this.componentType=t.type,this.selector=dO(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!i}create(t,i,n,r){let s=We(null);try{r=r||this.ngModule;let a=r instanceof Li?r:r?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let c=a?new Ff(t,a):t,u=c.get(oa,null);if(u===null)throw new Me(407,!1);let v=c.get(iL,null),b=c.get(yl,null),x={rendererFactory:u,sanitizer:v,changeDetectionScheduler:b},D=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",O=n?fO(D,n,this.componentDef.encapsulation,c):Gx(D,A,nL(A)),B=512;this.componentDef.signals?B|=4096:this.componentDef.onPush||(B|=16);let L=null;O!==null&&(L=Vm(O,c,!0));let U=$m(0,null,null,1,0,null,null,null,null,null,null),K=$u(null,U,null,B,null,null,x,D,c,null,L);Rm(K);let $,ne,G=null;try{let _=this.componentDef,N,Y=null;_.findHostDirectiveDefs?(N=[],Y=new Map,_.findHostDirectiveDefs(_,N,Y),N.push(_)):N=[_];let se=rL(K,O);G=sL(se,O,_,N,K,x,D),ne=xm(U,In),O&&lL(D,_,O,n),i!==void 0&&cL(ne,this.ngContentSelectors,i),$=aL(G,_,N,Y,K,[dL]),Ym(U,K,null)}catch(_){throw G!==null&&Vf(G),Vf(K),_}finally{Im()}return new Yf(this.componentType,$,ua(ne,K),K,ne)}finally{We(s)}}},Yf=class extends $f{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(t,i,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=i,this.hostView=this.changeDetectorRef=new qs(r,void 0,!1),this.componentType=t}setInput(t,i){let n=this._tNode.inputs,r;if(n!==null&&(r=n[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),i))return;let s=this._rootLView;Km(s[Pe],s,r,t,i),this.previousInputValues.set(t,i);let a=es(this._tNode.index,s);Xm(a,1)}}get injector(){return new Bs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function rL(e,t){let i=e[Pe],n=In;return e[n]=t,qu(i,n,2,"#host",null)}function sL(e,t,i,n,r,s,a){let c=r[Pe];oL(n,e,t,a);let u=null;t!==null&&(u=Vm(t,r[ia]));let v=s.rendererFactory.createRenderer(t,i),b=$u(r,n1(i),null,a1(i),r[e.index],e,s,v,null,null,u);return c.firstCreatePass&&Wf(c,e,n.length-1),Ku(r,b),r[e.index]=b}function oL(e,t,i,n){for(let r of e)t.mergedAttrs=wl(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(Kf(t,t.mergedAttrs,!0),i!==null&&Kx(n,i,t))}function aL(e,t,i,n,r,s){let a=Ni(),c=r[Pe],u=Fn(a,r);s1(c,r,a,i,null,n);for(let b=0;b<i.length;b++){let x=a.directiveStart+b,D=Us(r,c,x,a);$s(D,r)}o1(c,r,a),u&&$s(u,r);let v=Us(r,c,a.directiveStart+a.componentOffset,a);if(e[hi]=r[hi]=v,s!==null)for(let b of s)b(v,t);return e1(c,a,r),v}function lL(e,t,i,n){if(n)Tf(e,i,["ng-version","19.0.4"]);else{let{attrs:r,classes:s}=uO(t.selectors[0]);r&&Tf(e,i,r),s&&s.length>0&&qx(e,i,s.join(" "))}}function cL(e,t,i){let n=e.projection=[];for(let r=0;r<t.length;r++){let s=i[r];n.push(s!=null&&s.length?Array.from(s):null)}}function dL(){let e=Ni();Pm(nt()[Pe],e)}var as=(()=>{class e{static __NG_ELEMENT_ID__=uL}return e})();function uL(){let e=Ni();return x1(e,nt())}var hL=as,S1=class extends hL{_lContainer;_hostTNode;_hostLView;constructor(t,i,n){super(),this._lContainer=t,this._hostTNode=i,this._hostLView=n}get element(){return ua(this._hostTNode,this._hostLView)}get injector(){return new Bs(this._hostTNode,this._hostLView)}get parentInjector(){let t=km(this._hostTNode,this._hostLView);if(gx(t)){let i=bu(t,this._hostLView),n=yu(t),r=i[Pe].data[n+8];return new Bs(r,i)}else return new Bs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let i=gS(this._lContainer);return i!==null&&i[t]||null}get length(){return this._lContainer.length-gi}createEmbeddedView(t,i,n){let r,s;typeof n=="number"?r=n:n!=null&&(r=n.index,s=n.injector);let a=El(this._lContainer,t.ssrId),c=t.createEmbeddedViewImpl(i||{},s,a);return this.insertImpl(c,r,Sl(this._hostTNode,a)),c}createComponent(t,i,n,r,s){let a=t&&!E2(t),c;if(a)c=i;else{let O=i||{};c=O.index,n=O.injector,r=O.projectableNodes,s=O.environmentInjector||O.ngModuleRef}let u=a?t:new Dl(Vs(t)),v=n||this.parentInjector;if(!s&&u.ngModule==null){let B=(a?v:this.parentInjector).get(Li,null);B&&(s=B)}let b=Vs(u.componentType??{}),x=El(this._lContainer,b?.id??null),D=x?.firstChild??null,A=u.create(v,r,D,s);return this.insertImpl(A.hostView,c,Sl(this._hostTNode,x)),A}insert(t,i){return this.insertImpl(t,i,!0)}insertImpl(t,i,n){let r=t._lView;if(A2(r)){let c=this.indexOf(t);if(c!==-1)this.detach(c);else{let u=r[pi],v=new S1(u,u[Tn],u[pi]);v.detach(v.indexOf(t))}}let s=this._adjustIndex(i),a=this._lContainer;return Xu(a,r,s,n),t.attachToViewContainerRef(),OS(gf(a),s,t),t}move(t,i){return this.insert(t,i)}indexOf(t){let i=gS(this._lContainer);return i!==null?i.indexOf(t):-1}remove(t){let i=this._adjustIndex(t,-1),n=bl(this._lContainer,i);n&&(pu(gf(this._lContainer),i),ju(n[Pe],n))}detach(t){let i=this._adjustIndex(t,-1),n=bl(this._lContainer,i);return n&&pu(gf(this._lContainer),i)!=null?new qs(n):null}_adjustIndex(t,i=0){return t??this.length+i}};function gS(e){return e[Cu]}function gf(e){return e[Cu]||(e[Cu]=[])}function x1(e,t){let i,n=t[e.index];return pr(n)?i=n:(i=l1(n,t,null,e),t[e.index]=i,Ku(t,i)),pL(i,t,e,n),new S1(i,e,t)}function gL(e,t){let i=e[Qt],n=i.createComment(""),r=Fn(t,e),s=Ux(i,r);return Du(i,s,n,$k(i,r),!1),n}var pL=vL,fL=()=>!1;function mL(e,t,i){return fL(e,t,i)}function vL(e,t,i,n){if(e[Gs])return;let r;i.type&8?r=$n(n):r=gL(t,i),e[Gs]=r}var Xf=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Zf=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let i=t.queries;if(i!==null){let n=t.contentQueries!==null?t.contentQueries[0]:i.length,r=[];for(let s=0;s<n;s++){let a=i.getByIndex(s),c=this.queries[a.indexInDeclarationView];r.push(c.clone())}return new e(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let i=0;i<this.queries.length;i++)Qm(t,i).matches!==null&&this.queries[i].setDirty()}},Qf=class{flags;read;predicate;constructor(t,i,n=null){this.flags=i,this.read=n,typeof t=="string"?this.predicate=DL(t):this.predicate=t}},Jf=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,i){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,i)}elementEnd(t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(t)}embeddedTView(t){let i=null;for(let n=0;n<this.length;n++){let r=i!==null?i.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,i!==null?i.push(s):i=[s])}return i!==null?new e(i):null}template(t,i){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,i)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},em=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,i=-1){this.metadata=t,this._declarationNodeIndex=i}elementStart(t,i){this.isApplyingToNode(i)&&this.matchTNode(t,i)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,i){this.elementStart(t,i)}embeddedTView(t,i){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,i),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let i=this._declarationNodeIndex,n=t.parent;for(;n!==null&&n.type&8&&n.index!==i;)n=n.parent;return i===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(t,i){let n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){let s=n[r];this.matchTNodeWithReadOption(t,i,CL(i,s)),this.matchTNodeWithReadOption(t,i,cu(i,t,s,!1,!1))}else n===xl?i.type&4&&this.matchTNodeWithReadOption(t,i,-1):this.matchTNodeWithReadOption(t,i,cu(i,t,n,!1,!1))}matchTNodeWithReadOption(t,i,n){if(n!==null){let r=this.metadata.read;if(r!==null)if(r===Zi||r===as||r===xl&&i.type&4)this.addMatch(i.index,-2);else{let s=cu(i,t,r,!1,!1);s!==null&&this.addMatch(i.index,s)}else this.addMatch(i.index,n)}}addMatch(t,i){this.matches===null?this.matches=[t,i]:this.matches.push(t,i)}};function CL(e,t){let i=e.localNames;if(i!==null){for(let n=0;n<i.length;n+=2)if(i[n]===t)return i[n+1]}return null}function wL(e,t){return e.type&11?ua(e,t):e.type&4?Zm(e,t):null}function yL(e,t,i,n){return i===-1?wL(t,e):i===-2?bL(e,t,n):Us(e,e[Pe],i,t)}function bL(e,t,i){if(i===Zi)return ua(t,e);if(i===xl)return Zm(t,e);if(i===as)return x1(t,e)}function E1(e,t,i,n){let r=t[dr].queries[n];if(r.matches===null){let s=e.data,a=i.matches,c=[];for(let u=0;a!==null&&u<a.length;u+=2){let v=a[u];if(v<0)c.push(null);else{let b=s[v];c.push(yL(t,b,a[u+1],i.metadata.read))}}r.matches=c}return r.matches}function tm(e,t,i,n){let r=e.queries.getByIndex(i),s=r.matches;if(s!==null){let a=E1(e,t,r,i);for(let c=0;c<s.length;c+=2){let u=s[c];if(u>0)n.push(a[c/2]);else{let v=s[c+1],b=t[-u];for(let x=gi;x<b.length;x++){let D=b[x];D[Hs]===D[pi]&&tm(D[Pe],D,v,n)}if(b[na]!==null){let x=b[na];for(let D=0;D<x.length;D++){let A=x[D];tm(A[Pe],A,v,n)}}}}}return n}function SL(e,t){return e[dr].queries[t].queryList}function xL(e,t,i){let n=new Bf((i&4)===4);return CO(e,t,n,n.destroy),(t[dr]??=new Zf).queries.push(new Xf(n))-1}function EL(e,t,i){let n=fi();return n.firstCreatePass&&(ML(n,new Qf(e,t,i),-1),(t&2)===2&&(n.staticViewQueries=!0)),xL(n,nt(),t)}function DL(e){return e.split(",").map(t=>t.trim())}function ML(e,t,i){e.queries===null&&(e.queries=new Jf),e.queries.track(new em(t,i))}function Qm(e,t){return e.queries.getByIndex(t)}function RL(e,t){let i=e[Pe],n=Qm(i,t);return n.crossesNgTemplate?tm(i,e,t,[]):E1(i,e,n,t)}function IL(e){return typeof e=="function"&&e[ji]!==void 0}function Zu(e,t){ss("NgSignals");let i=pb(e),n=i[ji];return t?.equal&&(n.equal=t.equal),i.set=r=>Pd(n,r),i.update=r=>fb(n,r),i.asReadonly=TL.bind(i),i}function TL(){let e=this[ji];if(e.readonlyFn===void 0){let t=()=>this();t[ji]=e,e.readonlyFn=t}return e.readonlyFn}function D1(e){return IL(e)&&typeof e.set=="function"}var Qr=class{},Ml=class{};var im=class extends Qr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Iu(this);constructor(t,i,n,r=!0){super(),this.ngModuleType=t,this._parent=i;let s=_S(t);this._bootstrapComponents=Hx(s.bootstrap),this._r3Injector=Sx(t,i,[{provide:Qr,useValue:this},{provide:sa,useValue:this.componentFactoryResolver},...n],Oi(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},nm=class extends Ml{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new im(this.moduleType,t,[])}};var Tu=class extends Qr{injector;componentFactoryResolver=new Iu(this);instance=null;constructor(t){super();let i=new ml([...t.providers,{provide:Qr,useValue:this},{provide:sa,useValue:this.componentFactoryResolver}],t.parent||bm(),t.debugName,new Set(["environment"]));this.injector=i,t.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Jm(e,t,i=null){return new Tu({providers:e,parent:t,debugName:i,runEnvironmentInitializers:!0}).injector}var FL=(()=>{class e{_injector;cachedInjectors=new Map;constructor(i){this._injector=i}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let n=GS(!1,i.type),r=n.length>0?Jm([n],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,r)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ee({token:e,providedIn:"environment",factory:()=>new e(Ae(Li))})}return e})();function Xs(e){return Lu(()=>{let t=M1(e),i=ue(q({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Ax.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(FL).getOrCreateStandaloneInjector(i):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||qn.Emulated,styles:e.styles||ln,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&ss("NgStandalone"),R1(i);let n=e.dependencies;return i.directiveDefs=fS(n,!1),i.pipeDefs=fS(n,!0),i.id=kL(i),i})}function AL(e){return Vs(e)||BS(e)}function PL(e){return e!==null}function Yn(e){return Lu(()=>({type:e.type,bootstrap:e.bootstrap||ln,declarations:e.declarations||ln,imports:e.imports||ln,exports:e.exports||ln,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function pS(e,t){if(e==null)return Jo;let i={};for(let n in e)if(e.hasOwnProperty(n)){let r=e[n],s,a,c=Zr.None;Array.isArray(r)?(c=r[0],s=r[1],a=r[2]??s):(s=r,a=r),t?(i[s]=c!==Zr.None?[n,c]:n,t[s]=a):i[s]=n}return i}function Xn(e){return Lu(()=>{let t=M1(e);return R1(t),t})}function M1(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Jo,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||ln,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pS(e.inputs,t),outputs:pS(e.outputs),debugInfo:null}}function R1(e){e.features?.forEach(t=>t(e))}function fS(e,t){if(!e)return null;let i=t?VS:AL;return()=>(typeof e=="function"?e():e).map(n=>i(n)).filter(PL)}function kL(e){let t=0,i=typeof e.consts=="function"?"":e.consts,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,i,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let s of n.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function OL(e){return Object.getPrototypeOf(e.prototype).constructor}function Zs(e){let t=OL(e.type),i=!0,n=[e];for(;t;){let r;if(Yr(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Me(903,!1);r=t.\u0275dir}if(r){if(i){n.push(r);let a=e;a.inputs=nu(e.inputs),a.inputTransforms=nu(e.inputTransforms),a.declaredInputs=nu(e.declaredInputs),a.outputs=nu(e.outputs);let c=r.hostBindings;c&&VL(e,c);let u=r.viewQuery,v=r.contentQueries;if(u&&_L(e,u),v&&BL(e,v),LL(e,r),GP(e.outputs,r.outputs),Yr(r)&&r.data.animation){let b=e.data;b.animation=(b.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let a=0;a<s.length;a++){let c=s[a];c&&c.ngInherit&&c(e),c===Zs&&(i=!1)}}t=Object.getPrototypeOf(t)}NL(n)}function LL(e,t){for(let i in t.inputs){if(!t.inputs.hasOwnProperty(i)||e.inputs.hasOwnProperty(i))continue;let n=t.inputs[i];if(n!==void 0&&(e.inputs[i]=n,e.declaredInputs[i]=t.declaredInputs[i],t.inputTransforms!==null)){let r=Array.isArray(n)?n[0]:n;if(!t.inputTransforms.hasOwnProperty(r))continue;e.inputTransforms??={},e.inputTransforms[r]=t.inputTransforms[r]}}}function NL(e){let t=0,i=null;for(let n=e.length-1;n>=0;n--){let r=e[n];r.hostVars=t+=r.hostVars,r.hostAttrs=wl(r.hostAttrs,i=wl(i,r.hostAttrs))}}function nu(e){return e===Jo?{}:e===ln?[]:e}function _L(e,t){let i=e.viewQuery;i?e.viewQuery=(n,r)=>{t(n,r),i(n,r)}:e.viewQuery=t}function BL(e,t){let i=e.contentQueries;i?e.contentQueries=(n,r,s)=>{t(n,r,s),i(n,r,s)}:e.contentQueries=t}function VL(e,t){let i=e.hostBindings;i?e.hostBindings=(n,r)=>{t(n,r),i(n,r)}:e.hostBindings=t}function ga(e,t,i){let n=e[t];return Object.is(n,i)?!1:(e[t]=i,!0)}function HL(e){return(e.flags&32)===32}function GL(e,t,i,n,r,s,a,c,u){let v=t.consts,b=qu(t,e,4,a||null,c||null);r1(t,i,b,ra(v,u)),Pm(t,b);let x=b.tView=$m(2,b,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,v,null);return t.queries!==null&&(t.queries.template(t,b),x.queries=t.queries.embeddedTView(b)),b}function rm(e,t,i,n,r,s,a,c,u,v){let b=i+In,x=t.firstCreatePass?GL(b,t,e,n,r,s,a,c,u):t.data[b];Tl(x,!1);let D=zL(t,e,x,i);Fm()&&Wm(t,e,D,x),$s(D,e);let A=l1(D,e,D,x);return e[b]=A,Ku(e,A),mL(A,x,e),Sm(x)&&t1(t,e,x),u!=null&&i1(e,x,v),x}function Qs(e,t,i,n,r,s,a,c){let u=nt(),v=fi(),b=ra(v.consts,s);return rm(u,v,e,t,i,n,r,b,a,c),Qs}var zL=WL;function WL(e,t,i,n){return Am(!0),t[Qt].createComment("")}var Qu=(()=>{class e{log(i){console.log(i)}warn(i){console.warn(i)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var I1=new we("");function Js(e){return!!e&&typeof e.then=="function"}function T1(e){return!!e&&typeof e.subscribe=="function"}var F1=new we("");var A1=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((i,n)=>{this.resolve=i,this.reject=n});appInits=oe(F1,{optional:!0})??[];injector=oe(ur);constructor(){}runInitializers(){if(this.initialized)return;let i=[];for(let r of this.appInits){let s=Xi(this.injector,r);if(Js(s))i.push(s);else if(T1(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});i.push(a)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{n()}).catch(r=>{this.reject(r)}),i.length===0&&n(),this.initialized=!0}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),jL=(()=>{class e{static \u0275prov=Ee({token:e,providedIn:"root",factory:()=>new sm})}return e})(),sm=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}enqueue(t){let i=t.zone;this.queues.has(i)||this.queues.set(i,new Set);let n=this.queues.get(i);n.has(t)||(this.queuedEffectCount++,n.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,i]of this.queues)t===null?this.flushQueue(i):t.run(()=>this.flushQueue(i))}flushQueue(t){for(let i of t)t.delete(i),this.queuedEffectCount--,i.run()}},Ju=new we("");function UL(){gb(()=>{throw new Me(600,!1)})}function $L(e){return e.isBoundToModule}var qL=10;function KL(e,t,i){try{let n=i();return Js(n)?n.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>e.handleError(n)),n}}var ls=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=oe(yk);afterRenderManager=oe(kk);zonelessEnabled=oe(Wu);rootEffectScheduler=oe(jL);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Xt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=oe(fr).hasPendingTasks.pipe(Ne(i=>!i));constructor(){oe(Vx,{optional:!0})}whenStable(){let i;return new Promise(n=>{i=this.isStable.subscribe({next:r=>{r&&n()}})}).finally(()=>{i.unsubscribe()})}_injector=oe(Li);_rendererFactory=null;get injector(){return this._injector}bootstrap(i,n){let r=i instanceof Ru;if(!this._injector.get(A1).done){let D=!r&&HS(i),A=!1;throw new Me(405,A)}let a;r?a=i:a=this._injector.get(sa).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=$L(a)?void 0:this._injector.get(Qr),u=n||a.selector,v=a.create(ur.NULL,[],u,c),b=v.location.nativeElement,x=v.injector.get(I1,null);return x?.registerApplication(b),v.onDestroy(()=>{this.detachView(v.hostView),du(this.components,v),x?.unregisterApplication(b)}),this._loadComponent(v),v}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let n=this.tracingSnapshot;this.tracingSnapshot=null,n.run(Bx.CHANGE_DETECTION,this._tick),n.dispose();return}if(this._runningTick)throw new Me(101,!1);let i=We(null);try{this._runningTick=!0,this.synchronize()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1,We(i),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(oa,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<qL;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:n,notifyErrorHandler:r}of this.allViews)YL(n,r,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:i})=>Gu(i))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(i){let n=i;this._views.push(n),n.attachToAppRef(this)}detachView(i){let n=i;du(this._views,n),n.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(Ju,[]).forEach(r=>r(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>du(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Me(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function du(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}function YL(e,t,i,n){if(!i&&!Gu(e))return;C1(e,t,i&&!n?0:1)}function P1(e,t,i,n){return ga(e,Fl(),i)?t+AS(i)+n:os}function ru(e,t){return e<<17|t<<2}function Ks(e){return e>>17&32767}function XL(e){return(e&2)==2}function ZL(e,t){return e&131071|t<<17}function om(e){return e|2}function aa(e){return(e&131068)>>2}function pf(e,t){return e&-131069|t<<2}function QL(e){return(e&1)===1}function am(e){return e|1}function JL(e,t,i,n,r,s){let a=s?t.classBindings:t.styleBindings,c=Ks(a),u=aa(a);e[n]=i;let v=!1,b;if(Array.isArray(i)){let x=i;b=x[1],(b===null||Il(x,b)>0)&&(v=!0)}else b=i;if(r)if(u!==0){let D=Ks(e[c+1]);e[n+1]=ru(D,c),D!==0&&(e[D+1]=pf(e[D+1],n)),e[c+1]=ZL(e[c+1],n)}else e[n+1]=ru(c,0),c!==0&&(e[c+1]=pf(e[c+1],n)),c=n;else e[n+1]=ru(u,0),c===0?c=n:e[u+1]=pf(e[u+1],n),u=n;v&&(e[n+1]=om(e[n+1])),mS(e,b,n,!0),mS(e,b,n,!1),eN(t,b,e,n,s),a=ru(c,u),s?t.classBindings=a:t.styleBindings=a}function eN(e,t,i,n,r){let s=r?e.residualClasses:e.residualStyles;s!=null&&typeof t=="string"&&Il(s,t)>=0&&(i[n+1]=am(i[n+1]))}function mS(e,t,i,n){let r=e[i+1],s=t===null,a=n?Ks(r):aa(r),c=!1;for(;a!==0&&(c===!1||s);){let u=e[a],v=e[a+1];tN(u,t)&&(c=!0,e[a+1]=n?am(v):om(v)),a=n?Ks(v):aa(v)}c&&(e[i+1]=n?om(r):am(r))}function tN(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Il(e,t)>=0:!1}function eh(e,t,i){let n=nt(),r=Fl();if(ga(n,r,t)){let s=fi(),a=Tm();qm(s,a,n,e,t,n[Qt],i,!1)}return eh}function vS(e,t,i,n,r){let s=t.inputs,a=r?"class":"style";Km(e,i,s[a],a,n)}function ev(e,t){return iN(e,t,null,!0),ev}function iN(e,t,i,n){let r=nt(),s=fi(),a=W2(2);if(s.firstUpdatePass&&rN(s,e,a,n),t!==os&&ga(r,a,t)){let c=s.data[Ys()];cN(s,c,r,r[Qt],e,r[a+1]=dN(t,i),n,a)}}function nN(e,t){return t>=e.expandoStartIndex}function rN(e,t,i,n){let r=e.data;if(r[i+1]===null){let s=r[Ys()],a=nN(e,i);uN(s,n)&&t===null&&!a&&(t=!1),t=sN(r,s,t,n),JL(r,s,t,i,a,n)}}function sN(e,t,i,n){let r=q2(e),s=n?t.residualClasses:t.residualStyles;if(r===null)(n?t.classBindings:t.styleBindings)===0&&(i=ff(null,e,t,i,n),i=Rl(i,t.attrs,n),s=null);else{let a=t.directiveStylingLast;if(a===-1||e[a]!==r)if(i=ff(r,e,t,i,n),s===null){let u=oN(e,t,n);u!==void 0&&Array.isArray(u)&&(u=ff(null,e,t,u[1],n),u=Rl(u,t.attrs,n),aN(e,t,n,u))}else s=lN(e,t,n)}return s!==void 0&&(n?t.residualClasses=s:t.residualStyles=s),i}function oN(e,t,i){let n=i?t.classBindings:t.styleBindings;if(aa(n)!==0)return e[Ks(n)]}function aN(e,t,i,n){let r=i?t.classBindings:t.styleBindings;e[Ks(r)]=n}function lN(e,t,i){let n,r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++){let a=e[s].hostAttrs;n=Rl(n,a,i)}return Rl(n,t.attrs,i)}function ff(e,t,i,n,r){let s=null,a=i.directiveEnd,c=i.directiveStylingLast;for(c===-1?c=i.directiveStart:c++;c<a&&(s=t[c],n=Rl(n,s.hostAttrs,r),s!==e);)c++;return e!==null&&(i.directiveStylingLast=c),n}function Rl(e,t,i){let n=i?1:2,r=-1;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];typeof a=="number"?r=a:r===n&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),d2(e,a,i?!0:t[++s]))}return e===void 0?null:e}function cN(e,t,i,n,r,s,a,c){if(!(t.type&3))return;let u=e.data,v=u[c+1],b=QL(v)?CS(u,t,i,r,aa(v),a):void 0;if(!Fu(b)){Fu(s)||XL(v)&&(s=CS(u,null,i,r,c,a));let x=QS(Ys(),i);Jk(n,a,x,r,s)}}function CS(e,t,i,n,r,s){let a=t===null,c;for(;r>0;){let u=e[r],v=Array.isArray(u),b=v?u[1]:u,x=b===null,D=i[r+1];D===os&&(D=x?ln:void 0);let A=x?of(D,n):b===n?D:void 0;if(v&&!Fu(A)&&(A=of(u,n)),Fu(A)&&(c=A,a))return c;let O=e[r+1];r=a?Ks(O):aa(O)}if(t!==null){let u=s?t.residualClasses:t.residualStyles;u!=null&&(c=of(u,n))}return c}function Fu(e){return e!==void 0}function dN(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Oi(Hm(e)))),e}function uN(e,t){return(e.flags&(t?8:16))!==0}var lm=class{destroy(t){}updateValue(t,i){}swap(t,i){let n=Math.min(t,i),r=Math.max(t,i),s=this.detach(r);if(r-n>1){let a=this.detach(n);this.attach(n,s),this.attach(r,a)}else this.attach(n,s)}move(t,i){this.attach(i,this.detach(t))}};function mf(e,t,i,n,r){return e===i&&Object.is(t,n)?1:Object.is(r(e,t),r(i,n))?-1:0}function hN(e,t,i){let n,r,s=0,a=e.length-1,c=void 0;if(Array.isArray(t)){let u=t.length-1;for(;s<=a&&s<=u;){let v=e.at(s),b=t[s],x=mf(s,v,s,b,i);if(x!==0){x<0&&e.updateValue(s,b),s++;continue}let D=e.at(a),A=t[u],O=mf(a,D,u,A,i);if(O!==0){O<0&&e.updateValue(a,A),a--,u--;continue}let B=i(s,v),L=i(a,D),U=i(s,b);if(Object.is(U,L)){let K=i(u,A);Object.is(K,B)?(e.swap(s,a),e.updateValue(a,A),u--,a--):e.move(a,s),e.updateValue(s,b),s++;continue}if(n??=new Au,r??=yS(e,s,a,i),cm(e,n,s,U))e.updateValue(s,b),s++,a++;else if(r.has(U))n.set(B,e.detach(s)),a--;else{let K=e.create(s,t[s]);e.attach(s,K),s++,a++}}for(;s<=u;)wS(e,n,i,s,t[s]),s++}else if(t!=null){let u=t[Symbol.iterator](),v=u.next();for(;!v.done&&s<=a;){let b=e.at(s),x=v.value,D=mf(s,b,s,x,i);if(D!==0)D<0&&e.updateValue(s,x),s++,v=u.next();else{n??=new Au,r??=yS(e,s,a,i);let A=i(s,x);if(cm(e,n,s,A))e.updateValue(s,x),s++,a++,v=u.next();else if(!r.has(A))e.attach(s,e.create(s,x)),s++,a++,v=u.next();else{let O=i(s,b);n.set(O,e.detach(s)),a--}}}for(;!v.done;)wS(e,n,i,e.length,v.value),v=u.next()}for(;s<=a;)e.destroy(e.detach(a--));n?.forEach(u=>{e.destroy(u)})}function cm(e,t,i,n){return t!==void 0&&t.has(n)?(e.attach(i,t.get(n)),t.delete(n),!0):!1}function wS(e,t,i,n,r){if(cm(e,t,n,i(n,r)))e.updateValue(n,r);else{let s=e.create(n,r);e.attach(n,s)}}function yS(e,t,i,n){let r=new Set;for(let s=t;s<=i;s++)r.add(n(s,e.at(s)));return r}var Au=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let i=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(i)?(this.kvMap.set(t,this._vMap.get(i)),this._vMap.delete(i)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,i){if(this.kvMap.has(t)){let n=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(n);)n=r.get(n);r.set(n,i)}else this.kvMap.set(t,i)}forEach(t){for(let[i,n]of this.kvMap)if(t(n,i),this._vMap!==void 0){let r=this._vMap;for(;r.has(n);)n=r.get(n),t(n,i)}}};function pa(e,t){ss("NgControlFlow");let i=nt(),n=Fl(),r=i[n]!==os?i[n]:-1,s=r!==-1?Pu(i,In+r):void 0,a=0;if(ga(i,n,e)){let c=We(null);try{if(s!==void 0&&p1(s,a),e!==-1){let u=In+e,v=Pu(i,u),b=gm(i[Pe],u),x=El(v,b.tView.ssrId),D=Yu(i,b,t,{dehydratedView:x});Xu(v,D,a,Sl(b,x))}}finally{We(c)}}else if(s!==void 0){let c=g1(s,a);c!==void 0&&(c[hi]=t)}}var dm=class{lContainer;$implicit;$index;constructor(t,i,n){this.lContainer=t,this.$implicit=i,this.$index=n}get $count(){return this.lContainer.length-gi}};function k1(e,t){return t}var um=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,i,n){this.hasEmptyBlock=t,this.trackByFn=i,this.liveCollection=n}};function O1(e,t,i,n,r,s,a,c,u,v,b,x,D){ss("NgControlFlow");let A=nt(),O=fi(),B=u!==void 0,L=nt(),U=c?a.bind(L[Rn][hi]):a,K=new um(B,U);L[In+e]=K,rm(A,O,e+1,t,i,n,r,ra(O.consts,s)),B&&rm(A,O,e+2,u,v,b,x,ra(O.consts,D))}var hm=class extends lm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,i,n){super(),this.lContainer=t,this.hostLView=i,this.templateTNode=n}get length(){return this.lContainer.length-gi}at(t){return this.getLView(t)[hi].$implicit}attach(t,i){let n=i[vl];this.needsIndexUpdate||=t!==this.length,Xu(this.lContainer,i,t,Sl(this.templateTNode,n))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,gN(this.lContainer,t)}create(t,i){let n=El(this.lContainer,this.templateTNode.tView.ssrId),r=Yu(this.hostLView,this.templateTNode,new dm(this.lContainer,i,t),{dehydratedView:n});return this.operationsCounter?.recordCreate(),r}destroy(t){ju(t[Pe],t),this.operationsCounter?.recordDestroy()}updateValue(t,i){this.getLView(t)[hi].$implicit=i}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[hi].$index=t}getLView(t){return pN(this.lContainer,t)}};function L1(e){let t=We(null),i=Ys();try{let n=nt(),r=n[Pe],s=n[i],a=i+1,c=Pu(n,a);if(s.liveCollection===void 0){let v=gm(r,a);s.liveCollection=new hm(c,n,v)}else s.liveCollection.reset();let u=s.liveCollection;if(hN(u,e,s.trackByFn),u.updateIndexes(),s.hasEmptyBlock){let v=Fl(),b=u.length===0;if(ga(n,v,b)){let x=i+2,D=Pu(n,x);if(b){let A=gm(r,x),O=El(D,A.tView.ssrId),B=Yu(n,A,void 0,{dehydratedView:O});Xu(D,B,0,Sl(A,O))}else p1(D,0)}}}finally{We(t)}}function Pu(e,t){return e[t]}function gN(e,t){return bl(e,t)}function pN(e,t){return g1(e,t)}function gm(e,t){return xm(e,t)}function fN(e,t,i,n,r,s){let a=t.consts,c=ra(a,r),u=qu(t,e,2,n,c);return r1(t,i,u,ra(a,s)),u.attrs!==null&&Kf(u,u.attrs,!1),u.mergedAttrs!==null&&Kf(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function Jt(e,t,i,n){let r=nt(),s=fi(),a=In+e,c=r[Qt],u=s.firstCreatePass?fN(a,s,r,t,i,n):s.data[a],v=mN(s,r,u,c,t,e);r[a]=v;let b=Sm(u);return Tl(u,!0),Kx(c,v,u),!HL(u)&&Fm()&&Wm(s,r,v,u),O2()===0&&$s(v,r),L2(),b&&(t1(s,r,u),e1(s,u,r)),n!==null&&i1(r,u),Jt}function kt(){let e=Ni();nx()?G2():(e=e.parent,Tl(e,!1));let t=e;B2(t)&&V2(),N2();let i=fi();return i.firstCreatePass&&(Pm(i,e),qS(e)&&i.queries.elementEnd(e)),t.classesWithoutHost!=null&&ek(t)&&vS(i,t,nt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&tk(t)&&vS(i,t,nt(),t.stylesWithoutHost,!1),kt}function cs(e,t,i,n){return Jt(e,t,i,n),kt(),cs}var mN=(e,t,i,n,r,s)=>(Am(!0),Gx(n,r,X2()));function Al(){return nt()}var ku="en-US";var vN=ku;function CN(e){typeof e=="string"&&(vN=e.toLowerCase().replace(/_/g,"-"))}var wN=(e,t,i)=>{};function Si(e,t,i,n){let r=nt(),s=fi(),a=Ni();return N1(s,r,r[Qt],a,e,t,n),Si}function yN(e,t,i,n){let r=e.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let a=r[s];if(a===i&&r[s+1]===n){let c=t[mu],u=r[s+2];return c.length>u?c[u]:null}typeof a=="string"&&(s+=2)}return null}function N1(e,t,i,n,r,s,a){let c=Sm(n),v=e.firstCreatePass&&u1(e),b=t[hi],x=d1(t),D=!0;if(n.type&3||a){let B=Fn(n,t),L=a?a(B):B,U=x.length,K=a?ne=>a($n(ne[n.index])):n.index,$=null;if(!a&&c&&($=yN(e,t,r,n.index)),$!==null){let ne=$.__ngLastListenerFn__||$;ne.__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,D=!1}else{s=SS(n,t,b,s),wN(B,r,s);let ne=i.listen(L,r,s);x.push(s,ne),v&&v.push(r,K,U,U+1)}}else s=SS(n,t,b,s);let A=n.outputs,O;if(D&&A!==null&&(O=A[r])){let B=O.length;if(B)for(let L=0;L<B;L+=2){let U=O[L],K=O[L+1],G=t[U][K].subscribe(s),_=x.length;x.push(s,G),v&&v.push(r,n.index,_,-(_+1))}}}function bS(e,t,i,n){let r=We(null);try{return jn(6,t,i),i(n)!==!1}catch(s){return h1(e,s),!1}finally{jn(7,t,i),We(r)}}function SS(e,t,i,n){return function r(s){if(s===Function)return n;let a=e.componentOffset>-1?es(e.index,t):t;Xm(a,5);let c=bS(t,i,n,s),u=r.__ngNextListenerFn__;for(;u;)c=bS(t,i,u,s)&&c,u=u.__ngNextListenerFn__;return c}}function Pn(e=1){return Y2(e)}function tv(e,t,i){return _1(e,"",t,"",i),tv}function _1(e,t,i,n,r){let s=nt(),a=P1(s,t,i,n);if(a!==os){let c=fi(),u=Tm();qm(c,u,s,e,a,s[Qt],r,!1)}return _1}function B1(e,t,i){EL(e,t,i)}function iv(e){let t=nt(),i=fi(),n=sx();Mm(n+1);let r=Qm(i,n);if(e.dirty&&F2(t)===((r.metadata.flags&2)===2)){if(r.matches===null)e.reset([]);else{let s=RL(t,n);e.reset(s,xk),e.notifyOnChanges()}return!0}return!1}function nv(){return SL(nt(),sx())}function oi(e,t=""){let i=nt(),n=fi(),r=e+In,s=n.firstCreatePass?qu(n,r,1,t,null):n.data[r],a=bN(n,i,s,t,e);i[r]=a,Fm()&&Wm(n,i,a,s),Tl(s,!1)}var bN=(e,t,i,n,r)=>(Am(!0),Nk(t[Qt],n));function rv(e){return th("",e,""),rv}function th(e,t,i){let n=nt(),r=P1(n,e,t,i);return r!==os&&LO(n,Ys(),r),th}function ih(e,t,i){D1(t)&&(t=t());let n=nt(),r=Fl();if(ga(n,r,t)){let s=fi(),a=Tm();qm(s,a,n,e,t,n[Qt],i,!1)}return ih}function sv(e,t){let i=D1(e);return i&&e.set(t),i}function nh(e,t){let i=nt(),n=fi(),r=Ni();return N1(n,i,i[Qt],r,e,t),nh}function SN(e,t,i){let n=fi();if(n.firstCreatePass){let r=Yr(e);pm(i,n.data,n.blueprint,r,!0),pm(t,n.data,n.blueprint,r,!1)}}function pm(e,t,i,n,r){if(e=bi(e),Array.isArray(e))for(let s=0;s<e.length;s++)pm(e[s],t,i,n,r);else{let s=fi(),a=nt(),c=Ni(),u=ta(e)?e:bi(e.provide),v=jS(e),b=c.providerIndexes&1048575,x=c.directiveStart,D=c.providerIndexes>>20;if(ta(e)||!e.multi){let A=new js(v,r,pt),O=Cf(u,t,r?b:b+D,x);O===-1?(Pf(Su(c,a),s,u),vf(s,e,t.length),t.push(u),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),i.push(A),a.push(A)):(i[O]=A,a[O]=A)}else{let A=Cf(u,t,b+D,x),O=Cf(u,t,b,b+D),B=A>=0&&i[A],L=O>=0&&i[O];if(r&&!L||!r&&!B){Pf(Su(c,a),s,u);let U=DN(r?EN:xN,i.length,r,n,v);!r&&L&&(i[O].providerFactory=U),vf(s,e,t.length,0),t.push(u),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),i.push(U),a.push(U)}else{let U=V1(i[r?O:A],v,!r&&n);vf(s,e,A>-1?A:O,U)}!r&&n&&L&&i[O].componentProviders++}}}function vf(e,t,i,n){let r=ta(t),s=m2(t);if(r||s){let u=(s?bi(t.useClass):t).prototype.ngOnDestroy;if(u){let v=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){let b=v.indexOf(i);b===-1?v.push(i,[n,u]):v[b+1].push(n,u)}else v.push(i,u)}}}function V1(e,t,i){return i&&e.componentProviders++,e.multi.push(t)-1}function Cf(e,t,i,n){for(let r=i;r<n;r++)if(t[r]===e)return r;return-1}function xN(e,t,i,n){return fm(this.multi,[])}function EN(e,t,i,n){let r=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Us(i,i[Pe],this.providerFactory.index,n);s=c.slice(0,a),fm(r,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],fm(r,s);return s}function fm(e,t){for(let i=0;i<e.length;i++){let n=e[i];t.push(n())}return t}function DN(e,t,i,n,r){let s=new js(e,i,pt);return s.multi=[],s.index=t,s.componentProviders=0,V1(s,r,n&&!i),s}function fa(e,t=[]){return i=>{i.providersResolver=(n,r)=>SN(n,r?r(e):e,t)}}var mm=class{ngModuleFactory;componentFactories;constructor(t,i){this.ngModuleFactory=t,this.componentFactories=i}},ov=(()=>{class e{compileModuleSync(i){return new nm(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let n=this.compileModuleSync(i),r=_S(i),s=Hx(r.declarations).reduce((a,c)=>{let u=Vs(c);return u&&a.push(new Dl(u)),a},[]);return new mm(n,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var MN=(()=>{class e{zone=oe(gt);changeDetectionScheduler=oe(yl);applicationRef=oe(ls);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),RN=new we("",{factory:()=>!1});function H1({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:i}){return e??=()=>new gt(ue(q({},z1()),{scheduleInRootZone:i})),[{provide:gt,useFactory:e},{provide:ea,multi:!0,useFactory:()=>{let n=oe(MN,{optional:!0});return()=>n.initialize()}},{provide:ea,multi:!0,useFactory:()=>{let n=oe(IN);return()=>{n.initialize()}}},t===!0?{provide:Dx,useValue:!0}:[],{provide:Mx,useValue:i??xx}]}function G1(e){let t=e?.ignoreChangesOutsideZone,i=e?.scheduleInRootZone,n=H1({ngZoneFactory:()=>{let r=z1(e);return r.scheduleInRootZone=i,r.shouldCoalesceEventChangeDetection&&ss("NgZone_CoalesceEvent"),new gt(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:i});return ca([{provide:RN,useValue:!0},{provide:Wu,useValue:!1},n])}function z1(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var IN=(()=>{class e{subscription=new Wt;initialized=!1;zone=oe(gt);pendingTasks=oe(fr);initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{gt.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{gt.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var TN=(()=>{class e{appRef=oe(ls);taskService=oe(fr);ngZone=oe(gt);zonelessEnabled=oe(Wu);tracing=oe(Vx,{optional:!0});disableScheduling=oe(Dx,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Wt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Eu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(oe(Mx,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof _f||!this.zoneIsDefined)}notify(i){if(!this.zonelessEnabled&&i===5)return;let n=!1;switch(i){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,n=!0;break}case 13:{this.appRef.dirtyFlags|=16,n=!0;break}case 14:{this.appRef.dirtyFlags|=2,n=!0;break}case 12:{n=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(n))return;let r=this.useMicrotaskScheduler?tS:Rx;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(i){return!(this.disableScheduling&&!i||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Eu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(n){throw this.taskService.remove(i),n}finally{this.cleanup()}this.useMicrotaskScheduler=!0,tS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let i=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(i)}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function FN(){return typeof $localize<"u"&&$localize.locale||ku}var av=new we("",{providedIn:"root",factory:()=>oe(av,He.Optional|He.SkipSelf)||FN()});var vm=new we("");function su(e){return!e.moduleRef}function AN(e){let t=su(e)?e.r3Injector:e.moduleRef.injector,i=t.get(gt);return i.run(()=>{su(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let n=t.get(Xr,null),r;if(i.runOutsideAngular(()=>{r=i.onError.subscribe({next:s=>{n.handleError(s)}})}),su(e)){let s=()=>t.destroy(),a=e.platformInjector.get(vm);a.add(s),t.onDestroy(()=>{r.unsubscribe(),a.delete(s)})}else{let s=()=>e.moduleRef.destroy(),a=e.platformInjector.get(vm);a.add(s),e.moduleRef.onDestroy(()=>{du(e.allPlatformModules,e.moduleRef),r.unsubscribe(),a.delete(s)})}return KL(n,i,()=>{let s=t.get(A1);return s.runInitializers(),s.donePromise.then(()=>{let a=t.get(av,ku);if(CN(a||ku),su(e)){let c=t.get(ls);return e.rootComponent!==void 0&&c.bootstrap(e.rootComponent),c}else return PN(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function PN(e,t){let i=e.injector.get(ls);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(n=>i.bootstrap(n));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(i);else throw new Me(-403,!1);t.push(e)}var uu=null;function kN(e=[],t){return ur.create({name:t,providers:[{provide:Bu,useValue:"platform"},{provide:vm,useValue:new Set([()=>uu=null])},...e]})}function ON(e=[]){if(uu)return uu;let t=kN(e);return uu=t,UL(),LN(t),t}function LN(e){let t=e.get(_m,null);Xi(e,()=>{t?.forEach(i=>i())})}var eo=(()=>{class e{static __NG_ELEMENT_ID__=NN}return e})();function NN(e){return _N(Ni(),nt(),(e&16)===16)}function _N(e,t,i){if(Hu(e)&&!i){let n=es(e.index,t);return new qs(n,n)}else if(e.type&175){let n=t[Rn];return new qs(n,t)}return null}function W1(e){try{let{rootComponent:t,appProviders:i,platformProviders:n}=e,r=ON(n),s=[H1({}),{provide:yl,useExisting:TN},...i||[]],a=new Tu({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return AN({r3Injector:a.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}}function rh(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function sh(e,t){ss("NgSignals");let i=db(e);return t?.equal&&(i[ji].equal=t.equal),i}function ds(e){let t=We(null);try{return e()}finally{We(t)}}var xS=class{[ji];constructor(t){this[ji]=t}destroy(){this[ji].destroy()}};var $1=null;function mr(){return $1}function q1(e){$1??=e}var oh=class{};var _i=new we(""),K1=(()=>{class e{historyGo(i){throw new Error("")}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:()=>oe(HN),providedIn:"platform"})}return e})();var HN=(()=>{class e extends K1{_location;_history;_doc=oe(_i);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mr().getBaseHref(this._doc)}onPopState(i){let n=mr().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",i,!1),()=>n.removeEventListener("popstate",i)}onHashChange(i){let n=mr().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",i,!1),()=>n.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,n,r){this._history.pushState(i,n,r)}replaceState(i,n,r){this._history.replaceState(i,n,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Y1(e,t){if(e.length==0)return t;if(t.length==0)return e;let i=0;return e.endsWith("/")&&i++,t.startsWith("/")&&i++,i==2?e+t.substring(1):i==1?e+t:e+"/"+t}function j1(e){let t=e.match(/#|\?|$/),i=t&&t.index||e.length,n=i-(e[i-1]==="/"?1:0);return e.slice(0,n)+e.slice(i)}function to(e){return e&&e[0]!=="?"?"?"+e:e}var ah=(()=>{class e{historyGo(i){throw new Error("")}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:()=>oe(X1),providedIn:"root"})}return e})(),GN=new we(""),X1=(()=>{class e extends ah{_platformLocation;_baseHref;_removeListenerFns=[];constructor(i,n){super(),this._platformLocation=i,this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??oe(_i).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return Y1(this._baseHref,i)}path(i=!1){let n=this._platformLocation.pathname+to(this._platformLocation.search),r=this._platformLocation.hash;return r&&i?`${n}${r}`:n}pushState(i,n,r,s){let a=this.prepareExternalUrl(r+to(s));this._platformLocation.pushState(i,n,a)}replaceState(i,n,r,s){let a=this.prepareExternalUrl(r+to(s));this._platformLocation.replaceState(i,n,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}static \u0275fac=function(n){return new(n||e)(Ae(K1),Ae(GN,8))};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Pl=(()=>{class e{_subject=new Xt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(i){this._locationStrategy=i;let n=this._locationStrategy.getBaseHref();this._basePath=jN(j1(U1(n))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,n=""){return this.path()==this.normalize(i+to(n))}normalize(i){return e.stripTrailingSlash(WN(this._basePath,U1(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,n="",r=null){this._locationStrategy.pushState(r,"",i,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+to(n)),r)}replaceState(i,n="",r=null){this._locationStrategy.replaceState(r,"",i,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+to(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",n){this._urlChangeListeners.forEach(r=>r(i,n))}subscribe(i,n,r){return this._subject.subscribe({next:i,error:n??void 0,complete:r??void 0})}static normalizeQueryParams=to;static joinWithSlash=Y1;static stripTrailingSlash=j1;static \u0275fac=function(n){return new(n||e)(Ae(ah))};static \u0275prov=Ee({token:e,factory:()=>zN(),providedIn:"root"})}return e})();function zN(){return new Pl(Ae(ah))}function WN(e,t){if(!e||!t.startsWith(e))return t;let i=t.substring(e.length);return i===""||["/",";","?","#"].includes(i[0])?i:t}function U1(e){return e.replace(/\/index.html$/,"")}function jN(e){if(new RegExp("^(https?:)?//").test(e)){let[,i]=e.split(/\/\/[^\/]+/);return i}return e}function lh(e,t){t=encodeURIComponent(t);for(let i of e.split(";")){let n=i.indexOf("="),[r,s]=n==-1?[i,""]:[i.slice(0,n),i.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}var Z1="browser",UN="server";function ch(e){return e===UN}var ma=class{};var Ol=class{},uh=class{},vr=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(i=>{let n=i.indexOf(":");if(n>0){let r=i.slice(0,n),s=i.slice(n+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((i,n)=>{this.addHeaderEntry(n,i)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([i,n])=>{this.setHeaderEntries(i,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let i=this.headers.get(t.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,i){return this.clone({name:t,value:i,op:"a"})}set(t,i){return this.clone({name:t,value:i,op:"s"})}delete(t,i){return this.clone({name:t,value:i,op:"d"})}maybeSetNormalizedName(t,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(i=>{this.headers.set(i,t.headers.get(i)),this.normalizedNames.set(i,t.normalizedNames.get(i))})}clone(t){let i=new e;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([t]),i}applyUpdate(t){let i=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(t.name,i);let r=(t.op==="a"?this.headers.get(i):void 0)||[];r.push(...n),this.headers.set(i,r);break;case"d":let s=t.value;if(!s)this.headers.delete(i),this.normalizedNames.delete(i);else{let a=this.headers.get(i);if(!a)return;a=a.filter(c=>s.indexOf(c)===-1),a.length===0?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,a)}break}}addHeaderEntry(t,i){let n=t.toLowerCase();this.maybeSetNormalizedName(t,n),this.headers.has(n)?this.headers.get(n).push(i):this.headers.set(n,[i])}setHeaderEntries(t,i){let n=(Array.isArray(i)?i:[i]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>t(this.normalizedNames.get(i),this.headers.get(i)))}};var dv=class{encodeKey(t){return Q1(t)}encodeValue(t){return Q1(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function qN(e,t){let i=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[a,c]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],u=i.get(a)||[];u.push(c),i.set(a,u)}),i}var KN=/%(\d[a-f0-9])/gi,YN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Q1(e){return encodeURIComponent(e).replace(KN,(t,i)=>YN[i]??t)}function dh(e){return`${e}`}var gs=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new dv,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=qN(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(i=>{let n=t.fromObject[i],r=Array.isArray(n)?n.map(dh):[dh(n)];this.map.set(i,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let i=this.map.get(t);return i?i[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,i){return this.clone({param:t,value:i,op:"a"})}appendAll(t){let i=[];return Object.keys(t).forEach(n=>{let r=t[n];Array.isArray(r)?r.forEach(s=>{i.push({param:n,value:s,op:"a"})}):i.push({param:n,value:r,op:"a"})}),this.clone(i)}set(t,i){return this.clone({param:t,value:i,op:"s"})}delete(t,i){return this.clone({param:t,value:i,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let i=this.encoder.encodeKey(t);return this.map.get(t).map(n=>i+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let i=new e({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(t),i}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let i=(t.op==="a"?this.map.get(t.param):void 0)||[];i.push(dh(t.value)),this.map.set(t.param,i);break;case"d":if(t.value!==void 0){let n=this.map.get(t.param)||[],r=n.indexOf(dh(t.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var uv=class{map=new Map;set(t,i){return this.map.set(t,i),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function XN(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function J1(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function eE(e){return typeof Blob<"u"&&e instanceof Blob}function tE(e){return typeof FormData<"u"&&e instanceof FormData}function ZN(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var kl=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,i,n,r){this.url=i,this.method=t.toUpperCase();let s;if(XN(this.method)||r?(this.body=n!==void 0?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new vr,this.context??=new uv,!this.params)this.params=new gs,this.urlWithParams=i;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=i;else{let c=i.indexOf("?"),u=c===-1?"?":c<i.length-1?"&":"";this.urlWithParams=i+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||J1(this.body)||eE(this.body)||tE(this.body)||ZN(this.body)?this.body:this.body instanceof gs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||tE(this.body)?null:eE(this.body)?this.body.type||null:J1(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof gs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let i=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,a=t.body!==void 0?t.body:this.body,c=t.withCredentials??this.withCredentials,u=t.reportProgress??this.reportProgress,v=t.headers||this.headers,b=t.params||this.params,x=t.context??this.context;return t.setHeaders!==void 0&&(v=Object.keys(t.setHeaders).reduce((D,A)=>D.set(A,t.setHeaders[A]),v)),t.setParams&&(b=Object.keys(t.setParams).reduce((D,A)=>D.set(A,t.setParams[A]),b)),new e(i,n,a,{params:b,headers:v,context:x,reportProgress:u,responseType:r,withCredentials:c,transferCache:s})}},ps=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(ps||{}),Ll=class{headers;status;statusText;url;ok;type;constructor(t,i=200,n="OK"){this.headers=t.headers||new vr,this.status=t.status!==void 0?t.status:i,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},hh=class e extends Ll{constructor(t={}){super(t)}type=ps.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Nl=class e extends Ll{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=ps.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},hs=class extends Ll{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},oE=200,QN=204;function cv(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var pv=(()=>{class e{handler;constructor(i){this.handler=i}request(i,n,r={}){let s;if(i instanceof kl)s=i;else{let u;r.headers instanceof vr?u=r.headers:u=new vr(r.headers);let v;r.params&&(r.params instanceof gs?v=r.params:v=new gs({fromObject:r.params})),s=new kl(i,n,r.body!==void 0?r.body:null,{headers:u,context:r.context,params:v,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let a=Fe(s).pipe(zr(u=>this.handler.handle(u)));if(i instanceof kl||r.observe==="events")return a;let c=a.pipe(qi(u=>u instanceof Nl));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(Ne(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(Ne(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(Ne(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(Ne(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(i,n={}){return this.request("DELETE",i,n)}get(i,n={}){return this.request("GET",i,n)}head(i,n={}){return this.request("HEAD",i,n)}jsonp(i,n){return this.request("JSONP",i,{params:new gs().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,n={}){return this.request("OPTIONS",i,n)}patch(i,n,r={}){return this.request("PATCH",i,cv(r,n))}post(i,n,r={}){return this.request("POST",i,cv(r,n))}put(i,n,r={}){return this.request("PUT",i,cv(r,n))}static \u0275fac=function(n){return new(n||e)(Ae(Ol))};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),JN=/^\)\]\}',?\n/,e_="X-Request-URL";function iE(e){if(e.url)return e.url;let t=e_.toLocaleLowerCase();return e.headers.get(t)}var t_=(()=>{class e{fetchImpl=oe(hv,{optional:!0})?.fetch??((...i)=>globalThis.fetch(...i));ngZone=oe(gt);handle(i){return new Xe(n=>{let r=new AbortController;return this.doRequest(i,r.signal,n).then(gv,s=>n.error(new hs({error:s}))),()=>r.abort()})}doRequest(i,n,r){return or(this,null,function*(){let s=this.createRequestInit(i),a;try{let A=this.ngZone.runOutsideAngular(()=>this.fetchImpl(i.urlWithParams,q({signal:n},s)));i_(A),r.next({type:ps.Sent}),a=yield A}catch(A){r.error(new hs({error:A,status:A.status??0,statusText:A.statusText,url:i.urlWithParams,headers:A.headers}));return}let c=new vr(a.headers),u=a.statusText,v=iE(a)??i.urlWithParams,b=a.status,x=null;if(i.reportProgress&&r.next(new hh({headers:c,status:b,statusText:u,url:v})),a.body){let A=a.headers.get("content-length"),O=[],B=a.body.getReader(),L=0,U,K,$=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>or(this,null,function*(){for(;;){let{done:G,value:_}=yield B.read();if(G)break;if(O.push(_),L+=_.length,i.reportProgress){K=i.responseType==="text"?(K??"")+(U??=new TextDecoder).decode(_,{stream:!0}):void 0;let N=()=>r.next({type:ps.DownloadProgress,total:A?+A:void 0,loaded:L,partialText:K});$?$.run(N):N()}}}));let ne=this.concatChunks(O,L);try{let G=a.headers.get("Content-Type")??"";x=this.parseBody(i,ne,G)}catch(G){r.error(new hs({error:G,headers:new vr(a.headers),status:a.status,statusText:a.statusText,url:iE(a)??i.urlWithParams}));return}}b===0&&(b=x?oE:0),b>=200&&b<300?(r.next(new Nl({body:x,headers:c,status:b,statusText:u,url:v})),r.complete()):r.error(new hs({error:x,headers:c,status:b,statusText:u,url:v}))})}parseBody(i,n,r){switch(i.responseType){case"json":let s=new TextDecoder().decode(n).replace(JN,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(n);case"blob":return new Blob([n],{type:r});case"arraybuffer":return n.buffer}}createRequestInit(i){let n={},r=i.withCredentials?"include":void 0;if(i.headers.forEach((s,a)=>n[s]=a.join(",")),i.headers.has("Accept")||(n.Accept="application/json, text/plain, */*"),!i.headers.has("Content-Type")){let s=i.detectContentTypeHeader();s!==null&&(n["Content-Type"]=s)}return{body:i.serializeBody(),method:i.method,headers:n,credentials:r}}concatChunks(i,n){let r=new Uint8Array(n),s=0;for(let a of i)r.set(a,s),s+=a.length;return r}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),hv=class{};function gv(){}function i_(e){e.then(gv,gv)}function aE(e,t){return t(e)}function n_(e,t){return(i,n)=>t.intercept(i,{handle:r=>e(r,n)})}function r_(e,t,i){return(n,r)=>Xi(i,()=>t(n,s=>e(s,r)))}var s_=new we(""),fv=new we(""),o_=new we(""),lE=new we("",{providedIn:"root",factory:()=>!0});function a_(){let e=null;return(t,i)=>{e===null&&(e=(oe(s_,{optional:!0})??[]).reduceRight(n_,aE));let n=oe(fr);if(oe(lE)){let s=n.add();return e(t,i).pipe(jr(()=>n.remove(s)))}else return e(t,i)}}var nE=(()=>{class e extends Ol{backend;injector;chain=null;pendingTasks=oe(fr);contributeToStability=oe(lE);constructor(i,n){super(),this.backend=i,this.injector=n}handle(i){if(this.chain===null){let n=Array.from(new Set([...this.injector.get(fv),...this.injector.get(o_,[])]));this.chain=n.reduceRight((r,s)=>r_(r,s,this.injector),aE)}if(this.contributeToStability){let n=this.pendingTasks.add();return this.chain(i,r=>this.backend.handle(r)).pipe(jr(()=>this.pendingTasks.remove(n)))}else return this.chain(i,n=>this.backend.handle(n))}static \u0275fac=function(n){return new(n||e)(Ae(uh),Ae(Li))};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();var l_=/^\)\]\}',?\n/;function c_(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var rE=(()=>{class e{xhrFactory;constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new Me(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?Ft(n.\u0275loadImpl()):Fe(null)).pipe(Ki(()=>new Xe(s=>{let a=n.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((B,L)=>a.setRequestHeader(B,L.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let B=i.detectContentTypeHeader();B!==null&&a.setRequestHeader("Content-Type",B)}if(i.responseType){let B=i.responseType.toLowerCase();a.responseType=B!=="json"?B:"text"}let c=i.serializeBody(),u=null,v=()=>{if(u!==null)return u;let B=a.statusText||"OK",L=new vr(a.getAllResponseHeaders()),U=c_(a)||i.url;return u=new hh({headers:L,status:a.status,statusText:B,url:U}),u},b=()=>{let{headers:B,status:L,statusText:U,url:K}=v(),$=null;L!==QN&&($=typeof a.response>"u"?a.responseText:a.response),L===0&&(L=$?oE:0);let ne=L>=200&&L<300;if(i.responseType==="json"&&typeof $=="string"){let G=$;$=$.replace(l_,"");try{$=$!==""?JSON.parse($):null}catch(_){$=G,ne&&(ne=!1,$={error:_,text:$})}}ne?(s.next(new Nl({body:$,headers:B,status:L,statusText:U,url:K||void 0})),s.complete()):s.error(new hs({error:$,headers:B,status:L,statusText:U,url:K||void 0}))},x=B=>{let{url:L}=v(),U=new hs({error:B,status:a.status||0,statusText:a.statusText||"Unknown Error",url:L||void 0});s.error(U)},D=!1,A=B=>{D||(s.next(v()),D=!0);let L={type:ps.DownloadProgress,loaded:B.loaded};B.lengthComputable&&(L.total=B.total),i.responseType==="text"&&a.responseText&&(L.partialText=a.responseText),s.next(L)},O=B=>{let L={type:ps.UploadProgress,loaded:B.loaded};B.lengthComputable&&(L.total=B.total),s.next(L)};return a.addEventListener("load",b),a.addEventListener("error",x),a.addEventListener("timeout",x),a.addEventListener("abort",x),i.reportProgress&&(a.addEventListener("progress",A),c!==null&&a.upload&&a.upload.addEventListener("progress",O)),a.send(c),s.next({type:ps.Sent}),()=>{a.removeEventListener("error",x),a.removeEventListener("abort",x),a.removeEventListener("load",b),a.removeEventListener("timeout",x),i.reportProgress&&(a.removeEventListener("progress",A),c!==null&&a.upload&&a.upload.removeEventListener("progress",O)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(n){return new(n||e)(Ae(ma))};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),cE=new we(""),d_="XSRF-TOKEN",u_=new we("",{providedIn:"root",factory:()=>d_}),h_="X-XSRF-TOKEN",g_=new we("",{providedIn:"root",factory:()=>h_}),gh=class{},p_=(()=>{class e{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(i,n,r){this.doc=i,this.platform=n,this.cookieName=r}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=lh(i,this.cookieName),this.lastCookieString=i),this.lastToken}static \u0275fac=function(n){return new(n||e)(Ae(_i),Ae(rs),Ae(u_))};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();function f_(e,t){let i=e.url.toLowerCase();if(!oe(cE)||e.method==="GET"||e.method==="HEAD"||i.startsWith("http://")||i.startsWith("https://"))return t(e);let n=oe(gh).getToken(),r=oe(g_);return n!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,n)})),t(e)}var dE=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(dE||{});function m_(e,t){return{\u0275kind:e,\u0275providers:t}}function uE(...e){let t=[pv,rE,nE,{provide:Ol,useExisting:nE},{provide:uh,useFactory:()=>oe(t_,{optional:!0})??oe(rE)},{provide:fv,useValue:f_,multi:!0},{provide:cE,useValue:!0},{provide:gh,useClass:p_}];for(let i of e)t.push(...i.\u0275providers);return ca(t)}var sE=new we("");function hE(){return m_(dE.LegacyInterceptors,[{provide:sE,useFactory:a_},{provide:fv,useExisting:sE,multi:!0}])}var vv=class extends oh{supportsDOMEvents=!0},Cv=class e extends vv{static makeCurrent(){q1(new e)}onAndCancel(t,i,n){return t.addEventListener(i,n),()=>{t.removeEventListener(i,n)}}dispatchEvent(t,i){t.dispatchEvent(i)}remove(t){t.remove()}createElement(t,i){return i=i||this.getDefaultDocument(),i.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,i){return i==="window"?window:i==="document"?t:i==="body"?t.body:null}getBaseHref(t){let i=w_();return i==null?null:y_(i)}resetBaseElement(){_l=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return lh(document.cookie,t)}},_l=null;function w_(){return _l=_l||document.querySelector("base"),_l?_l.getAttribute("href"):null}function y_(e){return new URL(e,document.baseURI).pathname}var b_=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),wv=new we(""),CE=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(i,n){this._zone=n,i.forEach(r=>{r.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,n,r){return this._findPluginFor(n).addEventListener(i,n,r)}getZone(){return this._zone}_findPluginFor(i){let n=this._eventNameToPlugin.get(i);if(n)return n;if(n=this._plugins.find(s=>s.supports(i)),!n)throw new Me(5101,!1);return this._eventNameToPlugin.set(i,n),n}static \u0275fac=function(n){return new(n||e)(Ae(wv),Ae(gt))};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),fh=class{_doc;constructor(t){this._doc=t}manager},ph="ng-app-id";function gE(e){for(let t of e)t.remove()}function pE(e,t){let i=t.createElement("style");return i.textContent=e,i}function S_(e,t,i,n){let r=e.head?.querySelectorAll(`style[${ph}="${t}"],link[${ph}="${t}"]`);if(r)for(let s of r)s.removeAttribute(ph),s instanceof HTMLLinkElement?n.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&i.set(s.textContent,{usage:0,elements:[s]})}function yv(e,t){let i=t.createElement("link");return i.setAttribute("rel","stylesheet"),i.setAttribute("href",e),i}var wE=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(i,n,r,s={}){this.doc=i,this.appId=n,this.nonce=r,this.isServer=ch(s),S_(i,n,this.inline,this.external),this.hosts.add(i.head)}addStyles(i,n){for(let r of i)this.addUsage(r,this.inline,pE);n?.forEach(r=>this.addUsage(r,this.external,yv))}removeStyles(i,n){for(let r of i)this.removeUsage(r,this.inline);n?.forEach(r=>this.removeUsage(r,this.external))}addUsage(i,n,r){let s=n.get(i);s?s.usage++:n.set(i,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(i,this.doc)))})}removeUsage(i,n){let r=n.get(i);r&&(r.usage--,r.usage<=0&&(gE(r.elements),n.delete(i)))}ngOnDestroy(){for(let[,{elements:i}]of[...this.inline,...this.external])gE(i);this.hosts.clear()}addHost(i){this.hosts.add(i);for(let[n,{elements:r}]of this.inline)r.push(this.addElement(i,pE(n,this.doc)));for(let[n,{elements:r}]of this.external)r.push(this.addElement(i,yv(n,this.doc)))}removeHost(i){this.hosts.delete(i)}addElement(i,n){return this.nonce&&n.setAttribute("nonce",this.nonce),this.isServer&&n.setAttribute(ph,this.appId),i.appendChild(n)}static \u0275fac=function(n){return new(n||e)(Ae(_i),Ae(Nm),Ae(Bm,8),Ae(rs))};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),mv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Sv=/%COMP%/g,yE="%COMP%",x_=`_nghost-${yE}`,E_=`_ngcontent-${yE}`,D_=!0,M_=new we("",{providedIn:"root",factory:()=>D_});function R_(e){return E_.replace(Sv,e)}function I_(e){return x_.replace(Sv,e)}function bE(e,t){return t.map(i=>i.replace(Sv,e))}var fE=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(i,n,r,s,a,c,u,v=null){this.eventManager=i,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=v,this.platformIsServer=ch(c),this.defaultRenderer=new Bl(i,a,u,this.platformIsServer)}createRenderer(i,n){if(!i||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===qn.ShadowDom&&(n=ue(q({},n),{encapsulation:qn.Emulated}));let r=this.getOrCreateRenderer(i,n);return r instanceof mh?r.applyToHost(i):r instanceof Vl&&r.applyStyles(),r}getOrCreateRenderer(i,n){let r=this.rendererByCompId,s=r.get(n.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,v=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,x=this.platformIsServer;switch(n.encapsulation){case qn.Emulated:s=new mh(u,v,n,this.appId,b,a,c,x);break;case qn.ShadowDom:return new bv(u,v,i,n,a,c,this.nonce,x);default:s=new Vl(u,v,n,b,a,c,x);break}r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(n){return new(n||e)(Ae(CE),Ae(wE),Ae(Nm),Ae(M_),Ae(_i),Ae(rs),Ae(gt),Ae(Bm))};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),Bl=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,i,n,r){this.eventManager=t,this.doc=i,this.ngZone=n,this.platformIsServer=r}destroy(){}destroyNode=null;createElement(t,i){return i?this.doc.createElementNS(mv[i]||i,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,i){(mE(t)?t.content:t).appendChild(i)}insertBefore(t,i,n){t&&(mE(t)?t.content:t).insertBefore(i,n)}removeChild(t,i){i.remove()}selectRootElement(t,i){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new Me(-5104,!1);return i||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,i,n,r){if(r){i=r+":"+i;let s=mv[r];s?t.setAttributeNS(s,i,n):t.setAttribute(i,n)}else t.setAttribute(i,n)}removeAttribute(t,i,n){if(n){let r=mv[n];r?t.removeAttributeNS(r,i):t.removeAttribute(`${n}:${i}`)}else t.removeAttribute(i)}addClass(t,i){t.classList.add(i)}removeClass(t,i){t.classList.remove(i)}setStyle(t,i,n,r){r&(hr.DashCase|hr.Important)?t.style.setProperty(i,n,r&hr.Important?"important":""):t.style[i]=n}removeStyle(t,i,n){n&hr.DashCase?t.style.removeProperty(i):t.style[i]=""}setProperty(t,i,n){t!=null&&(t[i]=n)}setValue(t,i){t.nodeValue=i}listen(t,i,n){if(typeof t=="string"&&(t=mr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${i}`);return this.eventManager.addEventListener(t,i,this.decoratePreventDefault(n))}decoratePreventDefault(t){return i=>{if(i==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(i)):t(i))===!1&&i.preventDefault()}}};function mE(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var bv=class extends Bl{sharedStylesHost;hostEl;shadowRoot;constructor(t,i,n,r,s,a,c,u){super(t,s,a,u),this.sharedStylesHost=i,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let v=bE(r.id,r.styles);for(let x of v){let D=document.createElement("style");c&&D.setAttribute("nonce",c),D.textContent=x,this.shadowRoot.appendChild(D)}let b=r.getExternalStyles?.();if(b)for(let x of b){let D=yv(x,s);c&&D.setAttribute("nonce",c),this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,i){return super.appendChild(this.nodeOrShadowRoot(t),i)}insertBefore(t,i,n){return super.insertBefore(this.nodeOrShadowRoot(t),i,n)}removeChild(t,i){return super.removeChild(null,i)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vl=class extends Bl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,i,n,r,s,a,c,u){super(t,s,a,c),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=r,this.styles=u?bE(u,n.styles):n.styles,this.styleUrls=n.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},mh=class extends Vl{contentAttr;hostAttr;constructor(t,i,n,r,s,a,c,u){let v=r+"-"+n.id;super(t,i,n,s,a,c,u,v),this.contentAttr=R_(v),this.hostAttr=I_(v)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,i){let n=super.createElement(t,i);return super.setAttribute(n,this.contentAttr,""),n}},T_=(()=>{class e extends fh{constructor(i){super(i)}supports(i){return!0}addEventListener(i,n,r){return i.addEventListener(n,r,!1),()=>this.removeEventListener(i,n,r)}removeEventListener(i,n,r){return i.removeEventListener(n,r)}static \u0275fac=function(n){return new(n||e)(Ae(_i))};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})(),vE=["alt","control","meta","shift"],F_={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},A_={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},P_=(()=>{class e extends fh{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,n,r){let s=e.parseEventName(n),a=e.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mr().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let n=i.toLowerCase().split("."),r=n.shift();if(n.length===0||!(r==="keydown"||r==="keyup"))return null;let s=e._normalizeKey(n.pop()),a="",c=n.indexOf("code");if(c>-1&&(n.splice(c,1),a="code."),vE.forEach(v=>{let b=n.indexOf(v);b>-1&&(n.splice(b,1),a+=v+".")}),a+=s,n.length!=0||s.length===0)return null;let u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(i,n){let r=F_[i.key]||i.key,s="";return n.indexOf("code.")>-1&&(r=i.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),vE.forEach(a=>{if(a!==r){let c=A_[a];c(i)&&(s+=a+".")}}),s+=r,s===n)}static eventCallback(i,n,r){return s=>{e.matchEventFullKeyCode(s,i)&&r.runGuarded(()=>n(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}static \u0275fac=function(n){return new(n||e)(Ae(_i))};static \u0275prov=Ee({token:e,factory:e.\u0275fac})}return e})();function SE(e,t){return W1(q({rootComponent:e},k_(t)))}function k_(e){return{appProviders:[...B_,...e?.providers??[]],platformProviders:__}}function O_(){Cv.makeCurrent()}function L_(){return new Xr}function N_(){return Nx(document),document}var __=[{provide:rs,useValue:Z1},{provide:_m,useValue:O_,multi:!0},{provide:_i,useFactory:N_,deps:[]}];var B_=[{provide:Bu,useValue:"root"},{provide:Xr,useFactory:L_,deps:[]},{provide:wv,useClass:T_,multi:!0,deps:[_i,gt,rs]},{provide:wv,useClass:P_,multi:!0,deps:[_i]},fE,wE,CE,{provide:oa,useExisting:fE},{provide:ma,useClass:b_,deps:[]},[]];var xE=(()=>{class e{_doc;constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}static \u0275fac=function(n){return new(n||e)(Ae(_i))};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var _e="primary",ic=Symbol("RouteTitle"),Rv=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let i=this.params[t];return Array.isArray(i)?i[0]:i}return null}getAll(t){if(this.has(t)){let i=this.params[t];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function Sa(e){return new Rv(e)}function G_(e,t,i){let n=i.path.split("/");if(n.length>e.length||i.pathMatch==="full"&&(t.hasChildren()||n.length<e.length))return null;let r={};for(let s=0;s<n.length;s++){let a=n[s],c=e[s];if(a[0]===":")r[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:e.slice(0,n.length),posParams:r}}function z_(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!Zn(e[i],t[i]))return!1;return!0}function Zn(e,t){let i=e?Iv(e):void 0,n=t?Iv(t):void 0;if(!i||!n||i.length!=n.length)return!1;let r;for(let s=0;s<i.length;s++)if(r=i[s],!AE(e[r],t[r]))return!1;return!0}function Iv(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function AE(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let i=[...e].sort(),n=[...t].sort();return i.every((r,s)=>n[s]===r)}else return e===t}function PE(e){return e.length>0?e[e.length-1]:null}function fs(e){return Zp(e)?e:Js(e)?Ft(Promise.resolve(e)):Fe(e)}var W_={exact:OE,subset:LE},kE={exact:j_,subset:U_,ignored:()=>!0};function EE(e,t,i){return W_[i.paths](e.root,t.root,i.matrixParams)&&kE[i.queryParams](e.queryParams,t.queryParams)&&!(i.fragment==="exact"&&e.fragment!==t.fragment)}function j_(e,t){return Zn(e,t)}function OE(e,t,i){if(!no(e.segments,t.segments)||!wh(e.segments,t.segments,i)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!e.children[n]||!OE(e.children[n],t.children[n],i))return!1;return!0}function U_(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(i=>AE(e[i],t[i]))}function LE(e,t,i){return NE(e,t,t.segments,i)}function NE(e,t,i,n){if(e.segments.length>i.length){let r=e.segments.slice(0,i.length);return!(!no(r,i)||t.hasChildren()||!wh(r,i,n))}else if(e.segments.length===i.length){if(!no(e.segments,i)||!wh(e.segments,i,n))return!1;for(let r in t.children)if(!e.children[r]||!LE(e.children[r],t.children[r],n))return!1;return!0}else{let r=i.slice(0,e.segments.length),s=i.slice(e.segments.length);return!no(e.segments,r)||!wh(e.segments,r,n)||!e.children[_e]?!1:NE(e.children[_e],t,s,n)}}function wh(e,t,i){return t.every((n,r)=>kE[i](e[r].parameters,n.parameters))}var wr=class{root;queryParams;fragment;_queryParamMap;constructor(t=new ot([],{}),i={},n=null){this.root=t,this.queryParams=i,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Sa(this.queryParams),this._queryParamMap}toString(){return K_.serialize(this)}},ot=class{segments;children;parent=null;constructor(t,i){this.segments=t,this.children=i,Object.values(i).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yh(this)}},io=class{path;parameters;_parameterMap;constructor(t,i){this.path=t,this.parameters=i}get parameterMap(){return this._parameterMap??=Sa(this.parameters),this._parameterMap}toString(){return BE(this)}};function $_(e,t){return no(e,t)&&e.every((i,n)=>Zn(i.parameters,t[n].parameters))}function no(e,t){return e.length!==t.length?!1:e.every((i,n)=>i.path===t[n].path)}function q_(e,t){let i=[];return Object.entries(e.children).forEach(([n,r])=>{n===_e&&(i=i.concat(t(r,n)))}),Object.entries(e.children).forEach(([n,r])=>{n!==_e&&(i=i.concat(t(r,n)))}),i}var eC=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:()=>new $l,providedIn:"root"})}return e})(),$l=class{parse(t){let i=new Fv(t);return new wr(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(t){let i=`/${Hl(t.root,!0)}`,n=Z_(t.queryParams),r=typeof t.fragment=="string"?`#${Y_(t.fragment)}`:"";return`${i}${n}${r}`}},K_=new $l;function yh(e){return e.segments.map(t=>BE(t)).join("/")}function Hl(e,t){if(!e.hasChildren())return yh(e);if(t){let i=e.children[_e]?Hl(e.children[_e],!1):"",n=[];return Object.entries(e.children).forEach(([r,s])=>{r!==_e&&n.push(`${r}:${Hl(s,!1)}`)}),n.length>0?`${i}(${n.join("//")})`:i}else{let i=q_(e,(n,r)=>r===_e?[Hl(e.children[_e],!1)]:[`${r}:${Hl(n,!1)}`]);return Object.keys(e.children).length===1&&e.children[_e]!=null?`${yh(e)}/${i[0]}`:`${yh(e)}/(${i.join("//")})`}}function _E(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vh(e){return _E(e).replace(/%3B/gi,";")}function Y_(e){return encodeURI(e)}function Tv(e){return _E(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bh(e){return decodeURIComponent(e)}function DE(e){return bh(e.replace(/\+/g,"%20"))}function BE(e){return`${Tv(e.path)}${X_(e.parameters)}`}function X_(e){return Object.entries(e).map(([t,i])=>`;${Tv(t)}=${Tv(i)}`).join("")}function Z_(e){let t=Object.entries(e).map(([i,n])=>Array.isArray(n)?n.map(r=>`${vh(i)}=${vh(r)}`).join("&"):`${vh(i)}=${vh(n)}`).filter(i=>i);return t.length?`?${t.join("&")}`:""}var Q_=/^[^\/()?;#]+/;function xv(e){let t=e.match(Q_);return t?t[0]:""}var J_=/^[^\/()?;=#]+/;function e6(e){let t=e.match(J_);return t?t[0]:""}var t6=/^[^=?&#]+/;function i6(e){let t=e.match(t6);return t?t[0]:""}var n6=/^[^&#]+/;function r6(e){let t=e.match(n6);return t?t[0]:""}var Fv=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ot([],{}):new ot([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(i).length>0)&&(n[_e]=new ot(t,i)),n}parseSegment(){let t=xv(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Me(4009,!1);return this.capture(t),new io(bh(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let i=e6(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let r=xv(this.remaining);r&&(n=r,this.capture(n))}t[bh(i)]=bh(n)}parseQueryParam(t){let i=i6(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let a=r6(this.remaining);a&&(n=a,this.capture(n))}let r=DE(i),s=DE(n);if(t.hasOwnProperty(r)){let a=t[r];Array.isArray(a)||(a=[a],t[r]=a),a.push(s)}else t[r]=s}parseParens(t){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=xv(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new Me(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=_e);let a=this.parseChildren();i[s]=Object.keys(a).length===1?a[_e]:new ot([],a),this.consumeOptional("//")}return i}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Me(4011,!1)}};function VE(e){return e.segments.length>0?new ot([],{[_e]:e}):e}function HE(e){let t={};for(let[n,r]of Object.entries(e.children)){let s=HE(r);if(n===_e&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))t[a]=c;else(s.segments.length>0||s.hasChildren())&&(t[n]=s)}let i=new ot(e.segments,t);return s6(i)}function s6(e){if(e.numberOfChildren===1&&e.children[_e]){let t=e.children[_e];return new ot(e.segments.concat(t.segments),t.children)}return e}function ql(e){return e instanceof wr}function o6(e,t,i=null,n=null){let r=GE(e);return zE(r,t,i,n)}function GE(e){let t;function i(s){let a={};for(let u of s.children){let v=i(u);a[u.outlet]=v}let c=new ot(s.url,a);return s===e&&(t=c),c}let n=i(e.root),r=VE(n);return t??r}function zE(e,t,i,n){let r=e;for(;r.parent;)r=r.parent;if(t.length===0)return Ev(r,r,r,i,n);let s=a6(t);if(s.toRoot())return Ev(r,r,new ot([],{}),i,n);let a=l6(s,r,e),c=a.processChildren?Wl(a.segmentGroup,a.index,s.commands):jE(a.segmentGroup,a.index,s.commands);return Ev(r,a.segmentGroup,c,i,n)}function Sh(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Kl(e){return typeof e=="object"&&e!=null&&e.outlets}function Ev(e,t,i,n,r){let s={};n&&Object.entries(n).forEach(([u,v])=>{s[u]=Array.isArray(v)?v.map(b=>`${b}`):`${v}`});let a;e===t?a=i:a=WE(e,t,i);let c=VE(HE(a));return new wr(c,s,r)}function WE(e,t,i){let n={};return Object.entries(e.children).forEach(([r,s])=>{s===t?n[r]=i:n[r]=WE(s,t,i)}),new ot(e.segments,n)}var xh=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,i,n){if(this.isAbsolute=t,this.numberOfDoubleDots=i,this.commands=n,t&&n.length>0&&Sh(n[0]))throw new Me(4003,!1);let r=n.find(Kl);if(r&&r!==PE(n))throw new Me(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function a6(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new xh(!0,0,e);let t=0,i=!1,n=e.reduce((r,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,v])=>{c[u]=typeof v=="string"?v.split("/"):v}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:a===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?i=!0:c===".."?t++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new xh(i,t,n)}var wa=class{segmentGroup;processChildren;index;constructor(t,i,n){this.segmentGroup=t,this.processChildren=i,this.index=n}};function l6(e,t,i){if(e.isAbsolute)return new wa(t,!0,0);if(!i)return new wa(t,!1,NaN);if(i.parent===null)return new wa(i,!0,0);let n=Sh(e.commands[0])?0:1,r=i.segments.length-1+n;return c6(i,r,e.numberOfDoubleDots)}function c6(e,t,i){let n=e,r=t,s=i;for(;s>r;){if(s-=r,n=n.parent,!n)throw new Me(4005,!1);r=n.segments.length}return new wa(n,!1,r-s)}function d6(e){return Kl(e[0])?e[0].outlets:{[_e]:e}}function jE(e,t,i){if(e??=new ot([],{}),e.segments.length===0&&e.hasChildren())return Wl(e,t,i);let n=u6(e,t,i),r=i.slice(n.commandIndex);if(n.match&&n.pathIndex<e.segments.length){let s=new ot(e.segments.slice(0,n.pathIndex),{});return s.children[_e]=new ot(e.segments.slice(n.pathIndex),e.children),Wl(s,0,r)}else return n.match&&r.length===0?new ot(e.segments,{}):n.match&&!e.hasChildren()?Av(e,t,i):n.match?Wl(e,0,r):Av(e,t,i)}function Wl(e,t,i){if(i.length===0)return new ot(e.segments,{});{let n=d6(i),r={};if(Object.keys(n).some(s=>s!==_e)&&e.children[_e]&&e.numberOfChildren===1&&e.children[_e].segments.length===0){let s=Wl(e.children[_e],t,i);return new ot(e.segments,s.children)}return Object.entries(n).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[s]=jE(e.children[s],t,a))}),Object.entries(e.children).forEach(([s,a])=>{n[s]===void 0&&(r[s]=a)}),new ot(e.segments,r)}}function u6(e,t,i){let n=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(n>=i.length)return s;let a=e.segments[r],c=i[n];if(Kl(c))break;let u=`${c}`,v=n<i.length-1?i[n+1]:null;if(r>0&&u===void 0)break;if(u&&v&&typeof v=="object"&&v.outlets===void 0){if(!RE(u,v,a))return s;n+=2}else{if(!RE(u,{},a))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function Av(e,t,i){let n=e.segments.slice(0,t),r=0;for(;r<i.length;){let s=i[r];if(Kl(s)){let u=h6(s.outlets);return new ot(n,u)}if(r===0&&Sh(i[0])){let u=e.segments[t];n.push(new io(u.path,ME(i[0]))),r++;continue}let a=Kl(s)?s.outlets[_e]:`${s}`,c=r<i.length-1?i[r+1]:null;a&&c&&Sh(c)?(n.push(new io(a,ME(c))),r+=2):(n.push(new io(a,{})),r++)}return new ot(n,{})}function h6(e){let t={};return Object.entries(e).forEach(([i,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[i]=Av(new ot([],{}),0,n))}),t}function ME(e){let t={};return Object.entries(e).forEach(([i,n])=>t[i]=`${n}`),t}function RE(e,t,i){return e==i.path&&Zn(t,i.parameters)}var jl="imperative",ai=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(ai||{}),cn=class{id;url;constructor(t,i){this.id=t,this.url=i}},Yl=class extends cn{type=ai.NavigationStart;navigationTrigger;restoredState;constructor(t,i,n="imperative",r=null){super(t,i),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ro=class extends cn{urlAfterRedirects;type=ai.NavigationEnd;constructor(t,i,n){super(t,i),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ji=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Ji||{}),Pv=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Pv||{}),Cr=class extends cn{reason;code;type=ai.NavigationCancel;constructor(t,i,n,r){super(t,i),this.reason=n,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},so=class extends cn{reason;code;type=ai.NavigationSkipped;constructor(t,i,n,r){super(t,i),this.reason=n,this.code=r}},Xl=class extends cn{error;target;type=ai.NavigationError;constructor(t,i,n,r){super(t,i),this.error=n,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Eh=class extends cn{urlAfterRedirects;state;type=ai.RoutesRecognized;constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kv=class extends cn{urlAfterRedirects;state;type=ai.GuardsCheckStart;constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ov=class extends cn{urlAfterRedirects;state;shouldActivate;type=ai.GuardsCheckEnd;constructor(t,i,n,r,s){super(t,i),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lv=class extends cn{urlAfterRedirects;state;type=ai.ResolveStart;constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nv=class extends cn{urlAfterRedirects;state;type=ai.ResolveEnd;constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_v=class{route;type=ai.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bv=class{route;type=ai.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vv=class{snapshot;type=ai.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hv=class{snapshot;type=ai.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gv=class{snapshot;type=ai.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zv=class{snapshot;type=ai.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Zl=class{},xa=class{url;navigationBehaviorOptions;constructor(t,i){this.url=t,this.navigationBehaviorOptions=i}};function g6(e,t){return e.providers&&!e._injector&&(e._injector=Jm(e.providers,t,`Route: ${e.path}`)),e._injector??t}function kn(e){return e.outlet||_e}function p6(e,t){let i=e.filter(n=>kn(n)===t);return i.push(...e.filter(n=>kn(n)!==t)),i}function nc(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let i=t.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var Wv=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return nc(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Ah(this.rootInjector)}},Ah=(()=>{class e{rootInjector;contexts=new Map;constructor(i){this.rootInjector=i}onChildOutletCreated(i,n){let r=this.getOrCreateContext(i);r.outlet=n,this.contexts.set(i,r)}onChildOutletDestroyed(i){let n=this.getContext(i);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let n=this.getContext(i);return n||(n=new Wv(this.rootInjector),this.contexts.set(i,n)),n}getContext(i){return this.contexts.get(i)||null}static \u0275fac=function(n){return new(n||e)(Ae(Li))};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Dh=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let i=this.pathFromRoot(t);return i.length>1?i[i.length-2]:null}children(t){let i=jv(t,this._root);return i?i.children.map(n=>n.value):[]}firstChild(t){let i=jv(t,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(t){let i=Uv(t,this._root);return i.length<2?[]:i[i.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Uv(t,this._root).map(i=>i.value)}};function jv(e,t){if(e===t.value)return t;for(let i of t.children){let n=jv(e,i);if(n)return n}return null}function Uv(e,t){if(e===t.value)return[t];for(let i of t.children){let n=Uv(e,i);if(n.length)return n.unshift(t),n}return[]}var Qi=class{value;children;constructor(t,i){this.value=t,this.children=i}toString(){return`TreeNode(${this.value})`}};function Ca(e){let t={};return e&&e.children.forEach(i=>t[i.value.outlet]=i),t}var Mh=class extends Dh{snapshot;constructor(t,i){super(t),this.snapshot=i,tC(this,t)}toString(){return this.snapshot.toString()}};function UE(e){let t=f6(e),i=new si([new io("",{})]),n=new si({}),r=new si({}),s=new si({}),a=new si(""),c=new Ea(i,n,s,a,r,_e,e,t.root);return c.snapshot=t.root,new Mh(new Qi(c,[]),t)}function f6(e){let t={},i={},n={},r="",s=new ya([],t,n,r,i,_e,e,null,{});return new Ih("",new Qi(s,[]))}var Ea=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,i,n,r,s,a,c,u){this.urlSubject=t,this.paramsSubject=i,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ne(v=>v[ic]))??Fe(void 0),this.url=t,this.params=i,this.queryParams=n,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ne(t=>Sa(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ne(t=>Sa(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rh(e,t,i="emptyOnly"){let n,{routeConfig:r}=e;return t!==null&&(i==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:q(q({},t.params),e.params),data:q(q({},t.data),e.data),resolve:q(q(q(q({},e.data),t.data),r?.data),e._resolvedData)}:n={params:q({},e.params),data:q({},e.data),resolve:q(q({},e.data),e._resolvedData??{})},r&&qE(r)&&(n.resolve[ic]=r.title),n}var ya=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ic]}constructor(t,i,n,r,s,a,c,u,v){this.url=t,this.params=i,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=a,this.component=c,this.routeConfig=u,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Sa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Sa(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${i}')`}},Ih=class extends Dh{url;constructor(t,i){super(i),this.url=t,tC(this,i)}toString(){return $E(this._root)}};function tC(e,t){t.value._routerState=e,t.children.forEach(i=>tC(e,i))}function $E(e){let t=e.children.length>0?` { ${e.children.map($E).join(", ")} } `:"";return`${e.value}${t}`}function Dv(e){if(e.snapshot){let t=e.snapshot,i=e._futureSnapshot;e.snapshot=i,Zn(t.queryParams,i.queryParams)||e.queryParamsSubject.next(i.queryParams),t.fragment!==i.fragment&&e.fragmentSubject.next(i.fragment),Zn(t.params,i.params)||e.paramsSubject.next(i.params),z_(t.url,i.url)||e.urlSubject.next(i.url),Zn(t.data,i.data)||e.dataSubject.next(i.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function $v(e,t){let i=Zn(e.params,t.params)&&$_(e.url,t.url),n=!e.parent!=!t.parent;return i&&!n&&(!e.parent||$v(e.parent,t.parent))}function qE(e){return typeof e.title=="string"||e.title===null}var m6=new we(""),v6=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=_e;activateEvents=new ie;deactivateEvents=new ie;attachEvents=new ie;detachEvents=new ie;routerOutletData=Tx(void 0);parentContexts=oe(Ah);location=oe(as);changeDetector=oe(eo);inputBinder=oe(iC,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(i){if(i.name){let{firstChange:n,previousValue:r}=i.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Me(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Me(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Me(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,n){this.activated=i,this._activatedRoute=n,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,n){if(this.isActivated)throw new Me(4013,!1);this._activatedRoute=i;let r=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new qv(i,c,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:u,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||e)};static \u0275dir=Xn({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Jr]})}return e})(),qv=class e{route;childContexts;parent;outletData;__ngOutletInjector(t){return new e(this.route,this.childContexts,t,this.outletData)}constructor(t,i,n,r){this.route=t,this.childContexts=i,this.parent=n,this.outletData=r}get(t,i){return t===Ea?this.route:t===Ah?this.childContexts:t===m6?this.outletData:this.parent.get(t,i)}},iC=new we("");function C6(e,t,i){let n=Ql(e,t._root,i?i._root:void 0);return new Mh(n,t)}function Ql(e,t,i){if(i&&e.shouldReuseRoute(t.value,i.value.snapshot)){let n=i.value;n._futureSnapshot=t.value;let r=w6(e,t,i);return new Qi(n,r)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(c=>Ql(e,c)),a}}let n=y6(t.value),r=t.children.map(s=>Ql(e,s));return new Qi(n,r)}}function w6(e,t,i){return t.children.map(n=>{for(let r of i.children)if(e.shouldReuseRoute(n.value,r.value.snapshot))return Ql(e,n,r);return Ql(e,n)})}function y6(e){return new Ea(new si(e.url),new si(e.params),new si(e.queryParams),new si(e.fragment),new si(e.data),e.outlet,e.component,e)}var Jl=class{redirectTo;navigationBehaviorOptions;constructor(t,i){this.redirectTo=t,this.navigationBehaviorOptions=i}},KE="ngNavigationCancelingError";function Th(e,t){let{redirectTo:i,navigationBehaviorOptions:n}=ql(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=YE(!1,Ji.Redirect);return r.url=i,r.navigationBehaviorOptions=n,r}function YE(e,t){let i=new Error(`NavigationCancelingError: ${e||""}`);return i[KE]=!0,i.cancellationCode=t,i}function b6(e){return XE(e)&&ql(e.url)}function XE(e){return!!e&&e[KE]}var S6=(e,t,i,n)=>Ne(r=>(new Kv(t,r.targetRouterState,r.currentRouterState,i,n).activate(e),r)),Kv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,i,n,r,s){this.routeReuseStrategy=t,this.futureState=i,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let i=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,n,t),Dv(this.futureState.root),this.activateChildRoutes(i,n,t)}deactivateChildRoutes(t,i,n){let r=Ca(i);t.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,r[a],n),delete r[a]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,i,n){let r=t.value,s=i?i.value:null;if(r===s)if(r.component){let a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(t,i,a.children)}else this.deactivateChildRoutes(t,i,n);else s&&this.deactivateRouteAndItsChildren(i,n)}deactivateRouteAndItsChildren(t,i){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,i):this.deactivateRouteAndOutlet(t,i)}detachAndStoreRouteSubtree(t,i){let n=i.getContext(t.value.outlet),r=n&&t.value.component?n.children:i,s=Ca(t);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);if(n&&n.outlet){let a=n.outlet.detach(),c=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:c})}}deactivateRouteAndOutlet(t,i){let n=i.getContext(t.value.outlet),r=n&&t.value.component?n.children:i,s=Ca(t);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,i,n){let r=Ca(i);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new zv(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Hv(t.value.snapshot))}activateRoutes(t,i,n){let r=t.value,s=i?i.value:null;if(Dv(r),r===s)if(r.component){let a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,i,a.children)}else this.activateChildRoutes(t,i,n);else if(r.component){let a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Dv(c.route.value),this.activateChildRoutes(t,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(t,null,a.children)}else this.activateChildRoutes(t,null,n)}},Fh=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ba=class{component;route;constructor(t,i){this.component=t,this.route=i}};function x6(e,t,i){let n=e._root,r=t?t._root:null;return Gl(n,r,i,[n.value])}function E6(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Ma(e,t){let i=Symbol(),n=t.get(e,i);return n===i?typeof e=="function"&&!RS(e)?e:t.get(e):n}function Gl(e,t,i,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ca(t);return e.children.forEach(a=>{D6(a,s[a.value.outlet],i,n.concat([a.value]),r),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>Ul(c,i.getContext(a),r)),r}function D6(e,t,i,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,a=t?t.value:null,c=i?i.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let u=M6(a,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new Fh(n)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?Gl(e,t,c?c.children:null,n,r):Gl(e,t,i,n,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new ba(c.outlet.component,a))}else a&&Ul(t,c,r),r.canActivateChecks.push(new Fh(n)),s.component?Gl(e,null,c?c.children:null,n,r):Gl(e,null,i,n,r);return r}function M6(e,t,i){if(typeof i=="function")return i(e,t);switch(i){case"pathParamsChange":return!no(e.url,t.url);case"pathParamsOrQueryParamsChange":return!no(e.url,t.url)||!Zn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$v(e,t)||!Zn(e.queryParams,t.queryParams);case"paramsChange":default:return!$v(e,t)}}function Ul(e,t,i){let n=Ca(e),r=e.value;Object.entries(n).forEach(([s,a])=>{r.component?t?Ul(a,t.children.getContext(s),i):Ul(a,null,i):Ul(a,t,i)}),r.component?t&&t.outlet&&t.outlet.isActivated?i.canDeactivateChecks.push(new ba(t.outlet.component,r)):i.canDeactivateChecks.push(new ba(null,r)):i.canDeactivateChecks.push(new ba(null,r))}function rc(e){return typeof e=="function"}function R6(e){return typeof e=="boolean"}function I6(e){return e&&rc(e.canLoad)}function T6(e){return e&&rc(e.canActivate)}function F6(e){return e&&rc(e.canActivateChild)}function A6(e){return e&&rc(e.canDeactivate)}function P6(e){return e&&rc(e.canMatch)}function ZE(e){return e instanceof ar||e?.name==="EmptyError"}var Ch=Symbol("INITIAL_VALUE");function Da(){return Ki(e=>eu(e.map(t=>t.pipe(lr(1),rf(Ch)))).pipe(Ne(t=>{for(let i of t)if(i!==!0){if(i===Ch)return Ch;if(i===!1||k6(i))return i}return!0}),qi(t=>t!==Ch),lr(1)))}function k6(e){return ql(e)||e instanceof Jl}function O6(e,t){return Zt(i=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=i;return a.length===0&&s.length===0?Fe(ue(q({},i),{guardsResult:!0})):L6(a,n,r,e).pipe(Zt(c=>c&&R6(c)?N6(n,s,e,t):Fe(c)),Ne(c=>ue(q({},i),{guardsResult:c})))})}function L6(e,t,i,n){return Ft(e).pipe(Zt(r=>G6(r.component,r.route,i,t,n)),cr(r=>r!==!0,!0))}function N6(e,t,i,n){return Ft(t).pipe(zr(r=>Uo(B6(r.route.parent,n),_6(r.route,n),H6(e,r.path,i),V6(e,r.route,i))),cr(r=>r!==!0,!0))}function _6(e,t){return e!==null&&t&&t(new Gv(e)),Fe(!0)}function B6(e,t){return e!==null&&t&&t(new Vv(e)),Fe(!0)}function V6(e,t,i){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return Fe(!0);let r=n.map(s=>tu(()=>{let a=nc(t)??i,c=Ma(s,a),u=T6(c)?c.canActivate(t,e):Xi(a,()=>c(t,e));return fs(u).pipe(cr())}));return Fe(r).pipe(Da())}function H6(e,t,i){let n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>E6(a)).filter(a=>a!==null).map(a=>tu(()=>{let c=a.guards.map(u=>{let v=nc(a.node)??i,b=Ma(u,v),x=F6(b)?b.canActivateChild(n,e):Xi(v,()=>b(n,e));return fs(x).pipe(cr())});return Fe(c).pipe(Da())}));return Fe(s).pipe(Da())}function G6(e,t,i,n,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return Fe(!0);let a=s.map(c=>{let u=nc(t)??r,v=Ma(c,u),b=A6(v)?v.canDeactivate(e,t,i,n):Xi(u,()=>v(e,t,i,n));return fs(b).pipe(cr())});return Fe(a).pipe(Da())}function z6(e,t,i,n){let r=t.canLoad;if(r===void 0||r.length===0)return Fe(!0);let s=r.map(a=>{let c=Ma(a,e),u=I6(c)?c.canLoad(t,i):Xi(e,()=>c(t,i));return fs(u)});return Fe(s).pipe(Da(),QE(n))}function QE(e){return qp(ti(t=>{if(typeof t!="boolean")throw Th(e,t)}),Ne(t=>t===!0))}function W6(e,t,i,n){let r=t.canMatch;if(!r||r.length===0)return Fe(!0);let s=r.map(a=>{let c=Ma(a,e),u=P6(c)?c.canMatch(t,i):Xi(e,()=>c(t,i));return fs(u)});return Fe(s).pipe(Da(),QE(n))}var ec=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},tc=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function va(e){return jo(new ec(e))}function j6(e){return jo(new Me(4e3,!1))}function U6(e){return jo(YE(!1,Ji.GuardRejected))}var Yv=class{urlSerializer;urlTree;constructor(t,i){this.urlSerializer=t,this.urlTree=i}lineralizeSegments(t,i){let n=[],r=i.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return Fe(n);if(r.numberOfChildren>1||!r.children[_e])return j6(`${t.redirectTo}`);r=r.children[_e]}}applyRedirectCommands(t,i,n,r,s){if(typeof i!="string"){let c=i,{queryParams:u,fragment:v,routeConfig:b,url:x,outlet:D,params:A,data:O,title:B}=r,L=Xi(s,()=>c({params:A,data:O,queryParams:u,fragment:v,routeConfig:b,url:x,outlet:D,title:B}));if(L instanceof wr)throw new tc(L);i=L}let a=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),t,n);if(i[0]==="/")throw new tc(a);return a}applyRedirectCreateUrlTree(t,i,n,r){let s=this.createSegmentGroup(t,i.root,n,r);return new wr(s,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(t,i){let n={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);n[r]=i[c]}else n[r]=s}),n}createSegmentGroup(t,i,n,r){let s=this.createSegments(t,i.segments,n,r),a={};return Object.entries(i.children).forEach(([c,u])=>{a[c]=this.createSegmentGroup(t,u,n,r)}),new ot(s,a)}createSegments(t,i,n,r){return i.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,i,n){let r=n[i.path.substring(1)];if(!r)throw new Me(4001,!1);return r}findOrReturn(t,i){let n=0;for(let r of i){if(r.path===t.path)return i.splice(n),r;n++}return t}},Xv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $6(e,t,i,n,r){let s=JE(e,t,i);return s.matched?(n=g6(t,n),W6(n,t,i,r).pipe(Ne(a=>a===!0?s:q({},Xv)))):Fe(s)}function JE(e,t,i){if(t.path==="**")return q6(i);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||i.length>0)?q({},Xv):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let r=(t.matcher||G_)(i,e,t);if(!r)return q({},Xv);let s={};Object.entries(r.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let a=r.consumed.length>0?q(q({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:i.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function q6(e){return{matched:!0,parameters:e.length>0?PE(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function IE(e,t,i,n){return i.length>0&&X6(e,i,n)?{segmentGroup:new ot(t,Y6(n,new ot(i,e.children))),slicedSegments:[]}:i.length===0&&Z6(e,i,n)?{segmentGroup:new ot(e.segments,K6(e,i,n,e.children)),slicedSegments:i}:{segmentGroup:new ot(e.segments,e.children),slicedSegments:i}}function K6(e,t,i,n){let r={};for(let s of i)if(Ph(e,t,s)&&!n[kn(s)]){let a=new ot([],{});r[kn(s)]=a}return q(q({},n),r)}function Y6(e,t){let i={};i[_e]=t;for(let n of e)if(n.path===""&&kn(n)!==_e){let r=new ot([],{});i[kn(n)]=r}return i}function X6(e,t,i){return i.some(n=>Ph(e,t,n)&&kn(n)!==_e)}function Z6(e,t,i){return i.some(n=>Ph(e,t,n))}function Ph(e,t,i){return(e.hasChildren()||t.length>0)&&i.pathMatch==="full"?!1:i.path===""}function Q6(e,t,i){return t.length===0&&!e.children[i]}var Zv=class{};function J6(e,t,i,n,r,s,a="emptyOnly"){return new Qv(e,t,i,n,r,a,s).recognize()}var eB=31,Qv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,i,n,r,s,a,c){this.injector=t,this.configLoader=i,this.rootComponentType=n,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new Yv(this.urlSerializer,this.urlTree)}noMatchError(t){return new Me(4002,`'${t.segmentGroup}'`)}recognize(){let t=IE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ne(({children:i,rootSnapshot:n})=>{let r=new Qi(n,i),s=new Ih("",r),a=o6(n,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}))}match(t){let i=new ya([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_e,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,_e,i).pipe(Ne(n=>({children:n,rootSnapshot:i})),Gr(n=>{if(n instanceof tc)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof ec?this.noMatchError(n):n}))}processSegmentGroup(t,i,n,r,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,i,n,s):this.processSegment(t,i,n,n.segments,r,!0,s).pipe(Ne(a=>a instanceof Qi?[a]:[]))}processChildren(t,i,n,r){let s=[];for(let a of Object.keys(n.children))a==="primary"?s.unshift(a):s.push(a);return Ft(s).pipe(zr(a=>{let c=n.children[a],u=p6(i,a);return this.processSegmentGroup(t,u,c,a,r)}),nf((a,c)=>(a.push(...c),a)),Wr(null),tf(),Zt(a=>{if(a===null)return va(n);let c=eD(a);return tB(c),Fe(c)}))}processSegment(t,i,n,r,s,a,c){return Ft(i).pipe(zr(u=>this.processSegmentAgainstRoute(u._injector??t,i,u,n,r,s,a,c).pipe(Gr(v=>{if(v instanceof ec)return Fe(null);throw v}))),cr(u=>!!u),Gr(u=>{if(ZE(u))return Q6(n,r,s)?Fe(new Zv):va(n);throw u}))}processSegmentAgainstRoute(t,i,n,r,s,a,c,u){return kn(n)!==a&&(a===_e||!Ph(r,s,n))?va(r):n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,s,a,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,r,i,n,s,a,u):va(r)}expandSegmentAgainstRouteUsingRedirect(t,i,n,r,s,a,c){let{matched:u,parameters:v,consumedSegments:b,positionalParamSegments:x,remainingSegments:D}=JE(i,r,s);if(!u)return va(i);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>eB&&(this.allowRedirects=!1));let A=new ya(s,v,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,TE(r),kn(r),r.component??r._loadedComponent??null,r,FE(r)),O=Rh(A,c,this.paramsInheritanceStrategy);A.params=Object.freeze(O.params),A.data=Object.freeze(O.data);let B=this.applyRedirects.applyRedirectCommands(b,r.redirectTo,x,A,t);return this.applyRedirects.lineralizeSegments(r,B).pipe(Zt(L=>this.processSegment(t,n,i,L.concat(D),a,!1,c)))}matchSegmentAgainstRoute(t,i,n,r,s,a){let c=$6(i,n,r,t,this.urlSerializer);return n.path==="**"&&(i.children={}),c.pipe(Ki(u=>u.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(Ki(({routes:v})=>{let b=n._loadedInjector??t,{parameters:x,consumedSegments:D,remainingSegments:A}=u,O=new ya(D,x,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,TE(n),kn(n),n.component??n._loadedComponent??null,n,FE(n)),B=Rh(O,a,this.paramsInheritanceStrategy);O.params=Object.freeze(B.params),O.data=Object.freeze(B.data);let{segmentGroup:L,slicedSegments:U}=IE(i,D,A,v);if(U.length===0&&L.hasChildren())return this.processChildren(b,v,L,O).pipe(Ne($=>new Qi(O,$)));if(v.length===0&&U.length===0)return Fe(new Qi(O,[]));let K=kn(n)===s;return this.processSegment(b,v,L,U,K?_e:s,!0,O).pipe(Ne($=>new Qi(O,$ instanceof Qi?[$]:[])))}))):va(i)))}getChildConfig(t,i,n){return i.children?Fe({routes:i.children,injector:t}):i.loadChildren?i._loadedRoutes!==void 0?Fe({routes:i._loadedRoutes,injector:i._loadedInjector}):z6(t,i,n,this.urlSerializer).pipe(Zt(r=>r?this.configLoader.loadChildren(t,i).pipe(ti(s=>{i._loadedRoutes=s.routes,i._loadedInjector=s.injector})):U6(i))):Fe({routes:[],injector:t})}};function tB(e){e.sort((t,i)=>t.value.outlet===_e?-1:i.value.outlet===_e?1:t.value.outlet.localeCompare(i.value.outlet))}function iB(e){let t=e.value.routeConfig;return t&&t.path===""}function eD(e){let t=[],i=new Set;for(let n of e){if(!iB(n)){t.push(n);continue}let r=t.find(s=>n.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...n.children),i.add(r)):t.push(n)}for(let n of i){let r=eD(n.children);t.push(new Qi(n.value,r))}return t.filter(n=>!i.has(n))}function TE(e){return e.data||{}}function FE(e){return e.resolve||{}}function nB(e,t,i,n,r,s){return Zt(a=>J6(e,t,i,n,a.extractedUrl,r,s).pipe(Ne(({state:c,tree:u})=>ue(q({},a),{targetSnapshot:c,urlAfterRedirects:u}))))}function rB(e,t){return Zt(i=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=i;if(!r.length)return Fe(i);let s=new Set(r.map(u=>u.route)),a=new Set;for(let u of s)if(!a.has(u))for(let v of tD(u))a.add(v);let c=0;return Ft(a).pipe(zr(u=>s.has(u)?sB(u,n,e,t):(u.data=Rh(u,u.parent,e).resolve,Fe(void 0))),ti(()=>c++),$o(1),Zt(u=>c===a.size?Fe(i):$i))})}function tD(e){let t=e.children.map(i=>tD(i)).flat();return[e,...t]}function sB(e,t,i,n){let r=e.routeConfig,s=e._resolve;return r?.title!==void 0&&!qE(r)&&(s[ic]=r.title),oB(s,e,t,n).pipe(Ne(a=>(e._resolvedData=a,e.data=Rh(e,e.parent,i).resolve,null)))}function oB(e,t,i,n){let r=Iv(e);if(r.length===0)return Fe({});let s={};return Ft(r).pipe(Zt(a=>aB(e[a],t,i,n).pipe(cr(),ti(c=>{if(c instanceof Jl)throw Th(new $l,c);s[a]=c}))),$o(1),ef(s),Gr(a=>ZE(a)?$i:jo(a)))}function aB(e,t,i,n){let r=nc(t)??n,s=Ma(e,r),a=s.resolve?s.resolve(t,i):Xi(r,()=>s(t,i));return fs(a)}function Mv(e){return Ki(t=>{let i=e(t);return i?Ft(i).pipe(Ne(()=>t)):Fe(t)})}var iD=(()=>{class e{buildTitle(i){let n,r=i.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===_e);return n}getResolvedTitleForRoute(i){return i.data[ic]}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:()=>oe(lB),providedIn:"root"})}return e})(),lB=(()=>{class e extends iD{title;constructor(i){super(),this.title=i}updateTitle(i){let n=this.buildTitle(i);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||e)(Ae(xE))};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),nC=new we("",{providedIn:"root",factory:()=>({})}),cB=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Xs({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){n&1&&cs(0,"router-outlet")},dependencies:[v6],encapsulation:2})}return e})();function rC(e){let t=e.children&&e.children.map(rC),i=t?ue(q({},e),{children:t}):q({},e);return!i.component&&!i.loadComponent&&(t||i.loadChildren)&&i.outlet&&i.outlet!==_e&&(i.component=cB),i}var sC=new we(""),dB=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=oe(ov);loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Fe(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let n=fs(i.loadComponent()).pipe(Ne(nD),ti(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),jr(()=>{this.componentLoaders.delete(i)})),r=new Wo(n,()=>new Xt).pipe(zo());return this.componentLoaders.set(i,r),r}loadChildren(i,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Fe({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=uB(n,this.compiler,i,this.onLoadEndListener).pipe(jr(()=>{this.childrenLoaders.delete(n)})),a=new Wo(s,()=>new Xt).pipe(zo());return this.childrenLoaders.set(n,a),a}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function uB(e,t,i,n){return fs(e.loadChildren()).pipe(Ne(nD),Zt(r=>r instanceof Ml||Array.isArray(r)?Fe(r):Ft(t.compileModuleAsync(r))),Ne(r=>{n&&n(e);let s,a,c=!1;return Array.isArray(r)?(a=r,c=!0):(s=r.create(i).injector,a=s.get(sC,[],{optional:!0,self:!0}).flat()),{routes:a.map(rC),injector:s}}))}function hB(e){return e&&typeof e=="object"&&"default"in e}function nD(e){return hB(e)?e.default:e}var oC=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:()=>oe(gB),providedIn:"root"})}return e})(),gB=(()=>{class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,n){return i}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),pB=new we("");var fB=new we(""),mB=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Xt;transitionAbortSubject=new Xt;configLoader=oe(dB);environmentInjector=oe(Li);urlSerializer=oe(eC);rootContexts=oe(Ah);location=oe(Pl);inputBindingEnabled=oe(iC,{optional:!0})!==null;titleStrategy=oe(iD);options=oe(nC,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=oe(oC);createViewTransition=oe(pB,{optional:!0});navigationErrorHandler=oe(fB,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Fe(void 0);rootComponentType=null;constructor(){let i=r=>this.events.next(new _v(r)),n=r=>this.events.next(new Bv(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let n=++this.navigationId;this.transitions?.next(ue(q(q({},this.transitions.value),i),{id:n}))}setupNavigations(i,n,r){return this.transitions=new si({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:jl,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(qi(s=>s.id!==0),Ne(s=>ue(q({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ki(s=>{let a=!1,c=!1;return Fe(s).pipe(Ki(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ji.SupersededByNewNavigation),$i;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ue(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let v=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),b=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!v&&b!=="reload"){let x="";return this.events.next(new so(u.id,this.urlSerializer.serialize(u.rawUrl),x,Pv.IgnoredSameUrlNavigation)),u.resolve(!1),$i}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Fe(u).pipe(Ki(x=>{let D=this.transitions?.getValue();return this.events.next(new Yl(x.id,this.urlSerializer.serialize(x.extractedUrl),x.source,x.restoredState)),D!==this.transitions?.getValue()?$i:Promise.resolve(x)}),nB(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),ti(x=>{s.targetSnapshot=x.targetSnapshot,s.urlAfterRedirects=x.urlAfterRedirects,this.currentNavigation=ue(q({},this.currentNavigation),{finalUrl:x.urlAfterRedirects});let D=new Eh(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(D)}));if(v&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:x,extractedUrl:D,source:A,restoredState:O,extras:B}=u,L=new Yl(x,this.urlSerializer.serialize(D),A,O);this.events.next(L);let U=UE(this.rootComponentType).snapshot;return this.currentTransition=s=ue(q({},u),{targetSnapshot:U,urlAfterRedirects:D,extras:ue(q({},B),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=D,Fe(s)}else{let x="";return this.events.next(new so(u.id,this.urlSerializer.serialize(u.extractedUrl),x,Pv.IgnoredByUrlHandlingStrategy)),u.resolve(!1),$i}}),ti(u=>{let v=new kv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(v)}),Ne(u=>(this.currentTransition=s=ue(q({},u),{guards:x6(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),O6(this.environmentInjector,u=>this.events.next(u)),ti(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Th(this.urlSerializer,u.guardsResult);let v=new Ov(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(v)}),qi(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ji.GuardRejected),!1)),Mv(u=>{if(u.guards.canActivateChecks.length)return Fe(u).pipe(ti(v=>{let b=new Lv(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}),Ki(v=>{let b=!1;return Fe(v).pipe(rB(this.paramsInheritanceStrategy,this.environmentInjector),ti({next:()=>b=!0,complete:()=>{b||this.cancelNavigationTransition(v,"",Ji.NoDataFromResolver)}}))}),ti(v=>{let b=new Nv(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(b)}))}),Mv(u=>{let v=b=>{let x=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&x.push(this.configLoader.loadComponent(b.routeConfig).pipe(ti(D=>{b.component=D}),Ne(()=>{})));for(let D of b.children)x.push(...v(D));return x};return eu(v(u.targetSnapshot.root)).pipe(Wr(null),lr(1))}),Mv(()=>this.afterPreactivation()),Ki(()=>{let{currentSnapshot:u,targetSnapshot:v}=s,b=this.createViewTransition?.(this.environmentInjector,u.root,v.root);return b?Ft(b).pipe(Ne(()=>s)):Fe(s)}),Ne(u=>{let v=C6(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=ue(q({},u),{targetRouterState:v}),this.currentNavigation.targetRouterState=v,s}),ti(()=>{this.events.next(new Zl)}),S6(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),lr(1),ti({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ro(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),sf(this.transitionAbortSubject.pipe(ti(u=>{throw u}))),jr(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Ji.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Gr(u=>{if(c=!0,XE(u))this.events.next(new Cr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),b6(u)?this.events.next(new xa(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let v=new Xl(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let b=Xi(this.environmentInjector,()=>this.navigationErrorHandler?.(v));if(b instanceof Jl){let{message:x,cancellationCode:D}=Th(this.urlSerializer,b);this.events.next(new Cr(s.id,this.urlSerializer.serialize(s.extractedUrl),x,D)),this.events.next(new xa(b.redirectTo,b.navigationBehaviorOptions))}else throw this.events.next(v),u}catch(b){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(b)}}return $i}))}))}cancelNavigationTransition(i,n,r){let s=new Cr(i.id,this.urlSerializer.serialize(i.extractedUrl),n,r);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vB(e){return e!==jl}var CB=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:()=>oe(wB),providedIn:"root"})}return e})(),Jv=class{shouldDetach(t){return!1}store(t,i){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,i){return t.routeConfig===i.routeConfig}},wB=(()=>{class e extends Jv{static \u0275fac=(()=>{let i;return function(r){return(i||(i=ns(e)))(r||e)}})();static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),rD=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:()=>oe(yB),providedIn:"root"})}return e})(),yB=(()=>{class e extends rD{location=oe(Pl);urlSerializer=oe(eC);options=oe(nC,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=oe(oC);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new wr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=UE(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(n=>{n.type==="popstate"&&i(n.url,n.state)})}handleRouterEvent(i,n){if(i instanceof Yl)this.stateMemento=this.createStateMemento();else if(i instanceof so)this.rawUrlTree=n.initialUrl;else if(i instanceof Eh){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??r,n)}}else i instanceof Zl?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):i instanceof Cr&&(i.code===Ji.GuardRejected||i.code===Ji.NoDataFromResolver)?this.restoreHistory(n):i instanceof Xl?this.restoreHistory(n,!0):i instanceof ro&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,n){let r=i instanceof wr?this.urlSerializer.serialize(i):i;if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){let s=this.browserPageId,a=q(q({},n.extras.state),this.generateNgRouterState(n.id,s));this.location.replaceState(r,"",a)}else{let s=q(q({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(i,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,n){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:n}:{navigationId:i}}static \u0275fac=(()=>{let i;return function(r){return(i||(i=ns(e)))(r||e)}})();static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),zl=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(zl||{});function bB(e,t){e.events.pipe(qi(i=>i instanceof ro||i instanceof Cr||i instanceof Xl||i instanceof so),Ne(i=>i instanceof ro||i instanceof so?zl.COMPLETE:(i instanceof Cr?i.code===Ji.Redirect||i.code===Ji.SupersededByNewNavigation:!1)?zl.REDIRECTING:zl.FAILED),qi(i=>i!==zl.REDIRECTING),lr(1)).subscribe(()=>{t()})}var SB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},sD=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=oe(Qu);stateManager=oe(rD);options=oe(nC,{optional:!0})||{};pendingTasks=oe(fr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=oe(mB);urlSerializer=oe(eC);location=oe(Pl);urlHandlingStrategy=oe(oC);_events=new Xt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=oe(CB);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=oe(sC,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!oe(iC,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Wt;subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof Cr&&n.code!==Ji.Redirect&&n.code!==Ji.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof ro)this.navigated=!0;else if(n instanceof xa){let a=n.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),u=q({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||vB(r.source)},a);this.scheduleNavigation(c,jl,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}DB(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),jl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",n)},0)})}navigateToSyncWithBrowser(i,n,r){let s={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let u=q({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(i);this.scheduleNavigation(c,n,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(rC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,n={}){let{relativeTo:r,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=n,v=u?this.currentUrlTree.fragment:a,b=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":b=q(q({},this.currentUrlTree.queryParams),s);break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=s||null}b!==null&&(b=this.removeEmptyProps(b));let x;try{let D=r?r.snapshot:this.routerState.snapshot.root;x=GE(D)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),x=this.currentUrlTree.root}return zE(x,i,b,v??null)}navigateByUrl(i,n={skipLocationChange:!1}){let r=ql(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,jl,null,n)}navigate(i,n={skipLocationChange:!1}){return EB(i),this.navigateByUrl(this.createUrlTree(i,n),n)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,n){let r;if(n===!0?r=q({},SB):n===!1?r=q({},xB):r=n,ql(i))return EE(this.currentUrlTree,i,r);let s=this.parseUrl(i);return EE(this.currentUrlTree,s,r)}removeEmptyProps(i){return Object.entries(i).reduce((n,[r,s])=>(s!=null&&(n[r]=s),n),{})}scheduleNavigation(i,n,r,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,v;a?(c=a.resolve,u=a.reject,v=a.promise):v=new Promise((x,D)=>{c=x,u=D});let b=this.pendingTasks.add();return bB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:c,reject:u,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(x=>Promise.reject(x))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function EB(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Me(4008,!1)}function DB(e){return!(e instanceof Zl)&&!(e instanceof xa)}var MB=new we("");function oD(e,...t){return ca([{provide:sC,multi:!0,useValue:e},[],{provide:Ea,useFactory:RB,deps:[sD]},{provide:Ju,multi:!0,useFactory:IB},t.map(i=>i.\u0275providers)])}function RB(e){return e.routerState.root}function IB(){let e=oe(ur);return t=>{let i=e.get(ls);if(t!==i.components[0])return;let n=e.get(sD),r=e.get(TB);e.get(FB)===1&&n.initialNavigation(),e.get(AB,null,He.Optional)?.setUpPreloading(),e.get(MB,null,He.Optional)?.init(),n.resetRootComponentType(i.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var TB=new we("",{factory:()=>new Xt}),FB=new we("",{providedIn:"root",factory:()=>1});var AB=new we("");var aD=[];var lD={providers:[G1({eventCoalescing:!0}),oD(aD),uE(hE())]};var Vw=nb(cD()),Cg=nb(dD());var uD=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=Yn({type:e})}static{this.\u0275inj=Kn({})}}return e})();var wD=(()=>{class e{_renderer;_elementRef;onChange=i=>{};onTouched=()=>{};constructor(i,n){this._renderer=i,this._elementRef=n}setProperty(i,n){this._renderer.setProperty(this._elementRef.nativeElement,i,n)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}static \u0275fac=function(n){return new(n||e)(pt(ha),pt(Zi))};static \u0275dir=Xn({type:e})}return e})(),yD=(()=>{class e extends wD{static \u0275fac=(()=>{let i;return function(r){return(i||(i=ns(e)))(r||e)}})();static \u0275dir=Xn({type:e,features:[Zs]})}return e})(),pC=new we(""),PB={provide:pC,useExisting:la(()=>fC),multi:!0},fC=(()=>{class e extends yD{writeValue(i){this.setProperty("checked",i)}static \u0275fac=(()=>{let i;return function(r){return(i||(i=ns(e)))(r||e)}})();static \u0275dir=Xn({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,r){n&1&&Si("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[fa([PB]),Zs]})}return e})(),kB={provide:pC,useExisting:la(()=>bD),multi:!0};function OB(){let e=mr()?mr().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var LB=new we(""),bD=(()=>{class e extends wD{_compositionMode;_composing=!1;constructor(i,n,r){super(i,n),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!OB())}writeValue(i){let n=i??"";this.setProperty("value",n)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}static \u0275fac=function(n){return new(n||e)(pt(ha),pt(Zi),pt(LB,8))};static \u0275dir=Xn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&Si("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[fa([kB]),Zs]})}return e})();var NB=new we(""),_B=new we("");function SD(e){return e!=null}function xD(e){return Js(e)?Ft(e):e}function ED(e){let t={};return e.forEach(i=>{t=i!=null?q(q({},t),i):t}),Object.keys(t).length===0?null:t}function DD(e,t){return t.map(i=>i(e))}function BB(e){return!e.validate}function MD(e){return e.map(t=>BB(t)?t:i=>t.validate(i))}function VB(e){if(!e)return null;let t=e.filter(SD);return t.length==0?null:function(i){return ED(DD(i,t))}}function RD(e){return e!=null?VB(MD(e)):null}function HB(e){if(!e)return null;let t=e.filter(SD);return t.length==0?null:function(i){let n=DD(i,t).map(xD);return Jp(n).pipe(Ne(ED))}}function ID(e){return e!=null?HB(MD(e)):null}function hD(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function GB(e){return e._rawValidators}function zB(e){return e._rawAsyncValidators}function dC(e){return e?Array.isArray(e)?e:[e]:[]}function Oh(e,t){return Array.isArray(e)?e.includes(t):e===t}function gD(e,t){let i=dC(t);return dC(e).forEach(r=>{Oh(i,r)||i.push(r)}),i}function pD(e,t){return dC(t).filter(i=>!Oh(e,i))}var Lh=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=RD(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ID(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,i){return this.control?this.control.hasError(t,i):!1}getError(t,i){return this.control?this.control.getError(t,i):null}},uC=class extends Lh{name;get formDirective(){return null}get path(){return null}},dc=class extends Lh{_parent=null;name=null;valueAccessor=null},hC=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},WB={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},GJ=ue(q({},WB),{"[class.ng-submitted]":"isSubmitted"}),TD=(()=>{class e extends hC{constructor(i){super(i)}static \u0275fac=function(n){return new(n||e)(pt(dc,2))};static \u0275dir=Xn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&ev("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Zs]})}return e})();var oc="VALID",kh="INVALID",Ra="PENDING",ac="DISABLED",Ta=class{},Nh=class extends Ta{value;source;constructor(t,i){super(),this.value=t,this.source=i}},lc=class extends Ta{pristine;source;constructor(t,i){super(),this.pristine=t,this.source=i}},cc=class extends Ta{touched;source;constructor(t,i){super(),this.touched=t,this.source=i}},Ia=class extends Ta{status;source;constructor(t,i){super(),this.status=t,this.source=i}};function jB(e){return(_h(e)?e.validators:e)||null}function UB(e){return Array.isArray(e)?RD(e):e||null}function $B(e,t){return(_h(t)?t.asyncValidators:e)||null}function qB(e){return Array.isArray(e)?ID(e):e||null}function _h(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var gC=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,i){this._assignValidators(t),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ds(this.statusReactive)}set status(t){ds(()=>this.statusReactive.set(t))}_status=sh(()=>this.statusReactive());statusReactive=Zu(void 0);get valid(){return this.status===oc}get invalid(){return this.status===kh}get pending(){return this.status==Ra}get disabled(){return this.status===ac}get enabled(){return this.status!==ac}errors;get pristine(){return ds(this.pristineReactive)}set pristine(t){ds(()=>this.pristineReactive.set(t))}_pristine=sh(()=>this.pristineReactive());pristineReactive=Zu(!0);get dirty(){return!this.pristine}get touched(){return ds(this.touchedReactive)}set touched(t){ds(()=>this.touchedReactive.set(t))}_touched=sh(()=>this.touchedReactive());touchedReactive=Zu(!1);get untouched(){return!this.touched}_events=new Xt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(gD(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(gD(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(pD(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(pD(t,this._rawAsyncValidators))}hasValidator(t){return Oh(this._rawValidators,t)}hasAsyncValidator(t){return Oh(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let i=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ue(q({},t),{sourceControl:n})),i&&t.emitEvent!==!1&&this._events.next(new cc(!0,n))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(i=>i.markAllAsTouched(t))}markAsUntouched(t={}){let i=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),i&&t.emitEvent!==!1&&this._events.next(new cc(!1,n))}markAsDirty(t={}){let i=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ue(q({},t),{sourceControl:n})),i&&t.emitEvent!==!1&&this._events.next(new lc(!1,n))}markAsPristine(t={}){let i=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&t.emitEvent!==!1&&this._events.next(new lc(!0,n))}markAsPending(t={}){this.status=Ra;let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ia(this.status,i)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ue(q({},t),{sourceControl:i}))}disable(t={}){let i=this._parentMarkedDirty(t.onlySelf);this.status=ac,this.errors=null,this._forEachChild(r=>{r.disable(ue(q({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Nh(this.value,n)),this._events.next(new Ia(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(q({},t),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let i=this._parentMarkedDirty(t.onlySelf);this.status=oc,this._forEachChild(n=>{n.enable(ue(q({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ue(q({},t),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,i){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},i),this._parent._updateTouched({},i))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oc||this.status===Ra)&&this._runAsyncValidator(n,t.emitEvent)}let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Nh(this.value,i)),this._events.next(new Ia(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ue(q({},t),{sourceControl:i}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ac:oc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,i){if(this.asyncValidator){this.status=Ra,this._hasOwnPendingAsyncValidator={emitEvent:i!==!1};let n=xD(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:i,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,i={}){this.errors=t,this._updateControlsErrors(i.emitEvent!==!1,this,i.shouldHaveEmitted)}get(t){let i=t;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((n,r)=>n&&n._find(r),this)}getError(t,i){let n=i?this.get(i):this;return n&&n.errors?n.errors[t]:null}hasError(t,i){return!!this.getError(t,i)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,i,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new Ia(this.status,i)),this._parent&&this._parent._updateControlsErrors(t,i,n)}_initObservables(){this.valueChanges=new ie,this.statusChanges=new ie}_calculateStatus(){return this._allControlsDisabled()?ac:this.errors?kh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ra)?Ra:this._anyControlsHaveStatus(kh)?kh:oc}_anyControlsHaveStatus(t){return this._anyControls(i=>i.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,i){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),r&&this._events.next(new lc(this.pristine,i))}_updateTouched(t={},i){this.touched=this._anyControlsTouched(),this._events.next(new cc(this.touched,i)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){_h(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let i=this._parent&&this._parent.dirty;return!t&&!!i&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=UB(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=qB(this._rawAsyncValidators)}};var FD=new we("CallSetDisabledState",{providedIn:"root",factory:()=>mC}),mC="always";function KB(e,t){return[...t.path,e]}function YB(e,t,i=mC){ZB(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||i==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),QB(e,t),e4(e,t),JB(e,t),XB(e,t)}function fD(e,t){e.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(t)})}function XB(e,t){if(t.valueAccessor.setDisabledState){let i=n=>{t.valueAccessor.setDisabledState(n)};e.registerOnDisabledChange(i),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(i)})}}function ZB(e,t){let i=GB(e);t.validator!==null?e.setValidators(hD(i,t.validator)):typeof i=="function"&&e.setValidators([i]);let n=zB(e);t.asyncValidator!==null?e.setAsyncValidators(hD(n,t.asyncValidator)):typeof n=="function"&&e.setAsyncValidators([n]);let r=()=>e.updateValueAndValidity();fD(t._rawValidators,r),fD(t._rawAsyncValidators,r)}function QB(e,t){t.valueAccessor.registerOnChange(i=>{e._pendingValue=i,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&AD(e,t)})}function JB(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&AD(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function AD(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function e4(e,t){let i=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};e.registerOnChange(i),t._registerOnDestroy(()=>{e._unregisterOnChange(i)})}function t4(e,t){if(!e.hasOwnProperty("model"))return!1;let i=e.model;return i.isFirstChange()?!0:!Object.is(t,i.currentValue)}function i4(e){return Object.getPrototypeOf(e.constructor)===yD}function n4(e,t){if(!t)return null;Array.isArray(t);let i,n,r;return t.forEach(s=>{s.constructor===bD?i=s:i4(s)?n=s:r=s}),r||n||i||null}function mD(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}function vD(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var r4=class extends gC{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,i,n){super(jB(i),$B(n,i)),this._applyFormState(t),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_h(i)&&(i.nonNullable||i.initialValueIsDefault)&&(vD(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,i={}){this.value=this._pendingValue=t,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(t,i={}){this.setValue(t,i)}reset(t=this.defaultValue,i={}){this._applyFormState(t),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){mD(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){mD(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){vD(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var s4={provide:dc,useExisting:la(()=>vC)},CD=Promise.resolve(),vC=(()=>{class e extends dc{_changeDetectorRef;callSetDisabledState;control=new r4;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ie;constructor(i,n,r,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this._parent=i,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=n4(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let n=i.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),t4(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){YB(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){CD.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let n=i.isDisabled.currentValue,r=n!==0&&rh(n);CD.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?KB(i,this._parent):[i]}static \u0275fac=function(n){return new(n||e)(pt(uC,9),pt(NB,10),pt(_B,10),pt(pC,10),pt(eo,8),pt(FD,8))};static \u0275dir=Xn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[fa([s4]),Zs,Jr]})}return e})();var o4=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=Yn({type:e});static \u0275inj=Kn({})}return e})();var PD=(()=>{class e{static withConfig(i){return{ngModule:e,providers:[{provide:FD,useValue:i.callSetDisabledState??mC}]}}static \u0275fac=function(n){return new(n||e)};static \u0275mod=Yn({type:e});static \u0275inj=Kn({imports:[o4]})}return e})();var Ha=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){let n=t?this.allAsyncListeners:this.allSyncListeners,r=n.get(e);return!r&&i&&(r=new Set,n.set(e,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){let n=this.getListeners(e,i,!1);n&&(n.delete(t),n.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let i=e.type;if(t&&"event"in e){let c=e.event;c instanceof Event&&(e.eventPath=c.composedPath())}let n=(c,u)=>c.forEach(v=>{if(!u.has(v))return;let b=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>v(e)):()=>v(e);t?this.dispatchAsync(b):b()}),r=this.getListeners(i,t,!1)??new Set,s=new Set(r);s.size>0&&n(s,r),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(c=>{let u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(i,e)):()=>c(i,e);t?this.dispatchAsync(u):u()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}},lM=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(lM||{}),kD={};function iw(e,t){kD[t]||(e(),kD[t]=!0)}function hn(e,...t){console.log("AG Grid: "+e,...t)}function ee(e,...t){iw(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function Ye(e,...t){iw(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}function nw(e){return!!(e&&e.constructor&&e.call&&e.apply)}function l4(e){c4(e,400)}var CC=[],wC=!1;function OD(e){CC.push(e),!wC&&(wC=!0,window.setTimeout(()=>{let t=CC.slice();CC.length=0,wC=!1,t.forEach(i=>i())},0))}function c4(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(i=>i()),t)}function Ri(e,t){let i;return function(...n){let r=this;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(r,n)},t)}}function LD(e,t){let i=0;return function(...n){let r=this,s=new Date().getTime();s-i<t||(i=s,e.apply(r,n))}}function d4(e,t,i=100,n){let r=new Date().getTime(),s=null,a=!1,c=()=>{let u=new Date().getTime()-r>i;(e()||u)&&(t(),a=!0,s!=null&&(window.clearInterval(s),s=null),u&&n&&ee(n))};c(),a||(s=window.setInterval(c,10))}function u4(...e){return t=>e.reduce((i,n)=>n(i),t)}function Sr(e){return e==null||e===""?null:e}function re(e,t=!1){return e!=null&&(e!==""||t)}function Ge(e){return!re(e)}function nn(e){return e==null||e.length===0}function LC(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function ho(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;let t=parseInt(e,10);return isNaN(t)?void 0:t}function NC(e){if(e!==void 0)return e===null||e===""?!1:_C(e)}function _C(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function Sc(e,t){let i=e?JSON.stringify(e):null,n=t?JSON.stringify(t):null;return i===n}function h4(e,t,i=!1){let n=e==null,r=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),n&&r)return 0;if(n)return-1;if(r)return 1;function s(a,c){return a>c?1:a<c?-1:0}if(typeof e!="string"||!i)return s(e,t);try{return e.localeCompare(t)}catch{return s(e,t)}}function $h(e){if(e instanceof Set||e instanceof Map){let t=[];return e.forEach(i=>t.push(i)),t}return Object.values(e)}function cM(e,t){return e.get("rowModelType")===t}function It(e){return cM(e,"clientSide")}function Mr(e){return cM(e,"serverSide")}function li(e,t){return e.get("domLayout")===t}function Xh(e){return Jh(e)!==void 0}function Zh(e){return!e.get("suppressAsyncEvents")}function dM(e){return typeof e.get("getRowHeight")=="function"}function g4(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function bs(e,t,i=!1,n){if(n==null&&(n=e.environment.getDefaultRowHeight()),dM(e)){if(i)return{height:n,estimated:!0};let a={node:t,data:t.data},c=e.getCallback("getRowHeight")(a);if(BC(c))return c===0&&ee("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,c),estimated:!1}}if(t.detail&&e.get("masterDetail"))return p4(e);let r=e.get("rowHeight");return{height:r&&BC(r)?r:n,estimated:!1}}function p4(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};let t=e.get("detailRowHeight");return BC(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function go(e){let{environment:t}=e,i=e.get("rowHeight");if(!i||Ge(i))return t.getDefaultRowHeight();let n=t.refreshRowHeightVariable();return n!==-1?n:(ee("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function BC(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function xc(e,t,i){let n=t[e.getDomDataKey()];return n?n[i]:void 0}function vo(e,t,i,n){let r=e.getDomDataKey(),s=t[r];Ge(s)&&(s={},t[r]=s),s[i]=n}function Ot(e){let t=null,i=e.get("getDocument");return i&&re(i)?t=i():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&re(t)?t:document}function uM(e){return Ot(e).defaultView||window}function Ec(e){return e.eGridDiv.getRootNode()}function xt(e){return Ec(e).activeElement}function hM(e){let t=Ot(e),i=xt(e);return i===null||i===t.body}function ka(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function dg(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||li(e,"print"))}function Jn(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function VC(e){let t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function gM(e){let t=e.get("grandTotalRow");if(t)return t;if(e.get("groupIncludeTotalFooter"))return"bottom"}function pM(e){let t=e.get("groupTotalRow");if(typeof t=="function")return e.getCallback("groupTotalRow");if(t)return()=>t;let i=e.get("groupIncludeFooter");if(typeof i=="function"){let n=e.getCallback("groupIncludeFooter");return r=>n(r)?"bottom":void 0}return()=>i?"bottom":void 0}function fM(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function ug(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function Ga(e){let t=e.getCallback("getRowId");return t===void 0?t:i=>{let n=t(i);return typeof n!="string"&&(ee("The getRowId callback must return a string. The ID ",n," is being cast to a string."),n=String(n)),n}}function Na(e){return e?.checkboxes??!0}function Qh(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function f4(e){return e?.hideDisabledCheckboxes??!1}function m4(e){return typeof e.get("rowSelection")!="string"}function v4(e){return e.get("cellSelection")!==void 0}function C4(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t?.suppressMultiRanges??!1:!1:e.get("suppressMultiRangeSelection")}function tr(e){let t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function w4(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="range":!1:e.get("enableRangeHandle")}function ND(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="fill":!1:e.get("enableFillHandle")}function mM(e){let t=e.get("rowSelection")??"single";if(typeof t=="string"){let i=e.get("suppressRowClickSelection"),n=e.get("suppressRowDeselection");return i&&n?!1:i?"enableDeselection":n?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function y4(e){let t=mM(e);return t===!0||t==="enableSelection"}function _D(e){let t=mM(e);return t===!0||t==="enableDeselection"}function rw(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function Jh(e){let t=e.get("rowSelection");if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t?.mode}function sw(e){return Jh(e)==="multiRow"}function b4(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function ow(e){let t=e.get("rowSelection");if(typeof t=="string"){let i=e.get("groupSelectsChildren"),n=e.get("groupSelectsFiltered");return i&&n?"filteredDescendants":i?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function Co(e){let t=ow(e);return t==="descendants"||t==="filteredDescendants"}function yC(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function Ue(e){if(!(!e||!e.length))return e[e.length-1]}function Es(e,t,i){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((n,r)=>i?i(n,t[r]):t[r]===n)}function S4(e){return e.sort((t,i)=>t-i)}function vM(e,t){let i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function Ii(e,t){let i=e.indexOf(t);i>=0&&e.splice(i,1)}function x4(e,t){for(let i=0;i<t.length;i++)vM(e,t[i])}function E4(e,t){for(let i=0;i<t.length;i++)Ii(e,t[i])}function eg(e,t,i){e.splice(i,0,t)}function CM(e,t,i){E4(e,t),t.slice().reverse().forEach(n=>eg(e,n,i))}function po(e,t){return e.indexOf(t)>-1}function D4(e){return e?.flatMap(t=>t)??[]}function BD(e,t){t==null||e==null||t.forEach(i=>e.push(i))}var wM="__ag_Grid_Stop_Propagation",M4=["touchstart","touchend","touchmove","touchcancel","scroll"],bC={};function _a(e){e[wM]=!0}function xr(e){return e[wM]===!0}var yM=(()=>{let e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof bC[i]=="boolean")return bC[i];let n=document.createElement(e[i]||"div");return i="on"+i,bC[i]=i in n}})();function HC(e,t,i){let n=t;for(;n;){let r=xc(e,n,i);if(r)return r;n=n.parentElement}return null}function R4(e,t){return!t||!e?!1:T4(t).indexOf(e)>=0}function I4(e){let t=[],i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function T4(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():I4(t)}function F4(e,t,i,n){let s=po(M4,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,n,s)}var Z=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new Ha),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService&&this.localEventService.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let i=[];for(let n in t){let r=t[n];r&&i.push(this._setupListener(e,n,r))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?F4(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);let n=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==n),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);let i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let i=e.join("-")+this.propertyListenerId++,n=r=>{if(r.changeSet){if(r.changeSet&&r.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=r.changeSet.id}let s={type:"gridPropertyChanged",changeSet:r.changeSet,source:r.source};t(s)};e.forEach(r=>this.setupGridOptionListener(r,n))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){let i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function Di(e){return e instanceof qh}var qh=class extends Z{constructor(e,t,i,n){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=xM(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=n}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{xs(t)?e.push(t):Di(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1,n=this.findChildrenRemovingPadding();for(let s=0,a=n.length;s<a;s++){let c=n[s];if(!c.isVisible())continue;let u=c.getColumnGroupShow();u==="open"?(e=!0,i=!0):u==="closed"?(t=!0,i=!0):(e=!0,t=!0)}let r=e&&t&&i;this.expandable!==r&&(this.expandable=r,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=i=>{i.forEach(n=>{Di(n)&&n.isPadding()?t(n.children):e.push(n)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},bM="ag-Grid-ControlsColumn",A4=class extends Z{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){let{gos:e}=this,t=e.get("rowSelection");if(!t||typeof t!="object")return[];let i=Na(t),n=Qh(t);if(i||n){let r=e.get("selectionColumnDef"),s=e.get("enableRtl"),a=ue(q({maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:s?"right":"left",comparator(u,v,b,x){let D=b.isSelected(),A=x.isSelected();return D&&A?0:D?1:-1},editable:!1,suppressFillHandle:!0},r),{colId:`${bM}`}),c=new dw(a,null,a.colId,!1);return this.createBean(c),[c]}return[]}},hg="ag-Grid-AutoColumn";function aw(e){let t=[],i=n=>{for(let r=0;r<n.length;r++){let s=n[r];xs(s)?t.push(s):Di(s)&&i(s.getChildren())}};return i(e),t}function yr(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function ws(e,t,i){let n={};if(!t)return;Dr(null,t,s=>{n[s.getInstanceId()]=s}),i&&Dr(null,i,s=>{n[s.getInstanceId()]=null});let r=Object.values(n).filter(s=>s!=null);e.destroyBeans(r)}function GC(e){return e.getId().startsWith(hg)}function Fc(e){return e.getColId().startsWith(bM)}function Kh(e){let t=[];return e instanceof Array?e.some(n=>typeof n!="string")?ee("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):ee("colDef.type should be of type 'string' | 'string[]'"),t}var lw=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=i=>{this.frameworkOverrides.wrapOutgoing(()=>e(i))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(i,n)=>{this.frameworkOverrides.wrapOutgoing(()=>e(i,n))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},cw=new Set(["__proto__","constructor","prototype"]);function un(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(let[i,n]of Object.entries(e))t(i,n)}}function SM(e){let t={},i=Object.keys(e);for(let n=0;n<i.length;n++){if(cw.has(i[n]))continue;let r=i[n],s=e[r];t[r]=s}return t}function zC(e,t){if(!e)return;let i=e,n={};return Object.keys(i).forEach(r=>{if(t&&t.indexOf(r)>=0||cw.has(r))return;let s=i[r];WC(s)&&s.constructor===Object?n[r]=zC(s):n[r]=s}),n}function Ss(e){if(!e)return[];let t=Object;if(typeof t.values=="function")return t.values(e);let i=[];for(let n in e)e.hasOwnProperty(n)&&e.propertyIsEnumerable(n)&&i.push(e[n]);return i}function Mi(e,t,i=!0,n=!1){re(t)&&un(t,(r,s)=>{if(cw.has(r))return;let a=e[r];a!==s&&(n&&a==null&&s!=null&&typeof s=="object"&&s.constructor===Object&&(a={},e[r]=a),WC(s)&&WC(a)&&!Array.isArray(a)?Mi(a,s,i,n):(i||s!==void 0)&&(e[r]=s))})}function vc(e,t,i){if(!t||!e)return;if(!i)return e[t];let n=t.split("."),r=e;for(let s=0;s<n.length;s++){if(r==null)return;r=r[n[s]]}return r}function WC(e){return typeof e=="object"&&e!==null}var P4={resizable:!0,sortable:!0},k4=0;function xM(){return k4++}function xs(e){return e instanceof dw}var dw=class extends Z{constructor(e,t,i,n){super(),this.isColumn=!0,this.instanceId=xM(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new Ha,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);let t=e.sortIndex,i=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):i!==null&&(this.sortIndex=i);let n=e.hide,r=e.initialHide;n!==void 0?this.visible=!n:this.visible=!r,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);let s=e.flex,a=e.initialFlex;s!==void 0?this.flex=s:a!==void 0&&(this.flex=a)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=re(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=re(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=re(this.colDef.tooltipField)||re(this.colDef.tooltipValueGetter)||re(this.colDef.tooltipComponent)}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,i=ho(e.width),n=ho(e.initialWidth);return i!=null?t=i:n!=null?t=n:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Ge(this.colDef)||Ge(this.colDef.showRowGroup))return!1;let t=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new lw(this.frameworkOverrides));let i=this.frameworkEventListenerService?.wrap(t)??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){let i=this.frameworkEventListenerService?.unwrap(t)??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let t=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(t)}return!1}isCellEditable(e){if(e.group){if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){let t=this.gos.get("rowSelection");if(t&&typeof t!="string"){let i=Fc(this)&&Na(t);return this.isColumnFunc(e,i)}else return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??P4[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Ge(this.sort)}isSorting(){return re(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));let n=this.createColumnEvent("filterChanged",t);i&&Mi(n,i),this.columnEventService.dispatchEvent(n)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){let i=e===!0;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Ge(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(Ge(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},O4={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},L4=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=LC(e);let i=0;for(;;){let n;if(e?(n=e,i!==0&&(n+="_"+i)):t?(n=t,i!==0&&(n+="_"+i)):n=i,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);i++}}},N4=class extends Z{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,n){let r=new L4,{existingCols:s,existingGroups:a,existingColKeys:c}=this.extractExistingTreeData(i);r.addExistingKeys(c);let u=this.recursivelyCreateColumns(e,0,t,s,r,a,n),v=this.findMaxDept(u,0),b=this.balanceColumnTree(u,0,v,r);return Dr(null,b,(D,A)=>{Di(D)&&D.setupExpandable(),D.setOriginalParent(A)}),{columnTree:b,treeDept:v}}extractExistingTreeData(e){let t=[],i=[],n=[];return e&&Dr(null,e,r=>{if(Di(r)){let s=r;i.push(s)}else{let s=r;n.push(s.getId()),t.push(s)}}),{existingCols:t,existingGroups:i,existingColKeys:n}}balanceTreeForAutoCols(e,t){let i=[],n=this.findDepth(t);return e.forEach(r=>{let s=r;for(let a=n-1;a>=0;a--){let c=new qh(null,`FAKE_PATH_${r.getId()}}_${a}`,!0,a);this.createBean(c),c.setChildren([s]),s.setOriginalParent(c),s=c}n===0&&r.setOriginalParent(null),i.push(s)}),[i,n]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&Di(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,n){let r=[];for(let s=0;s<e.length;s++){let a=e[s];if(Di(a)){let c=a,u=this.balanceColumnTree(c.getChildren(),t+1,i,n);c.setChildren(u),r.push(c)}else{let c,u;for(let v=i-1;v>=t;v--){let b=n.getUniqueKey(null,null),x=this.createMergedColGroupDef(null),D=new qh(x,b,!0,t);this.createBean(D),u&&u.setChildren([D]),u=D,c||(c=u)}if(c&&u)if(r.push(c),e.some(b=>Di(b))){u.setChildren([a]);continue}else{u.setChildren(e);break}r.push(a)}}return r}findMaxDept(e,t){let i=t;for(let n=0;n<e.length;n++){let r=e[n];if(Di(r)){let s=r,a=this.findMaxDept(s.getChildren(),t+1);i<a&&(i=a)}}return i}recursivelyCreateColumns(e,t,i,n,r,s,a){if(!e)return[];let c=new Array(e.length);for(let u=0;u<c.length;u++){let v=e[u];this.isColumnGroup(v)?c[u]=this.createColumnGroup(i,v,t,n,r,s,a):c[u]=this.createColumn(i,v,n,r,a)}return c}createColumnGroup(e,t,i,n,r,s,a){let c=this.createMergedColGroupDef(t),u=r.getUniqueKey(c.groupId||null,null),v=new qh(c,u,!1,i);this.createBean(v);let b=this.findExistingGroup(t,s);b&&s.splice(b.idx,1);let x=b?.group;x&&v.setExpanded(x.isExpanded());let D=this.recursivelyCreateColumns(c.children,i+1,e,n,r,s,a);return v.setChildren(D),v}createMergedColGroupDef(e){let t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,n,r){let s=this.findExistingColumn(t,i);s&&i?.splice(s.idx,1);let a=s?.column;if(a){let c=this.addColumnDefaultAndTypes(t,a.getColId());a.setColDef(c,t,r),this.applyColumnState(a,c,r)}else{let c=n.getUniqueKey(t.colId,t.field),u=this.addColumnDefaultAndTypes(t,c);a=new dw(u,t,c,e),this.createBean(a)}return this.dataTypeService?.addColumnListeners(a),a}applyColumnState(e,t,i){let n=ho(t.flex);if(n!==void 0&&e.setFlex(n),e.getFlex()<=0){let c=ho(t.width);if(c!=null)e.setActualWidth(c,i);else{let u=e.getActualWidth();e.setActualWidth(u,i)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,i):e.setSort(void 0,i));let s=ho(t.sortIndex);s!==void 0&&e.setSortIndex(s);let a=NC(t.hide);a!==void 0&&e.setVisible(!a,i),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){let n=t[i].getUserProvidedColDef();if(!n)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(n.field===e.field)return{idx:i,column:t[i]};continue}if(n===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let n=0;n<t.length;n++){let r=t[n];if(r.getColGroupDef()&&r.getId()===e.groupId)return{idx:n,group:r}}}addColumnDefaultAndTypes(e,t){let i={},n=this.gos.get("defaultColDef");Mi(i,n,!1,!0);let r=this.updateColDefAndGetColumnType(i,e,t);r&&this.assignColumnTypes(r,i),Mi(i,e,!1,!0);let s=this.gos.get("autoGroupColumnDef"),a=Jn(this.gos);return e.rowGroup&&s&&a&&Mi(i,{sort:s.sort,initialSort:s.initialSort},!1,!0),this.dataTypeService?.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){let n=this.dataTypeService?.updateColDefAndGetColumnType(e,t,i),r=t.type??n??e.type;return e.type=r,r?Kh(r):void 0}assignColumnTypes(e,t){if(!e.length)return;let i=Object.assign({},O4),n=this.gos.get("columnTypes")||{};un(n,(r,s)=>{r in i?ee(`the column type '${r}' is a default column type and cannot be overridden.`):(s.type&&ee("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[r]=s)}),e.forEach(r=>{let s=i[r.trim()];s?Mi(t,s,!1,!0):ee("colDef.type '"+r+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function Dr(e,t,i){if(t)for(let n=0;n<t.length;n++){let r=t[n];Di(r)&&Dr(r,r.getChildren(),i),i(r,e)}}var _4=class extends Z{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){let e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(lo(t.source))),this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,lo(t.source))}),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(lo(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(lo(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),lo(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){let t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();let i=this.colDefCols?.list,n=this.colDefCols?.tree,r=this.columnFactory.createColumnTree(this.colDefs,!0,n,e);ws(this.context,this.colDefCols?.tree,r.columnTree);let s=r.columnTree,a=r.treeDept,c=aw(s),u={};c.forEach(v=>u[v.getId()]=v),this.colDefCols={tree:s,treeDepth:a,list:c,map:u},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;let t=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();let i=g4(this.gos,this.showingPivotResult);(!e||i)&&this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!Es(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){let e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){let{map:t,list:i,tree:n,treeDepth:r}=e;this.cols={list:i.slice(),map:q({},t),tree:n.slice(),treeDepth:r},e.list.some(a=>this.cols?.map[a.getColId()]!==void 0)||(this.lastPivotOrder=null)}else{let{map:t,list:i,tree:n,treeDepth:r}=this.colDefCols;this.cols={list:i.slice(),map:q({},t),tree:n.slice(),treeDepth:r}}}getColsToShow(){let e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(n=>{let r=GC(n);if(e){let s=t&&po(t,n);return r||s}else return r||n.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),VD(this.cols))}createAutoCols(){let e=ug(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),r=!(i.length>0||this.gos.get("treeData"))||t||e,s=()=>{this.autoCols&&(ws(this.context,this.autoCols.tree),this.autoCols=null)};if(r||!this.autoColService){s();return}let a=this.autoColService.createAutoCols(i)??[],c=GD(a,this.autoCols?.list||null),u=this.cols.treeDepth,b=(this.autoCols?this.autoCols.treeDepth:-1)==u;if(c&&b)return;s();let[x,D]=this.columnFactory.balanceTreeForAutoCols(a,this.cols.tree);this.autoCols={list:a,tree:x,treeDepth:D,map:{}};let A=O=>{if(!O)return null;let B=O.filter(L=>!GC(L));return[...a,...B]};this.lastOrder=A(this.lastOrder),this.lastPivotOrder=A(this.lastPivotOrder)}createControlsCols(){let e=()=>{ws(this.context,this.controlsCols?.tree),this.controlsCols=null};this.controlsColService||e();let t=this.cols.treeDepth,n=(this.controlsCols?.treeDepth??-1)==t,r=this.controlsColService?.createControlsCols()??[];if(GD(r,this.controlsCols?.list??[])&&n)return;e();let[a,c]=this.columnFactory.balanceTreeForAutoCols(r,this.cols.tree);this.controlsCols={list:r,tree:a,treeDepth:c,map:{}};let u=v=>{if(!v)return null;let b=v.filter(x=>!Fc(x));return[...r,...b]};this.lastOrder=u(this.lastOrder),this.lastPivotOrder=u(this.lastPivotOrder)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),VD(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,i){this.columnApplyStateService.applyColumnState({state:e.map(n=>({colId:typeof n=="string"?n:n.getColId(),hide:!t}))},i)}setColsPinned(e,t,i){if(!this.cols||nn(e))return;if(li(this.gos,"print")){ee("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let n;t===!0||t==="left"?n="left":t==="right"?n="right":n=null;let r=[];e.forEach(s=>{if(!s)return;let a=this.getCol(s);a&&a.getPinned()!==n&&(a.setPinned(n),r.push(a))}),r.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(r,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let n;Di(e)?n=e.getId():n=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColGroup(e){let t=null;return Dr(null,this.cols?.tree,i=>{Di(i)&&i.getId()===e&&(t=i)}),t}isColGroupLocked(e){let t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;let n=this.funcColsService.getRowGroupColumns().findIndex(r=>r.getColId()===e.getColId());return t>n}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,It(this.gos)||Mr(this.gos)||ee("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){let e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;let t=new Map(e.map((u,v)=>[u,v]));if(!this.cols.list.some(u=>t.has(u)))return;let n=new Map(this.cols.list.map(u=>[u,!0])),r=e.filter(u=>n.has(u)),s=new Map(r.map(u=>[u,!0])),a=this.cols.list.filter(u=>!s.has(u)),c=r.slice();a.forEach(u=>{let v=u.getOriginalParent();if(!v){c.push(u);return}let b=[];for(;!b.length&&v;)v.getLeafColumns().forEach(O=>{let B=c.indexOf(O)>=0,L=b.indexOf(O)<0;B&&L&&b.push(O)}),v=v.getOriginalParent();if(!b.length){c.push(u);return}let x=b.map(A=>c.indexOf(A)),D=Math.max(...x);eg(c,u,D+1)}),this.cols.list=c}sortColsLikeKeys(e){if(this.cols==null)return;let t=[],i={};e.forEach(r=>{if(i[r])return;let s=this.cols.map[r];s&&(t.push(s),i[r]=!0)});let n=0;if(this.cols.list.forEach(r=>{let s=r.getColId();if(i[s]!=null)return;s.startsWith(hg)?eg(t,r,n++):t.push(r)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){ee("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(i=>this.cols.list.indexOf(i)<0).length>0||e.sort((i,n)=>{let r=this.cols.list.indexOf(i),s=this.cols.list.indexOf(n);return r-s})}resetColDefIntoCol(e,t){let i=e.getUserProvidedColDef();if(!i)return!1;let n=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(n,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){CM(this.cols?.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;let e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((n,r)=>this.lastOrder.indexOf(n)-this.lastOrder.indexOf(r)):this.lastOrder&&e.sort((n,r)=>this.cols.list.indexOf(n)-this.cols.list.indexOf(r));let t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(ee("Pivot mode not available with treeData."),!1):!0}isPivotActive(){let e=this.funcColsService.getPivotColumns();return this.pivotMode&&!nn(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){ws(this.context,this.colDefCols?.tree),ws(this.context,this.autoCols?.tree),ws(this.context,this.controlsCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){let t=this.pivotResultColsService.getPivotResultCols()?.list;return[this.colDefCols?.list??[],this.autoCols?.list??[],this.controlsCols?.list??[],t??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;let{map:i,list:n}=t;if(typeof e=="string"&&i[e])return i[e];for(let r=0;r<n.length;r++)if(HD(n[r],e))return n[r];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols?.list.find(t=>HD(t,e))??null}getAutoCols(){return this.autoCols?.list??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){let e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(let i of t){if(!i)continue;let n=i.getGroupRowCount()||0;for(let r=0;r<n;r++){let s=i.getGroupRowCtrlAtIndex(r),a=e[r];if(s){let c=this.getColumnGroupHeaderRowHeight(s);(a==null||c>a)&&(e[r]=c)}}}return e}getColumnGroupHeaderRowHeight(e){let t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight(),i=0,n=e.getHeaderCtrls();for(let r of n){let s=r.getColumn();if(s.isAutoHeaderHeight()){let a=s.getAutoHeaderHeight();a!=null&&a>i&&(i=a)}}return Math.max(t,i)}getColumnHeaderRowHeight(){let e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),i=this.visibleColsService.getAllCols().filter(n=>n.isAutoHeaderHeight()).map(n=>n.getAutoHeaderHeight()||0);return Math.max(e,...i)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){let e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;let{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,i){let n=t&&typeof t!="string"?Na(t):void 0,r=e&&typeof e!="string"?Na(e):void 0,s=n!==r,a=t&&typeof t!="string"?Qh(t):void 0,c=e&&typeof e!="string"?Qh(e):void 0;(s||a!==c)&&this.refreshAll(i)}};function lo(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function VD(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function HD(e,t){let i=e===t,n=e.getColDef()===t,r=e.getColId()==t;return i||n||r}function GD(e,t){return Es(e,t,(i,n)=>i.getColId()===n.getColId())}var B4=class extends Z{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}let{colKeys:t,skipHeader:i,skipHeaderGroups:n,stopAtGroup:r,source:s="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;let a=[],c=-1,u=i??this.gos.get("skipHeaderOnAutoSize"),v=n??u;for(;c!==0;){c=0;let b=[];t.forEach(x=>{if(!x)return;let D=this.columnModel.getCol(x);if(!D||a.indexOf(D)>=0)return;let A=this.autoWidthCalculator.getPreferredWidthForColumn(D,u);if(A>0){let O=this.normaliseColumnWidth(D,A);D.setActualWidth(O,s),a.push(D),c++}b.push(D)}),b.length&&this.visibleColsService.refresh(s)}v||this.autoSizeColumnGroupsByColumns(t,s,r),this.eventDispatcher.columnResized(a,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){let n=new Set;this.columnModel.getColsForKeys(e).forEach(c=>{let u=c.getParent();for(;u&&u!=i;)u.isPadding()||n.add(u),u=u.getParent()});let s,a=[];for(let c of n){for(let u of this.ctrlsService.getHeaderRowContainerCtrls())if(s=u.getHeaderCtrlForColumn(c),s)break;s&&s.resizeLeafColumnsToFit(t)}return a}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}let i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){let i=e.getMinWidth();t<i&&(t=i);let n=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=n),t}},V4=class extends Z{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>Ii(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>Ii(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>Ii(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){let t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);let i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return nn(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;let n=this.columnModel.getColDefCol(e);n&&(n.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[n],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(i,n)=>this.setRowGroupActive(i,n,t),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,i=>this.setRowGroupActive(!0,i,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,i=>this.setRowGroupActive(!1,i,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,i=>i.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(i,n)=>{n.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,i=>i.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(i,n)=>this.setValueActive(i,n,t),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){let n=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(n)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,i=>this.setValueActive(!0,i,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,i=>this.setValueActive(!1,i,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;let n=this.rowGroupCols[e],r=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,n),this.eventDispatcher.rowGroupChanged(r,i)}setColList(e,t,i,n,r,s,a){if(!this.columnModel.getCols())return;let c=new Map;t.forEach((v,b)=>c.set(v,b)),t.length=0,re(e)&&e.forEach(v=>{let b=this.columnModel.getColDefCol(v);b&&t.push(b)}),t.forEach((v,b)=>{let x=c.get(v);if(x===void 0){c.set(v,0);return}n&&x!==b||c.delete(v)}),(this.columnModel.getColDefCols()||[]).forEach(v=>{let b=t.indexOf(v)>=0;s(b,v)}),r&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(a),this.eventDispatcher.columnChanged(i,[...c.keys()],a)}updateColList(e,t,i,n,r,s,a){if(!e||nn(e))return;let c=!1,u=new Set;e.forEach(v=>{if(!v)return;let b=this.columnModel.getColDefCol(v);if(b){if(u.add(b),i){if(t.indexOf(b)>=0)return;t.push(b)}else{let x=t.indexOf(b);if(x<0)return;for(let D=x+1;D<t.length;D++)u.add(t[D]);Ii(t,b)}r(b),c=!0}}),c&&(n&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(a),this.eventDispatcher.genericColumnEvent(s,Array.from(u),a))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(i,n)=>i.setValueActive(n,e),()=>{},()=>{},i=>{let n=i.aggFunc;if(n===null||n==="")return null;if(n!==void 0)return!!n},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueCols.forEach(i=>{let n=i.getColDef();n.aggFunc!=null&&n.aggFunc!=""?i.setAggFunc(n.aggFunc):i.getAggFunc()||i.setAggFunc(n.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(i,n)=>i.setRowGroupActive(n,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(i,n)=>i.setPivotActive(n,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}extractColsCommon(e=[],t=[],i,n,r,s,a){let c=[],u=[];(this.columnModel.getColDefCols()||[]).forEach(D=>{let A=e.indexOf(D)<0,O=D.getColDef(),B=NC(s(O)),L=NC(a(O)),U=ho(n(O)),K=ho(r(O)),$;B!==void 0?$=B:U!==void 0?U===null?$=!1:$=U>=0:A?L!==void 0?$=L:K!==void 0?$=K!=null&&K>=0:$=!1:$=t.indexOf(D)>=0,$&&((A?U!=null||K!=null:U!=null)?c.push(D):u.push(D))});let b=D=>{let A=n(D.getColDef()),O=r(D.getColDef());return A??O};c.sort((D,A)=>{let O=b(D),B=b(A);return O===B?0:O<B?-1:1});let x=[].concat(c);return t.forEach(D=>{u.indexOf(D)>=0&&x.push(D)}),u.forEach(D=>{x.indexOf(D)<0&&x.push(D)}),t.forEach(D=>{x.indexOf(D)<0&&i(D,!1)}),x.forEach(D=>{t.indexOf(D)<0&&i(D,!0)}),x}generateColumnStateForRowGroupAndPivotIndexes(e,t){let i={},n=(r,s,a,c,u,v)=>{let b=this.columnModel.getColDefCols();if(!s.length||!b)return[];let x=Object.keys(r),D=new Set(x),A=new Set(x),O=new Set(s.map(_=>{let N=_.getColId();return A.delete(N),N}).concat(x)),B=[],L={},U=0;for(let _=0;_<b.length;_++){let N=b[_].getColId();O.has(N)&&(B.push(N),L[N]=U++)}let K=1e3,$=!1,ne=0,G=_=>{let N=L[_];for(let Y=ne;Y<N;Y++){let se=B[Y];A.has(se)&&(r[se][u]=K++,A.delete(se))}ne=N};s.forEach(_=>{let N=_.getColId();if(D.has(N))G(N),r[N][u]=K++;else{let Y=_.getColDef();(Y[u]===null||Y[u]===void 0&&Y[v]==null)&&($||(Y[a]||Y[a]===void 0&&Y[c]?G(N):(A.forEach(ve=>{r[ve][u]=K+L[ve]}),K+=B.length,$=!0)),i[N]||(i[N]={colId:N}),i[N][u]=K++)}})};return n(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),n(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},H4=class extends Z{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){let i=this.columnModel.getColDefCols()||[];if(nn(i))return!1;if(e&&e.state&&!e.state.forEach)return ee("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let n=this.funcColsService.getModifyColumnsNoEventsCallbacks(),r=(c,u,v)=>{let b=this.compareColumnStatesAndDispatchEvents(t),x=u.slice(),D={},A={},O=[],B=[],L=0,U=this.funcColsService.getRowGroupColumns().slice(),K=this.funcColsService.getPivotColumns().slice();c.forEach(_=>{let N=_.colId||"";if(N.startsWith(hg)){O.push(_),B.push(_);return}let se=v(N);se?(this.syncColumnWithStateItem(se,_,e.defaultState,D,A,!1,t,n),Ii(x,se)):(B.push(_),L+=1)});let $=_=>this.syncColumnWithStateItem(_,null,e.defaultState,D,A,!1,t,n);x.forEach($),this.funcColsService.sortRowGroupColumns(zD.bind(this,D,U)),this.funcColsService.sortPivotColumns(zD.bind(this,A,K)),this.columnModel.refreshCols(!1);let G=(this.columnModel.getAutoCols()||[]).slice();return O.forEach(_=>{let N=this.columnModel.getAutoCol(_.colId);Ii(G,N),this.syncColumnWithStateItem(N,_,e.defaultState,null,null,!0,t,n)}),G.forEach($),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),b(),{unmatchedAndAutoStates:B,unmatchedCount:L}};this.columnAnimationService.start();let{unmatchedAndAutoStates:s,unmatchedCount:a}=r(e.state||[],i,c=>this.columnModel.getColDefCol(c));if(s.length>0||re(e.defaultState)){let u=this.pivotResultColsService.getPivotResultCols()?.list;a=r(s,u||[],v=>this.pivotResultColsService.getPivotResultCol(v)).unmatchedCount}return this.columnAnimationService.finish(),a===0}resetColumnState(e){let t=this.columnModel.getColDefCols();if(nn(t))return;let i=this.columnModel.getColDefColTree(),n=aw(i),r=[],s=1e3,a=1e3,c=[],u=this.columnModel.getAutoCols();u&&(c=c.concat(u)),n&&(c=c.concat(n)),c.forEach(v=>{let b=this.getColumnStateFromColDef(v);Ge(b.rowGroupIndex)&&b.rowGroup&&(b.rowGroupIndex=s++),Ge(b.pivotIndex)&&b.pivot&&(b.pivotIndex=a++),r.push(b)}),this.applyColumnState({state:r,applyOrder:!0},e)}getColumnStateFromColDef(e){let t=(O,B)=>O??B??null,i=e.getColDef(),n=t(i.sort,i.initialSort),r=t(i.sortIndex,i.initialSortIndex),s=t(i.hide,i.initialHide),a=t(i.pinned,i.initialPinned),c=t(i.width,i.initialWidth),u=t(i.flex,i.initialFlex),v=t(i.rowGroupIndex,i.initialRowGroupIndex),b=t(i.rowGroup,i.initialRowGroup);v==null&&(b==null||b==!1)&&(v=null,b=null);let x=t(i.pivotIndex,i.initialPivotIndex),D=t(i.pivot,i.initialPivot);x==null&&(D==null||D==!1)&&(x=null,D=null);let A=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:r,hide:s,pinned:a,width:c,flex:u,rowGroup:b,rowGroupIndex:v,pivot:D,pivotIndex:x,aggFunc:A}}syncColumnWithStateItem(e,t,i,n,r,s,a,c){if(!e)return;let u=(ne,G)=>{let _={value1:void 0,value2:void 0},N=!1;return t&&(t[ne]!==void 0&&(_.value1=t[ne],N=!0),re(G)&&t[G]!==void 0&&(_.value2=t[G],N=!0)),!N&&i&&(i[ne]!==void 0&&(_.value1=i[ne]),re(G)&&i[G]!==void 0&&(_.value2=i[G])),_},v=u("hide").value1;v!==void 0&&e.setVisible(!v,a);let b=u("pinned").value1;b!==void 0&&e.setPinned(b);let x=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),D=u("flex").value1;if(D!==void 0&&e.setFlex(D),D==null){let ne=u("width").value1;ne!=null&&x!=null&&ne>=x&&e.setActualWidth(ne,a)}let A=u("sort").value1;A!==void 0&&(A==="desc"||A==="asc"?e.setSort(A,a):e.setSort(void 0,a));let O=u("sortIndex").value1;if(O!==void 0&&e.setSortIndex(O),s||!e.isPrimary())return;let B=u("aggFunc").value1;B!==void 0&&(typeof B=="string"?(e.setAggFunc(B),e.isValueActive()||(e.setValueActive(!0,a),c.addValueCol(e))):(re(B)&&ee("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,a),c.removeValueCol(e))));let{value1:L,value2:U}=u("rowGroup","rowGroupIndex");(L!==void 0||U!==void 0)&&(typeof U=="number"||L?(e.isRowGroupActive()||(e.setRowGroupActive(!0,a),c.addGroupCol(e)),n&&typeof U=="number"&&(n[e.getId()]=U)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,a),c.removeGroupCol(e)));let{value1:K,value2:$}=u("pivot","pivotIndex");(K!==void 0||$!==void 0)&&(typeof $=="number"||K?(e.isPivotActive()||(e.setPivotActive(!0,a),c.addPivotCol(e)),r&&typeof $=="number"&&(r[e.getId()]=$)):e.isPivotActive()&&(e.setPivotActive(!1,a),c.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;let t=[];e.state.forEach(i=>{i.colId!=null&&t.push(i.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){let t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),n={};return i.forEach(r=>{n[r.colId]=r}),()=>{let r=this.columnModel.getAllCols(),s=(B,L,U,K)=>{let $=L.map(K),ne=U.map(K);if(Es($,ne))return;let _=new Set(L);U.forEach(Y=>{_.delete(Y)||_.add(Y)});let N=[..._];this.eventService.dispatchEvent({type:B,columns:N,column:N.length===1?N[0]:null,source:e})},a=B=>{let L=[];return r.forEach(U=>{let K=n[U.getColId()];K&&B(K,U)&&L.push(U)}),L},c=B=>B.getColId();s("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),c),s("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),c);let v=a((B,L)=>{let U=B.aggFunc!=null,K=U!=L.isValueActive(),$=U&&B.aggFunc!=L.getAggFunc();return K||$});v.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",v,e);let b=(B,L)=>B.width!=L.getActualWidth();this.eventDispatcher.columnResized(a(b),!0,e);let x=(B,L)=>B.pinned!=L.getPinned();this.eventDispatcher.columnPinned(a(x),e);let D=(B,L)=>B.hide==L.isVisible();this.eventDispatcher.columnVisible(a(D),e);let O=a((B,L)=>B.sort!=L.getSort()||B.sortIndex!=L.getSortIndex());O.length>0&&this.sortController.dispatchSortChangedEvents(e,O),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){let i=this.columnGetStateService.getColumnState(),n={};i.forEach(u=>n[u.colId]=u);let r={};e.forEach(u=>{n[u.colId]&&(r[u.colId]=!0)});let s=e.filter(u=>r[u.colId]),a=i.filter(u=>r[u.colId]),c=[];a.forEach((u,v)=>{let b=s&&s[v];if(b&&b.colId!==u.colId){let x=this.columnModel.getCol(b.colId);x&&c.push(x)}}),c.length&&this.eventDispatcher.columnMoved({movedColumns:c,source:t,finished:!0})}},zD=(e,t,i,n)=>{let r=e[i.getId()],s=e[n.getId()],a=r!=null,c=s!=null;if(a&&c)return r-s;if(a)return-1;if(c)return 1;let u=t.indexOf(i),v=t.indexOf(n),b=u>=0,x=v>=0;return b&&x?u-v:b?-1:1},G4=class extends Z{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){let n=this.columnModel.getCols();if(!n)return;let r=n[e];this.moveColumns([r],t,i)}moveColumns(e,t,i,n=!0){let r=this.columnModel.getCols();if(!r)return;if(t>r.length-e.length){ee("tried to insert columns in invalid location, toIndex = ",t),ee("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();let s=this.columnModel.getColsForKeys(e);this.doesMovePassRules(s,t)&&(this.columnModel.moveInCols(s,t,i),this.eventDispatcher.columnMoved({movedColumns:s,source:i,toIndex:t,finished:n})),this.columnAnimationService.finish()}doesMovePassRules(e,t){let i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){let n=this.columnModel.getCols().slice();return CM(n,e,t),n}doesMovePassLockedPositions(e){let t=s=>s?s==="left"||s===!0?-1:1:0,i=this.gos.get("enableRtl"),n=i?1:-1,r=!0;return e.forEach(s=>{let a=t(s.getColDef().lockPosition);i?a>n&&(r=!1):a<n&&(r=!1),n=a}),r}doesMovePassMarryChildren(e){let t=!0,i=this.columnModel.getColTree();return Dr(null,i,n=>{if(!Di(n))return;let r=n,s=r.getColGroupDef();if(!(s&&s.marryChildren))return;let c=[];r.getLeafColumns().forEach(D=>{let A=e.indexOf(D);c.push(A)});let u=Math.max.apply(Math,c),v=Math.min.apply(Math,c),b=u-v,x=r.getLeafColumns().length-1;b>x&&(t=!1)}),t}placeLockedColumns(e){let t=[],i=[],n=[];return e.forEach(s=>{let a=s.getColDef().lockPosition;a==="right"?n.push(s):a==="left"||a===!0?t.push(s):i.push(s)}),this.gos.get("enableRtl")?[...n,...i,...t]:[...t,...i,...n]}},z4=/[&<>"']/g,W4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function er(e,t){if(e==null)return null;let i=e.toString().toString();return t?i:i.replace(z4,n=>W4[n])}function j4(e){if(!e||e==null)return null;let t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}function U4(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var $4=class extends Z{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;let n=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){let n=t?t.getColGroupDef():null;return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,r){let s=e.headerValueGetter;if(s){let a=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:r});return typeof s=="function"?s(a):typeof s=="string"?this.expressionService.evaluate(s,a):(ee("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return j4(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;let i=e.getColDef().pivotValueColumn,n=re(i),r=null,s;if(n){let a=this.funcColsService.getValueColumns(),c=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&a.length===1,u=e.getColDef().pivotTotalColumnIds!==void 0;if(c&&!u)return t;r=i?i.getAggFunc():null,s=!0}else{let a=e.isValueActive(),c=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();a&&c?(r=e.getAggFunc(),s=!0):s=!1}if(s){let a=typeof r=="string"?r:"func";return`${this.localeService.getLocaleTextFunc()(a,a)}(${t})`}return t}},q4=class extends Z{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){ws(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;let i=this.columnModel.getColDefCol(t),n=null;return this.pivotResultCols.list.forEach(r=>{let s=r.getColDef().pivotKeys,a=r.getColDef().pivotValueColumn;Es(s,e)&&a===i&&(n=r)}),n}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);let i=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);ws(this.context,this.pivotResultCols?.tree,i.columnTree);let n=i.columnTree,r=i.treeDept,s=aw(n),a={};this.pivotResultCols={tree:n,treeDepth:r,list:s,map:a},this.pivotResultCols.list.forEach(u=>this.pivotResultCols.map[u.getId()]=u);let c=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!c)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){let t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;let n=r=>{r.forEach(s=>{if(re(s.children)){let c=s;i&&i(c),n(c.children)}else t&&t(s)})};e&&n(e)}},K4=class extends Z{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,n){let r=[];e.forEach(s=>{let a=this.columnModel.getColDefCol(s.key)||this.columnModel.getCol(s.key);if(!a)return;if(r.push({width:s.newWidth,ratios:[1],columns:[a]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){let u=this.visibleColsService.getColAfter(a);if(!u)return;let v=a.getActualWidth()-s.newWidth,b=u.getActualWidth()+v;r.push({width:b,ratios:[1],columns:[u]})}}),r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:i,source:n})}resizeColumnSets(e){let{resizeSets:t,finished:i,source:n}=e;if(!(!t||t.every(b=>this.checkMinAndMaxWidthsForSet(b)))){if(i){let b=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(b,i,n)}return}let s=[],a=[];t.forEach(b=>{let{width:x,columns:D,ratios:A}=b,O={},B={};D.forEach(K=>a.push(K));let L=!0,U=0;for(;L;){if(U++,U>1e3){Ye("infinite loop in resizeColumnSets");break}L=!1;let K=[],$=0,ne=x;D.forEach((_,N)=>{if(B[_.getId()])ne-=O[_.getId()];else{K.push(_);let se=A[N];$+=se}});let G=1/$;K.forEach((_,N)=>{let Y=N===K.length-1,se;Y?se=ne:(se=Math.round(A[N]*x*G),ne-=se);let pe=_.getMinWidth(),ve=_.getMaxWidth();se<pe?(se=pe,B[_.getId()]=!0,L=!0):ve>0&&se>ve&&(se=ve,B[_.getId()]=!0,L=!0),O[_.getId()]=se})}D.forEach(K=>{let $=O[K.getId()];K.getActualWidth()!==$&&(K.setActualWidth($,n),s.push(K))})});let c=s.length>0,u=[];c&&(u=this.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0}),this.visibleColsService.setLeftValues(n),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());let v=a.concat(u);(c||i)&&this.eventDispatcher.columnResized(v,i,n,u)}checkMinAndMaxWidthsForSet(e){let{columns:t,width:i}=e,n=0,r=0,s=!0;t.forEach(u=>{let v=u.getMinWidth();n+=v||0;let b=u.getMaxWidth();b>0?r+=b:s=!1});let a=i>=n,c=!s||i<=r;return a&&c}refreshFlexedColumns(e={}){let t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let i=this.visibleColsService.getCenterCols(),n=-1;if(e.resizingCols){let D=new Set(e.resizingCols);for(let A=i.length-1;A>=0;A--)if(D.has(i[A])){n=A;break}}let r=0,s=[],a=0,c=0;for(let D=0;D<i.length;D++)i[D].getFlex()&&D>n?(s.push(i[D]),c+=i[D].getFlex(),a+=i[D].getMinWidth()):r+=i[D].getActualWidth();if(!s.length)return[];let u=[];r+a>this.flexViewportWidth&&(s.forEach(D=>D.setActualWidth(D.getMinWidth(),t)),u=s,s=[]);let v=[],b;e:for(;;){b=this.flexViewportWidth-r;let D=b/c;for(let A=0;A<s.length;A++){let O=s[A],B=D*O.getFlex(),L=0,U=O.getMinWidth(),K=O.getMaxWidth();if(B<U?L=U:B>K&&(L=K),L){O.setActualWidth(L,t),vM(s,O),c-=O.getFlex(),u.push(O),r+=O.getActualWidth();continue e}v[A]=Math.floor(B)}break}let x=b;return s.forEach((D,A)=>{let O=A<s.length-1?Math.min(v[A],x):Math.max(v[A],x);D.setActualWidth(O,t),u.push(D),x-=v[A]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(u,!0,t,s),s}sizeColumnsToFit(e,t="sizeColumnsToFit",i,n){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,n));return}let r={};n&&n?.columnLimits?.forEach(O=>{var B=O,{key:D}=B,A=Ap(B,["key"]);r[typeof D=="string"?D:D.getColId()]=A});let s=this.visibleColsService.getAllCols(),a=e===yr(s);if(e<=0||!s.length||a)return;let c=[],u=[];s.forEach(D=>{D.getColDef().suppressSizeToFit===!0?u.push(D):c.push(D)});let v=c.slice(0),b=!1,x=D=>{Ii(c,D),u.push(D)};for(c.forEach(D=>{D.resetActualWidth(t);let A=r?.[D.getId()],O=A?.minWidth??n?.defaultMinWidth,B=A?.maxWidth??n?.defaultMaxWidth,L=D.getActualWidth();typeof O=="number"&&L<O?D.setActualWidth(O,t,!0):typeof B=="number"&&L>B&&D.setActualWidth(B,t,!0)});!b;){b=!0;let D=e-yr(u);if(D<=0)c.forEach(A=>{let O=r?.[A.getId()]?.minWidth??n?.defaultMinWidth;if(typeof O=="number"){A.setActualWidth(O,t,!0);return}A.setMinimum(t)});else{let A=D/yr(c),O=D;for(let B=c.length-1;B>=0;B--){let L=c[B],U=r?.[L.getId()],K=U?.minWidth??n?.defaultMinWidth,$=U?.maxWidth??n?.defaultMaxWidth,ne=L.getMinWidth(),G=L.getMaxWidth(),_=typeof K=="number"&&K>ne?K:ne,N=typeof $=="number"&&$<G?$:G,Y=Math.round(L.getActualWidth()*A);Y<_?(Y=_,x(L),b=!1):Y>N?(Y=N,x(L),b=!1):B===0&&(Y=O),L.setActualWidth(Y,t,!0),O-=Y}}}v.forEach(D=>{D.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!i&&this.eventDispatcher.columnResized(v,!0,t)}applyAutosizeStrategy(){let e=this.gos.get("autoSizeStrategy");if(!e)return;let{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){let{columnLimits:i,defaultMinWidth:n,defaultMaxWidth:r}=e,s=i?.map(({colId:a,minWidth:c,maxWidth:u})=>({key:a,minWidth:c,maxWidth:u}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:n,defaultMaxWidth:r,columnLimits:s})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function EM(e,t){return e+"_"+t}function Nt(e){return e instanceof DM}var DM=class extends Z{constructor(e,t,i,n){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=n}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return EM(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{Nt(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let t=Ue(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{xs(t)?e.push(t):Nt(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{xs(t)?e.push(t):Nt(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(i=>{if(Nt(i)&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},MM=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},Y4=class extends Z{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=SC(this.treeLeft),this.columnsCenter=SC(this.treeCenter),this.columnsRight=SC(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(i=>i.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){let e=yr(this.columnsCenter),t=yr(this.columnsLeft),i=yr(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?Ue(this.columnsRight):null):(t=this.columnsLeft?Ue(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(n=>{n.setLastLeftPinned(n===t,e),n.setFirstRightPinned(n===i,e)})}buildTrees(){let e=this.columnModel.getColsToShow(),t=e.filter(s=>s.getPinned()=="left"),i=e.filter(s=>s.getPinned()=="right"),n=e.filter(s=>s.getPinned()!="left"&&s.getPinned()!="right"),r=new MM;this.treeLeft=this.createGroups({columns:t,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:n,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){let e=this.columnModel.getCols(),t=[],i=[],n=[];for(let r of e){let s=r.getPinned();s?s===!0||s==="left"?t.push(r):n.push(r):i.push(r)}this.ariaOrderColumns=t.concat(i).concat(n)}getAriaColIndex(e){let t;return Nt(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{Nt(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;let i=this.columnModel.getCols().slice(0),n=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(r=>{if(n){let s=yr(r);r.forEach(a=>{s-=a.getActualWidth(),a.setLeft(s,e)})}else{let s=0;r.forEach(a=>{a.setLeft(s,e),s+=a.getActualWidth()})}x4(i,r)}),i.forEach(r=>{r.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,n){let r=[],s=null;for(let a=0;a<t.length;a++){let c=t[a],u=t.length-a,v=Math.min(c.getColSpan(e),u),b=[c];if(v>1){let D=v-1;for(let A=1;A<=D;A++)b.push(t[a+A]);a+=D}let x;i?(x=!1,b.forEach(D=>{i(D)&&(x=!0)})):x=!0,x&&(r.length===0&&s&&(n&&n(c))&&r.push(s),r.push(c)),s=c}return r}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){let t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){let i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),r=t==="After"?Ue(n):n[0],s=`getCol${t}`;for(;;){let a=this[s](r);if(!a)return null;let c=this.getColGroupAtLevel(a,i);if(c!==e)return c}}getColGroupAtLevel(e,t){let i=e.getParent(),n,r;for(;n=i.getProvidedColumnGroup().getLevel(),r=i.getPaddingLevel(),!(n+r<=t);)i=i.getParent();return i}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};co(this.treeCenter,!1,e),co(this.treeLeft,!1,e),co(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){let e=this.getAllTrees();co(e,!1,t=>{Nt(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){let n=this[t[i]]();if(n.length)return e?Ue(n):n[0]}return null}getColumnGroup(e,t){if(!e)return null;if(Nt(e))return e;let i=this.getAllTrees(),n=typeof t=="number",r=null;return co(i,!1,s=>{if(Nt(s)){let a=s,c;n?c=e===a.getGroupId()&&t===a.getPartId():c=e===a.getGroupId(),c&&(r=a)}}),r}getColAfter(e){let t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return yr(this.columnsLeft)}getDisplayedColumnsRightWidth(){return yr(this.columnsRight)}isColAtEdge(e,t){let i=this.getAllCols();if(!i.length)return!1;let n=t==="first",r;if(Nt(e)){let s=e.getDisplayedLeafColumns();if(!s.length)return!1;r=n?s[0]:Ue(s)}else r=e;return(n?i[0]:Ue(i))===r}createGroups(e){let{columns:t,idCreator:i,pinned:n,oldDisplayedGroups:r,isStandaloneStructure:s}=e,a=this.mapOldGroupsById(r),c=[],u=t;for(;u.length;){let v=u;u=[];let b=0,x=D=>{let A=b;b=D;let O=v[A],L=(Nt(O)?O.getProvidedColumnGroup():O).getOriginalParent();if(L==null){for(let K=A;K<D;K++)c.push(v[K]);return}let U=this.createColGroup(L,i,a,n,s);for(let K=A;K<D;K++)U.addChild(v[K]);u.push(U)};for(let D=1;D<v.length;D++){let A=v[D],B=(Nt(A)?A.getProvidedColumnGroup():A).getOriginalParent(),L=v[b],K=(Nt(L)?L.getProvidedColumnGroup():L).getOriginalParent();B!==K&&x(D)}b<v.length&&x(v.length)}return s||this.setupParentsIntoCols(c,null),c}createColGroup(e,t,i,n,r){let s=e.getGroupId(),a=t.getInstanceIdForKey(s),c=EM(s,a),u=i[c];return u&&u.getProvidedColumnGroup()!==e&&(u=null),re(u)?u.reset():(u=new DM(e,s,a,n),r||this.createBean(u)),u}mapOldGroupsById(e){let t={},i=n=>{n.forEach(r=>{if(Nt(r)){let s=r;t[r.getUniqueId()]=s,i(s.getChildren())}})};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach(i=>{if(i.setParent(t),Nt(i)){let n=i;this.setupParentsIntoCols(n.getChildren(),n)}})}};function co(e,t,i){if(e)for(let n=0;n<e.length;n++){let r=e[n];if(Nt(r)){let s=t?r.getDisplayedChildren():r.getChildren();co(s,t,i)}i(r)}}function SC(e){let t=[];return co(e,!0,i=>{xs(i)&&t.push(i)}),t}var RM=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],X4=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],Z4=[...RM,...X4],Q4={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},mi=class{};mi.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];mi.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"];mi.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];mi.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];mi.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"];mi.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"];mi.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];mi.ALL_PROPERTIES=[...mi.ARRAY_PROPERTIES,...mi.OBJECT_PROPERTIES,...mi.STRING_PROPERTIES,...mi.NUMBER_PROPERTIES,...mi.FUNCTION_PROPERTIES,...mi.BOOLEAN_PROPERTIES,...mi.OTHER_PROPERTIES];var Dc=mi,pn=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};pn.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";pn.PUBLIC_EVENTS=RM;pn.EVENT_CALLBACKS=Z4.map(e=>pn.getCallbackForEvent(e));pn.BOOLEAN_PROPERTIES=Dc.BOOLEAN_PROPERTIES;pn.ALL_PROPERTIES=Dc.ALL_PROPERTIES;pn.ALL_PROPERTIES_AND_CALLBACKS=[...pn.ALL_PROPERTIES,...pn.EVENT_CALLBACKS];pn.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(pn.ALL_PROPERTIES_AND_CALLBACKS);var Mc=pn;function IM(e,t){typeof e!="object"&&(e={});let i=q({},e);return Mc.ALL_PROPERTIES_AND_CALLBACKS.forEach(r=>{let s=t[r];typeof s<"u"&&s!==Mc.VUE_OMITTED_PROPERTY&&(i[r]=s)}),i}function TM(e,t){if(!e)return;let i={},n=!1;if(Object.keys(e).filter(a=>Mc.ALL_PROPERTIES_AND_CALLBACKS_SET.has(a)).forEach(a=>{i[a]=e[a],n=!0}),!n)return;let r={type:"gridOptionsChanged",options:i};t.dispatchEvent(r);let s={type:"componentStateChanged"};un(i,(a,c)=>{s[a]=c}),t.dispatchEvent(s)}function Ac(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}var J4=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(n=>this.addCssClass(n));return}if(this.cssClassStates[e]!==!0&&e.length){let n=this.getGui();n&&n.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(n=>this.removeCssClass(n));return}if(this.cssClassStates[e]!==!1&&e.length){let n=this.getGui();n&&n.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){let t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){let n=(e||"").split(" ");if(n.length>1){n.forEach(r=>this.addOrRemoveCssClass(r,t));return}}if(this.cssClassStates[e]!==t&&e.length){let n=this.getGui();n&&n.classList.toggle(e,t),this.cssClassStates[e]=t}}};function Rr(e,t,i){i==null||typeof i=="string"&&i==""?FM(e,t):Nn(e,t,i)}function Nn(e,t,i){e.setAttribute(AM(t),i.toString())}function FM(e,t){e.removeAttribute(AM(t))}function AM(e){return`aria-${e}`}function Hi(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function eV(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function tV(e){return e.getAttribute("aria-label")}function Ba(e,t){Rr(e,"label",t)}function Rc(e,t){Rr(e,"labelledby",t)}function PM(e,t){Rr(e,"live",t)}function iV(e,t){Rr(e,"atomic",t)}function nV(e,t){Rr(e,"relevant",t)}function rV(e,t){Rr(e,"disabled",t)}function kM(e,t){Rr(e,"hidden",t)}function tg(e,t){Nn(e,"expanded",t)}function sV(e,t){Nn(e,"setsize",t)}function oV(e,t){Nn(e,"posinset",t)}function aV(e,t){Nn(e,"multiselectable",t)}function lV(e,t){Nn(e,"rowcount",t)}function OM(e,t){Nn(e,"rowindex",t)}function cV(e,t){Nn(e,"colcount",t)}function LM(e,t){Nn(e,"colindex",t)}function dV(e,t){Nn(e,"colspan",t)}function uV(e,t){Nn(e,"sort",t)}function hV(e){FM(e,"sort")}function ig(e,t){Rr(e,"selected",t)}function gV(e,t){Rr(e,"controls",t.id),Rc(t,e.id)}function uw(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var xC,Bh,EC,DC,MC,RC,jC,UC,IC;function ir(){return xC===void 0&&(xC=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),xC}function NM(){if(Bh===void 0)if(ir()){let e=navigator.userAgent.match(/version\/(\d+)/i);e&&(Bh=e[1]!=null?parseFloat(e[1]):0)}else Bh=0;return Bh}function hw(){if(EC===void 0){let e=window;EC=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return EC}function gw(){return DC===void 0&&(DC=/(firefox)/i.test(navigator.userAgent)),DC}function _M(){return MC===void 0&&(MC=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),MC}function Ds(){return RC===void 0&&(RC=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),RC}function $C(){return!ir()||NM()>=15}function qC(e){if(!e)return null;let t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!gw())?null:t.toString()}function pV(){if(IC!==void 0)return IC;if(!document.body)return-1;let e=1e6,t=gw()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){let n=e*2;if(i.style.height=n+"px",n>t||i.clientHeight!==n)break;e=n}return document.body.removeChild(i),IC=e,e}function fV(){return document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1)}function mV(){return document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1)}function vV(){return UC==null&&BM(),UC}function BM(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.parentNode.removeChild(t),i!=null&&(UC=i,jC=i===0)}function VM(){return jC==null&&BM(),jC}var Vh;var CV="[tabindex], input, select, button, textarea, [href]",HM="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function pw(e){let t=Element.prototype.matches||Element.prototype.msMatchesSelector,n=t.call(e,"input, select, button, textarea"),r=t.call(e,HM),s=Ln(e);return n&&!r&&s}function St(e,t,i={}){let{skipAriaHidden:n}=i;e.classList.toggle("ag-hidden",!t),n||kM(e,!t)}function wV(e,t,i={}){let{skipAriaHidden:n}=i;e.classList.toggle("ag-invisible",!t),n||kM(e,!t)}function Ic(e,t){let i="disabled",n=t?r=>r.setAttribute(i,""):r=>r.removeAttribute(i);n(e),qM(e.querySelectorAll("input"),r=>n(r))}function Oa(e,t,i){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++n>i)break}else if(e===i)break}return!1}function wo(e){let{height:t,width:i,borderTopWidth:n,borderRightWidth:r,borderBottomWidth:s,borderLeftWidth:a,paddingTop:c,paddingRight:u,paddingBottom:v,paddingLeft:b,marginTop:x,marginRight:D,marginBottom:A,marginLeft:O,boxSizing:B}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(n||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(a||"0"),paddingTop:parseFloat(c||"0"),paddingRight:parseFloat(u||"0"),paddingBottom:parseFloat(v||"0"),paddingLeft:parseFloat(b||"0"),marginTop:parseFloat(x||"0"),marginRight:parseFloat(D||"0"),marginBottom:parseFloat(A||"0"),marginLeft:parseFloat(O||"0"),boxSizing:B}}function fw(e){let t=wo(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function Pc(e){let t=wo(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function GM(e){let{height:t,marginBottom:i,marginTop:n}=wo(e);return Math.floor(t+i+n)}function ng(e){let{width:t,marginLeft:i,marginRight:n}=wo(e);return Math.floor(t+i+n)}function zM(e){let t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:n,borderRightWidth:r,borderBottomWidth:s}=wo(e);return{top:t.top+(i||0),left:t.left+(n||0),right:t.right+(r||0),bottom:t.bottom+(s||0)}}function rg(){if(typeof Vh=="boolean")return Vh;let e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,Vh=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),Vh}function sg(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),hw()&&!rg()&&(i=e.scrollWidth-e.getBoundingClientRect().width-i)),i}function og(e,t,i){i&&(rg()?t*=-1:(ir()||hw())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function vi(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function gn(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function WM(e){return!!e.offsetParent}function Ln(e){let t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!WM(e)||window.getComputedStyle(e).visibility!=="visible")}function Tc(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function jM(e,t,i){i&&i.nextSibling===t||(i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function UM(e,t){for(let i=0;i<t.length;i++){let n=t[i],r=e.children[i];r!==n&&e.insertBefore(n,r)}}function yV(e,t,i){i?i.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function $M(e,t){if(t)for(let[i,n]of Object.entries(t)){if(!i||!i.length||n==null)continue;let r=U4(i),s=n.toString(),a=s.replace(/\s*!important/g,""),c=a.length!=s.length?"important":void 0;e.style.setProperty(r,a,c)}}function bV(e){return e.clientWidth<e.scrollWidth}function SV(e){return e.clientHeight<e.scrollHeight}function ag(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):On(e,t)}function On(e,t){t=mw(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function Cc(e,t){t=mw(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function mw(e){return typeof e=="number"?`${e}px`:e}function vw(e){return e instanceof Node||e instanceof HTMLElement}function xV(e){if(e==null)return[];let t=[];return qM(e,i=>t.push(i)),t}function EV(e,t){if(e)for(let i=0;i<e.length;i++){let n=e[i];t(n.name,n.value)}}function fn(e,t,i){i==null||i===""?e.removeAttribute(t):e.setAttribute(t,i.toString())}function qM(e,t){if(e!=null)for(let i=0;i<e.length;i++)t(e[i])}var Va=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){let e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},DV=1e3,MV=1e3,WD=100,RV=(()=>{let e=class oo extends Z{constructor(i,n,r,s){super(),this.parentComp=i,this.tooltipShowDelayOverride=n,this.tooltipHideDelayOverride=r,this.shouldDisplayTooltip=s,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(i){this.popupService=i.popupService,this.userComponentFactory=i.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let i=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(i,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(i,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(i,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(i,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(i){let n=this.gos.get(i);return n<0&&ee(`${i} should not be lower than 0`),Math.max(200,n)}getTooltipDelay(i){return i==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let i=this.gos.get("tooltipTrigger");return!i||i==="hover"?0:1}onMouseEnter(i){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Ds()&&(oo.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(i)},WD):this.prepareToShowTooltip(i))}onMouseMove(i){this.lastMouseEvent&&(this.lastMouseEvent=i),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(i){let n=i.relatedTarget,r=this.parentComp.getGui(),s=this.tooltipComp?.getGui();this.isInteractingWithTooltip||r.contains(n)||this.interactionEnabled&&s?.contains(n)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(i){if(this.state!=0||oo.isLocked)return;let n=0;i&&(n=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=i||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),n),this.state=1}isLastTooltipHiddenRecently(){let i=new Date().getTime(),n=oo.lastTooltipHideTime;return i-n<DV}setToDoNothing(i){!i&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let i=q({},this.parentComp.getTooltipParams());if(!re(i.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(i).newAgStackInstance().then(n)}hideTooltip(i){!i&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),oo.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),i&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(i,n){if(this.state!==2||this.tooltipInstanceCount!==i){this.destroyBean(n);return}let s=n.getGui();this.tooltipComp=n,s.classList.contains("ag-tooltip")||s.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&s.classList.add("ag-tooltip-animate"),this.interactionEnabled&&s.classList.add("ag-tooltip-interactive");let a=this.localeService.getLocaleTextFunc(),c=this.popupService.addPopup({eChild:s,ariaLabel:a("ariaLabelTooltip","Tooltip")});if(c&&(this.tooltipPopupDestroyFunc=c.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let u=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:u,columnMoved:u})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(s,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Ot(this.gos),{keydown:u=>{s.contains(u?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(s,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:s,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){let i=this.tooltipComp?.getGui(),n=xt(this.gos);return!!i&&i.contains(n)}onTooltipFocusOut(i){let n=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,n.contains(i.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let i={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(ue(q({},i),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(ue(q({},i),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let i=this.tooltipPopupDestroyFunc,n=this.tooltipComp,r=this.tooltipTrigger===0?MV:0;window.setTimeout(()=>{i(),this.destroyBean(n)},r),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(i=>{i&&i()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){oo.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},WD)}unlockService(){oo.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};return e.isLocked=!1,e})(),IV=RV,za=class extends Z{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){let t="title",i=this.ctrl.getGui();i&&(e!=null&&e!=""?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.tooltipManager!=null)return;let e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new IV(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let e=this.ctrl,t=e.getColumn?.(),i=e.getColDef?.(),n=e.getRowNode?.();return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?.(),node:n,data:n?.data,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?.(),hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},TV=new Va,ae=null,qe=class KM extends Z{constructor(t,i){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=TV.next(),this.cssClassManager=new J4(()=>this.eGui),this.componentSelectors=new Map((i??[]).map(n=>[n.selector,n])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,i){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,i))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){let{newTooltipText:i,showDelayOverride:n,hideDelayOverride:r,location:s,shouldDisplayTooltip:a}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);let c=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new za({getTooltipValue:c,getGui:()=>this.getGui(),getLocation:()=>s??"UNKNOWN",getColDef:t?.getColDef,getColumn:t?.getColumn,getTooltipShowDelayOverride:n!=null?()=>n:void 0,getTooltipHideDelayOverride:r!=null?()=>r:void 0,shouldDisplayTooltip:a})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,i,n,r=null){if(i===void 0&&(i=this.getDataRefAttribute(t)),i){let s=this[i];if(s===ae)this[i]=r??t;else{let a=n&&n[i];!this.suppressDataRefValidation&&!a&&ee(`Issue with data-ref: ${i} on ${this.constructor.name} with ${s}`)}}}createChildComponentsFromTags(t,i){xV(t.childNodes).forEach(r=>{if(!(r instanceof HTMLElement))return;let s=this.createComponentFromElement(r,a=>{a.getGui()&&this.copyAttributesFromNode(r,a.getGui())},i);if(s){if(s.addItems&&r.children.length){this.createChildComponentsFromTags(r,i);let a=Array.prototype.slice.call(r.children);s.addItems(a)}this.swapComponentForNode(s,t,r)}else r.childNodes&&this.createChildComponentsFromTags(r,i)})}createComponentFromElement(t,i,n){let r=t.nodeName,s=this.getDataRefAttribute(t),a=r.indexOf("AG-")===0,c=a?this.componentSelectors.get(r):null,u=null;if(c){KM.elementGettingCreated=t;let v=n&&s?n[s]:void 0;u=new c.component(v),u.setParentComponent(this),this.createBean(u,null,i)}else a&&ee(`Missing selector: ${r}`);return this.applyElementsToComponent(t,s,n,u),u}copyAttributesFromNode(t,i){EV(t.attributes,(n,r)=>i.setAttribute(n,r))}swapComponentForNode(t,i,n){let r=t.getGui();i.replaceChild(r,n),i.insertBefore(document.createComment(n.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){let i=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(n=>n.setAttribute("tabindex",i.toString()))}setTemplate(t,i,n){let r=Tc(t);this.setTemplateFromElement(r,i,n)}setTemplateFromElement(t,i,n,r=!1){if(this.eGui=t,this.suppressDataRefValidation=r,i)for(let s=0;s<i.length;s++){let a=i[s];this.componentSelectors.set(a.selector,a)}this.wireTemplate(t,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,i){let n=i;return t==null?null:(n||(n=this.eGui),vw(t)?{element:t,parent:n}:{element:t.getGui(),parent:n})}prependChild(t,i){let{element:n,parent:r}=this.getContainerAndElement(t,i)||{};!n||!r||r.insertAdjacentElement("afterbegin",n)}appendChild(t,i){let{element:n,parent:r}=this.getContainerAndElement(t,i)||{};!n||!r||r.appendChild(n)}isDisplayed(){return this.displayed}setVisible(t,i={}){if(t!==this.visible){this.visible=t;let{skipAriaHidden:n}=i;wV(this.eGui,t,{skipAriaHidden:n})}}setDisplayed(t,i={}){if(t!==this.displayed){this.displayed=t;let{skipAriaHidden:n}=i;St(this.eGui,t,{skipAriaHidden:n});let r={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,i,n){this.eGui.addEventListener(t,i,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,i))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,i){this.cssClassManager.addOrRemoveCssClass(t,i)}},YM={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},FV=(()=>{let e=new Set(Object.values(YM));return e.add("eye"),e})();function AV(e,t,i){let n=tn(e,t,i);if(n){let{className:s}=n;if(typeof s=="string"&&s.indexOf("ag-icon")>-1||typeof s=="object"&&s["ag-icon"])return n}let r=document.createElement("span");return r.appendChild(n),r}function tn(e,t,i,n){let r=null,s=i&&i.getColDef().icons;if(s&&(r=s[e]),t&&!r){let a=t.get("icons");a&&(r=a[e])}if(r){let a;if(typeof r=="function")a=r();else if(typeof r=="string")a=r;else throw new Error("icon from grid options needs to be a string or a function");if(typeof a=="string")return Tc(a);if(vw(a))return a;ee("iconRenderer should return back a string or a dom object")}else{let a=document.createElement("span"),c=YM[e]??(FV.has(e)?e:void 0);return c||(n?c=e:(ee(`Did not find icon ${e}`),c="")),a.setAttribute("class",`ag-icon ag-icon-${c}`),a.setAttribute("unselectable","on"),Hi(a,"presentation"),a}}var PV=class extends qe{constructor(){super(...arguments),this.dragSource=null,this.eIcon=ae,this.eLabel=ae}postConstruct(){let e=t=>AV(t,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){vi(this.eIcon);let i=null;e||(e=this.dragSource?.getDefaultIconName?this.dragSource?.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eIcon.appendChild(i)}setLabel(e){this.eLabel.textContent=er(e)}};function XM(e,t,i){if(i===0)return!1;let n=Math.abs(e.clientX-t.clientX),r=Math.abs(e.clientY-t.clientY);return Math.max(n,r)<=i}var ys=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new Ha,this.eElement=e,this.preventMouseClick=t;let i=this.onTouchStart.bind(this),n=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",n,{passive:!0}),this.eElement.addEventListener("touchend",r,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",n,{passive:!0}),this.eElement.removeEventListener("touchend",r,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let t=this.touchStart;window.setTimeout(()=>{let i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;let n={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(n)}},500)}onTouchMove(e){if(!this.touching)return;let t=this.getActiveTouch(e.touches);if(!t)return;!XM(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){let t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let i={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function uc(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var kV=`<span class="ag-sort-indicator-container">
        ${uc("Order","order")}
        ${uc("Asc","ascending-icon")}
        ${uc("Desc","descending-icon")}
        ${uc("Mixed","mixed-icon")}
        ${uc("None","none-icon")}
    </span>`,Cw=class extends qe{constructor(e){super(),this.eSortOrder=ae,this.eSortAsc=ae,this.eSortDesc=ae,this.eSortMixed=ae,this.eSortNone=ae,e||this.setTemplate(kV)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,n,r){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=r}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);let i=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,i){if(t==null)return;let n=tn(e,this.gos,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let t=e==="asc";St(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){let t=e==="desc";St(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){let t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=e==null;St(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let e=this.column.getColDef().showRowGroup;Jn(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";St(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;let e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some(r=>this.sortController.getDisplaySortIndexForColumn(r)??!1),n=t>=0&&i;St(this.eSortOrder,n,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():vi(this.eSortOrder)}},OV={selector:"AG-SORT-INDICATOR",component:Cw},LV=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,KC=class extends qe{constructor(){super(...arguments),this.eFilter=ae,this.eFilterButton=ae,this.eSortIndicator=ae,this.eMenu=ae,this.eLabel=ae,this.eText=ae,this.eSortOrder=ae,this.eSortAsc=ae,this.eSortDesc=ae,this.eSortMixed=ae,this.eSortNone=ae,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){let t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??LV;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[OV]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;let t=er(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(t==null)return;let n=tn(e,this.gos,i);n&&t.appendChild(n)}setupTap(){let{gos:e}=this;if(e.get("suppressTouch"))return;let t=new ys(this.getGui(),!0),i=this.shouldSuppressMenuHide(),n=i&&re(this.eMenu),r=n?new ys(this.eMenu,!0):t;if(this.params.enableMenu){let s=n?"tap":"longTap",a=c=>this.params.showColumnMenuAfterMouseClick(c.touchStart);this.addManagedListeners(r,{[s]:a})}if(this.params.enableSorting){let s=a=>{let c=a.touchStart.target;i&&(this.eMenu?.contains(c)||this.eFilterButton?.contains(c))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:s})}if(this.params.enableFilterButton){let s=new ys(this.eFilterButton,!0);this.addManagedListeners(s,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>s.destroy())}this.addDestroyFunc(()=>t.destroy()),n&&this.addDestroyFunc(()=>r.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){gn(this.eMenu),this.eMenu=void 0;return}let e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){let t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new Cw(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{let i=this.params.column.isMoving(),r=new Date().getTime()-this.lastMovingChanged<50;if(!(i||r)){let c=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(c)}}});let e=()=>{let t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){let r=!this.funcColsService.getSourceColumnsForGroupColumn(this.params.column)?.every(s=>this.params.column.getSort()==s.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",r)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return gn(t),!1;let n=this.params.column;return this.addInIcon("filter",t,n),this.addManagedListeners(n,{filterChanged:i}),i(),!0}onFilterChangedIcon(){let e=this.params.column.isFilterActive();St(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},NV=class extends qe{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=ae,this.agClosed=ae,this.agLabel=ae}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&ee("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);let e=r=>{if(xr(r))return;let s=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),s,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);let t=r=>{_a(r)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();let i=this.params.columnGroup.getProvidedColumnGroup(),n=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:n,expandableChanged:n})}addTouchAndClickListeners(e,t){let i=new ys(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc(()=>i.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let t=this.params.columnGroup.isExpanded();St(this.agOpened,t),St(this.agClosed,!t)}else St(this.agOpened,!1),St(this.agClosed,!1)}addInIcon(e,t){let i=tn(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){St(this.agOpened,!1),St(this.agClosed,!1);return}}setupLabel(){let{displayName:e,columnGroup:t}=this.params;if(re(e)){let i=er(e,!0);this.agLabel.textContent=i}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},_V="\u2191",BV="\u2193",VV=class extends qe{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");let i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){let i=Math.abs(t),n=e.formatValue(i),r=re(n)?n:i,s=t>=0;s?this.eDelta.textContent=_V+r:this.eDelta.textContent=BV+r,this.eDelta.classList.toggle("ag-value-change-delta-up",s),this.eDelta.classList.toggle("ag-value-change-delta-down",!s)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),vi(this.eDelta)}refresh(e,t=!1){let i=e.value;if(i===this.lastValue||(re(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:re(e.value)?this.eValue.textContent=i:vi(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){let n=i-this.lastValue;this.showDelta(e,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},HV=class extends qe{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let i=e.value;return Ge(i)&&(i=""),i===this.lastValue||this.filterManager?.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=i,re(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:re(e.value)?this.eCurrent.textContent=i:vi(this.eCurrent),!0)}},J=(()=>{let e=class{};return e.BACKSPACE="Backspace",e.TAB="Tab",e.ENTER="Enter",e.ESCAPE="Escape",e.SPACE=" ",e.LEFT="ArrowLeft",e.UP="ArrowUp",e.RIGHT="ArrowRight",e.DOWN="ArrowDown",e.DELETE="Delete",e.F2="F2",e.PAGE_UP="PageUp",e.PAGE_DOWN="PageDown",e.PAGE_HOME="Home",e.PAGE_END="End",e.A="KeyA",e.C="KeyC",e.D="KeyD",e.V="KeyV",e.X="KeyX",e.Y="KeyY",e.Z="KeyZ",e})(),GV=class extends qe{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n,disabled:r}=this.config;r!=null&&this.setDisabled(r),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){vi(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(St(this.eLabel,!1),Hi(this.eLabel,"presentation")):(St(this.eLabel,!0),Hi(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(ag(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return Ic(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},ZM=class extends GV{constructor(e,t,i,n){super(e,t,i),this.className=n}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||tV(e)!==null?Rc(e,""):Rc(e,t??"")}setAriaLabel(e){return Ba(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return On(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},uo=class extends ZM{constructor(e,t,i="text",n="input"){super(e,e?.template??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${n} data-ref="eInput" class="ag-input-field-input"></${n}>
                </div>
            </div>`,[],t),this.inputType=i,this.displayFieldTag=n,this.eLabel=ae,this.eWrapper=ae,this.eInput=ae}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return ag(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return fn(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Ba(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Ic(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)fn(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";fn(this.eInput,"autocomplete",t)}return this}},ww=class extends uo{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});let n=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},yw={selector:"AG-CHECKBOX",component:ww},zV=class extends qe{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[yw]),this.eCheckbox=ae}init(e){this.refresh(e);let t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),PM(t,"polite"),this.addManagedListeners(t,{click:i=>{if(_a(i),this.eCheckbox.isDisabled())return;let n=this.eCheckbox.getValue();this.onCheckboxChanged(n)},dblclick:i=>{_a(i)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:i=>{if(i.key===J.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===xt(this.gos)&&this.eCheckbox.toggle();let n=this.eCheckbox.getValue();this.onCheckboxChanged(n),i.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,i=!0;if(e.node.group&&e.column)if(typeof e.value=="boolean")t=e.value;else{let c=e.column.getColId();c.startsWith(hg)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[c]!==void 0?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);let n=e.disabled!=null?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(n);let r=this.localeService.getLocaleTextFunc(),s=uw(r,t),a=n?s:`${r("ariaToggleCellValue","Press SPACE to toggle cell value")} (${s})`;this.eCheckbox.setInputAriaLabel(a)}onCheckboxChanged(e){let{column:t,node:i,value:n}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:n});let r=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:n,oldValue:n,newValue:e,valueChanged:r}),r||this.updateCheckbox(this.params)}},WV=class extends qe{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=ae,this.eLoadingText=ae}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){let e=tn("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);let t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},jV=class extends qe{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>Rc(e.eParentOfValue)),Rc(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");let t=e("ariaSkeletonCellLoadingFailed","Row failed to load");Ba(this.getGui(),t)}setupLoading(e){let i=Ot(this.gos).createElement("div");i.classList.add("ag-skeleton-effect");let n=e.node.rowIndex;if(n!=null){let a=75+25*(n%2===0?Math.sin(n):Math.cos(n));i.style.width=`${a}%`}this.getGui().appendChild(i);let s=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Ba(this.getGui(),s)}refresh(e){return!1}destroy(){super.destroy()}},QM=class extends qe{constructor(){super()}destroy(){super.destroy()}},UV=class extends QM{init(){let e=Sr(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},$V=class extends QM{init(){let e=Sr(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}},Wa=class extends qe{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},qV=class extends Wa{constructor(){super('<div class="ag-tooltip"></div>')}init(e){let{value:t}=e;this.getGui().textContent=er(t,!0)}};function JM(e){let{inputValue:t,allSuggestions:i,hideIrrelevant:n,filterByPercentageOfBestMatch:r,addSequentialWeight:s}=e,a=i.map((v,b)=>({value:v,relevance:YV(t.toLowerCase(),v.toLocaleLowerCase(),s),idx:b}));if(a.sort((v,b)=>b.relevance-v.relevance),n&&(a=a.filter(v=>v.relevance!==0)),a.length>0&&r&&r>0){let b=a[0].relevance*r;a=a.filter(x=>b-x.relevance<0)}let c=[],u=[];for(let v of a)c.push(v.value),u.push(v.idx);return{values:c,indices:u}}function KV(e){let t=[],i=e.length;for(let n=1;n<=i;n++)for(let r=0;r<=i-n;r++){let s=r+n-1;t.push(e.slice(r,s+1))}return t}function YV(e,t,i=!1){let n=e.replace(/\s/g,""),r=t.replace(/\s/g,""),s=n.length,a=r.length,c=new Array(s+1).fill(null).map(()=>new Array(a+1).fill(0));for(let x=0;x<=s;x+=1)c[x][0]=x;for(let x=0;x<=a;x+=1)c[0][x]=x;for(let x=1;x<=s;x++)for(let D=1;D<=a;D++)n[x-1]===r[D-1]?c[x][D]=c[x-1][D-1]:c[x][D]=1+Math.min(c[x][D-1],Math.min(c[x-1][D],c[x-1][D-1]));let u=c[s][a],b=Math.max(s,a)-u;if(i){let x=KV(n);for(let D=0;D<x.length;D++){let A=x[D];r.indexOf(A)!==-1&&(b+=1,b*=A.length)}}return b}var XV=class extends Z{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:PV,agColumnHeader:KC,agColumnGroupHeader:NV,agSortIndicator:Cw,agAnimateShowChangeCellRenderer:VV,agAnimateSlideCellRenderer:HV,agLoadingCellRenderer:WV,agSkeletonCellRenderer:jV,agCheckboxCellRenderer:zV,agLoadingOverlay:UV,agNoRowsOverlay:$V,agTooltipComponent:qV},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){let e=this.gos.get("components");e!=null&&un(e,(t,i)=>this.registerJsComponent(t,i))}registerDefaultComponent(e,t,i){this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){let i=(c,u,v)=>({componentFromFramework:u,component:c,params:v}),n=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(n!=null)return i(n,!0);let r=this.jsComps[t];if(r){let c=this.getFrameworkOverrides().isFrameworkComponent(r);return i(r,c)}let s=this.agGridDefaults[t];if(s)return i(s,!1,this.agGridDefaultParams[t]);let a=this.enterpriseAgDefaultCompsModule[t];return a?this.gos.assertModuleRegistered(a,`AG Grid '${e}' component: ${t}`):iw(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){let i=[...Object.keys(this.agGridDefaults).filter(r=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(r)),...Object.keys(this.jsComps)],n=JM({inputValue:t,allSuggestions:i,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;ee(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),n.length>0&&ee(`         Did you mean: [${n.slice(0,3)}]?`),ee(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},en=class fc{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new fc(i=>{let n=t.length,r=new Array(n);t.forEach((s,a)=>{s.then(c=>{r[a]=c,n--,n===0&&i(r)})})}):fc.resolve()}static resolve(t=null){return new fc(i=>i(t))}then(t){return new fc(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(n=>i(t(n)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(i=>i(t))}onReject(t){}},ZV={propertyName:"dateComponent",cellRenderer:!1},QV={propertyName:"dragAndDropImageComponent",cellRenderer:!1},JV={propertyName:"headerComponent",cellRenderer:!1},eH={propertyName:"headerGroupComponent",cellRenderer:!1},jD={propertyName:"cellRenderer",cellRenderer:!0},tH={propertyName:"cellRenderer",cellRenderer:!1},iH={propertyName:"loadingCellRenderer",cellRenderer:!0},nH={propertyName:"cellEditor",cellRenderer:!1},UD={propertyName:"innerRenderer",cellRenderer:!0},rH={propertyName:"loadingOverlayComponent",cellRenderer:!1},sH={propertyName:"noRowsOverlayComponent",cellRenderer:!1},oH={propertyName:"tooltipComponent",cellRenderer:!1},bw={propertyName:"filter",cellRenderer:!1},aH={propertyName:"floatingFilterComponent",cellRenderer:!1},lH={propertyName:"toolPanel",cellRenderer:!1},cH={propertyName:"statusPanel",cellRenderer:!1},dH={propertyName:"fullWidthCellRenderer",cellRenderer:!0},uH={propertyName:"loadingCellRenderer",cellRenderer:!0},hH={propertyName:"groupRowRenderer",cellRenderer:!0},gH={propertyName:"detailCellRenderer",cellRenderer:!0},pH={propertyName:"menuItem",cellRenderer:!1},eR=class tR extends Z{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getDragAndDropImageCompDetails(t){return this.getCompDetails(this.gridOptions,QV,"agDragAndDropImage",t,!0)}getHeaderCompDetails(t,i){return this.getCompDetails(t,JV,"agColumnHeader",i)}getHeaderGroupCompDetails(t){let i=t.columnGroup.getColGroupDef();return this.getCompDetails(i,eH,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,dH,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,uH,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,hH,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,gH,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,i){return this.getCompDetails(t,UD,null,i)}getFullWidthGroupRowInnerCellRenderer(t,i){return this.getCompDetails(t,UD,null,i)}getCellRendererDetails(t,i){return this.getCompDetails(t,jD,null,i)}getEditorRendererDetails(t,i){return this.getCompDetails(t,tH,null,i)}getLoadingCellRendererDetails(t,i){return this.getCompDetails(t,iH,"agSkeletonCellRenderer",i,!0)}getCellEditorDetails(t,i){return this.getCompDetails(t,nH,"agCellEditor",i,!0)}getFilterDetails(t,i,n){return this.getCompDetails(t,bw,n,i,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,ZV,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,rH,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,sH,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,oH,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,i){return this.getCompDetails(t,jD,null,i)}getFloatingFilterCompDetails(t,i,n){return this.getCompDetails(t,aH,n,i)}getToolPanelCompDetails(t,i){return this.getCompDetails(t,lH,null,i,!0)}getStatusPanelCompDetails(t,i){return this.getCompDetails(t,cH,null,i,!0)}getMenuItemCompDetails(t,i){return this.getCompDetails(t,pH,"agMenuItem",i,!0)}getCompDetails(t,i,n,r,s=!1){let{propertyName:a,cellRenderer:c}=i,{compName:u,jsComp:v,fwComp:b,paramsFromSelector:x,popupFromSelector:D,popupPositionFromSelector:A}=tR.getCompKeys(this.frameworkOverrides,t,i,r),O,B=$=>{let ne=this.userComponentRegistry.retrieve(a,$);ne&&(v=ne.componentFromFramework?void 0:ne.component,b=ne.componentFromFramework?ne.component:void 0,O=ne.params)};if(u!=null&&B(u),v==null&&b==null&&n!=null&&B(n),v&&c&&!this.agComponentUtils.doesImplementIComponent(v)&&(v=this.agComponentUtils.adaptFunction(a,v)),!v&&!b){s&&Ye(`Could not find component ${u}, did you forget to configure this component?`);return}let L=this.mergeParamsWithApplicationProvidedParams(t,i,r,x,O),U=v==null,K=v||b;return{componentFromFramework:U,componentClass:K,params:L,type:i,popupFromSelector:D,popupPositionFromSelector:A,newAgStackInstance:()=>this.newAgStackInstance(K,U,L,i)}}static getCompKeys(t,i,n,r){let{propertyName:s}=n,a,c,u,v,b,x;if(i){let D=i,A=D[s+"Selector"],O=A?A(r):null,B=L=>{typeof L=="string"?a=L:L!=null&&L!==!0&&(t.isFrameworkComponent(L)?u=L:c=L)};O?(B(O.component),v=O.params,b=O.popup,x=O.popupPosition):B(D[s])}return{compName:a,jsComp:c,fwComp:u,paramsFromSelector:v,popupFromSelector:b,popupPositionFromSelector:x}}newAgStackInstance(t,i,n,r){let s=r.propertyName,a=!i,c;if(a)c=new t;else{let v=this.componentMetadataProvider.retrieve(s);c=this.frameworkComponentWrapper.wrap(t,v.mandatoryMethodList,v.optionalMethodList,r)}let u=this.initComponent(c,n);return u==null?en.resolve(c):u.then(()=>c)}mergeParamsWithApplicationProvidedParams(t,i,n,r=null,s){let a=this.gos.getGridCommonParams();Mi(a,n),s&&Mi(a,s);let c=t,u=c&&c[i.propertyName+"Params"];if(typeof u=="function"){let v=u(n);Mi(a,v)}else typeof u=="object"&&Mi(a,u);return Mi(a,r),a}initComponent(t,i){if(this.createBean(t),t.init!=null)return t.init(i)}};function wc(e){let t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var fH=(()=>{let e=class tt{static register(i){tt.__register(i,!0,void 0)}static registerModules(i){tt.__registerModules(i,!0,void 0)}static __register(i,n,r){tt.runVersionChecks(i),r!==void 0?(tt.areGridScopedModules=!0,tt.gridModulesMap[r]===void 0&&(tt.gridModulesMap[r]={}),tt.gridModulesMap[r][i.moduleName]=i):tt.globalModulesMap[i.moduleName]=i,tt.setModuleBased(n)}static __unRegisterGridModules(i){delete tt.gridModulesMap[i]}static __registerModules(i,n,r){tt.setModuleBased(n),i&&i.forEach(s=>tt.__register(s,n,r))}static isValidModuleVersion(i){let[n,r]=i.version.split(".")||[],[s,a]=tt.currentModuleVersion.split(".")||[];return n===s&&r===a}static runVersionChecks(i){tt.currentModuleVersion||(tt.currentModuleVersion=i.version);let n=r=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${r} Please update all modules to the same version.`;if(i.version?tt.isValidModuleVersion(i)||Ye(n(`'${i.moduleName}' is version ${i.version} but the other modules are version ${tt.currentModuleVersion}.`)):Ye(n(`'${i.moduleName}' is incompatible.`)),i.validate){let r=i.validate();r.isValid||Ye(`${r.message}`)}}static setModuleBased(i){tt.moduleBased===void 0?tt.moduleBased=i:tt.moduleBased!==i&&(Ye("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),Ye("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){tt.isBundled=!0}static __assertRegistered(i,n,r){if(this.__isRegistered(i,r))return!0;let s;if(tt.isBundled)s=`AG Grid: unable to use ${n} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(tt.moduleBased||tt.moduleBased===void 0){let a=Object.entries(lM).find(([c,u])=>u===i)?.[0];s=`AG Grid: unable to use ${n} as the ${a} is not registered${tt.areGridScopedModules?` for gridId: ${r}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${a} } from '${i}';
    
    ModuleRegistry.registerModules([ ${a} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else s=`AG Grid: unable to use ${n} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return Ye(s),!1}static __isRegistered(i,n){return!!tt.globalModulesMap[i]||!!tt.gridModulesMap[n]?.[i]}static __getRegisteredModules(i){return[...$h(tt.globalModulesMap),...$h(tt.gridModulesMap[i]||{})]}static __getGridRegisteredModules(i){return $h(tt.gridModulesMap[i]??{})||[]}static __isPackageBased(){return!tt.moduleBased}};return e.globalModulesMap={},e.gridModulesMap={},e.areGridScopedModules=!1,e})(),br=fH,mH=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach(([t,i])=>{this.beans[t]=i}),e.beanClasses.forEach(t=>{let i=new t;i.beanName?this.beans[i.beanName]=i:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(i)}),e.derivedBeans?.forEach(t=>{let{beanName:i,bean:n}=t(this);this.beans[i]=n,this.createdBeans.push(n)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(i=>{i.preWireBeans?.(this.beans),i.wireBeans?.(this.beans)}),e.forEach(i=>i.preConstruct?.()),t&&e.forEach(t),e.forEach(i=>i.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},vH=class extends mH{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),br.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}};var iR=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(iR||{});var CH=class extends Z{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){let i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}getDragAndDropImageComponent(){let{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){let t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Ii(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){if(this.dragSource?.onDragStopped?.(),this.lastDropTarget?.onDragStop){let t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.clearDragAndDropProperties()}onDragCancel(){this.dragSource?.onDragCancelled?.(),this.lastDropTarget?.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){let i=this.getHorizontalDirection(e),n=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);let r=this.dropTargets.filter(a=>this.isMouseOnDropTarget(e,a)),s=this.findCurrentDropTarget(e,r);if(s!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,i,n,t),this.lastDropTarget!==null&&s===null&&this.dragSource?.onGridExit?.(this.dragItem),this.lastDropTarget===null&&s!==null&&this.dragSource?.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(s,e,i,n,t),s&&this.dragAndDropImageComp){let{comp:a,promise:c}=this.dragAndDropImageComp;a?a.setIcon(s.getIconName?s.getIconName():null):c.then(u=>{u&&u.setIcon(s.getIconName?s.getIconName():null)})}this.lastDropTarget=s}else if(s&&s.onDragging){let a=this.createDropTargetEvent(s,e,i,n,t);s.onDragging(a)}}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(let i of t){let{width:n,height:r,left:s,right:a,top:c,bottom:u}=i.getBoundingClientRect();if(n===0||r===0)return!1;let v=e.clientX>=s&&e.clientX<a,b=e.clientY>=c&&e.clientY<u;if(!v||!b)return!1}return!0}isMouseOnDropTarget(e,t){let i=this.getAllContainersFromDropTarget(t),n=!1;for(let a of i)if(this.allContainersIntersect(e,a)){n=!0;break}let{eElement:r,type:s}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(r)?!1:n&&t.isInterestedIn(s,r)}findCurrentDropTarget(e,t){let i=t.length;if(i===0)return null;if(i===1)return t[0];let r=Ec(this.gos).elementsFromPoint(e.clientX,e.clientY);for(let s of r)for(let a of t)if(D4(this.getAllContainersFromDropTarget(a)).indexOf(s)!==-1)return a;return null}enterDragTargetIfExists(e,t,i,n,r){if(e&&e.onDragEnter){let s=this.createDropTargetEvent(e,t,i,n,r);e.onDragEnter(s)}}leaveLastTargetIfExists(e,t,i,n){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){let s=this.createDropTargetEvent(this.lastDropTarget,e,t,i,n);this.lastDropTarget.onDragLeave(s)}let r=this.getDragAndDropImageComponent();r&&r.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){let i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:n}=e;return i.contains(n)}getHorizontalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,n,r){let s=e.getContainer(),a=s.getBoundingClientRect(),{dragItem:c,dragSource:u}=this,v=t.clientX-a.left,b=t.clientY-a.top;return this.gos.addGridCommonParams({event:t,x:v,y:b,vDirection:n,hDirection:i,dragSource:u,fromNudge:r,dragItem:c,dropZoneTarget:s})}positionDragAndDropImageComp(e){let t=this.getDragAndDropImageComponent();if(!t)return;let i=t.getGui(),r=i.getBoundingClientRect().height,s=fV()-2,a=mV()-2;if(!i.offsetParent)return;let u=zM(i.offsetParent),{clientY:v,clientX:b}=e,x=v-u.top-r/2,D=b-u.left-10,A=Ot(this.gos),O=A.defaultView||window,B=O.pageYOffset||A.documentElement.scrollTop,L=O.pageXOffset||A.documentElement.scrollLeft;s>0&&D+i.clientWidth>s+L&&(D=s+L-i.clientWidth),D<0&&(D=0),a>0&&x+i.clientHeight>a+B&&(x=a+B-i.clientHeight),x<0&&(x=0),i.style.left=`${D}px`,i.style.top=`${x}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){let{comp:e}=this.dragAndDropImageComp;if(e){let t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){let{dragSource:e}=this;if(!e)return;let i=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:i},i.then(n=>{!n||!this.isAlive()||(this.processDragAndDropImageComponent(n),this.dragAndDropImageComp.comp=n)})}processDragAndDropImageComponent(e){let{dragSource:t,mouseEventService:i,environment:n}=this;if(!t)return;let r=e.getGui();r.style.setProperty("position","absolute"),r.style.setProperty("z-index","9999"),i.stampTopLevelGridCompWithGridInstance(r),n.applyThemeClasses(r),e.setIcon(null);let{dragItemName:s}=t;nw(s)&&(s=s()),e.setLabel(s||""),r.style.top="20px",r.style.left="20px";let a=Ot(this.gos),c=null,u=null;try{c=a.fullscreenElement}catch{}finally{c||(c=Ec(this.gos));let v=c.querySelector("body");v?u=v:c instanceof ShadowRoot?u=c:c instanceof Document?u=c?.documentElement:u=c}this.dragAndDropImageParent=u,u?u.appendChild(r):ee("Could not find document body, it is needed for drag and drop.")}},wH=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){let i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;let n=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=e.clientX<n.left+r,this.tickRight=e.clientX>n.right-r,this.tickUp=e.clientY<n.top+r&&!i,this.tickDown=e.clientY>n.bottom-r&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};var yH=class extends Z{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){It(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{let t=e.gridBodyCtrl;this.autoScrollService=new wH({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>t.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){return!!(this.funcColsService.getRowGroupColumns().length||this.filterManager?.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let n=[...this.selectionService.getSelectedNodes()].sort((r,s)=>r.rowIndex==null||s.rowIndex==null?0:this.getRowIndexNumber(r)-this.getRowIndexNumber(s));if(n.indexOf(t)!==-1)return n}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){let{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;let t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){let i=this.isFromThisGrid(e),n=this.gos.get("rowDragManaged"),r=e.dragItem.rowNodes;n&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(r[0],t):this.moveRows(r,t))}getRowIndexNumber(e){let t=e.getRowIndexString();return parseInt(Ue(t.split("-")),10)}moveRowAndClearHighlight(e){let t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===1,n=this.mouseEventService.getNormalisedPosition(e).y,r=e.dragItem.rowNodes,s=i?1:0;if(this.isFromThisGrid(e))r.forEach(a=>{a.rowTop<n&&(s-=1)}),this.moveRows(r,n,s);else{let a=Ga(this.gos),c=this.clientSideRowModel.getRowIndexAtPixel(n)+1;this.clientSideRowModel.getHighlightPosition(n)===0&&c--,this.clientSideRowModel.updateRowData({add:r.filter(u=>!this.clientSideRowModel.getRowNode(a?.({data:u.data,level:0,rowPinned:u.rowPinned})??u.data.id)).map(u=>u.data),addIndex:c})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){ee("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){ee("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=n=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",n))}),e.onDragLeave&&(t.onDragLeave=n=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",n))}),e.onDragging&&(t.onDragging=n=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",n))}),e.onDragStop&&(t.onDragStop=n=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",n))}),e.onDragCancel&&(t.onDragCancel=n=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",n))}));let i=q({isInterestedIn:n=>n===2,getIconName:()=>"move",external:!0},t);this.dragAndDropService.addDropTarget(i),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(i))}getRowDropZone(e){let t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),r=this.onDragging.bind(this),s=this.onDragStop.bind(this),a=this.onDragCancel.bind(this),c;return e?c={getContainer:t,onDragEnter:e.onDragEnter?u=>{i(u),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",u))}:i,onDragLeave:e.onDragLeave?u=>{n(u),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",u))}:n,onDragging:e.onDragging?u=>{r(u),e.onDragging(this.draggingToRowDragEvent("rowDragMove",u))}:r,onDragStop:e.onDragStop?u=>{s(u),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",u))}:s,onDragCancel:e.onDragCancel?u=>{a(u),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",u))}:a,fromGrid:!0}:c={getContainer:t,onDragEnter:i,onDragLeave:n,onDragging:r,onDragStop:s,onDragCancel:a,fromGrid:!0},c}draggingToRowDragEvent(e,t){let i=this.mouseEventService.getNormalisedPosition(t).y,n=i>this.pageBoundsService.getCurrentPageHeight(),r=-1,s;n||(r=this.rowModel.getRowIndexAtPixel(i),s=this.rowModel.getRow(r));let a;switch(t.vDirection){case 1:a="down";break;case 0:a="up";break;default:a=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:r,overNode:s,y:i,vDirection:a})}dispatchGridEvent(e,t){let i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},bH=class extends Z{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){let t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){let n=e.touchStartListener;t.removeEventListener("touchstart",n,{passive:!0})}}removeDragSource(e){let t=this.dragSources.find(i=>i.dragSource===e);t&&(this.removeListener(t),Ii(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){let t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:n,stopPropagationForTouch:r}=e;i.addEventListener("mousedown",t);let s=null,a=this.gos.get("suppressTouch");n&&!a&&(s=c=>{pw(c.target)||(r&&c.stopPropagation(),this.onTouchStart(e,c))},i.addEventListener("touchstart",s,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:s,touchEnabled:!!n})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;let i=t.touches[0];this.touchLastTime=i,this.touchStart=i;let n=u=>this.onTouchMove(u,e.eElement),r=u=>this.onTouchUp(u,e.eElement),s=u=>{u.cancelable&&u.preventDefault()},a=t.target,c=[{target:Ec(this.gos),type:"touchmove",listener:s,options:{passive:!1}},{target:a,type:"touchmove",listener:n,options:{passive:!0}},{target:a,type:"touchend",listener:r,options:{passive:!0}},{target:a,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(c),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){let i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let n=v=>this.onMouseMove(v,e.eElement),r=v=>this.onMouseUp(v,e.eElement),s=v=>v.preventDefault(),a=v=>{v.key===J.ESCAPE&&this.cancelDrag(e.eElement)},c=Ec(this.gos),u=[{target:c,type:"mousemove",listener:n},{target:c,type:"mouseup",listener:r},{target:c,type:"contextmenu",listener:s},{target:c,type:"keydown",listener:a}];this.addTemporaryEvents(u),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{let{target:i,type:n,listener:r,options:s}=t;i.addEventListener(n,r,s)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{let{target:i,type:n,listener:r,options:s}=t;i.removeEventListener(n,r,s)})})}isEventNearStartEvent(e,t){let{dragStartPixels:i}=this.currentDragParams,n=re(i)?i:4;return XM(e,t,n)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){let i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){ir()&&Ot(this.gos).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){let t=this.gos.get("enableCellTextSelection"),i=e.type==="mousemove";return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){return!!e.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventService.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},YC=class extends qe{constructor(e,t,i,n,r,s){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=r,this.suppressVisibilityChange=s,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(tn("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let e=this.gos.get("rowDragManaged")?new xH(this,this.beans,this.rowNode,this.column):new SH(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){let e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&ee("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){let t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:n=>{n?.preventDefault()}})[0]);let i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{let n=this.getDragItem(),r=n.rowNodes?.length||1,s=this.getRowDragText(this.column);return s?s(n,r):r===1?this.cellValueFn():`${r} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},nR=class extends Z{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){let t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,n=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),n=nw(this.column.getColDef().rowDrag)),n?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}},SH=class extends nR{constructor(e,t,i,n){super(e,i,n),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},xH=class extends nR{constructor(e,t,i,n){super(e,i,n),this.beans=t}postConstruct(){let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),n=this.gos.get("suppressRowDrag"),r=this.beans.dragAndDropService.hasExternalDropZones(),s=i&&!r||n;this.setDisplayedOrVisible(s)}},EH=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),DH=(()=>{let e=class Cs{constructor(i){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Cs.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=i}setData(i){this.setDataCommon(i,!1)}updateData(i){this.setDataCommon(i,!0)}setDataCommon(i,n){let r=this.data;this.data=i,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let s=this.createDataChangedEvent(i,r,n);this.localEventService?.dispatchEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(i,n,r){return{type:"dataChanged",node:this,oldData:n,newData:i,update:r}}getRowIndexString(){return this.rowIndex==null?(Ye("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?Cs.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?Cs.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let i=new Cs(this.beans);return i.id=this.id,i.data=this.data,i.__daemon=!0,i.selected=this.selected,i.level=this.level,i}setDataAndId(i,n){let r=re(this.id)?this.createDaemonNode():null,s=this.data;this.data=i,this.updateDataOnDetailNode(),this.setId(n),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,r);let a=this.createDataChangedEvent(i,s,!1);this.localEventService?.dispatchEvent(a)}checkRowSelectable(){let i=rw(this.beans.gos);this.setRowSelectable(i?i(this):!0)}setRowSelectable(i,n){if(this.selectable!==i){if(this.selectable=i,this.dispatchRowEvent("selectableChanged"),n)return;if(Co(this.beans.gos)){let s=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:s??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(i){let n=Ga(this.beans.gos);if(n)if(this.data){let r=this.parent?.getRoute()??[];this.id=n({data:this.data,parentKeys:r.length>0?r:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Cs.ID_PREFIX_ROW_GROUP)&&Ye(`Row IDs cannot start with ${Cs.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=i}setRowTop(i){this.oldRowTop=this.rowTop,this.rowTop!==i&&(this.rowTop=i,this.dispatchRowEvent("topChanged"),this.setDisplayed(i!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(i){this.hovered=i}isHovered(){return this.hovered}setMaster(i){this.master!==i&&(this.master&&!i&&(this.expanded=!1),this.master=i,this.dispatchRowEvent("masterChanged"))}setGroup(i){this.group!==i&&(this.group&&!i&&(this.expanded=!1),this.group=i,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(i,n=!1){this.rowHeight=i,this.rowHeightEstimated=n,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(i,n){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[n.getId()]=i,i!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Ri(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let i=!1,n=!0,r=0,s=this.__autoHeights;if(s==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(u=>{let v=s[u.getId()];if(v==null)if(this.beans.columnModel.isColSpanActive()){let b=[];switch(u.getPinned()){case"left":b=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":b=this.beans.visibleColsService.getRightColsForRow(this);break;case null:b=this.beans.columnViewportService.getColsWithinViewport(this);break}if(b.includes(u)){i=!0;return}v=-1}else{i=!0;return}else n=!1;v>r&&(r=v)}),i)||((n||r<10)&&(r=bs(this.beans.gos,this).height),r==this.rowHeight))return;this.setRowHeight(r),this.beans.rowModel.onRowHeightChangedDebounced?.()}setExpanded(i,n,r){if(this.expanded===i)return;this.expanded=i,this.dispatchRowEvent("expandedChanged");let s=ue(q({},this.createGlobalRowEvent("rowGroupOpened")),{expanded:i,event:n||null});this.beans.rowNodeEventThrottle.dispatchExpanded(s,r),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(i){return this.beans.gos.addGridCommonParams({type:i,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(i,n,r){let a=typeof i!="string"?i:this.beans.columnModel.getCol(i)??this.beans.columnModel.getColDefCol(i),c=this.beans.valueService.getValueForDisplay(a,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:a,colDef:a.getColDef(),data:this.data,node:this,oldValue:c,newValue:n,value:n,source:r}),!1;let u=this.beans.valueService.setValue(this,a,n,r);return this.dispatchCellChangedEvent(a,n,c),this.checkRowSelectable(),u}setGroupValue(i,n){let r=this.beans.columnModel.getCol(i);Ge(this.groupData)&&(this.groupData={});let s=r.getColId(),a=this.groupData[s];a!==n&&(this.groupData[s]=n,this.dispatchCellChangedEvent(r,n,a))}setAggData(i){let n=this.aggData;if(this.aggData=i,this.localEventService){let r=s=>{let a=this.aggData?this.aggData[s]:void 0,c=n?n[s]:void 0;if(a===c)return;let u=this.beans.columnModel.getCol(s);u&&this.dispatchCellChangedEvent(u,a,c)};for(let s in n)r(s);for(let s in i)(!n||!(s in n))&&r(s)}}updateHasChildren(){let i=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(Mr(this.beans.gos)){let r=this.beans.gos.get("treeData"),s=this.beans.gos.get("isServerSideGroup");i=!this.stub&&!this.footer&&(r?!!s&&s(this.data):!!this.group)}i!==this.__hasChildren&&(this.__hasChildren=!!i,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(i,n,r){let s={type:"cellChanged",node:this,column:i,newValue:n,oldValue:r};this.localEventService?.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(i){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(n=>n.depthFirstSearch(i)),i(this)}calculateSelectedFromChildren(){let i=!1,n=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let r=0;r<this.childrenAfterGroup.length;r++){let s=this.childrenAfterGroup[r],a=s.isSelected();if(!s.selectable){let c=s.calculateSelectedFromChildren();if(c===null)continue;a=c}switch(a){case!0:i=!0;break;case!1:n=!0;break;default:return}}if(!(i&&n))return i?!0:n?!1:this.selectable?this.selected:null}setSelectedInitialValue(i){this.selected=i}dispatchRowEvent(i){this.localEventService?.dispatchEvent({type:i,node:this})}selectThisNode(i,n,r="api"){let s=!this.selectable&&i,a=this.selected===i;if(s||a)return!1;this.selected=i,this.dispatchRowEvent("rowSelected");let c=this.sibling;return c&&c.footer&&c.localEventService&&c.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent(ue(q({},this.createGlobalRowEvent("rowSelected")),{event:n||null,source:r})),!0}setSelected(i,n=!1,r="api"){if(typeof r=="boolean"){ee("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:i,clearSelection:n,rangeSelect:!1,source:r})}setSelectedParams(i){return this.rowPinned?(ee("cannot select pinned rows"),0):this.id===void 0?(ee("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(ue(q({},i),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return!!this.rowPinned}addEventListener(i,n){this.localEventService||(this.localEventService=new Ha),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new lw(this.beans.frameworkOverrides));let r=this.frameworkEventListenerService?.wrap(n)??n;this.localEventService.addEventListener(i,r)}removeEventListener(i,n){if(!this.localEventService)return;let r=this.frameworkEventListenerService?.unwrap(n)??n;this.localEventService.removeEventListener(i,r),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(ee("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;let i=this.beans.gos.getCallback("isFullWidthRow");return i?i({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;let i=[],n=this;for(;n&&n.key!=null;)i.push(n.key),n=n.parent;return i.reverse()}createFooter(){if(this.sibling)return;let i=new Cs(this.beans);Object.keys(this).forEach(n=>{EH.has(n)||(i[n]=this[n])}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(i){this.firstChild!==i&&(this.firstChild=i,this.dispatchRowEvent("firstChildChanged"))}setLastChild(i){this.lastChild!==i&&(this.lastChild=i,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(i){this.childIndex!==i&&(this.childIndex=i,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(i){this.displayed!==i&&(this.displayed=i,this.dispatchRowEvent("displayedChanged"))}setDragging(i){this.dragging!==i&&(this.dragging=i,this.dispatchRowEvent("draggingChanged"))}setHighlighted(i){this.highlighted!==i&&(this.highlighted=i,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(i){this.allChildrenCount!==i&&(this.allChildrenCount=i,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(i){this.rowIndex!==i&&(this.rowIndex=i,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(i){this.uiLevel!==i&&(this.uiLevel=i,this.dispatchRowEvent("uiLevelChanged"))}};return e.ID_PREFIX_ROW_GROUP="row-group-",e.ID_PREFIX_TOP_PINNED="t-",e.ID_PREFIX_BOTTOM_PINNED="b-",e.OBJECT_ID_SEQUENCE=0,e})(),Er=DH,MH=class extends Z{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){let e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvancedFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",i=>this.setAdvancedFilterModel(i.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){VC(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:i,columns:n=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):en.resolve()).then(()=>{let r={source:t,type:"filterChanged",columns:n};i&&Mi(r,i),this.eventService.dispatchEvent(r),this.columnFilterService?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!VC(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService?.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return this.columnFilterService?.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){ee("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){this.columnFilterService?.setColDefPropertiesForDataType(e,t,i)}},RH=class extends qe{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??en.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:i}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(n=>{let r=n.getGui();re(r)||ee(`getGui method from filter returned ${r}; it should be a DOM element.`),this.appendChild(r),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(vi(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},rR="ag-resizer-wrapper",ms=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,IH=`<div class="${rR}">
        ${ms("eTopLeft","topLeft")}
        ${ms("eTop","top")}
        ${ms("eTopRight","topRight")}
        ${ms("eRight","right")}
        ${ms("eBottomRight","bottomRight")}
        ${ms("eBottom","bottom")}
        ${ms("eBottomLeft","bottomLeft")}
        ${ms("eLeft","left")}
    </div>`,TH=class extends Z{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){let{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(i,n)}initialisePosition(){if(this.positioned)return;let{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:n,minHeight:r,height:s,x:a,y:c}=this.config;this.offsetParent||this.setOffsetParent();let u=0,v=0,b=Ln(this.element);if(b){let x=this.findBoundaryElement(),D=window.getComputedStyle(x);if(D.minWidth!=null){let A=x.offsetWidth-this.element.offsetWidth;v=parseInt(D.minWidth,10)-A}if(D.minHeight!=null){let A=x.offsetHeight-this.element.offsetHeight;u=parseInt(D.minHeight,10)-A}}if(this.minHeight=r||u,this.minWidth=i||v,n&&this.setWidth(n),s&&this.setHeight(s),(!n||!s)&&this.refreshSize(),e)this.center();else if(a||c)this.offsetElement(a,c);else if(b&&t){let x=this.boundaryEl,D=!0;if(x||(x=this.findBoundaryElement(),D=!1),x){let A=parseFloat(x.style.top),O=parseFloat(x.style.left);D?this.offsetElement(isNaN(O)?0:O,isNaN(A)?0:A):this.setPosition(O,A)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let n=!!e[t],r=this.getResizerElement(t),s={dragStartPixels:0,eElement:r,onDragStart:a=>this.onResizeStart(a,t),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragService.addDragSource(s),this.resizeListeners.push(s),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[t]=n)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,i=this.element,n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Cc(i,e),e=GM(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let r=this.getAvailableHeight();r&&e>r&&(e=r)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Cc(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:i}=this.offsetParent;if(!i)return null;let n=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),s=e?this.position.y:n.top,a=e?0:r.top,c=0;if(t){let v=this.element.parentElement;if(v){let{bottom:b}=v.getBoundingClientRect();c=b-n.bottom}}return i+a-s-c}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:i}=this.config,n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)On(t,e),e=ng(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:r}=this.offsetParent,s=i?this.position.x:this.element.getBoundingClientRect().left;r&&e+s>r&&(e=r-s)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?On(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){let{forcePopupParentAsOffsetParent:i}=this.config,n=i?this.boundaryEl:this.element;n&&(this.popupService.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:i,isTop:n,anywhereWithin:r,topBuffer:s}=e,a=t.clientX-this.dragStartPosition.x,c=t.clientY-this.dragStartPosition.y,u=this.shouldSkipX(t,!!i,!!r,a)?0:a,v=this.shouldSkipY(t,!!n,s,c)?0:c;return{movementX:u,movementY:v}}shouldSkipX(e,t,i,n){let r=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.x:r.left,u=c<=0&&s.left>=e.clientX||s.right<=e.clientX&&s.right<=a.right;return u?!0:(t?u=n<0&&e.clientX>c+s.left||n>0&&e.clientX<c+s.left:i?u=n<0&&e.clientX>a.right||n>0&&e.clientX<c+s.left:u=n<0&&e.clientX>a.right||n>0&&e.clientX<a.right,u)}shouldSkipY(e,t,i=0,n){let r=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.y:r.top,u=c<=0&&s.top>=e.clientY||s.bottom<=e.clientY&&s.bottom<=a.bottom;return u?!0:(t?u=n<0&&e.clientY>c+s.top+i||n>0&&e.clientY<c+s.top:u=n<0&&e.clientY>a.bottom||n>0&&e.clientY<a.bottom,u)}createResizeMap(){let e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let e=this.element;if(!e)return;let i=new DOMParser().parseFromString(IH,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${rR}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:i,forcePopupParentAsOffsetParent:n}=this.config;!i&&!n&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,i=0;for(let n=0;n<e.length;n++){let r=e[n],s=!!r.style.flex&&r.style.flex!=="0 0 auto";if(r===this.element)continue;let a=this.minHeight||0,c=this.minWidth||0;if(s){let u=window.getComputedStyle(r);u.minHeight&&(a=parseInt(u.minHeight,10)),u.minWidth&&(c=parseInt(u.minWidth,10))}else a=r.offsetHeight,c=r.offsetWidth;t+=a,i+=c}return{height:t,width:i}}applySizeToSiblings(e){let t=null,i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){let r=i[n];r!==t&&(e?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:r,isBottom:s,isLeft:a}=this.currentResizer,c=r||a,u=s||n,{movementX:v,movementY:b}=this.calculateMouseMovement({e,isLeft:a,isTop:n}),x=this.position.x,D=this.position.y,A=0,O=0;if(c&&v){let B=a?-1:1,L=this.getWidth(),U=L+v*B,K=!1;a&&(A=L-U,(x+A<=0||U<=this.minWidth)&&(K=!0,A=0)),K||this.setWidth(U)}if(u&&b){let B=n?-1:1,L=this.getHeight(),U=L+b*B,K=!1;n?(O=L-U,(D+O<=0||U<=this.minHeight)&&(K=!0,O=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&L<U&&this.getMinSizeOfSiblings().height+U>this.element.parentElement.offsetHeight&&(K=!0),K||this.setHeight(U)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&A||O)&&this.offsetElement(x+A,D+O)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:i}=this.position,n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());let{movementX:r,movementY:s}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+r,i+s),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},FH=(()=>{let e=class sR extends Z{constructor(i,n={}){super(),this.eFocusableElement=i,this.callbacks=n,this.callbacks=q({shouldStopEventPropagation:()=>!1,onTabKeyDown:r=>{if(r.defaultPrevented)return;let s=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,r.shiftKey);s&&(s.focus(),r.preventDefault())}},n)}wireBeans(i){this.focusService=i.focusService}postConstruct(){this.eFocusableElement.classList.add(sR.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(i){this.addManagedElementListeners(i,{keydown:n=>{if(!(n.defaultPrevented||xr(n))){if(this.callbacks.shouldStopEventPropagation(n)){_a(n);return}n.key===J.TAB?this.callbacks.onTabKeyDown(n):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(n)}}})}};return e.FOCUS_MANAGED_CLASS="ag-focus-managed",e})(),yo=FH,oR={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function Sw(e,t){return lg(e)?(e.debounceMs!=null&&ee("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function lg(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var AH=class extends qe{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=ae,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new yo(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new TH(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);let i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=lg(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=lg(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){let{buttons:i,readOnly:n}=t??{},{buttons:r,readOnly:s}=e;if(n===s&&Sc(i,r))return;let a=r&&r.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(vi(this.eButtonsPanel),this.buttonListeners.forEach(v=>v()),this.buttonListeners=[]):a&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!a){this.eButtonsPanel&&gn(this.eButtonsPanel);return}let c=document.createDocumentFragment(),u=v=>{let b,x;switch(v){case"apply":b=this.translate("applyFilter"),x=O=>this.onBtApply(!1,!1,O);break;case"clear":b=this.translate("clearFilter"),x=()=>this.onBtClear();break;case"reset":b=this.translate("resetFilter"),x=()=>this.onBtReset();break;case"cancel":b=this.translate("cancelFilter"),x=O=>{this.onBtCancel(O)};break;default:ee("Unknown button type specified");return}let A=Tc(`<button
                    type="${v==="apply"?"submit":"button"}"
                    data-ref="${v}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${b}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(A,{click:x})),c.append(A)};r.forEach(v=>u(v)),this.eButtonsPanel.append(c),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let e=Sw(this.providedFilterParams,this.getDefaultDebounceMs()),t=Ri(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){let i=()=>{this.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let t=this.getModelFromUi();if(!this.isModelValid(t))return!1;let i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});let{closeOnApply:n}=this.providedFilterParams;n&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let t=e,i=t&&t.key,n;(i==="Enter"||i==="Space")&&(n={keyboardEvent:t}),this.hidePopup(n),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let i=this.isModelValid(this.getModelFromUi()),n=this.queryForHtmlElement('[data-ref="applyFilterButton"]');n&&Ic(n,!i)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;let t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:i,gos:n}=this;t?(i.restoreLastSize(),i.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){let t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,oR[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},PH=class extends ww{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},kH=class extends qe{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){let t=e.key;switch(t){case J.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let i=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(i)}break;case J.DOWN:case J.UP:e.preventDefault(),this.navigate(t);break;case J.PAGE_DOWN:case J.PAGE_UP:case J.PAGE_HOME:case J.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){let t=e===J.DOWN,i;if(!this.highlightedEl)i=this.itemEls[t?0:this.itemEls.length-1];else{let r=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);r=Math.min(Math.max(r,0),this.itemEls.length-1),i=this.itemEls[r]}this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;let t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,n=this.itemEls[0].clientHeight,r=Math.floor(this.getGui().clientHeight/n),s=-1;e===J.PAGE_HOME?s=0:e===J.PAGE_END?s=i:e===J.PAGE_DOWN?s=Math.min(t+r,i):e===J.PAGE_UP&&(s=Math.max(t-r,0)),s!==-1&&this.highlightItem(this.itemEls[s])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){let{value:t,text:i}=e,n=i||t;return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{gn(e)}),this.itemEls=[]}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{oV(t,i+1),sV(t,e.length)})}renderOption(e,t){let i=Ot(this.gos),n=i.createElement("div");Hi(n,"option"),n.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let r=i.createElement("span");n.appendChild(r),r.textContent=t,this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListeners(n,{mouseover:()=>this.highlightItem(n),mousedown:s=>{s.preventDefault(),s.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new za({getTooltipValue:()=>t,getGui:()=>n,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})),this.getGui().appendChild(n)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let i=this.options.findIndex(n=>n.value===e);if(i!==-1){let n=this.options[i];this.value=n.value,this.displayValue=n.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Ln(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),ig(this.highlightedEl,!0);let t=this.getGui(),{scrollTop:i,clientHeight:n}=t,{offsetTop:r,offsetHeight:s}=e;(r+s>i+n||r<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!Ln(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),ig(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},OH=class extends ZM{constructor(e){if(super(e,e?.template||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=ae,this.eWrapper=ae,this.eDisplayField=ae,this.eIcon=ae,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:r,maxPickerWidth:s}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!n,i!=null&&this.setPickerMaxHeight(i),r!=null&&this.setPickerMinWidth(r),s!=null&&this.setPickerMaxWidth(s)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:i,inputWidth:n}=this.config;if(i){let r=tn(i,this.gos);r&&this.eIcon.appendChild(r)}n!=null&&this.setInputWidth(n)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),tg(e,!1),this.ariaRole&&Hi(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case J.UP:case J.DOWN:case J.ENTER:case J.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case J.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:n,modalPicker:r=!0}=this.config,s={modal:r,eChild:e,closeOnEsc:!0,closedCallback:()=>{let D=hM(this.gos);this.beforeHidePicker(),D&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,n),anchorToElement:this.eWrapper};e.style.position="absolute";let a=this.popupService.addPopup(s),{maxPickerHeight:c,minPickerWidth:u,maxPickerWidth:v,variableWidth:b}=this;b?(u&&(e.style.minWidth=u),e.style.width=mw(ng(this.eWrapper)),v&&(e.style.maxWidth=v)):ag(e,v??ng(this.eWrapper));let x=c??`${fw(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",x),this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();tg(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return ag(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},xw=class extends OH{constructor(e){super(q({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new kH("select",!0)),this.listComponent.setParentComponent(this);let e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),gV(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){let{key:t}=e;switch(t===J.TAB&&this.hidePicker(),t){case J.ENTER:case J.UP:case J.DOWN:case J.PAGE_UP:case J.PAGE_DOWN:case J.PAGE_HOME:case J.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case J.ESCAPE:super.onKeyDown(e);break;case J.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;if(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let r=this.listComponent.getDisplayValue();return r==null&&this.config.placeholder&&(r=this.config.placeholder),this.eDisplayField.textContent=r,this.setTooltip({newTooltipText:r??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},LH={selector:"AG-SELECT",component:xw},aR=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;let t=[["displayKey"],["displayName"],["predicate","test"]],i=n=>n.some(r=>e[r]!=null)?!0:(ee(`ignoring FilterOptionDef as it doesn't contain one of '${n}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(n=>n===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){let t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:ee("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else ee("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},lR=class extends AH{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){let t=this.optionsFactory.getCustomOption(e);if(t){let{numberOfInputs:n}=t;return n??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{i===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;let i=!e.operator,n=!t.operator;if(!i&&n||i&&!n)return!1;let s;if(i){let a=e,c=t;s=this.areSimpleModelsEqual(a,c)}else{let a=e,c=t;s=a.operator===c.operator&&Es(a.conditions,c.conditions,(u,v)=>this.areSimpleModelsEqual(u,v))}return s}shouldRefresh(e){let t=this.getModel(),i=t?t.conditions??[t]:null,n=e.filterOptions?.map(s=>typeof s=="string"?s:s.displayKey)??this.getDefaultFilterOptions();return!(!(!i||i.every(s=>n.find(a=>a===s.type)!==void 0))||typeof e.maxNumConditions=="number"&&i&&i.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let i=e,n=i.conditions;n==null&&(n=[],ee("Filter model is missing 'conditions'"));let r=this.validateAndUpdateConditions(n),s=this.getNumConditions();if(r<s)this.removeConditionsAndOperators(r);else if(r>s)for(let c=s;c<r;c++)this.createJoinOperatorPanel(),this.createOption();let a=i.operator==="OR";this.eJoinOperatorsAnd.forEach(c=>c.setValue(!a,!0)),this.eJoinOperatorsOr.forEach(c=>c.setValue(a,!0)),n.forEach((c,u)=>{this.eTypes[u].setValue(c.type,!0),this.setConditionIntoUi(c,u)})}else{let i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),en.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),ee('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){let t=this.getModel();if(t==null)return!0;let{operator:i}=t,n=[];if(i){let s=t;n.push(...s.conditions??[])}else n.push(t);return n[i&&i==="OR"?"some":"every"](s=>this.individualConditionPasses(e,s))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new aR,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(ee('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(ee('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(ee('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let e=this.createManagedBean(new xw);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());let t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);let i=this.getNumConditions()-1;this.forEachPositionInput(i,n=>this.resetInput(n)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){let e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");let t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);let n=this.eJoinOperatorPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(t,n,r),this.resetJoinOperatorOr(i,n,r),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){let n=this.createManagedBean(new PH);return e.push(n),n.addCssClass("ag-filter-condition-operator"),n.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(n.getGui()),n}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){let e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);let n=e+1,r=i-n;r>0&&this.removeConditionsAndOperators(n,r),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((n,r)=>{let s=this.isConditionDisabled(r,e);n.setDisabled(s||this.filterListOptions.length<=1),r===1&&(Ic(this.eJoinOperatorPanels[0],s),this.eJoinOperatorsAnd[0].setDisabled(s),this.eJoinOperatorsOr[0].setDisabled(s))}),this.eConditionBodies.forEach((n,r)=>{St(n,this.isConditionBodyVisible(r))});let i=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(n=>{n.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach(n=>{n.setValue(i,!0)}),this.forEachInput((n,r,s,a)=>{this.setElementDisplayed(n,r<a),this.setElementDisabled(n,this.isConditionDisabled(s,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);let i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach(r=>gn(r))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach(r=>{gn(r.getGui()),this.destroyBean(r)})}removeItems(e,t,i){return i==null?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let t=this.getInputs(0)[0];if(!t)return;t instanceof uo&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,n=!1,r=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))t===-1&&(t=a,i=a);else{let c=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),u=a<t;(c||u)&&(this.removeConditionsAndOperators(a,1),n=!0,u&&i--)}let s=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),s=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),s=!0),s&&this.updateConditionStatusesAndValues(i,r),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(nw(this.filterPlaceholder)){let n=this.filterPlaceholder,r=this.eTypes[t].getValue(),s=this.translate(r);i=n({filterOptionKey:r,filterOption:s,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc();this.forEachInput((t,i,n,r)=>{if(!(t instanceof uo))return;let s=i===0&&r>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",a=i===0&&r>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(s,n)),t.setInputAriaLabel(a)})}setElementValue(e,t,i){e instanceof uo&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof qe&&St(e.getGui(),t)}setElementDisabled(e,t){e instanceof qe&&Ic(e.getGui(),t)}attachElementOnChange(e,t){e instanceof uo&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){let i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){let n=this.getNumberOfInputs(t),r=this.getInputs(e);for(let s=0;s<r.length;s++){let a=r[s];a!=null&&i(a,s,e,n)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){let t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOperatorsOr.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),en.resolve()}resetType(e){let i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,n,r){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${r}`).setLabel(n),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let i=this.mapValuesFromModel(e);this.forEachInput((n,r,s)=>{s===t&&this.setElementValue(n,i[r]!=null?i[r]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,n)=>{this.setElementValue(t,i===0&&n===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}individualConditionPasses(e,t){let i=this.getCellValue(e.node),n=this.mapValuesFromModel(t),r=this.optionsFactory.getCustomOption(t.type),s=this.evaluateCustomFilter(r,n,i);return s??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,i,t,e))}evaluateCustomFilter(e,t,i){if(e==null)return;let{predicate:n}=e;if(n!=null&&!t.some(r=>r==null))return n(t,i)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},cR=class extends lR{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){let n=this.comparator(),r=e[0]!=null?n(e[0],t):0;switch(i.type){case"equals":return r===0;case"notEqual":return r!==0;case"greaterThan":return r>0;case"greaterThanOrEqual":return r>=0;case"lessThan":return r<0;case"lessThanOrEqual":return r<=0;case"inRange":{let s=n(e[1],t);return this.scalarFilterParams.inRangeInclusive?r>=0&&s<=0:r>0&&s<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return ee('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},NH=65,_H=67,BH=86,VH=68,HH=90,GH=89;function dR(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function XC(e,t,i,n,r){let s=n?n.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;let a=e.addGridCommonParams({event:t,editing:r,column:n,node:i,data:i.data,colDef:n.getColDef()});return!!(s&&s(a))}function zH(e,t,i,n){let r=n.getDefinition(),s=r&&r.suppressHeaderKeyboardEvent;if(!re(s))return!1;let a=e.addGridCommonParams({colDef:r,column:n,headerRowIndex:i,event:t});return!!s(a)}function WH(e){let{keyCode:t}=e,i;switch(t){case NH:i=J.A;break;case _H:i=J.C;break;case BH:i=J.V;break;case VH:i=J.D;break;case HH:i=J.Z;break;case GH:i=J.Y;break;default:i=e.code}return i}function jH(e,t=!1){return e===J.DELETE?!0:!t&&e===J.BACKSPACE?_M():!1}var bo=class extends uo{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=re(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{dR(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{let n=i.clipboardData?.getData("text");n&&n.split("").some(r=>!e.test(r))&&i.preventDefault()}})}},gg={selector:"AG-INPUT-TEXT-FIELD",component:bo},Ew=class extends bo{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{let r=parseFloat(this.eInput.value),s=isNaN(r)?"":this.normalizeValue(r.toString());this.value!==s&&this.setValue(s)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";let{precision:e,min:t,max:i,step:n}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof i=="number"&&this.setMax(i),typeof n=="number"&&this.setStep(n)}onWheel(e){xt(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));let t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){let n=parseFloat(e).toFixed(this.precision);return parseFloat(n).toString()}let i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,fn(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,fn(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,fn(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(re(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(!n){i=this.adjustPrecision(i);let r=this.normalizeValue(i);n=i!=r}if(n)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;let e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},UH={selector:"AG-INPUT-NUMBER-FIELD",component:Ew},uR=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],Dw=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;let t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){let n=e,s=(n.conditions??[]).map(c=>this.getModelAsString(c)),a=n.operator==="AND"?"andCondition":"orCondition";return s.join(` ${i(a,oR[a])} `)}else{if(e.type==="blank"||e.type==="notBlank")return i(e.type,e.type);{let n=e,r=this.optionsFactory.getCustomOption(n.type),{displayKey:s,displayName:a,numberOfInputs:c}=r||{};return s&&a&&c===0?(i(s,a),a):this.conditionToString(n,r)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},hR=class extends Dw{conditionToString(e,t){let{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function ZC(e){let{allowedCharPattern:t}=e??{};return t??null}var $H=class extends cR{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){let{filter:t,filterTo:i,type:n}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(n))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new hR(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return uR}setElementValue(e,t,i){let n=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,n)}createValueElement(){let e=ZC(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Hi(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){let r=this.createManagedBean(n?new bo({allowedCharPattern:n}):new Ew);r.addCssClass(`ag-filter-${i}`),r.addCssClass("ag-filter-filter"),t.push(r),e.appendChild(r.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){let t=[];return this.forEachPositionInput(e,(i,n,r,s)=>{n<s&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=Sr(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){let t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},gR=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],pR=class extends Dw{conditionToString(e,t){let{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function fR(e){let t=e&&e.trim();return t===""?e:t}var qH=class extends lR{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{let n=t.lastIndexOf(i);return n>=0&&n===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new pR(this.localeService,this.optionsFactory)}getTextMatcher(){let e=this.textFilterParams.textCustomComparator;return e?(ee("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:i,filterText:n})=>e(t,i,n)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){let t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},n=this.getValuesWithSideEffects(e,!0);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){let i=[];return this.forEachPositionInput(e,(n,r,s,a)=>{if(r<a){let c=Sr(n.getValue());t&&this.textFilterParams.trimInput&&(c=fR(c)??null,n.setValue(c,!0)),i.push(c)}}),i}getDefaultFilterOptions(){return gR}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),Hi(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){let n=this.createManagedBean(new bo);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){let{filter:t,filterTo:i,type:n}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(n))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,n){let r=e.map(D=>this.formatter(D))||[],s=this.formatter(t),{api:a,colDef:c,column:u,context:v,textFormatter:b}=this.textFilterParams;if(i.type==="blank")return this.isBlank(t);if(i.type==="notBlank")return!this.isBlank(t);let x={api:a,colDef:c,column:u,context:v,node:n.node,data:n.data,filterOption:i.type,value:s,textFormatter:b};return r.some(D=>this.matcher(ue(q({},x),{filterText:D})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function mR(e){if(typeof e=="number")return e;if(typeof e=="string"){let t=parseInt(e);return isNaN(t)?void 0:t}}function Qn(e,t=Number.MAX_VALUE){return i=>{let n=mR(i);if(!(n==null||n<e||n>t))return n}}function yc(e,t){return e.toString().padStart(t,"0")}function KH(e,t){let i=[];for(let n=e;n<=t;n++)i.push(n);return i}function YH(e,t,i){return typeof e!="number"?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function mn(e,t=!0,i="-"){if(!e)return null;let n=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(r=>yc(r,2)).join(i);return t&&(n+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(r=>yc(r,2)).join(":")),n}var TC=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function bc(e,t="YYYY-MM-DD"){let i=yc(e.getFullYear(),4),n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>n[e.getMonth()],MMM:()=>n[e.getMonth()].slice(0,3),MM:()=>yc(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${TC(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${TC(e.getDate())}`,DD:()=>yc(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>r[e.getDay()],ddd:()=>r[e.getDay()].slice(0,3),dd:()=>r[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${TC(e.getDay())}`,d:()=>`${e.getDay()}`},a=new RegExp(Object.keys(s).join("|"),"g");return t.replace(a,c=>c in s?s[c]():c)}function Vi(e){if(!e)return null;let[t,i]=e.split(" ");if(!t)return null;let n=t.split("-").map(x=>parseInt(x,10));if(n.filter(x=>!isNaN(x)).length!==3)return null;let[r,s,a]=n,c=new Date(r,s-1,a);if(c.getFullYear()!==r||c.getMonth()!==s-1||c.getDate()!==a)return null;if(!i||i==="00:00:00")return c;let[u,v,b]=i.split(":").map(x=>parseInt(x,10));return u>=0&&u<24&&c.setHours(u),v>=0&&v<60&&c.setMinutes(v),b>=0&&b<60&&c.setSeconds(b),c}var vR=class{constructor(e,t,i,n,r){this.alive=!0,this.context=e,this.eParent=n,t.getDateCompDetails(i).newAgStackInstance().then(c=>{if(!this.alive){e.destroyBean(c);return}this.dateComp=c,c&&(n.appendChild(c.getGui()),c.afterGuiAttached&&c.afterGuiAttached(),this.tempValue&&c.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),r?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){St(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;this.dateComp?.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&this.dateComp?.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&ee("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},CR=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],wR=class extends Dw{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){let{type:i}=e,{numberOfInputs:n}=t||{},r=i=="inRange"||n===2,s=Vi(e.dateFrom),a=Vi(e.dateTo),c=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(r){let u=s!==null?bc(s,c):"null",v=a!==null?bc(a,c):"null";return`${u}-${v}`}return s!=null?bc(s,c):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},$D=1e3,qD=1/0,XH=class extends cR{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=$D,this.maxValidYear=qD,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:t,dateTo:i,type:n}=e||{};return[t&&Vi(t)||null,i&&Vi(i)||null].slice(0,this.getNumberOfInputs(n))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){let i=t;return t==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);let t=(i,n)=>{if(e[i]!=null)if(isNaN(e[i]))ee(`DateFilter ${i} is not a number`);else return e[i]==null?n:Number(e[i]);return n};this.minValidYear=t("minValidYear",$D),this.maxValidYear=t("maxValidYear",qD),this.minValidYear>this.maxValidYear&&ee("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Vi(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Vi(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&ee("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new wR(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){let t=new vR(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return CR}createValueElement(){let t=Ot(this.gos).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,i,n){let s=Ot(this.gos).createElement("div");s.classList.add(`ag-filter-${n}`),s.classList.add(`ag-filter-date-${n}`),t.push(s),e.appendChild(s),i.push(this.createDateCompWrapper(s))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(r=>r.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,n,r,s)=>{r!==e||!t||n>=s||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){let t=this.getConditionType(e),i={},n=this.getValues(e);return n.length>0&&(i.dateFrom=mn(n[0])),n.length>1&&(i.dateTo=mn(n[1])),q({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},i)}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(n=>{n.setInputPlaceholder(t),n.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(i,n,r,s)=>{n<s&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},Mw=class extends Z{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=n,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?Ue(this.colsSpanning):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let e=this.beans.gos.get("suppressColumnMoveAnimation"),t=re(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),n=this.modifyLeftForPrintLayout(e,i),r=this.modifyLeftForPrintLayout(e,t);this.setLeft(n),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===r&&this.setLeft(r)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!li(this.beans.gos,"print")||e.getPinned()==="left")return t;let n=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){let r=this.beans.visibleColsService.getBodyContainerWidth();return n+r+t}return n+t}setLeft(e){if(re(e)&&(this.eCell.style.left=`${e}px`),Nt(this.columnOrGroup)){let t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&dV(this.ariaEl,t.length)}}},ZH="ag-column-first",QH="ag-column-last";function yR(e,t,i,n){return Ge(e)?[]:e8(e.headerClass,e,t,i,n)}function bR(e,t,i){e.addOrRemoveCssClass(ZH,i.isColAtEdge(t,"first")),e.addOrRemoveCssClass(QH,i.isColAtEdge(t,"last"))}function JH(e,t,i,n){return t.addGridCommonParams({colDef:e,column:i,columnGroup:n})}function e8(e,t,i,n,r){if(Ge(e))return[];let s;if(typeof e=="function"){let a=JH(t,i,n,r);s=e(a)}else s=e;return typeof s=="string"?[s]:Array.isArray(s)?[...s]:[]}var t8=0,i8=(()=>{let e=class SR extends Z{constructor(i,n,r){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=i,this.parentRowCtrl=r,this.beans=n,this.instanceId=i.getUniqueId()+"-"+t8++}wireBeans(i){this.pinnedWidthService=i.pinnedWidthService,this.focusService=i.focusService,this.userComponentFactory=i.userComponentFactory,this.ctrlsService=i.ctrlsService,this.dragAndDropService=i.dragAndDropService,this.menuService=i.menuService}postConstruct(){let i=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],i),this.addManagedEventListeners({overlayExclusiveChanged:i})}shouldStopEventPropagation(i){let{headerRowIndex:n,column:r}=this.focusService.getFocusedHeader();return zH(this.gos,i,n,r)}getWrapperHasFocus(){return xt(this.gos)===this.eGui}setGui(i,n){this.eGui=i,this.addDomData(n),n.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),n.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(i){let{wrapperElement:n,checkMeasuringCallback:r,compBean:s}=i,{animationFrameService:a,resizeObserverService:c,columnModel:u,gos:v}=this.beans,b=L=>{if(!this.isAlive()||!s.isAlive())return;let{paddingTop:U,paddingBottom:K,borderBottomWidth:$,borderTopWidth:ne}=wo(this.getGui()),G=U+K+$+ne,N=n.offsetHeight+G;if(L<5){let Y=Ot(v),se=!Y||!Y.contains(n),pe=N==0;if(se||pe){a.requestAnimationFrame(()=>b(L+1));return}}u.setColHeaderHeight(this.column,N)},x=!1,D,A=()=>{let L=this.column.isAutoHeaderHeight();L&&!x&&O(),!L&&x&&B()},O=()=>{x=!0,b(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),D=c.observeResize(n,()=>b(0))},B=()=>{x=!1,D&&D(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),D=void 0};A(),s.addDestroyFunc(()=>B()),s.addManagedListeners(this.column,{widthChanged:()=>x&&b(0)}),s.addManagedEventListeners({sortChanged:()=>{x&&window.setTimeout(()=>b(0))}}),r&&r(A)}onDisplayedColumnsChanged(){let{comp:i,column:n,beans:r,eGui:s}=this;!i||!n||!s||(bR(i,n,r.visibleColsService),LM(s,r.visibleColsService.getAriaColIndex(n)))}addResizeAndMoveKeyboardListeners(i){this.resizeFeature&&i.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){let i=this.focusService.isHeaderFocusSuppressed();this.eGui&&fn(this.eGui,"tabindex",i?null:"-1")}onGuiKeyDown(i){let n=xt(this.gos),r=i.key===J.LEFT||i.key===J.RIGHT;if(this.isResizing&&(i.preventDefault(),i.stopImmediatePropagation()),n!==this.eGui||!i.shiftKey&&!i.altKey||((this.isResizing||r)&&(i.preventDefault(),i.stopImmediatePropagation()),!r))return;let s=i.key===J.LEFT!==this.gos.get("enableRtl"),a=iR[s?"Left":"Right"];if(i.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let c=this.getViewportAdjustedResizeDiff(i);this.resizeHeader(c,i.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(a)}getViewportAdjustedResizeDiff(i){let n=this.getResizeDiff(i);if(this.column.getPinned()){let s=this.pinnedWidthService.getPinnedLeftWidth(),a=this.pinnedWidthService.getPinnedRightWidth(),c=Pc(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(s+a+n>c)if(c>s+a)n=c-s-a;else return 0}return n}getResizeDiff(i){let n=i.key===J.LEFT!==this.gos.get("enableRtl"),r=this.column.getPinned(),s=this.gos.get("enableRtl");return r&&s!==(r==="right")&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(i){let n=this.getWrapperHasFocus();switch(i.key){case J.PAGE_DOWN:case J.PAGE_UP:case J.PAGE_HOME:case J.PAGE_END:n&&i.preventDefault()}}addDomData(i){let n=SR.DOM_DATA_KEY_HEADER_CTRL;vo(this.gos,this.eGui,n,this),i.addDestroyFunc(()=>vo(this.gos,this.eGui,n,null))}getGui(){return this.eGui}focus(i){return this.eGui?(this.lastFocusEvent=i||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(i,n,r){let s=i??n;this.gos.get("preventDefaultOnContextMenu")&&s.preventDefault(),this.menuService.isHeaderContextMenuEnabled(r)&&this.menuService.showHeaderContextMenu(r,i,n),this.dispatchColumnMouseEvent("columnHeaderContextMenu",r)}dispatchColumnMouseEvent(i,n){this.eventService.dispatchEvent({type:i,column:n})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};return e.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",e})(),pg=i8,Rw=class extends Z{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},n8=class extends pg{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,n,r){this.comp=e,r=Ac(this,this.beans.context,r),this.eButtonShowMainFilter=i,this.eFloatingFilterBody=n,this.setGui(t,r),this.setupActive(),this.setupWidth(r),this.setupLeft(r),this.setupHover(r),this.setupFocus(r),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(r),this.setupUi(),r.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(r),r.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(r)}),r.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){let e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=tn("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new yo(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.localeService.getLocaleTextFunc();Ba(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(xt(this.gos)===this.eGui)return;let n=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(n){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),n.focus();return}let r=this.findNextColumnWithFloatingFilter(e.shiftKey);r&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:r},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleColsService,i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case J.UP:case J.DOWN:t||e.preventDefault();case J.LEFT:case J.RIGHT:if(t)return;e.stopPropagation();case J.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case J.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),n=!!e.relatedTarget&&Oa(e.relatedTarget,"ag-floating-filter");if(i&&n&&e.target===this.eGui){let s=this.lastFocusEvent,a=!!(s&&s.key===J.TAB);if(s&&a){let c=s.shiftKey;this.focusService.focusInto(this.eGui,c)}}let r=this.getRowIndex();this.beans.focusService.setFocusedHeader(r,this.column)}setupHover(e){e.createManagedBean(new Rw([this.column],this.eGui));let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){let t=new Mw(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;let{filterManager:t}=this.beans,i=n=>{if(n?.source==="filterDestroyed"&&!this.isAlive())return;let r=this.comp.getFloatingFilterComp();r&&r.then(s=>{if(s){let a=t?.getCurrentFloatingFilterParentModel(this.column),c=n?ue(q({},n),{columns:n.columns??[],source:n.source==="api"?"api":"columnFilter"}):null;s.onParentModelChanged(a,c)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t?.isFilterActive(this.column)&&i(null)}setupWidth(e){let t=()=>{let i=`${this.column.getActualWidth()}px`;this.comp.setWidth(i)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){let t=this.active;this.setupActive();let i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let n=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,r=this.comp.getFloatingFilterComp();!r||!n?this.updateCompDetails(e,n,i):r.then(s=>{!s||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(e,n,i):this.updateFloatingFilterParams(n)})}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;let t=e.params;this.comp.getFloatingFilterComp()?.then(i=>{let n=!1;i?.refresh&&typeof i.refresh=="function"&&i.refresh(t)!==null&&(n=!0),!n&&i?.onParamsUpdated&&typeof i.onParamsUpdated=="function"&&i.onParamsUpdated(t)!==null&&ee("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};var De="32.3.3";function r8(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()}function s8(e,t,i){return e.filterManager?.getFilterInstance(t,i)}function o8(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function a8(e,t){let i=e.columnModel.getColDefCol(t);if(i)return e.filterManager?.destroyFilter(i,"api")}function l8(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function c8(e){return e.filterManager?.getFilterModel()??{}}function d8(e,t){return e.filterManager?.getColumnFilterModel(t)??null}function u8(e,t,i){return e.filterManager?.setColumnFilterModel(t,i)??Promise.resolve()}function h8(e,t){let i=e.columnModel.getCol(t);if(!i){Ye(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function g8(e,t,i){if(t==null)return null;let n=null,{compName:r,jsComp:s,fwComp:a}=eR.getCompKeys(e,t,bw);return r?n={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[r]:s==null&&a==null&&t.filter===!0&&(n=i()),n}var KD={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},YD=["january","february","march","april","may","june","july","august","september","october","november","december"],p8=class extends Z{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel=q({},this.gos.get("initialState")?.filter?.filterModel??{})}setFilterModel(e,t="api"){if(this.dataTypeService?.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}let i=[],n=this.getFilterModel(!0);if(e){let r=new Set(Object.keys(e));this.allColumnFilters.forEach((s,a)=>{let c=e[a];i.push(this.setModelOnFilterWrapper(s.filterPromise,c)),r.delete(a)}),r.forEach(s=>{let a=this.columnModel.getColDefCol(s)||this.columnModel.getCol(s);if(!a){ee("setFilterModel() - no column found for colId: "+s);return}if(!a.isFilterAllowed()){ee("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+s);return}let c=this.getOrCreateFilterWrapper(a);if(!c){ee("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+s);return}i.push(this.setModelOnFilterWrapper(c.filterPromise,e[s]))})}else this.allColumnFilters.forEach(r=>{i.push(this.setModelOnFilterWrapper(r.filterPromise,null))});en.all(i).then(()=>{let r=this.getFilterModel(!0),s=[];this.allColumnFilters.forEach((a,c)=>{let u=n?n[c]:null,v=r?r[c]:null;Sc(u,v)||s.push(a.column)}),s.length>0&&this.filterManager?.onFilterChanged({columns:s,source:t})})}setModelOnFilterWrapper(e,t){return new en(i=>{e.then(n=>{typeof n.setModel!="function"&&(ee("filter missing setModel method, which is needed for setFilterModel"),i()),(n.setModel(t)||en.resolve()).then(()=>i())})})}getFilterModel(e){let t={},{allColumnFilters:i,initialFilterModel:n}=this;return i.forEach((r,s)=>{let a=this.getModelFromFilterWrapper(r);re(a)&&(t[s]=a)}),e||Object.entries(n).forEach(([r,s])=>{re(s)&&!i.has(r)&&this.columnModel.getCol(r)?.isFilterAllowed()&&(t[r]=s)}),t}getModelFromFilterWrapper(e){let{filter:t}=e;return t?typeof t.getModel!="function"?(ee("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){let e=s=>s?s.isFilterActive?s.isFilterActive():(ee("Filter is missing isFilterActive() method"),!1):!1,t=!!VC(this.gos),i=s=>{if(!s.isPrimary())return!0;let c=!this.columnModel.isPivotActive();return!s.isValueActive()||!c?!1:this.columnModel.isPivotMode()?!0:t},n=[],r=[];return this.forEachColumnFilter((s,a)=>{e(s)&&(i(a.column)?n.push(s):r.push(s))}).then(()=>{this.activeAggregateFilters=n,this.activeColumnFilters=r})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((i,n)=>n.column.setFilterActive(i.isFilterActive(),e,t))}forEachColumnFilter(e){return en.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(i=>e(i,t))))}doColumnFiltersPass(e,t,i){let{data:n,aggData:r}=e,s=i?this.activeAggregateFilters:this.activeColumnFilters,a=i?r:n;for(let c=0;c<s.length;c++){let u=s[c];if(!(u==null||u===t)){if(typeof u.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!u.doesFilterPass({node:e,data:a}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){let t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){let{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(n=>{n.filterPromise&&n.filterPromise.then(r=>{r&&r!==t&&r.onAnyFilterChanged&&r.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{let n=i?this.columnModel.getCol(i):e;return n?this.valueService.getValue(n,t,!0):void 0}}isFilterActive(e){let{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(yC(this.gos))t="agSetColumnFilter";else{let i=this.dataTypeService?.getBaseDataType(e);i==="number"?t="agNumberColumnFilter":i==="date"||i==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(yC(this.gos))t="agSetColumnFloatingFilter";else{let i=this.dataTypeService?.getBaseDataType(e);i==="number"?t="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){let i=this.getDefaultFilter(e),n=e.getColDef(),r,s=ue(q({},this.createFilterParams(e,n)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(r,e)(),filterChangedCallback:c=>this.filterChangedCallbackFactory(r,e)(c),doesRowPassOtherFilter:c=>this.filterManager?this.filterManager.doesRowPassOtherFilters(r,c):!0}),a=this.userComponentFactory.getFilterDetails(n,s,i);return a?{filterPromise:()=>{let c=a.newAgStackInstance();return c?.then(u=>{r=u,t&&(t.filter=u)}),c},compDetails:a}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:SM(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){let t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:n}=this.createFilterInstance(e,t);return t.filterPromise=i?.()??null,t.compDetails=n,t}onColumnsChanged(){let e=[];this.allColumnFilters.forEach((i,n)=>{let r;i.column.isPrimary()?r=this.columnModel.getColDefCol(n):r=this.columnModel.getCol(n),!(r&&r===i.column)&&(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(n))});let t=e.every(i=>i.getColDef().filter==="agGroupColumnFilter");e.length>0&&!t?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.columnModel.getAutoCols()?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let{filter:i}=this.allColumnFilters.get(e.getColId())??{};return i&&typeof i?.isFilterAllowed=="function"?i.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){let i=u=>{let v=this.getOrCreateFilterWrapper(e)?.filterPromise;v?.then(b=>{u(wc(b))})},n=e.getColDef(),r=ue(q({},this.createFilterParams(e,n)),{filterChangedCallback:()=>i(u=>this.filterChangedCallbackFactory(u,e)())}),s=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(n,bw,r),a=g8(this.frameworkOverrides,n,()=>this.getDefaultFloatingFilter(e));a==null&&(a="agReadOnlyFloatingFilter");let c={column:e,filterParams:s,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(n,c,a)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){let i=e.getColId(),n=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],n&&(this.disposeFilterWrapper(n,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{let n=i?.source??"columnFilter",r={filter:e,additionalEventAttributes:i,columns:[t],source:n};this.callOnFilterChangedOutsideRenderCycle(r)}}checkDestroyFilter(e){let t=this.allColumnFilters.get(e);if(!t)return;let i=t.column,{compDetails:n}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,n)){this.destroyFilter(i,"paramsUpdated");return}let r=i.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(i,"paramsUpdated");return}t.filterPromise.then(s=>{(s?.refresh?s.refresh(q(ue(q({},this.createFilterParams(i,i.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(s,i),filterChangedCallback:this.filterChangedCallbackFactory(s,i),doesRowPassOtherFilter:c=>this.filterManager?this.filterManager.doesRowPassOtherFilters(s,c):!0}),r)):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(e,t){let i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:i}=e,{componentClass:n}=t;return!(i===n||i?.render&&n?.render&&i.render===n.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(i=>{let n=wc(i);t(n)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(i=>{t(wc(i))})})}getFilterInstanceImpl(e){let t=this.columnModel.getColDefCol(e);return t?this.getOrCreateFilterWrapper(t)?.filterPromise??en.resolve(null):en.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){let t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let s=()=>{},a=new Promise(c=>{s=c});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:s}),a}let i=this.columnModel.getColDefCol(e),n=i?this.getOrCreateFilterWrapper(i):null;return n?(s=>new Promise(a=>{s.then(c=>a(c))}))(this.setModelOnFilterWrapper(n.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){let t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){let n=yC(this.gos),r=this.localeService.getLocaleTextFunc(),s=a=>{let{filterParams:c}=e;e.filterParams=typeof c=="object"?q(q({},c),a):a};switch(t.baseDataType){case"number":{n&&s({comparator:(a,c)=>{let u=a==null?0:parseInt(a),v=c==null?0:parseInt(c);return u===v?0:u>v?1:-1}});break}case"boolean":{s(n?{valueFormatter:a=>re(a.value)?r(String(a.value),a.value?"True":"False"):r("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,c)=>c,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,c)=>c===!1,numberOfInputs:0}]});break}case"date":{n&&s({valueFormatter:a=>{let c=i(a);return re(c)?c:r("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,c)=>{if(c===1&&a!=null){let u=YD[Number(a)-1];return r(u,KD[u])}return a??r("blanks","(Blanks)")}});break}case"dateString":{let a=t.dateParser;s(n?{valueFormatter:c=>{let u=i(c);return re(u)?u:r("blanks","(Blanks)")},treeList:!0,treeListPathGetter:c=>{let u=a(c??void 0);return u?[String(u.getFullYear()),String(u.getMonth()+1),String(u.getDate())]:null},treeListFormatter:(c,u)=>{if(u===1&&c!=null){let v=YD[Number(c)-1];return r(v,KD[v])}return c??r("blanks","(Blanks)")}}:{comparator:(c,u)=>{let v=a(u);return u==null||v<c?-1:v>c?1:0}});break}case"object":{n?s({valueFormatter:a=>{let c=i(a);return re(c)?c:r("blanks","(Blanks)")}}):e.filterValueGetter=a=>i({column:a.column,node:a.node,value:this.valueService.getValue(a.column,a.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function f8(e){return!!e.filterManager?.isAnyFilterPresent()}function m8(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var v8=class extends qe{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[gg]),this.eFloatingFilterText=ae}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},xR=class extends qe{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}let t=e.operator,i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new aR,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;let i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){let t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){let t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${t} ${i("ariaFilterInput","Filter Input")}`}},C8=class extends xR{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[gg]),this.eReadOnlyText=ae,this.eDateWrapper=ae}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return CR}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new wR(this.filterParams,this.localeService,this.optionsFactory);let t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){let i=e;this.dateComp.setDate(Vi(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){St(this.eDateWrapper,e),St(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){let e=this.dateComp.getDate(),t=mn(e);this.params.parentFilterInstance(i=>{if(i){let n=Vi(t);i.onFloatingFilterChanged(this.getLastType()||null,n)}})}getDateComponentParams(){let e=Sw(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Ri(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new vR(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},w8=class extends qe{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[gg]),this.eDateInput=ae}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:i=>{i.target===xt(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){let t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&ir(),t.type=i?"date":"text";let{minValidYear:n,maxValidYear:r,minValidDate:s,maxValidDate:a}=e.filterParams||{};if(s&&n&&ee("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),a&&r&&ee("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),s&&a){let[c,u]=[s,a].map(v=>v instanceof Date?v:Vi(v));c&&u&&c.getTime()>u.getTime()&&ee("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}s?s instanceof Date?t.min=bc(s):t.min=s:n&&(t.min=`${n}-01-01`),a?a instanceof Date?t.max=bc(a):t.max=a:r&&(t.max=`${r}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Vi(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(mn(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:hw()||gw()||ir()&&NM()>=14.1}},ER=class extends Z{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=ae,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new bo(this.params?.config));let t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);let i=n=>this.valueChangedListener(n);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},DR=class extends xR{constructor(){super(...arguments),this.eFloatingFilterInputContainer=ae}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;let t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=lg(this.params.filterParams),!this.isReadOnly()){let i=Sw(this.params.filterParams,this.getDefaultDebounceMs()),n=Ri(this.syncUpWithParentFilter.bind(this),i);this.floatingFilterInputService.setValueChangedListener(n)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let t=this.floatingFilterInputService.getValue();vi(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){let t=e.key===J.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=fR(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(n=>{n&&n.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},y8=class extends Z{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new Ew),this.eFloatingFilterTextInput=this.createManagedBean(new bo),this.eFloatingFilterTextInput.setDisabled(!0);let t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,n=>this.valueChangedListener(n)),this.setupListeners(i,n=>this.valueChangedListener(n))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},b8=class extends DR{init(e){super.init(e),this.filterModelFormatter=new hR(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){ZC(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return uR}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=ZC(e.filterParams),this.allowedCharPattern?this.createManagedBean(new ER({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new y8)}},S8=class extends DR{init(e){super.init(e),this.filterModelFormatter=new pR(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return gR}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new ER)}};function x8(e){return!!e.filterManager?.isQuickFilterPresent()}function E8(e){return e.gos.get("quickFilterText")}function D8(e){e.filterManager?.resetQuickFilterCache()}var M8=class extends Z{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){let e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){let e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols(),n=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:i)??[];t&&(n=n.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?n:n.filter(r=>r.isVisible()||r.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return re(e)?It(this.gos)?e.toUpperCase():(ee("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){ee(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}let t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(i=>{let n=this.getQuickFilterTextForColumn(i,e);return re(n)&&n.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);let{quickFilterParts:n,matcher:r}=this;return r(n,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0),n=e.getColDef();if(n.getQuickFilterText){let r=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:n});i=n.getQuickFilterText(r)}return re(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){let t=[];return this.colsForQuickFilter.forEach(i=>{let n=this.getQuickFilterTextForColumn(i,e);re(n)&&t.push(n)}),t.join(`
`)}},Iw={version:De,moduleName:"@ag-grid-community/filter-core",beans:[MH]},R8={version:De,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:f8,onFilterChanged:m8},dependantModules:[Iw]},fg={version:De,moduleName:"@ag-grid-community/column-filter",beans:[p8],dependantModules:[Iw]},I8={version:De,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:r8,getFilterInstance:s8,getColumnFilterInstance:o8,destroyFilter:a8,setFilterModel:l8,getFilterModel:c8,getColumnFilterModel:d8,setColumnFilterModel:u8,showColumnFilter:h8},dependantModules:[fg,R8]},Tw={version:De,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:n8}],dependantModules:[fg]},$J={version:De,moduleName:"@ag-grid-community/floating-filter",dependantModules:[Tw,fg]},T8={version:De,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:v8}],dependantModules:[Tw]},F8={version:De,moduleName:"@ag-grid-community/simple-filter",dependantModules:[fg],userComponents:[{name:"agTextColumnFilter",classImp:qH},{name:"agNumberColumnFilter",classImp:$H},{name:"agDateColumnFilter",classImp:XH},{name:"agDateInput",classImp:w8}]},A8={version:De,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[F8,Tw],userComponents:[{name:"agTextColumnFloatingFilter",classImp:S8},{name:"agNumberColumnFloatingFilter",classImp:b8},{name:"agDateColumnFloatingFilter",classImp:C8}]},MR={version:De,moduleName:"@ag-grid-community/quick-filter-core",beans:[M8],dependantModules:[Iw]},P8={version:De,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:x8,getQuickFilter:E8,resetQuickFilter:D8},dependantModules:[MR]},k8={version:De,moduleName:"@ag-grid-community/quick-filter",dependantModules:[MR,P8]},O8={version:De,moduleName:"@ag-grid-community/filter",dependantModules:[A8,T8,k8,I8]},Fw=class extends qe{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},L8=class extends Fw{constructor(e){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,e),this.eFloatingFilterBody=ae,this.eButtonWrapper=ae,this.eButtonShowMainFilter=ae}postConstruct(){let e=this.getGui(),t={addOrRemoveCssClass:(i,n)=>this.addOrRemoveCssClass(i,n),addOrRemoveBodyCssClass:(i,n)=>this.eFloatingFilterBody.classList.toggle(i,n),setButtonWrapperDisplayed:i=>St(this.eButtonWrapper,i),setCompDetails:i=>this.setCompDetails(i),getFloatingFilterComp:()=>this.compPromise,setWidth:i=>e.style.width=i,setMenuIcon:i=>this.eButtonShowMainFilter.appendChild(i)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},N8=class extends Fw{constructor(e){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,e),this.eResize=ae,this.eHeaderCompWrapper=ae,this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){let e=this.getGui();((r,s)=>{s!=null&&s!=""?e.setAttribute(r,s):e.removeAttribute(r)})("col-id",this.column.getColId());let i={setWidth:r=>e.style.width=r,addOrRemoveCssClass:(r,s)=>this.addOrRemoveCssClass(r,s),setAriaSort:r=>r?uV(e,r):hV(e),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);let n=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",n)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(i=>this.afterCompCreated(t,i))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},_8=class extends Fw{constructor(e){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,e),this.eResize=ae,this.eHeaderCompWrapper=ae}postConstruct(){let e=this.getGui(),t=(n,r)=>r!=null?e.setAttribute(n,r):e.removeAttribute(n);e.setAttribute("col-id",this.ctrl.getColId());let i={addOrRemoveCssClass:(n,r)=>this.addOrRemoveCssClass(n,r),setHeaderWrapperHidden:n=>{n?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:n=>{n!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${n}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",n!=null)},setResizableDisplayed:n=>St(this.eResize,n),setWidth:n=>e.style.width=n,setAriaExpanded:n=>t("aria-expanded",n),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(i,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let i=this.getGui(),n=e.getGui();this.eHeaderCompWrapper.appendChild(n),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(i)}addOrRemoveHeaderWrapperStyle(e,t){let{eHeaderCompWrapper:i}=this;t?i.style.setProperty(e,t):i.style.removeProperty(e)}};var B8=class extends qe{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){OM(this.getGui(),this.ctrl.getAriaRowIndex());let e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,i)=>this.setHeaderCtrls(t,i),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let i=this.headerComps;if(this.headerComps={},e.forEach(n=>{let r=n.instanceId,s=i[r];delete i[r],s==null&&(s=this.createHeaderComp(n),this.getGui().appendChild(s.getGui())),this.headerComps[r]=s}),un(i,(n,r)=>{this.getGui().removeChild(r.getGui()),this.destroyBean(r)}),t){let n=Ss(this.headerComps);n.sort((s,a)=>{let c=s.getCtrl().getColumnGroupChild().getLeft(),u=a.getCtrl().getColumnGroupChild().getLeft();return c-u});let r=n.map(s=>s.getGui());UM(this.getGui(),r)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new _8(e);break;case"filter":t=new L8(e);break;default:t=new N8(e);break}return this.createBean(t),t.setParentComponent(this),t}};var V8=class extends Z{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl});let e=Ot(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){return this.ctrlsService.getHeaderRowContainerCtrl()?.getRowCount()??0}getHeaderPositionForColumn(e,t){let i;if(typeof e=="string"?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;let r=this.ctrlsService.getHeaderRowContainerCtrl()?.getAllCtrls(),s=Ue(r||[]).getType()==="filter",a=this.getHeaderRowCount()-1,c=-1,u=i;for(;u;)c++,u=u.getParent();let v=c;return t&&s&&v===a-1&&v++,v===-1?null:{headerRowIndex:v,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;let{headerRowIndex:n}=t,r=t.column,s=this.getHeaderRowCount(),a=e===0,{headerRowIndex:c,column:u,headerRowIndexWithoutSpan:v}=a?this.headerPositionUtils.getColumnVisibleParent(r,n):this.headerPositionUtils.getColumnVisibleChild(r,n),b=!1;return c<0&&(c=0,u=r,b=!0),c>=s?(c=-1,this.setCurrentHeaderRowWithoutSpan(-1)):v!==void 0&&(this.currentHeaderRowWithoutSpan=v),!b&&!u?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:u},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){let n=this.focusService.getFocusedHeader(),r=e===2,s=this.gos.get("enableRtl"),a,c;if(this.currentHeaderRowWithoutSpan!==-1?n.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=n.headerRowIndex,r!==s?(c="Before",a=this.headerPositionUtils.findHeader(n,c)):(c="After",a=this.headerPositionUtils.findHeader(n,c)),a||!t)return this.focusService.focusHeaderPosition({headerPosition:a,direction:c,fromTab:t,allowUserOverride:!0,event:i});if(t){let u=this.gos.getCallback("tabToNextHeader");if(u)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:u,headerPosition:a,direction:c})}return this.focusNextHeaderRow(n,c,i)}focusNextHeaderRow(e,t,i){let n=e.headerRowIndex,r=null,s;if(t==="Before"?n>0&&(s=n-1,this.currentHeaderRowWithoutSpan-=1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"end")):(s=n+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),r=this.headerPositionUtils.findColAtEdgeForHeaderRow(s,"start")),!r)return!1;let{column:a,headerRowIndex:c}=this.headerPositionUtils.getHeaderIndexToFocus(r.column,r?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:a,headerRowIndex:c},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(Nt(e)){let n=e.getDisplayedLeafColumns();i=t==="Before"?Ue(n):n[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},H8=class extends Z{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new yo(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();let n=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:n}),this.mockContextMenuForIPad(n),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:e}=this,t=0,i=this.columnModel.getGroupRowsHeight().reduce((s,a)=>s+a,0),n=this.columnModel.getColumnHeaderRowHeight();if(this.filterManager?.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=i,t+=n,this.headerHeight===t)return;this.headerHeight=t;let r=`${t+1}px`;this.comp.setHeightAndMinHeight(r),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){let e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){let t=this.visibleColsService.getAllCols().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),i=e.shiftKey,n=i!==t?2:3;(this.headerNavigationService.navigateHorizontally(n,!0,e)||!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case J.LEFT:t=2;case J.RIGHT:{re(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case J.UP:t=0;case J.DOWN:{re(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){let{relatedTarget:t}=e;!t&&this.eGui.contains(xt(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;let{target:n}=e??t;(n===this.eGui||n===this.ctrlsService.getHeaderRowContainerCtrl()?.getViewportElement())&&this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!Ds())return;let t=new ys(this.eGui),i=n=>{e(void 0,n.touchStart,n.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}},Aw=class extends Z{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=li(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),n=this.visibleColsService.getDisplayedColumnsRightWidth(),r;e?r=t+i+n:(r=t,this.addSpacer&&(this.gos.get("enableRtl")?i:n)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(r+=this.scrollVisibleService.getScrollbarWidth())),this.callback(r)}},G8=class extends Z{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;t&&t.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function RR(e){let{isFromHeader:t,fromLeft:i,xPosition:n,fromEnter:r,fakeEvent:s,pinned:a,gos:c,columnModel:u,columnMoveService:v,visibleColsService:b}=e,{allMovingColumns:x}=e;if(t){let G=[];x.forEach(_=>{let N=null,Y=_.getParent();for(;Y!=null&&Y.getDisplayedLeafColumns().length===1;)N=Y,Y=Y.getParent();N!=null?(!!N.getColGroupDef()?.marryChildren?N.getProvidedColumnGroup().getLeafColumns():N.getLeafColumns()).forEach(ve=>{G.includes(ve)||G.push(ve)}):G.includes(_)||G.push(_)}),x=G}let D=x.slice();u.sortColsLikeCols(D);let A=U8({movingCols:D,draggingRight:i,xPosition:n,pinned:a,gos:c,columnModel:u,visibleColsService:b}),O=z8(D,u);if(A.length===0)return;let B=A[0],L=O!==null&&!r;if(t&&(L=O!==null),L&&!s&&(!i&&B>=O||i&&B<=O))return;let U=b.getAllCols(),K=[],$=null;for(let G=0;G<A.length;G++){let _=A[G],N=v.getProposedColumnOrder(D,_);if(!v.doesOrderPassRules(N))continue;let Y=N.filter(pe=>U.includes(pe));if($===null)$=Y;else if(!Es(Y,$))break;let se=W8(N);K.push({move:_,fragCount:se})}if(K.length===0)return;K.sort((G,_)=>G.fragCount-_.fragCount);let ne=K[0].move;if(!(ne>u.getCols().length-x.length))return{columns:x,toIndex:ne}}function Pw(e){let{columns:t,toIndex:i}=RR(e)||{},{finished:n,columnMoveService:r}=e;return!t||i==null?null:(r.moveColumns(t,i,"uiColumnMoved",n),n?null:{columns:t,toIndex:i})}function z8(e,t){let i=t.getCols(),n=S4(e.map(u=>i.indexOf(u))),r=n[0];return Ue(n)-r!==n.length-1?null:r}function W8(e){function t(n){let r=[],s=n.getOriginalParent();for(;s!=null;)r.push(s),s=s.getOriginalParent();return r}let i=0;for(let n=0;n<e.length-1;n++){let r=t(e[n]),s=t(e[n+1]);[r,s]=r.length>s.length?[r,s]:[s,r],r.forEach(a=>{s.indexOf(a)===-1&&i++})}return i}function j8(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function U8(e){let{movingCols:t,draggingRight:i,xPosition:n,pinned:r,gos:s,columnModel:a,visibleColsService:c}=e;if(s.get("suppressMovableColumns")||t.some($=>$.getColDef().suppressMovable))return[];let v=j8(c,r),b=a.getCols(),x=v.filter($=>po(t,$)),D=v.filter($=>!po(t,$)),A=b.filter($=>!po(t,$)),O=0,B=n;if(i){let $=0;x.forEach(ne=>$+=ne.getActualWidth()),B-=$}if(B>0){for(let $=0;$<D.length;$++){let ne=D[$];if(B-=ne.getActualWidth(),B<0)break;O++}i&&O++}let L;if(O>0){let $=D[O-1];L=A.indexOf($)+1}else L=A.indexOf(D[0]),L===-1&&(L=0);let U=[L],K=($,ne)=>$-ne;if(i){let $=L+1,ne=b.length-1;for(;$<=ne;)U.push($),$++;U.sort(K)}else{let $=L,ne=b.length-1,G=b[$];for(;$<=ne&&v.indexOf(G)<0;)$++,U.push($),G=b[$];$=L-1;let _=0;for(;$>=_;)U.push($),$--;U.sort(K).reverse()}return U}function cg(e){let{pinned:t,fromKeyboard:i,gos:n,ctrlsService:r,useHeaderRow:s,skipScrollPadding:a}=e,c=r.getHeaderRowContainerCtrl(t)?.getViewportElement(),{x:u}=e;return c?(i&&(u-=c.getBoundingClientRect().left),n.get("enableRtl")&&(s&&(c=c.querySelector(".ag-header-row")),u=c.clientWidth-u),t==null&&!a&&(u+=r.get("center").getCenterViewportScrollLeft()),u):0}function La(e,t){for(let i of e)i.setMoving(t,"uiColumnMoved")}var XD=7,QC=100,Hh=QC/2,$8=5,q8=100,K8=class extends Z{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!re(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){let e=this.lastDraggingEvent?.dragItem.columns??[];for(let t of e){let i=t.getPinned();if(t.getColDef().lockPinned){if(i==this.pinned)return"move";continue}if(i===this.pinned||!this.pinned)return"move";if(!i&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(e){let t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{let n=e.dragItem.visibleState,r=(t||[]).filter(s=>n[s.getId()]);this.setColumnsVisible(r,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,n=!1){let r=this.gos.get("suppressMoveWhenColumnDragging");if(n&&!r){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!n&&Ge(e.hDirection))return;let{pinned:s,gos:a,ctrlsService:c}=this,u=cg({x:e.x,pinned:s,gos:a,ctrlsService:c});t||this.checkCenterForScrolling(u),r?this.handleColumnDragWhileSuppressingMovement(e,t,i,u,n):this.handleColumnDragWhileAllowingMovement(e,t,i,u,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;let n=e.filter(r=>!r.getColDef().lockVisible);this.columnModel.setColsVisible(n,t,i)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;let{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,n,r){let s=this.getAllMovingColumns(e,!0);if(r){let a=this.isAttemptingToPin(s);a&&this.attemptToPinColumns(s,void 0,!0);let{fromLeft:c,xPosition:u}=this.getNormalisedXPositionInfo(s,a)||{};if(c==null||u==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:s,xPosition:u,fromEnter:t,fakeEvent:i,fromLeft:c})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(s,n)}}handleColumnDragWhileAllowingMovement(e,t,i,n,r){let s=this.getAllMovingColumns(e),a=this.normaliseDirection(e.hDirection)===1,c=e.dragSource.type===1,u=this.getMoveColumnParams({allMovingColumns:s,isFromHeader:c,xPosition:n,fromLeft:a,fromEnter:t,fakeEvent:i}),v=Pw(ue(q({},u),{finished:r}));v&&(this.lastMovedInfo=v)}getAllMovingColumns(e,t=!1){let i=e.dragSource.getDragItem(),n=null;t?(n=i.columnsInSplit,n||(n=i.columns)):n=i.columns;let r=s=>s.getColDef().lockPinned?s.getPinned()==this.pinned:!0;return n?n.filter(r):[]}getMoveColumnParams(e){let{allMovingColumns:t,isFromHeader:i,xPosition:n,fromLeft:r,fromEnter:s,fakeEvent:a}=e,{pinned:c,gos:u,columnModel:v,columnMoveService:b,visibleColsService:x}=this;return{allMovingColumns:t,isFromHeader:i,fromLeft:r,xPosition:n,pinned:c,fromEnter:s,fakeEvent:a,gos:u,columnModel:v,columnMoveService:b,visibleColsService:x}}findFirstAndLastMovingColumns(e){let t=e.length,i,n;for(let r=0;r<=t;r++){if(!i){let s=e[r];s.getLeft()!=null&&(i=s)}if(!n){let s=e[t-1-r];s.getLeft()!=null&&(n=s)}if(i&&n)break}return{firstMovingCol:i,lastMovingCol:n}}highlightHoveredColumn(e,t){let{gos:i,columnModel:n}=this,r=i.get("enableRtl"),s=n.getCols().filter(b=>b.isVisible()&&b.getPinned()===this.pinned),a=null,c=null,u=null;for(let b of s){if(c=b.getActualWidth(),a=this.getNormalisedColumnLeft(b,0,r),a!=null){let x=a+c;if(a<=t&&x>=t){u=b;break}}a=null,c=null}if(u)e.indexOf(u)!==-1&&(u=null);else{for(let b=s.length-1;b>=0;b--){let x=s[b],D=s[b].getParent();if(!D){u=x;break}let A=D?.getDisplayedLeafColumns();if(A.length){u=Ue(A);break}}if(!u)return;a=this.getNormalisedColumnLeft(u,0,r),c=u.getActualWidth()}if(this.lastHighlightedColumn?.column!==u&&this.clearHighlighted(),u==null||a==null||c==null)return;let v;t-a<c/2!==r?v=0:v=1,u.setHighlighted(v),this.lastHighlightedColumn={column:u,position:v}}getNormalisedXPositionInfo(e,t){let{gos:i,visibleColsService:n}=this,r=i.get("enableRtl"),{firstMovingCol:s,column:a,position:c}=this.getColumnMoveAndTargetInfo(e,t,r);if(!s||!a||c==null)return;let u=n.getAllCols(),v=u.indexOf(s),b=u.indexOf(a),x=c===0!==r,D=v<b||v===b&&!x,A=0;if(x?D&&(A-=1):D||(A+=1),b+A===v)return;let O=u[b+A];if(!O)return;let B=this.getNormalisedColumnLeft(O,20,r);return{fromLeft:D,xPosition:B}}getColumnMoveAndTargetInfo(e,t,i){let n=this.lastHighlightedColumn||{},{firstMovingCol:r,lastMovingCol:s}=this.findFirstAndLastMovingColumns(e);if(!r||!s||n.column||!t)return q({firstMovingCol:r},n);let c=this.getPinDirection()==="left";return{firstMovingCol:r,position:c?1:0,column:c!==i?r:s}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,i){let{gos:n,ctrlsService:r}=this,s=e.getLeft();if(s==null)return null;let a=e.getActualWidth();return cg({x:i?s+a-t:s+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:n,ctrlsService:r})}isAttemptingToPin(e){let t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>XD;return t&&i||e.some(n=>n.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){let{allMovingColumns:t,xPosition:i,fromEnter:n,fakeEvent:r,fromLeft:s}=e,a=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:s,fromEnter:n,fakeEvent:r}),{columns:c,toIndex:u}=RR(a)||{};c&&u!=null&&(this.lastMovedInfo={columns:c,toIndex:u}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;let t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),n=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+Hh,this.needToMoveLeft=e>n-Hh):(this.needToMoveLeft=e<i+Hh,this.needToMoveRight=e>n-Hh),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),q8),this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*$8,e>QC&&(e=QC);let t=null,i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=XD+1)return;if(this.dragAndDropService.getDragAndDropImageComponent()?.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){let n=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(n,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,i=!1){let n=(e||[]).filter(r=>!r.getColDef().lockPinned);return n.length?(i&&(t=this.getPinDirection()),this.columnModel.setColsPinned(n,t,"uiColumnDragged"),i&&this.dragAndDropService.nudge(),n.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},Y8=class extends Z{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new K8(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new G8(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},X8=class extends Z{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,n,r){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=r}postConstruct(){let e=[],t,i,n=()=>{if(St(this.eResize,t),!t)return;let a=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(a),i){let c=this.gos.get("skipHeaderOnAutoSize"),u=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",c)};this.eResize.addEventListener("dblclick",u);let v=new ys(this.eResize);v.addEventListener("doubleTap",u),e.push(()=>{this.eResize.removeEventListener("dblclick",u),v.removeEventListener("doubleTap",u),v.destroy()})}},r=()=>{e.forEach(a=>a()),e.length=0},s=()=>{let a=this.column.isResizable(),c=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(a!==t||c!==i)&&(t=a,i=c,r(),n())};s(),this.addDestroyFunc(r),this.ctrl.setRefreshFunction("resize",s)}onResizing(e,t){let{column:i,lastResizeAmount:n,resizeStartWidth:r}=this,s=this.normaliseResizeAmount(t),a=r+s,c=[{key:i,newWidth:a}];if(this.column.getPinned()){let u=this.pinnedWidthService.getPinnedLeftWidth(),v=this.pinnedWidthService.getPinnedRightWidth(),b=Pc(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(u+v+(s-n)>b)return}this.lastResizeAmount=s,this.columnSizeService.setColumnWidths(c,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,i=this.pinned!=="left",n=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}},Z8=class extends Z{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(xt(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new ww),this.cbSelectAll.addCssClass("ag-header-select-all"),Hi(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);let t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),n=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${n} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return sw(this.gos)?!0:(ee(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return It(this.gos)||Mr(this.gos)?!0:(ee(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly(),n="uiSelectAll";i?n="uiSelectAllCurrentPage":t&&(n="uiSelectAllFiltered");let r={source:n,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}isCheckboxSelection(){let e=this.gos.get("rowSelection"),t=typeof e=="object"&&Qh(e)&&Fc(this.column),i=this.column.getColDef().headerCheckboxSelection,n=!1;return t?n=!0:typeof i=="function"?n=i(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):n=!!i,n&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){let e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){let e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},Q8=class extends pg{constructor(e,t,i){super(e,t,i),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,n,r){this.comp=e,r=Ac(this,this.beans.context,r),this.setGui(t,r),this.updateState(),this.setupWidth(r),this.setupMovingCss(r),this.setupMenuClass(r),this.setupSortableClass(r),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:n,checkMeasuringCallback:a=>this.setRefreshFunction("measuring",a),compBean:r}),this.addColumnHoverListener(r),this.setupFilterClass(r),this.setupClassesFromColDef(),this.setupTooltip(r),this.addActiveHeaderMouseListeners(r),this.setupSelectAll(r),this.setupUserComp(r),this.refreshAria(),this.resizeFeature=r.createManagedBean(new X8(this.getPinned(),this.column,i,e,this)),r.createManagedBean(new Rw([this.column],t)),r.createManagedBean(new Mw(this.column,t,this.beans)),r.createManagedBean(new yo(t,{shouldStopEventPropagation:a=>this.shouldStopEventPropagation(a),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(r),r.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(r)),r.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(r)}),r.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});let s=()=>this.checkDisplayName(r);r.addManagedEventListeners({columnValueChanged:s,columnRowGroupChanged:s,columnPivotChanged:s,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),r.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){if(!this.column.isResizable())return;let i=this.column.getActualWidth(),n=this.column.getMinWidth(),r=this.column.getMaxWidth(),s=Math.min(Math.max(i+e,n),r);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:s}],t,!0,"uiColumnResized")}moveHeader(e){let{eGui:t,beans:i,column:n,ctrlsService:r}=this,{gos:s,columnModel:a,columnMoveService:c,visibleColsService:u}=i,v=this.getPinned(),b=t.getBoundingClientRect().left,x=n.getActualWidth(),D=s.get("enableRtl"),O=cg({x:e===0!==D?b-20:b+x+20,pinned:v,fromKeyboard:!0,gos:s,ctrlsService:r}),B=this.focusService.getFocusedHeader();Pw({allMovingColumns:[n],isFromHeader:!0,fromLeft:e===1,xPosition:O,pinned:v,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:a,columnMoveService:c,visibleColsService:u,finished:!0}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&B&&this.restoreFocus(B)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:ue(q({},e),{column:this.column})})}setupUserComp(e){let t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){let t=this.createParams(e),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:i=>{this.menuService.showColumnMenu({column:this.column,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:i=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:i,positionBy:"mouse"})},showFilter:i=>{this.menuService.showFilterMenu({column:this.column,buttonElement:i,containerType:"columnFilter",positionBy:"button"})},progressSort:i=>{this.beans.sortController.progressSort(this.column,!!i,"uiColumnSorted")},setSort:(i,n)=>{this.beans.sortController.setSortForColumn(this.column,i,!!n,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(i,n)=>{this.setupTooltip(e,i,n)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new Z8(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===J.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===J.ENTER&&this.onEnterKeyDown(e),e.key===J.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){let t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){let i=this.comp.getUserCompInstance();!i||!(i instanceof KC)||i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){let t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui,s=this.column.getColDef();!i&&n&&!s.headerComponent&&(i=()=>{let u=r.querySelector(".ag-header-cell-text");return u?u.scrollWidth>u.clientWidth:!0});let a={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:i},c=e.createManagedBean(new za(a));this.setRefreshFunction("tooltip",()=>c.refreshToolTip())}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),i=yR(t,this.gos,this.column,null),n=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(r=>{n.has(r)?n.delete(r):this.comp.addOrRemoveCssClass(r,!0)}),n.forEach(r=>this.comp.addOrRemoveCssClass(r,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;let{column:t,beans:i,displayName:n,dragAndDropService:r,gos:s}=this,{columnModel:a}=i,c=!this.gos.get("suppressDragLeaveHidesColumns"),u=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>c?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:n,onDragStarted:()=>{c=!s.get("suppressDragLeaveHidesColumns"),La([t],!0)},onDragStopped:()=>La([t],!1),onDragCancelled:()=>La([t],!1),onGridEnter:v=>{if(c){let b=v?.columns?.filter(x=>!x.getColDef().lockVisible)||[];a.setColsVisible(b,!0,"uiColumnMoved")}},onGridExit:v=>{if(c){let b=v?.columns?.filter(x=>!x.getColDef().lockVisible)||[];a.setColsVisible(b,!1,"uiColumnMoved")}}};r.addDragSource(u,!0)}createDragItem(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(e){let t=this.lookupUserCompDetails(e);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){let t=()=>{let i=this.column.getActualWidth();this.comp.setWidth(`${i}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){let t=()=>{let i=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",i),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){let e=this.column.getHighlighted(),t=e===0,i=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:i,beans:n}=this,r=this.beans.columnModel.getGroupRowsHeight(),s=r.reduce((x,D)=>x+=D,0)===0;if(i.addOrRemoveCssClass("ag-header-parent-hidden",s),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:a,isSpanningTotal:c}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",a>0);let{columnModel:u}=n,v=u.getColumnHeaderRowHeight();if(a===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${v}px`);return}i.addOrRemoveCssClass("ag-header-span-total",c);let b=0;for(let x=0;x<a;x++)b+=r[r.length-1-x];e.style.setProperty("top",`${-b}px`),e.style.setProperty("height",`${v+b}px`)}refreshAriaSort(){if(this.sortable){let e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(eV(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(xt(this.beans.gos)))return;let e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,i)=>t==="filter"?-1:i.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){let t=r=>this.handleMouseOverChange(r.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),n=r=>this.handleContextMenuMouseEvent(r,void 0,this.column);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:n})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return t instanceof KC?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},J8=class extends Z{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,n){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){let t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let i=[];this.columnGroup.getDisplayedLeafColumns().forEach(r=>{r.getColDef().suppressAutoSize||i.push(r.getColId())}),i.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){let t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){let n=this.normaliseDragChange(t),r=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(r,i,e)}getInitialValues(e){let t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),n=this.getSizeRatiosOfColumns(t,i),r={columnsToResize:t,resizeStartWidth:i,resizeRatios:n},s=null;if(e&&(s=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),s){let a=s.getDisplayedLeafColumns(),c=r.groupAfterColumns=a.filter(v=>v.isResizable()),u=r.groupAfterStartWidth=this.getInitialSizeOfColumns(c);r.groupAfterRatios=this.getSizeRatiosOfColumns(c,u)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}storeLocalValues(e){let{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:r,groupAfterStartWidth:s,groupAfterRatios:a}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=a}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){let t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;let n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(n,e,t,i)}resizeColumns(e,t,i,n=!0){let{columnsToResize:r,resizeStartWidth:s,resizeRatios:a,groupAfterColumns:c,groupAfterStartWidth:u,groupAfterRatios:v}=e,b=[];if(b.push({columns:r,ratios:a,width:t}),c){let x=t-s;b.push({columns:c,ratios:v,width:u-x})}this.columnSizeService.resizeColumnSets({resizeSets:b,finished:n,source:i}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(i=>i.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},e5=class extends Z{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},t5=class extends pg{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let n=this.getGui();this.setDragSource(n)}},this.column=e}setComp(e,t,i,n,r){this.comp=e,r=Ac(this,this.beans.context,r),this.setGui(t,r),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(r),this.setupExpandable(r),this.setupTooltip(r),this.setupAutoHeight({wrapperElement:n,compBean:r}),this.setupUserComp(r),this.addHeaderMouseListeners(r),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();let s=this.getParentRowCtrl().getPinned(),a=this.column.getProvidedColumnGroup().getLeafColumns();r.createManagedBean(new Rw(a,t)),r.createManagedBean(new Mw(this.column,t,this.beans)),r.createManagedBean(new e5(e,this.column)),this.resizeFeature=r.createManagedBean(new J8(e,i,s,this.column)),r.createManagedBean(new yo(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(r,a),r.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(r),r.addDestroyFunc(()=>this.clearComponent())}refreshMaxHeaderHeight(){let{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");i!=null?i===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(let i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){let t=this.column.getDisplayedLeafColumns(),i=t[0]===e,n=Ue(t)===e;if(!i&&!n)return;let r=e.getHighlighted(),s=!!this.getParentRowCtrl().findHeaderCellCtrl(u=>u.getColumnGroupChild().isMoving()),a=!1,c=!1;if(s){let u=this.beans.gos.get("enableRtl"),v=r===1,b=r===0;i&&(u?c=v:a=b),n&&(u?a=b:c=v)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",a),this.comp.addOrRemoveCssClass("ag-header-highlight-after",c)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;let i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){let{beans:t,eGui:i,column:n,ctrlsService:r}=this,{gos:s,columnModel:a,columnMoveService:c,visibleColsService:u}=t,v=s.get("enableRtl"),b=e===0,x=this.getPinned(),D=i.getBoundingClientRect(),A=D.left,O=D.width,B=cg({x:b!==v?A-20:A+O+20,pinned:x,fromKeyboard:!0,gos:s,ctrlsService:r}),L=n.getGroupId(),U=this.focusService.getFocusedHeader();Pw({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:e===1,xPosition:B,pinned:x,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:a,columnMoveService:c,visibleColsService:u,finished:!0});let K=n.getDisplayedLeafColumns(),$=b?K[0]:Ue(K);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible($,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&U&&this.restoreFocus(L,n,U)}restoreFocus(e,t,i){let n=t.getLeafColumns();if(!n.length)return;let r=n[0].getParent();if(!r)return;let s=this.findGroupWidthId(r,e);s&&this.focusService.focusHeaderPosition({headerPosition:ue(q({},i),{column:s})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){let t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:n=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),n,"gridInitializing")},setTooltip:(n,r)=>{this.setupTooltip(e,n,r)}}),i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){let t=r=>this.handleMouseOverChange(r.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),n=r=>this.handleContextMenuMouseEvent(r,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:n})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.column.getColGroupDef(),r=this.gos.get("tooltipShowMode")==="whenTruncated",s=this.eGui;!i&&r&&!n?.headerGroupComponent&&(i=()=>{let c=s.querySelector(".ag-header-group-text");return c?c.scrollWidth>c.clientWidth:!0});let a={getColumn:()=>this.column,getGui:()=>s,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(n&&n.headerTooltip),shouldDisplayTooltip:i};n&&(a.getColDef=()=>n),e.createManagedBean(new za(a))}setupExpandable(e){let t=this.column.getProvidedColumnGroup();this.refreshExpanded();let i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let e=this.column.getColGroupDef(),t=yR(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(n=>n.isSpanHeaderHeight())&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(e){let i=this.column.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());i.forEach(r=>{e.addManagedListeners(r,{movingChanged:n})}),n()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){let t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===J.ENTER){let i=this.column,n=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),n,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;let{beans:t,column:i,displayName:n,gos:r,dragAndDropService:s}=this,{columnModel:a}=t,c=i.getProvidedColumnGroup().getLeafColumns(),u=!r.get("suppressDragLeaveHidesColumns"),v=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>u?"hide":"notAllowed",dragItemName:n,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{u=!r.get("suppressDragLeaveHidesColumns"),La(c,!0)},onDragStopped:()=>La(c,!1),onDragCancelled:()=>La(c,!1),onGridEnter:b=>{if(u){let{columns:x=[],visibleState:D}=b??{},A=x.filter(O=>!O.getColDef().lockVisible&&(!D||D[O.getColId()]));a.setColsVisible(A,!0,"uiColumnMoved")}},onGridExit:b=>{if(u){let x=b?.columns?.filter(D=>!D.getColDef().lockVisible)||[];a.setColsVisible(x,!1,"uiColumnMoved")}}};s.addDragSource(v,!0)}getDragItemForGroup(e){let t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach(a=>i[a.getId()]=a.isVisible());let n=[];this.beans.visibleColsService.getAllCols().forEach(a=>{t.indexOf(a)>=0&&(n.push(a),Ii(t,a))}),t.forEach(a=>n.push(a));let r=[],s=e.getLeafColumns();for(let a of n)s.indexOf(a)!==-1&&r.push(a);return{columns:n,columnsInSplit:r,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},i5=0,FC=class extends Z{constructor(e,t,i){super(),this.instanceId=i5++,this.rowIndex=e,this.pinned=t,this.type=i;let n=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${n}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=li(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t,i=!0){this.comp=e,t=Ac(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){let t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return $h(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=li(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let{columnModel:e,filterManager:t}=this.beans,i=[],n=e.getGroupRowsHeight(),r=e.getColumnHeaderRowHeight();i.push(...n),i.push(r),t?.hasFloatingFilters()&&i.push(e.getFloatingFiltersHeight());let s=0;for(let c=0;c<this.rowIndex;c++)s+=i[c];let a=i[this.rowIndex];return{topOffset:s,rowHeight:a}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){let t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){let e=this.headerCellCtrls;this.headerCellCtrls=new Map;let t=this.getColumnsInViewport();for(let n of t)this.recycleAndCreateHeaderCtrls(n,e);let i=n=>{let{focusService:r,visibleColsService:s}=this.beans;return r.isHeaderWrapperFocused(n)?s.isVisible(n.getColumnGroupChild()):!1};if(e)for(let[n,r]of e)i(r)?this.headerCellCtrls.set(n,r):this.destroyBean(r);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;let i=e.getUniqueId(),n;if(t&&(n=t.get(i),t.delete(i)),n&&n.getColumnGroupChild()!=e&&(this.destroyBean(n),n=void 0),n==null)switch(this.type){case"filter":{n=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":n=this.createBean(new t5(e,this.beans,this));break;default:n=this.createBean(new Q8(e,this.beans,this));break}this.headerCellCtrls.set(i,n)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[],t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach(n=>{let r=i.getHeadersToRender(n,t);e=e.concat(r)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;let t=this.getHeaderCellCtrls(),i;return typeof e=="function"?i=t.find(e):i=t.find(n=>n.getColumnGroupChild()==e),i}focusHeader(e,t){let i=this.findHeaderCellCtrl(e);return i?i.focus(t):!1}destroy(){this.headerCellCtrls?.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},n5=class extends Z{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);let i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i});let n=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(n,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let t=new Va,i=this.focusService.getFocusHeaderToUseAfterRefresh(),n=()=>{let c=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let u=0;u<c;u++){let v=this.createBean(new FC(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(v)}},r=()=>{let c=t.next(),u=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==c);(u||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),u&&(this.columnsRowCtrl=this.createBean(new FC(c,this.pinned,"column")))},s=()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;let c=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){c();return}let u=t.next();if(this.filtersRowCtrl){let v=this.filtersRowCtrl.getRowIndex()!==u;(!e||v)&&c()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new FC(u,this.pinned,"filter")))};n(),r(),s();let a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){if(xs(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){let i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){let t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){let i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){let r=this.getAllCtrls()[e];return r?r.focusHeader(t,i):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){let t=new Y8(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;let{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Aw(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;let e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;let i=()=>{let n=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(n==null)return;let r=n==0,s=this.hidden!==r,a=this.gos.get("enableRtl"),c=this.scrollVisibleService.getScrollbarWidth(),v=this.scrollVisibleService.isVerticalScrollShowing()&&(a&&e||!a&&t)?n+c:n;this.comp.setPinnedContainerWidth(`${v}px`),this.comp.setDisplayed(!r),s&&(this.hidden=r,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},r5='<div class="ag-pinned-left-header" role="rowgroup"></div>',s5='<div class="ag-pinned-right-header" role="rowgroup"></div>',o5=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,AC=class extends qe{constructor(e){super(),this.eCenterContainer=ae,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();let e={setDisplayed:i=>this.setDisplayed(i),setCtrls:i=>this.setCtrls(i),setCenterWidth:i=>this.eCenterContainer.style.width=i,setViewportScrollLeft:i=>this.getGui().scrollLeft=i,setPinnedContainerWidth:i=>{let n=this.getGui();n.style.width=i,n.style.maxWidth=i,n.style.minWidth=i}};this.createManagedBean(new n5(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",i=e?r5:t?s5:o5;this.setTemplate(i),this.eRowContainer=this.eCenterContainer!==ae?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let i,n=r=>{let s=r.getGui();s.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(s),i&&jM(this.eRowContainer,s,i),i=s};e.forEach(r=>{let s=r.instanceId,a=t[s];delete t[s];let c=a||this.createBean(new B8(r));this.headerRowComps[s]=c,this.rowCompsList.push(c),n(c)}),Ss(t).forEach(r=>this.destroyRowComp(r))}},a5=class extends qe{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){let e={addOrRemoveCssClass:(n,r)=>this.addOrRemoveCssClass(n,r),setHeightAndMinHeight:n=>{this.getGui().style.height=n,this.getGui().style.minHeight=n}};this.createManagedBean(new H8).setComp(e,this.getGui(),this.getFocusableElement());let i=n=>{this.createManagedBean(n),this.appendChild(n)};i(new AC("left")),i(new AC(null)),i(new AC("right"))}},l5={selector:"AG-HEADER-ROOT",component:a5};var kw=class extends Z{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){let e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(ee(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},c5=class extends qe{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=ae,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==J.TAB||e.defaultPrevented||xr(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=this.focusService.focusGridView(Ue(this.visibleColsService.getAllCols()),!0,!1):i=this.focusService.focusNextGridCoreContainer(!1),i&&e.preventDefault()}updateLayoutClasses(e,t){let i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new kw(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,n){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.focusService.isGridFocused()){let r=xt(this.gos);r&&!hM(this.gos)&&(this.elToFocusAfter=r)}e.then(r=>{if(this.activePromise!==e){this.activeOverlay!==r&&(this.destroyBean(r),r=null);return}if(this.activePromise=null,!r)return;if(this.activeOverlay!==r&&(this.eOverlayWrapper.appendChild(r.getGui()),this.activeOverlay=r,n)){let a=r;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:c})=>{a.refresh?.(this.gos.addGridCommonParams(q({},c??{})))})}let s=this.focusService;i&&s.isGridFocused()&&s.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);let i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),vi(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},d5={selector:"AG-OVERLAY-WRAPPER",component:c5},IR=class extends qe{constructor(e,t){super(),this.direction=t,this.eViewport=ae,this.eContainer=ae,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",_M()||Ds())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=VM(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){let t=this.getViewportElement();d4(()=>Ln(t),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},u5=class extends IR{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=ae,this.eRightSpacer=ae}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new Aw(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.visibleColsService.getDisplayedColumnsRightWidth(),i=!this.enableRtl&&e,n=this.scrollVisibleService.getScrollbarWidth();i&&(t+=n),On(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let r=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(r+=n),On(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=n)}setScrollVisible(){let e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),n=e&&this.scrollVisibleService.getScrollbarWidth()||0,s=i?0:n===0&&t?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Cc(this.getGui(),s),Cc(this.eViewport,s),Cc(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return sg(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){Ln(this.getViewportElement())||this.attemptSettingScrollPosition(e),og(this.getViewportElement(),e,this.enableRtl)}},h5={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:u5},TR=class extends Z{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){let e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},g5=class extends IR{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new TR(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.scrollVisibleService.getScrollbarWidth()||0,n=i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),On(this.getGui(),n),On(this.eViewport,n),On(this.eContainer,n),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:e}=this,i=e.getGridBodyCtrl().getBodyViewportElement(),n=this.getScrollPosition(),r=i.scrollTop;n!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){!t&&!Ln(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},p5={selector:"AG-FAKE-VERTICAL-SCROLL",component:g5},JC=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(JC||{}),f5=class extends Z{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=Ri(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Ri(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(let e of Object.values(JC)){let t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){let e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?Ri(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),n=t?Ri(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(let t of[...Object.values(JC),"Viewport"]){if(this.lastScrollSource[1]===t)continue;let i=this.getViewportForSource(t);og(i,e,this.enableRtl)}}getViewportForSource(e){return e==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;let t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;let n=sg(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;e==="Viewport"?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){let t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){let t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent(ue(q({},t),{type:"bodyScrollEnd"}))},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!Ds()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=fw(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&rg()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){let e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){let n=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&rg()?e=e>0?0:n:e=Math.min(Math.max(e,0),n)),og(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){let t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let i=this.rowModel.getRowCount(),n=-1;for(let r=0;r<i;r++){let s=this.rowModel.getRow(r);if(typeof e=="function"){if(s&&e(s)){n=r;break}}else if(e===s||e===s.data){n=r;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t){if(li(this.gos,"print"))return;let i=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=i){ee("Invalid row index for ensureIndexVisible: "+e);return}let r=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{r||this.paginationService?.goToPageWithIndex(e);let s=this.ctrlsService.getGridBodyCtrl(),a=s.getStickyTopHeight(),c=s.getStickyBottomHeight(),u=this.rowModel.getRow(e),v;do{let b=u.rowTop,x=u.rowHeight,D=this.pageBoundsService.getPixelOffset(),A=u.rowTop-D,O=A+u.rowHeight,B=this.getVScrollPosition(),L=this.heightScaler.getDivStretchOffset(),U=B.top+L,K=B.bottom+L,$=K-U,ne=this.heightScaler.getScrollPositionForPixel(A),G=this.heightScaler.getScrollPositionForPixel(O-$),_=Math.min((ne+G)/2,A),N=U+a>A,Y=K-c<O,se=null;t==="top"?se=ne:t==="bottom"?se=G:t==="middle"?se=_:N?se=ne-a:Y&&(se=G+c),se!==null&&(this.setVerticalScrollPosition(se),this.rowRenderer.redraw({afterScroll:!0})),v=b!==u.rowTop||x!==u.rowHeight}while(v);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){let i=this.columnModel.getCol(e);if(!i||i.isPinned()||!this.visibleColsService.isColDisplayed(i))return;let n=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming(()=>{n!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(n),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),r=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),a=this.enableRtl,c=(a?i:n)||r,u=a?n:i;t!=="auto"&&(c=t==="start",u=t==="end");let v=t==="middle";if(c||u||v){let{colLeft:b,colMiddle:x,colRight:D}=this.getColumnBounds(e);return v?x-s/2:c?a?D:b:a?b-s:D-s}return null}isColumnOutsideViewport(e){let{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:r}=this.getColumnBounds(e),s=this.enableRtl,a=s?t>r:i<r,c=s?i<n:t>n;return{columnBeforeStart:a,columnAfterEnd:c}}getColumnBounds(e){let t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),n=e.getActualWidth(),r=e.getLeft(),s=t?-1:1,a=t?i-r:r,c=a+n*s,u=a+n/2*s;return{colLeft:a,colMiddle:u,colRight:c}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,n=e+t;return{start:i,end:n,width:e}}},m5=class extends Z{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let e=()=>{this.animationFrameService.requestAnimationFrame(()=>{this.onCenterViewportResized()})};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=Pc(e);if(t<=50)return;let i=this.getPinnedColumnsOverflowingViewport(t-50),n=this.gos.getCallback("processUnpinnedColumns");i.length&&(n&&(i=n({columns:i,viewportWidth:t})),this.columnModel.setColsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){let t=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),n=t+i;if(n<e)return[];let r=[...this.visibleColsService.getLeftCols()],s=[...this.visibleColsService.getRightCols()],a=0,c=0,u=0,v=[],b=n-u-e;for(;(c<r.length||a<s.length)&&b>0;){if(a<s.length){let x=s[a++];b-=x.getActualWidth(),v.push(x)}if(c<r.length&&b>0){let x=r[c++];b-=x.getActualWidth(),v.push(x)}}return v}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=fw(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},v5=class extends Z{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{tr(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),tr(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},C5=class extends qe{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[yw]),this.eCheckbox=ae}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=uw(e,t),[n,r]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],s=e(n,r);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:n=>_a(n),click:n=>{_a(n);let r=ow(this.gos)==="filteredDescendants",s=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(s,r)?this.onClicked(!0,r,n||{})===0&&this.onClicked(!1,r,n):s?this.onClicked(!1,r,n):this.onClicked(!0,r,n||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),rw(this.gos)||typeof this.getIsVisible()=="function"){let n=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n}),this.addManagedListeners(this.rowNode,{dataChanged:n,cellChanged:n}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&It(this.gos)}showOrHideSelect(){let e=this.rowNode.selectable,t=this.getIsVisible();if(e)if(typeof t=="function"){let r=this.overrides?.callbackParams;if(!this.column)e=t(ue(q({},r),{node:this.rowNode,data:this.rowNode.data}));else{let s=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t(q(q({},r),s))}}else e=t??!1;let i=this.gos.get("rowSelection");if(i&&typeof i!="string"?!f4(i):this.column?.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if(this.overrides?.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){if(this.overrides)return this.overrides.isVisible;let e=this.gos.get("rowSelection");return e&&typeof e!="string"?Na(e):this.column?.getColDef()?.checkboxSelection}},w5=class extends qe{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(tn("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);let i=()=>{try{let n=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",n),e.dataTransfer.setData("text/plain",n)}catch{}};if(t){let n=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(n)}else i()}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},y5=class extends Z{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,n=>this.cellComp.addOrRemoveCssClass(n,!0),n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.cellClassRules=t}applyUserStyles(){let e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){let i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),n=e.cellStyle;t=n(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){let e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},b5=class extends Z{constructor(e,t,i,n,r){super(),this.cellCtrl=e,this.beans=t,this.rowNode=n,this.rowCtrl=r}setComp(e){this.eGui=e}onKeyDown(e){let t=e.key;switch(t){case J.ENTER:this.onEnterKeyDown(e);break;case J.F2:this.onF2KeyDown(e);break;case J.ESCAPE:this.onEscapeKeyDown(e);break;case J.TAB:this.onTabKeyDown(e);break;case J.BACKSPACE:case J.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case J.DOWN:case J.UP:case J.RIGHT:case J.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;let t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:i,beans:n,rowNode:r}=this,{gos:s,rangeService:a,eventService:c}=n;if(!i.isEditing()){if(c.dispatchEvent({type:"keyShortcutChangedCellStart"}),jH(e,s.get("enableCellEditingOnBackspace"))){if(a&&tr(s))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){let u=i.getColumn(),v=this.beans.valueService.getDeleteValue(u,r);r.setDataValue(u,v,"cellClear")}}else i.startRowOrCellEdit(e,t);c.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let t=e.shiftKey?J.UP:J.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(J.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(J.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;let n=e.key;n===" "?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(n,e)&&e.preventDefault()}onSpaceKeyDown(e){let{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&Xh(t)){let i=this.rowNode.isSelected(),n=!i,r=ow(t)==="filteredDescendants",s=this.rowNode.setSelectedParams({newValue:n,rangeSelect:e.shiftKey,groupSelectsFiltered:r,event:e,source:"spaceKey"});i===void 0&&s===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:r,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},S5=class extends Z{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!xr(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}let{eventService:t,rangeService:i,gos:n}=this.beans,r=e.ctrlKey||e.metaKey;i&&r&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);let s=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(s);let a=this.column.getColDef();a.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{a.onCellClicked(s)})},0),(n.get("singleClickEdit")||a.singleClickEdit)&&!n.get("suppressClickEdit")&&!(e.shiftKey&&i?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Ds()||yM("dblclick"))return!1;let e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){let{column:t,beans:i,cellCtrl:n}=this,{eventService:r,frameworkOverrides:s,gos:a}=i,c=t.getColDef(),u=n.createEvent(e,"cellDoubleClicked");r.dispatchEvent(u),typeof c.onCellDoubleClicked=="function"&&window.setTimeout(()=>{s.wrapOutgoing(()=>{c.onCellDoubleClicked(u)})},0),!a.get("singleClickEdit")&&!a.get("suppressClickEdit")&&n.startRowOrCellEdit(null,e)}onMouseDown(e){let{ctrlKey:t,metaKey:i,shiftKey:n}=e,r=e.target,{cellCtrl:s,beans:a}=this,{eventService:c,rangeService:u,focusService:v,gos:b}=a;if(this.isRightClickInExistingRange(e))return;let x=u&&u.getCellRanges().length!=0;if(!n||!x){let A=b.get("enableCellTextSelection")&&e.defaultPrevented,O=(ir()||A)&&!s.isEditing()&&!pw(r);s.focusCell(O)}if(n&&x&&!v.isCellFocused(s.getCellPosition())){e.preventDefault();let D=v.getFocusedCell();if(D){let{column:A,rowIndex:O,rowPinned:B}=D,U=a.rowRenderer.getRowByPosition({rowIndex:O,rowPinned:B})?.getCellCtrl(A);U?.isEditing()&&U.stopEditing(),v.setFocusedCell({column:A,rowIndex:O,rowPinned:B,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(u){let D=this.cellCtrl.getCellPosition();if(n)u.extendLatestRangeToCell(D);else{let A=t||i;u.setRangeToCell(D,A)}}c.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){let{rangeService:t}=this.beans;if(t){let i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),n=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&n)return!0}return!1}containsWidget(e){return Oa(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.getGui(),i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}destroy(){super.destroy()}},x5=class extends Z{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();Es(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;let e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column,n=this.column.getPinned();for(let r=0;i&&r<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),!(!i||Ge(i)||n!==i.getPinned()));r++);}return t}onLeftChanged(){if(!this.eGui)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Ue(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;let t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){let i=this.beans.visibleColsService.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;let i=go(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}};var hc="ag-cell-range-selected",E5="ag-cell-range-chart",D5="ag-cell-range-single-cell",M5="ag-cell-range-chart-category",R5="ag-cell-range-handle",I5="ag-cell-range-top",T5="ag-cell-range-right",F5="ag-cell-range-bottom",A5="ag-cell-range-left",P5=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(hc,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${hc}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${hc}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${hc}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${hc}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(E5,this.hasChartRange),ig(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(D5,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,n=!t&&e.right,r=!t&&e.bottom,s=!t&&e.left;this.cellComp.addOrRemoveCssClass(I5,i),this.cellComp.addOrRemoveCssClass(T5,n),this.cellComp.addOrRemoveCssClass(F5,r),this.cellComp.addOrRemoveCssClass(A5,s)}isSingleCell(){let{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){let{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;let t=e.getCellRanges();return t.length>0&&t.every(i=>po([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let e=this.beans.gos.get("enableRtl"),t=!1,i=!1,n=!1,r=!1,s=this.cellCtrl.getCellPosition().column,a=this.beans.visibleColsService,c,u;e?(c=a.getColAfter(s),u=a.getColBefore(s)):(c=a.getColBefore(s),u=a.getColAfter(s));let v=this.rangeService.getCellRanges().filter(b=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),b));c||(r=!0),u||(i=!0);for(let b=0;b<v.length&&!(t&&i&&n&&r);b++){let x=v[b],D=this.rangeService.getRangeStartRow(x),A=this.rangeService.getRangeEndRow(x);!t&&this.beans.rowPositionUtils.sameRow(D,this.cellCtrl.getCellPosition())&&(t=!0),!n&&this.beans.rowPositionUtils.sameRow(A,this.cellCtrl.getCellPosition())&&(n=!0),!r&&c&&x.columns.indexOf(c)<0&&(r=!0),!i&&u&&x.columns.indexOf(u)<0&&(i=!0)}return{top:t,right:i,bottom:n,left:r}}refreshHandle(){if(this.beans.context.isDestroyed())return;let e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(R5,!!this.selectionHandle)}shouldHaveSelectionHandle(){let e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;let n=Ue(t),r=this.cellCtrl.getCellPosition(),s=ND(e)&&!this.cellCtrl.isSuppressFillHandle(),a=w4(e),c=i===1&&!this.cellCtrl.isEditing()&&(s||a);if(this.hasChartRange){let v=t[0].type===1&&this.rangeService.isCellInSpecificRange(r,t[0]);this.cellComp.addOrRemoveCssClass(M5,v),c=n.type===0}return c&&n.endRow!=null&&this.rangeService.isContiguousRange(n)&&this.rangeService.isBottomRightCell(n,r)}addSelectionHandle(){let e=Ue(this.rangeService.getCellRanges()).type,i=ND(this.beans.gos)&&Ge(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},k5="ag-cell",O5="ag-cell-auto-height",L5="ag-cell-normal-height",N5="ag-cell-focus",_5="ag-cell-first-right-pinned",B5="ag-cell-last-left-pinned",V5="ag-cell-not-inline-editing",H5="ag-column-hover",G5="ag-cell-wrap-text",z5=0,W5=(()=>{let e=class ew extends Z{constructor(i,n,r,s){super(),this.column=i,this.rowNode=n,this.beans=r,this.rowCtrl=s,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=i.getId()+"-"+z5++,this.colIdSanitised=er(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new x5(this,this.beans),this.cellCustomStyleFeature=new y5(this,this.beans),this.cellMouseListenerFeature=new S5(this,this.beans,this.column),this.cellKeyboardListenerFeature=new b5(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&tr(this.beans.gos)&&(this.cellRangeFeature=new P5(this.beans,this))}removeFeatures(){let i=this.beans.context;this.cellPositionFeature=i.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=i.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=i.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=i.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=i.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(i,n){let r=()=>{let c=this.column.getColDef(),u=this.rowNode.data;if(c.tooltipField&&re(u))return vc(u,c.tooltipField,this.column.isTooltipFieldContainsDots());let v=c.tooltipValueGetter;return v?v(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},s=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!n&&s&&!this.isCellRenderer()&&(n=()=>{let c=this.getGui(),u=c.children.length===0?c:c.querySelector(".ag-cell-value");return u?u.scrollWidth>u.clientWidth:!0});let a={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:i!=null?()=>i:r,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:n};this.tooltipFeature=new za(a,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(i,n,r,s,a,c){this.cellComp=i,this.eGui=n,this.printLayout=s,c??(c=this),this.addDomData(c),this.addFeatures(),c.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(r,c),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(n),this.cellCustomStyleFeature?.setComp(i),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(i,n),a&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(u=>u()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(i,n){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!i)return;let r=i.parentElement,s=bs(this.beans.gos,this.rowNode).height,a=v=>{if(this.editing||!this.isAlive()||!n.isAlive())return;let{paddingTop:b,paddingBottom:x,borderBottomWidth:D,borderTopWidth:A}=wo(r),O=b+x+D+A,L=i.offsetHeight+O;if(v<5){let K=Ot(this.beans.gos),$=!K||!K.contains(i),ne=L==0;if($||ne){window.setTimeout(()=>a(v+1),0);return}}let U=Math.max(L,s);this.rowNode.setRowAutoHeight(U,this.column)},c=()=>a(0);c();let u=this.beans.resizeObserverService.observeResize(i,c);n.addDestroyFunc(()=>{u(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){let i=this.column.getColDef();return i.cellRenderer!=null||i.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(i=!1){let{beans:n,column:r,rowNode:s,cellRangeFeature:a,cellComp:c}=this,{userComponentFactory:u,animationFrameService:v}=n,b=this.getValueToDisplay(),x;if(s.stub&&s.groupData?.[this.column.getId()]==null){let A=this.createCellRendererParams();x=u.getLoadingCellRendererDetails(r.getColDef(),A)}else if(this.isCellRenderer()){let A=this.createCellRendererParams();x=u.getCellRendererDetails(r.getColDef(),A)}c.setRenderDetails(x,b,i),v.requestAnimationFrame(()=>a?.refreshHandle())}setupControlComps(){let i=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(i)),this.includeRowDrag=this.isIncludeControl(i.rowDrag),this.includeDndSource=this.isIncludeControl(i.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(i){return this.rowNode.rowPinned!=null?!1:typeof i=="function"||i===!0}isCheckboxSelection(i){let{rowSelection:n}=this.beans.gridOptions;return i.checkboxSelection||Fc(this.column)&&n&&typeof n!="string"&&Na(n)}refreshShouldDestroy(){let i=this.column.getColDef(),n=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(i)),r=this.includeRowDrag!=this.isIncludeControl(i.rowDrag),s=this.includeDndSource!=this.isIncludeControl(i.dndSource),a=this.isAutoHeight!=this.column.isAutoHeight();return n||r||s||a}startEditing(i=null,n=!1,r=null){let{editService:s}=this.beans;return!this.isCellEditable()||this.editing||!s?!0:this.cellComp?s.startEditing(this,i,n,r):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(i,n,r)}),!0)}setEditing(i,n){this.editCompDetails=n,this.editing!==i&&(this.editing=i)}stopRowOrCellEdit(i=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(i):this.stopEditing(i)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(i=!1){this.onCellEditorAttachedFuncs=[];let{editService:n}=this.beans;return!this.editing||!n?!1:n.stopEditing(this,i)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:n=>this.beans.valueService.setValue(this.rowNode,this.column,n),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(n,r,s,a)=>this.registerRowDragger(n,r,a),setTooltip:(n,r)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(n,r),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(i){i.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(i){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(i)}refreshCell(i){if(this.suppressRefreshCell||this.editing)return;let n=this.column.getColDef(),r=i!=null&&!!i.newData,s=i!=null&&!!i.suppressFlash||!!n.suppressCellFlash,a=n.field==null&&n.valueGetter==null&&n.showRowGroup==null,c=i&&i.forceRefresh||a||r,u=!!this.cellComp,v=this.updateAndFormatValue(u),b=c||v;if(u){if(b){this.showValue(r);let x=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!s&&!x&&(this.beans.gos.get("enableCellChangeFlash")||n.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(i=!1,n=!1){this.beans.editService?.stopEditingAndFocus(this,i,n)}flashCell(i){let n=i?.flashDuration??i?.flashDelay,r=i?.fadeDuration??i?.fadeDelay;this.animateCell("data-changed",n,r)}animateCell(i,n,r){if(!this.cellComp)return;let{gos:s}=this.beans;if(n||(n=s.get("cellFlashDuration")),n===0)return;re(r)||(r=s.get("cellFadeDuration"));let a=`ag-cell-${i}`,c=`ag-cell-${i}-animation`;this.cellComp.addOrRemoveCssClass(a,!0),this.cellComp.addOrRemoveCssClass(c,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(a,!1),this.cellComp.addOrRemoveCssClass(c,!0),this.eGui.style.transition=`background-color ${r}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(c,!1),this.eGui.style.transition="")},r))},n)})}onFlashCells(i){if(!this.cellComp)return;let n=this.beans.cellPositionUtils.createId(this.getCellPosition());i.cells[n]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(i){return this.callValueFormatter(i)??i}callValueFormatter(i){return this.beans.valueService.formatValue(this.column,this.rowNode,i)}updateAndFormatValue(i){let n=this.value,r=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),i?!this.valuesAreEqual(n,this.value)||this.valueFormatted!=r:!0}valuesAreEqual(i,n){let r=this.column.getColDef();return r.equals?r.equals(i,n):i===n}getComp(){return this.cellComp}getValue(){return this.value}addDomData(i){let n=this.getGui();vo(this.beans.gos,n,ew.DOM_DATA_KEY_CELL_CTRL,this),i.addDestroyFunc(()=>vo(this.beans.gos,n,ew.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(i,n){return this.beans.gos.addGridCommonParams({type:n,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:i,rowIndex:this.rowNode.rowIndex})}processCharacter(i){this.cellKeyboardListenerFeature?.processCharacter(i)}onKeyDown(i){this.cellKeyboardListenerFeature?.onKeyDown(i)}onMouseEvent(i,n){this.cellMouseListenerFeature?.onMouseEvent(i,n)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:i,column:n,beans:r}=this;bR(i,n,r.visibleColsService)}refreshAriaColIndex(){let i=this.beans.visibleColsService.getAriaColIndex(this.column);LM(this.getGui(),i)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(i,n=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(i,this):this.startEditing(i,!0,n):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(i,n)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(i=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:i})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(i){this.eGui&&fn(this.eGui,"tabindex",i?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;let i=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(_5,i)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let i=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(B5,i)}onCellFocused(i){if(this.beans.focusService.isCellFocusSuppressed())return;let n=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){n&&i?.forceBrowserFocus&&(this.focusEventToRestore=i);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(N5,n),n&&i&&i.forceBrowserFocus){let s=this.cellComp.getFocusableElement();if(this.editing){let a=this.beans.focusService.findFocusableElements(s,null,!0);a.length&&(s=a[0])}s.focus({preventScroll:!!i.preventScrollOnBrowserFocus})}let r=this.beans.gos.get("editType")==="fullRow";!n&&!r&&this.editing&&this.stopRowOrCellEdit(),n&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Sr(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(k5,!0),this.cellComp.addOrRemoveCssClass(V5,!0);let i=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(O5,i),this.cellComp.addOrRemoveCssClass(L5,!i)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let i=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(H5,i)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){let i=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(G5,i)}dispatchCellContextMenuEvent(i){let n=this.column.getColDef(),r=this.createEvent(i,"cellContextMenu");this.beans.eventService.dispatchEvent(r),n.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{n.onCellContextMenu(r)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let i=new C5;return this.beans.context.createBean(i),i.init({rowNode:this.rowNode,column:this.column}),i}createDndSource(){let i=new w5(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(i),i}registerRowDragger(i,n,r){if(this.customRowDragComp){this.customRowDragComp.setDragElement(i,n);return}let s=this.createRowDragComp(i,n,r);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}))}createRowDragComp(i,n,r){let s=this.beans.gos.get("pagination"),a=this.beans.gos.get("rowDragManaged"),c=It(this.beans.gos);if(a){if(!c){ee("managed row dragging is only allowed in the Client Side Row Model");return}if(s){ee("managed row dragging is not possible when doing pagination");return}}let u=new YC(()=>this.value,this.rowNode,this.column,i,n,r);return this.beans.context.createBean(u),u}setSuppressRefreshCell(i){this.suppressRefreshCell=i}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(i){this.onCellEditorAttachedFuncs.push(i)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(i=>i()),this.onCellEditorAttachedFuncs=[]}};return e.DOM_DATA_KEY_CELL_CTRL="cellCtrl",e})(),fo=W5,j5=0,U5=(()=>{let e=class tw extends Z{constructor(i,n,r,s,a){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=n,this.gos=n.gos,this.rowNode=i,this.paginationPage=n.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=s,this.printLayout=a,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=i.id+"-"+j5++,this.rowId=er(i.id),this.initRowBusinessKey(),this.rowFocused=n.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=n.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(r),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let i=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=er(i)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(i,n){i==="left"?this.leftGui=n:i==="right"?this.rightGui=n:i==="fullWidth"?this.fullWidthGui=n:this.centerGui=n}setComp(i,n,r,s){s=Ac(this,this.beans.context,s);let a={rowComp:i,element:n,containerType:r,compBean:s};this.allRowGuis.push(a),this.updateGui(r,a),this.initialiseRowComp(a),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(i){this.allRowGuis=this.allRowGuis.filter(n=>n.containerType!==i),this.updateGui(i,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(i){let n=i?"none":"";this.allRowGuis.forEach(r=>r.element.style.display=n)}initialiseRowComp(i){let n=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(i),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(i),this.updateRowIndexes(i),this.setFocusedClasses(i),this.setStylesFromGridOptions(!1,i),Xh(n)&&this.rowNode.selectable&&this.onRowSelected(i),this.updateColumnLists(!this.useAnimationFrameForCreate);let r=i.rowComp;this.getInitialRowClasses(i.containerType).forEach(a=>r.addOrRemoveCssClass(a,!0)),this.executeSlideAndFadeAnimations(i),this.rowNode.group&&tg(i.element,this.rowNode.expanded==!0),this.setRowCompRowId(r),this.setRowCompRowBusinessKey(r),vo(n,i.element,tw.DOM_DATA_KEY_ROW_CTRL,this),i.compBean.addDestroyFunc(()=>vo(n,i.element,tw.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,i),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(i),this.isFullWidth()&&this.setupFullWidth(i),n.get("rowDragEntireRow")&&this.addRowDraggerToRow(i),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&i.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(i){this.businessKeySanitised!=null&&i.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(i){this.rowId=er(this.rowNode.id),this.rowId!=null&&i.setRowId(this.rowId)}executeSlideAndFadeAnimations(i){let{containerType:n}=i;this.slideInAnimation[n]&&(OD(()=>{this.onTopChanged()}),this.slideInAnimation[n]=!1),this.fadeInAnimation[n]&&(OD(()=>{i.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[n]=!1)}addRowDraggerToRow(i){if(tr(this.gos)){ee("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}let n=this.beans.localeService.getLocaleTextFunc(),r=new YC(()=>`1 ${n("rowDragRow","row")}`,this.rowNode,void 0,i.element,void 0,!0),s=this.createBean(r,this.beans.context);this.rowDragComps.push(s),i.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(a=>a!==s),this.destroyBean(s,this.beans.context)})}setupFullWidth(i){let n=this.getPinnedForContainer(i.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;let r=this.createFullWidthCompDetails(i.element,n);i.rowComp.showFullWidth(r)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(i=>i?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(i){let n=this.getCellCtrl(i);return n?n.getGui():null}executeProcessRowPostCreateFunc(){let i=this.gos.getCallback("processRowPostCreate");if(!i||!this.areAllContainersReady())return;let n={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};i(n)}areAllContainersReady(){let i=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),n=!!this.centerGui,r=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return i&&n&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;let i=this.beans.gos.getCallback("isFullWidthRow");return i?i({rowNode:this.rowNode}):!1}setRowType(){let i=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),n=this.isNodeFullWidthCell(),r=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),c=!!this.rowNode.group&&!this.rowNode.footer&&ug(this.gos,s);i?this.rowType="FullWidthLoading":r?this.rowType="FullWidthDetail":n?this.rowType="FullWidth":c?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(i=!1,n=!1){if(this.isFullWidth())return;if(i||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(n);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(i,n,r=null){let s={list:[],map:{}},a=(c,u)=>{s.list.push(u),s.map[c]=u};return n.forEach(c=>{let u=c.getInstanceId(),v=i.map[u];v||(v=new fo(c,this.rowNode,this.beans,this)),a(u,v)}),i.list.forEach(c=>{let u=c.getColumn().getInstanceId();if(s.map[u]!=null)return;if(!this.isCellEligibleToBeRemoved(c,r)){a(u,c);return}c.destroy()}),s}updateColumnListsImpl(i){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(i)}setCellCtrls(i){this.allRowGuis.forEach(n=>{let r=this.getCellCtrlsForContainer(n.containerType);n.rowComp.setCellCtrls(r,i)})}getCellCtrlsForContainer(i){switch(i){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let i=this.beans.columnViewportService,n=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let r=i.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,r);let s=n.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");let a=n.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,a,"right")}}isCellEligibleToBeRemoved(i,n){if(i.getColumn().getPinned()!=n)return!0;let c=i.isEditing(),u=this.beans.focusService.isCellFocused(i.getCellPosition());if(c||u){let b=i.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(b)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||li(this.gos,"print")}listenOnDomOrder(i){let n=()=>{i.rowComp.setDomOrder(this.getDomOrder())};i.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],n)}setAnimateFlags(i){if(this.isSticky()||!i)return;let n=re(this.rowNode.oldRowTop),r=this.beans.visibleColsService.isPinningLeft(),s=this.beans.visibleColsService.isPinningRight();if(n){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=r,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=r,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let i=(u,v)=>u?u.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(u.element,v).params):!0,n=i(this.fullWidthGui,null),r=i(this.centerGui,null),s=i(this.leftGui,"left"),a=i(this.rightGui,"right");return n&&r&&s&&a}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(n=>{this.addRowDraggerToRow(n)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(i=>i.onRowIndexChanged())},cellChanged:i=>{this.getAllCellCtrls().forEach(n=>n.onCellChanged(i))}})}onRowNodeDataChanged(i){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(r=>r.refreshCell({suppressFlash:!i.update,newData:!i.update})),this.allRowGuis.forEach(r=>{this.setRowCompRowId(r.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(r.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let i=this.rowNode.highlighted;this.allRowGuis.forEach(n=>{let r=i===0,s=i===1;n.rowComp.addOrRemoveCssClass("ag-row-highlight-above",r),n.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)})}postProcessRowDragging(){let i=this.rowNode.dragging;this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-dragging",i))}updateExpandedCss(){let i=this.rowNode.isExpandable(),n=this.rowNode.expanded==!0;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass("ag-row-group",i),r.rowComp.addOrRemoveCssClass("ag-row-group-expanded",i&&n),r.rowComp.addOrRemoveCssClass("ag-row-group-contracted",i&&!n),tg(r.element,i&&n)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Sr(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(i){return this.allRowGuis.find(n=>n.element.contains(i))}onKeyboardNavigate(i){let n=this.findFullWidthRowGui(i.target);if(!((n?n.element:null)===i.target))return;let a=this.rowNode,c=this.beans.focusService.getFocusedCell(),u={rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:c?.column??this.getColumnForFullWidth(n)};this.beans.navigationService.navigateToNextCell(i,i.key,u,!0),i.preventDefault()}onTabKeyDown(i){if(i.defaultPrevented||xr(i))return;let n=this.allRowGuis.find(v=>v.element.contains(i.target)),r=n?n.element:null,s=r===i.target,a=xt(this.gos),c=!1;r&&a&&(c=r.contains(a)&&a.classList.contains("ag-cell"));let u=null;!s&&!c&&(u=this.beans.focusService.findNextFocusableElement(r,!1,i.shiftKey)),(this.isFullWidth()&&s||!u)&&this.beans.navigationService.onTabKeyDown(this,i)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let i=this.allRowGuis.find(n=>Ln(n.element))?.element;return i?i.getBoundingClientRect().top:0}onSuppressCellFocusChanged(i){let n=this.isFullWidth()&&i?void 0:-1;this.allRowGuis.forEach(r=>{fn(r.element,"tabindex",n)})}onFullWidthRowFocused(i){let n=this.rowNode,r=i?this.isFullWidth()&&i.rowIndex===n.rowIndex&&i.rowPinned==n.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;s&&(s.classList.toggle("ag-full-width-focus",r),r&&i?.forceBrowserFocus&&s.focus({preventScroll:!0}))}recreateCell(i){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,i),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,i),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,i),i.destroy(),this.updateColumnLists()}removeCellCtrl(i,n){let r={list:[],map:{}};return i.list.forEach(s=>{s!==n&&(r.list.push(s),r.map[s.getColumn().getInstanceId()]=s)}),r}onMouseEvent(i,n){switch(i){case"dblclick":this.onRowDblClick(n);break;case"click":this.onRowClick(n);break;case"touchstart":case"mousedown":this.onRowMouseDown(n);break}}createRowEvent(i,n){return this.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:n})}createRowEventWithSource(i,n){let r=this.createRowEvent(i,n);return r.source=this,r}onRowDblClick(i){xr(i)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",i))}getColumnForFullWidth(i){let{visibleColsService:n}=this.beans;switch(i?.containerType){case"center":return n.getCenterCols()[0];case"left":return n.getLeftCols()[0];case"right":return n.getRightCols()[0];default:return n.getAllCols()[0]}}onRowMouseDown(i){if(this.lastMouseDownOnDragger=Oa(i.target,"ag-row-drag",3),!this.isFullWidth())return;let n=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();let r=this.findFullWidthRowGui(i.target),s=r?.element,a=i.target,c=!0;s&&s.contains(a)&&pw(a)&&(c=!1),this.beans.focusService.setFocusedCell({rowIndex:n.rowIndex,column:this.getColumnForFullWidth(r),rowPinned:n.rowPinned,forceBrowserFocus:c})}onRowClick(i){if(xr(i)||this.lastMouseDownOnDragger)return;let{gos:r}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",i));let s=i.ctrlKey||i.metaKey,a=i.shiftKey,c=this.rowNode.isSelected(),u=Co(r),v=_D(r),b=y4(r);if(u&&this.rowNode.group||this.isRowSelectionBlocked()||!b&&!c||!v&&c)return;let x=b4(r),D="rowClicked";if(c)x?this.rowNode.setSelectedParams({newValue:!1,event:i,source:D}):s?v&&this.rowNode.setSelectedParams({newValue:!1,event:i,source:D}):b&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!a,rangeSelect:a,event:i,source:D});else{let A=x?!1:!s;this.rowNode.setSelectedParams({newValue:!0,clearSelection:A,rangeSelect:a,event:i,source:D})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!Xh(this.gos)}setupDetailRowAutoHeight(i){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let n=()=>{let s=i.clientHeight;if(s!=null&&s>0){let a=()=>{this.rowNode.setRowHeight(s),(It(this.gos)||Mr(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(a,0)}},r=this.beans.resizeObserverService.observeResize(i,n);this.addDestroyFunc(r),n()}createFullWidthCompDetails(i,n){let{gos:r,rowNode:s}=this,a=r.addGridCommonParams({fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:i,eParentOfValue:i,pinned:n,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(u,v,b,x)=>this.addFullWidthRowDragging(u,v,b,x),setTooltip:(u,v)=>this.refreshRowTooltip(u,v)}),c=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return c.getFullWidthDetailCellRendererDetails(a);case"FullWidthGroup":return c.getFullWidthGroupCellRendererDetails(a);case"FullWidthLoading":return c.getFullWidthLoadingCellRendererDetails(a);default:return c.getFullWidthCellRendererDetails(a)}}refreshRowTooltip(i,n){if(!this.fullWidthGui)return;let r={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new za(r,this.beans))}addFullWidthRowDragging(i,n,r="",s){if(!this.isFullWidth())return;let a=new YC(()=>r,this.rowNode,void 0,i,n,s);this.createBean(a,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(a,this.beans.context)})}onUiLevelChanged(){let i=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=i){let n="ag-row-level-"+i,r="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass(n,!0),s.rowComp.addOrRemoveCssClass(r,!1)})}this.rowLevel=i}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){let i=this.isFirstRowOnPage(),n=this.isLastRowOnPage();this.firstRowOnPage!==i&&(this.firstRowOnPage=i,this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-first",i))),this.lastRowOnPage!==n&&(this.lastRowOnPage=n,this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-last",n)))}stopEditing(i=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,i)}setInlineEditingCss(){let i=this.editingRow||this.getAllCellCtrls().some(n=>n.isEditing());this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-inline-editing",i),n.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!i)})}setEditingRow(i){this.editingRow=i}startRowEditing(i=null,n=null,r=null){return this.editingRow?!0:this.beans.rowEditService?.startEditing(this,i,n,r)??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let i=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!i||!i.length||i.forEach(n=>{this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass(n,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,i=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(i,!0))},i=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(i,!1))})}setStylesFromGridOptions(i,n){i&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(n,r=>r.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(i){return i==="left"||i==="right"?i:null}getInitialRowClasses(i){let n=this.getPinnedForContainer(i),r={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[i],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:n};return this.beans.rowCssClassCalculator.getInitialRowClasses(r)}processStylesFromGridOptions(){let i=this.gos.get("rowStyle");if(i&&typeof i=="function"){ee("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let n=this.gos.getCallback("getRowStyle"),r;if(n){let s={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};r=n(s)}return r||i?Object.assign({},i,r):this.emptyStyle}onRowSelected(i){let n=!!this.rowNode.isSelected();this.forEachGui(i,r=>{r.rowComp.addOrRemoveCssClass("ag-row-selected",n),ig(r.element,n),r.element.contains(xt(this.gos))&&(r===this.centerGui||r===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let i=this.rowNode.isSelected();if(i&&!_D(this.gos))return;let r=this.beans.localeService.getLocaleTextFunc()(i?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${i?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(r,"rowSelection")}addHoverFunctionality(i){if(!this.active)return;let{element:n,compBean:r}=i,{rowNode:s,beans:a,gos:c}=this;r.addManagedListeners(n,{mouseenter:()=>s.onMouseEnter(),mouseleave:()=>s.onMouseLeave()}),r.addManagedListeners(s,{mouseEnter:()=>{!a.dragService.isDragging()&&!c.get("suppressRowHoverHighlight")&&(n.classList.add("ag-row-hover"),s.setHovered(!0))},mouseLeave:()=>{n.classList.remove("ag-row-hover"),s.setHovered(!1)}})}roundRowTopToBounds(i){let n=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),r=this.applyPaginationOffset(n.top,!0)-100,s=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(r,i),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(i,n){i?n(i):this.allRowGuis.forEach(n)}onRowHeightChanged(i){if(this.rowNode.rowHeight==null)return;let n=this.rowNode.rowHeight,r=this.beans.environment.getDefaultRowHeight(),a=dM(this.gos)?bs(this.gos,this.rowNode).height:void 0,c=a?`${Math.min(r,a)-2}px`:void 0;this.forEachGui(i,u=>{u.element.style.height=`${n}px`,c&&u.element.style.setProperty("--ag-line-height",c)})}addEventListener(i,n){super.addEventListener(i,n)}removeEventListener(i,n){super.removeEventListener(i,n)}destroyFirstPass(i=!1){if(this.active=!1,!i&&ka(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){let s=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventService.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let i=n=>(n.list.forEach(r=>r.destroy()),{list:[],map:{}});this.centerCellCtrls=i(this.centerCellCtrls),this.leftCellCtrls=i(this.leftCellCtrls),this.rightCellCtrls=i(this.rightCellCtrls)}setFocusedClasses(i){this.forEachGui(i,n=>{n.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),n.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let i=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);i!==this.rowFocused&&(this.rowFocused=i,this.setFocusedClasses()),!i&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let i=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==i&&(this.paginationPage=i,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(i,n=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return i;let r=this.beans.pageBoundsService.getPixelOffset();return i+r*(n?1:-1)}setRowTop(i){if(!this.printLayout&&re(i)){let n=this.applyPaginationOffset(i),a=`${this.rowNode.isRowPinned()||this.rowNode.sticky?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}px`;this.setRowTopStyle(a)}}getInitialRowTop(i){return this.suppressRowTransform?this.getInitialRowTopShared(i):void 0}getInitialTransform(i){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(i)})`}getInitialRowTopShared(i){if(this.printLayout)return"";let n=this.rowNode,r;if(this.isSticky())r=n.stickyRowTop;else{let s=this.slideInAnimation[i]?this.roundRowTopToBounds(n.oldRowTop):n.rowTop,a=this.applyPaginationOffset(s);r=n.isRowPinned()?a:this.beans.rowContainerHeightService.getRealPixelPosition(a)}return r+"px"}setRowTopStyle(i){this.allRowGuis.forEach(n=>this.suppressRowTransform?n.rowComp.setTop(i):n.rowComp.setTransform(`translateY(${i})`))}getRowNode(){return this.rowNode}getCellCtrl(i){let n=null;return this.getAllCellCtrls().forEach(r=>{r.getColumn()==i&&(n=r)}),n!=null||this.getAllCellCtrls().forEach(r=>{r.getColSpanningList().indexOf(i)>=0&&(n=r)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(i){let n=this.rowNode.getRowIndexString();if(n===null)return;let r=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),s=this.rowNode.rowIndex%2===0,a=r+this.rowNode.rowIndex+1;this.forEachGui(i,c=>{c.rowComp.setRowIndex(n),c.rowComp.addOrRemoveCssClass("ag-row-even",s),c.rowComp.addOrRemoveCssClass("ag-row-odd",!s),OM(c.element,a)})}setStoppingRowEdit(i){this.stoppingRowEdit=i}};return e.DOM_DATA_KEY_ROW_CTRL="renderedRow",e})(),mo=U5,$5=class extends Z{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",yM("touchstart")?"touchstart":"mousedown"].forEach(i=>{let n=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:n})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||xr(t))return;let i=this.getRowForEvent(t),n=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,i,n):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Ds())return;let e=new ys(this.element),t=i=>{let n=this.getRowForEvent(i.touchEvent),r=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,n,r)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){let i=xc(this.gos,t,mo.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,n){let r=i?i.getRowNode():null,s=n?n.getColumn():null,a=null;if(s){let v=e||t;n.dispatchCellContextMenuEvent(v??null),a=this.valueService.getValue(s,r)}let c=this.ctrlsService.getGridBodyCtrl(),u=n?n.getGui():c.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:r,column:s,value:a,anchorToElement:u})}getControlsForEventTarget(e){return{cellCtrl:HC(this.gos,e,fo.DOM_DATA_KEY_CELL_CTRL),rowCtrl:HC(this.gos,e,mo.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){let{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){let n=e.getRowNode(),r=e.getColumn(),s=e.isEditing();!XC(this.gos,i,n,r,s)&&t==="keydown"&&(!s&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),dR(i)&&e.processCharacter(i)),t==="keydown"&&this.eventService.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){let n=e.getRowNode(),r=this.focusService.getFocusedCell(),s=r&&r.column;if(!XC(this.gos,i,n,s,!1)){let c=i.key;if(t==="keydown")switch(c){case J.PAGE_HOME:case J.PAGE_END:case J.PAGE_UP:case J.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case J.UP:case J.DOWN:e.onKeyboardNavigate(i);break;case J.TAB:e.onTabKeyDown(i);break;default:}}t==="keydown"&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;let i=WH(e);if(i===J.A)return this.onCtrlAndA(e);if(i===J.C)return this.onCtrlAndC(e);if(i===J.D)return this.onCtrlAndD(e);if(i===J.V)return this.onCtrlAndV(e);if(i===J.X)return this.onCtrlAndX(e);if(i===J.Y)return this.onCtrlAndY();if(i===J.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){let{pinnedRowModel:t,rowModel:i,rangeService:n}=this;if(n&&i.isRowsToRender()){let[r,s]=[t.isEmpty("top"),t.isEmpty("bottom")],a=r?null:"top",c,u;s?(c=null,u=i.getRowCount()-1):(c="bottom",u=t.getPinnedBottomRowCount()-1);let v=this.visibleColsService.getAllCols();if(nn(v))return;n.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:u,rowEndPinned:c,columnStart:v[0],columnEnd:Ue(v)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){let{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},q5=class extends Z{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){let e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;St(this.element,t),On(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},K5=class extends Z{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){let e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;St(this.element,t),On(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},Gh=e=>e.getTopRowCtrls(),zh=e=>e.getStickyTopRowCtrls(),Wh=e=>e.getStickyBottomRowCtrls(),jh=e=>e.getBottomRowCtrls(),Uh=e=>e.getCentreRowCtrls(),Y5={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:Uh},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:Uh},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:Uh},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:Uh},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:Gh},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Gh},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Gh},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:Gh},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:zh},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:zh},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:zh},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:zh},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Wh},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Wh},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Wh},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Wh},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:jh},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:jh},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:jh},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:jh}};function Pa(e){return Y5[e]}var X5=["topCenter","topLeft","topRight"],Z5=["bottomCenter","bottomLeft","bottomRight"],Q5=["center","left","right"],J5=["center","left","right","fullWidth"],eG=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],tG=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],iG=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],FR=["stickyTopCenter","stickyTopLeft","stickyTopRight"],AR=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],nG=[...FR,"stickyTopFullWidth",...AR,"stickyBottomFullWidth"],rG=[...X5,...Z5,...Q5,...FR,...AR],sG=class extends Z{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=Pa(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new m5(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new $5(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();let n=()=>this.onPinnedWidthChanged();this.forContainers(tG,()=>{this.pinnedWidthFeature=this.createManagedBean(new q5(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:n})}),this.forContainers(iG,()=>{this.pinnedWidthFeature=this.createManagedBean(new K5(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:n})}),this.forContainers(J5,()=>this.createManagedBean(new TR(this.eContainer,this.name==="center"?i:void 0))),this.forContainers(rG,()=>this.createManagedBean(new v5(this.eContainer))),this.forContainers(eG,()=>this.createManagedBean(new Aw(r=>this.comp.setContainerWidth(`${r}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(nG.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let t=()=>{let i=this.gos.get("ensureDomOrder"),n=li(this.gos,"print");this.comp.setDomOrder(i||n)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Pc(this.eViewport)}getCenterViewportScrollLeft(){return sg(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return WM(this.eViewport)}getViewportScrollLeft(){return sg(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||bV(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){og(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let i=li(this.gos,"print"),r=this.gos.get("embedFullWidthRows")||i,s=t.filter(a=>{let c=a.isFullWidth();return this.options.fullWidth?!r&&c:r||!c});this.comp.setRowCtrls({rowCtrls:s,useFlushSync:e})}},PR="ag-force-vertical-scroll",oG="ag-selectable",aG="ag-column-moving",lG=class extends Z{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,n,r,s,a){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=r,this.eStickyTop=s,this.eStickyBottom=a,this.eCenterColsViewport=i.querySelector(`.${Pa("center").viewport}`),this.eFullWidthContainer=i.querySelector(`.${Pa("fullWidth").container}`),this.eStickyTopFullWidthContainer=s.querySelector(`.${Pa("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=a.querySelector(`.${Pa("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",c=>this.setCellTextSelection(c.currentValue)),this.createManagedBean(new kw(this.comp)),this.bodyScrollFeature=this.createManagedBean(new f5(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,r,s,a]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvancedFilterHeaderComp(n),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){let e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:i=>{let{target:n}=i,r=Oa(n,"ag-root",t);t.classList.toggle("ag-has-focus",!r)},focusout:i=>{let{target:n,relatedTarget:r}=i,s=t.contains(r),a=Oa(r,"ag-root",t);Oa(n,"ag-root",t)||(!s||a)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(aG,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(oG,e)}onScrollVisibilityChanged(){let e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();let t=e&&this.scrollVisibleService.getScrollbarWidth()||0,i=VM()?16:0,n=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(n)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){let e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let e=i=>{let n=i.relatedTarget;if(qC(n)===null){this.rowRenderer.stopEditing();return}let r=t.some(s=>s.contains(n))&&this.mouseEventService.isElementInThisGrid(n);if(!r){let s=this.popupService;r=s.getActivePopups().some(a=>a.contains(n))||s.isElementWithinCustomPopup(n)}r||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(i=>this.addManagedElementListeners(i,{focusout:e}))}updateRowCount(){let e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=e?PR:null,i=li(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&SV(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes(),t=()=>{let i=e&&ka(this.gos)&&!this.rowContainerHeightService.isStretching(),n=i?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(n,i)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){let{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){let{deltaX:t,deltaY:i,shiftKey:n}=e,r=n||Math.abs(t)>Math.abs(i),s=e.target;r?(this.eStickyTopFullWidthContainer.contains(s)||this.eStickyBottomFullWidthContainer.contains(s))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){let{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();let{target:n}=e||t;(n===this.eBodyViewport||n===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Ds())return;let t=new ys(this.eBodyViewport),i=n=>{e(void 0,n.touchStart,n.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new yH(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){let{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),i=this.pinnedRowModel.getPinnedTopTotalHeight(),n=0;t>0&&(n+=t),i>0&&(n+=i),n>0&&(n+=1),this.comp.setStickyTopTop(`${n}px`)}setStickyBottomOffsetBottom(){let e=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,n=e+i;this.comp.setStickyBottomBottom(`${n}px`)}sizeColumnsToFit(e,t){let n=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,s=Pc(this.eGridBody)-n;if(s>0){this.columnSizeService.sizeColumnsToFit(s,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):ee("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},cG=class extends qe{constructor(e,t,i,n,r){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=n,this.cellCtrl=t;let s=document.createElement("div");s.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(s);let a=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),Hi(a,t.getCellAriaRole()),a.setAttribute("col-id",t.colIdSanitised);let c={addOrRemoveCssClass:(u,v)=>this.addOrRemoveCssClass(u,v),setUserStyles:u=>$M(a,u),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:u=>this.includeSelection=u,setIncludeRowDrag:u=>this.includeRowDrag=u,setIncludeDndSource:u=>this.includeDndSource=u,setRenderDetails:(u,v,b)=>this.setRenderDetails(u,v,b),setEditDetails:(u,v,b)=>this.setEditDetails(u,v,b),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(c,this.getGui(),this.eCellWrapper,i,r,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let r=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(i||r)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,n=i&&this.eCellWrapper==null;if(n){let v=document.createElement("div");v.setAttribute("role","presentation"),v.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=v,this.getGui().appendChild(this.eCellWrapper)}let r=!i&&this.eCellWrapper!=null;r&&(gn(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);let s=!e&&i,a=s&&this.eCellValue==null;if(a){let v=document.createElement("span");v.setAttribute("role","presentation"),v.setAttribute("class","ag-cell-value"),this.eCellValue=v,this.eCellWrapper.appendChild(this.eCellValue)}let c=!s&&this.eCellValue!=null;c&&(gn(this.eCellValue),this.eCellValue=void 0);let u=n||r||a||c;return u&&this.removeControls(),e||t&&this.addControls(),u}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,i){let n=this.editorVersion,r=e.newAgStackInstance();if(r==null)return;let{params:s}=e;r.then(c=>this.afterCellEditorCreated(n,c,s,t,i)),Ge(this.cellEditor)&&s.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();vi(t);let i=e!=null?er(e,!0):null;i!=null&&(t.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),gn(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),gn(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let i=!this.beans.gos.get("suppressAnimationFrame"),n=this.rendererVersion,{componentClass:r}=e,s=()=>{if(this.rendererVersion!==n||!this.isAlive())return;let c=e.newAgStackInstance(),u=this.afterCellRendererCreated.bind(this,n,r);c&&c.then(u)};i&&this.firstRender?this.beans.animationFrameService.createTask(s,this.rowNode.rowIndex,"createTasksP2"):s()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,i){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(i);return}if(this.cellRenderer=i,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let r=this.getParentOfValue();vi(r),r.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,i,n,r){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){ee(`cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let c=n||t.isPopup!==void 0&&t.isPopup();c?this.addPopupCellEditor(i,r):this.addInCellEditor(),this.refreshEditStyles(!0,c),t.afterGuiAttached&&t.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.rowCtrl?.setInlineEditingCss()}addInCellEditor(){let e=this.getGui();e.contains(xt(this.beans.gos))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gos.get("editType")==="fullRow"&&ee("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(e));let n=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&n.appendChild(this.cellEditorGui);let r=this.beans.popupService,s=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),a=t??i.getPopupPosition?.()??"over",c=this.beans.gos.get("enableRtl"),u={ePopup:n,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:a,alignSide:c?"right":"left",keepWithinBounds:!0},v=r.positionPopupByComponent.bind(r,u),b=this.beans.localeService.getLocaleTextFunc(),x=r.addPopup({modal:s,eChild:n,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:v,ariaLabel:b("ariaLabelCellEditor","Cell Editor")});x&&(this.hideEditorPopup=x.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let e=this.getGui();e.contains(xt(this.beans.gos))&&$C()&&e.focus({preventScroll:!0}),vi(this.getParentOfValue())}},dG=class extends qe{constructor(e,t,i){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;let n=document.createElement("div");n.setAttribute("comp-id",`${this.getCompId()}`),n.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(n);let r=this.getGui(),s=r.style;this.domOrder=this.rowCtrl.getDomOrder(),Hi(r,"row");let a={setDomOrder:c=>this.domOrder=c,setCellCtrls:c=>this.setCellCtrls(c),showFullWidth:c=>this.showFullWidth(c),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(c,u)=>this.addOrRemoveCssClass(c,u),setUserStyles:c=>$M(r,c),setTop:c=>s.top=c,setTransform:c=>s.transform=c,setRowIndex:c=>r.setAttribute("row-index",c),setRowId:c=>r.setAttribute("row-id",c),setRowBusinessKey:c=>r.setAttribute("row-business-key",c),refreshFullWidth:c=>this.fullWidthCellRenderer?.refresh?.(c())??!1};e.setComp(a,this.getGui(),i,void 0),this.addDestroyFunc(()=>{e.unsetComp(i)})}getInitialStyle(e){let t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){let t=n=>{if(this.isAlive()){let r=n.getGui();this.getGui().appendChild(r),this.rowCtrl.setupDetailRowAutoHeight(r),this.setFullWidthRowComp(n)}else this.beans.context.destroyBean(n)},i=e.newAgStackInstance();i?.then(t)}setCellCtrls(e){let t=Object.assign({},this.cellComps);e.forEach(n=>{let r=n.instanceId;this.cellComps[r]==null?this.newCellComp(n):t[r]=null});let i=Ss(t).filter(n=>n!=null);this.destroyCells(i),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];e.forEach(i=>{let n=this.cellComps[i.instanceId];n&&t.push(n.getGui())}),UM(this.getGui(),t)}newCellComp(e){let t=new cG(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.instanceId]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let e=Ss(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&Ye("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){e.forEach(t=>{if(!t)return;let i=t.getCtrl().instanceId;this.cellComps[i]===t&&(t.detach(),t.destroy(),this.cellComps[i]=null)})}};function uG(e){let t;return e.type==="center"?t=`<div class="${e.viewport}" data-ref="eViewport" role="presentation">
                <div class="${e.container}" data-ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" data-ref="eContainer"></div>`,t}var hG=class extends qe{constructor(){super(),this.eViewport=ae,this.eContainer=ae,this.rowComps={},this.name=qe.elementGettingCreated.getAttribute("name"),this.options=Pa(this.name),this.setTemplate(uG(this.options))}wireBeans(e){this.beans=e}postConstruct(){let e={setHorizontalScroll:i=>this.eViewport.scrollLeft=i,setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:({rowCtrls:i})=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i,setOffsetTop:i=>this.eContainer.style.transform=`translateY(${i})`};this.createManagedBean(new sG(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy()}setRowCtrls(e){let t=q({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let i=n=>{let r=n.instanceId,s=t[r];if(s)this.rowComps[r]=s,delete t[r],this.ensureDomOrder(s.getGui());else{if(!n.getRowNode().displayed)return;let a=new dG(n,this.beans,this.options.type);this.rowComps[r]=a,this.appendRow(a.getGui())}};e.forEach(i),Ss(t).forEach(n=>{this.eContainer.removeChild(n.getGui()),n.destroy()}),Hi(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?yV(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(jM(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}},gG={selector:"AG-ROW-CONTAINER",component:hG};function gc(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}var pG=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${gc(["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${gc(["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${gc(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${gc(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${gc(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,fG=class extends qe{constructor(){super(pG,[d5,h5,p5,l5,gG]),this.eBodyViewport=ae,this.eStickyTop=ae,this.eStickyBottom=ae,this.eTop=ae,this.eBottom=ae,this.eBody=ae}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.rangeService=e.rangeService}postConstruct(){let e=(i,n)=>{let r=`${i}px`;n.style.minHeight=r,n.style.height=r},t={setRowAnimationCssOnBodyViewport:(i,n)=>this.setRowAnimationCssOnBodyViewport(i,n),setColumnCount:i=>cV(this.getGui(),i),setRowCount:i=>lV(this.getGui(),i),setTopHeight:i=>e(i,this.eTop),setBottomHeight:i=>e(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setStickyBottomHeight:i=>{this.eStickyBottom.style.height=i,this.eStickyBottom.classList.toggle("ag-hidden",i==="0px")},setStickyBottomBottom:i=>this.eStickyBottom.style.bottom=i,setStickyBottomWidth:i=>this.eStickyBottom.style.width=i,setColumnMovingCss:(i,n)=>this.addOrRemoveCssClass(i,n),updateLayoutClasses:(i,n)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(s=>{s.toggle("ag-layout-auto-height",n.autoHeight),s.toggle("ag-layout-normal",n.normal),s.toggle("ag-layout-print",n.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",n.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",n.normal),this.addOrRemoveCssClass("ag-layout-print",n.print)},setAlwaysVerticalScrollClass:(i,n)=>this.eBodyViewport.classList.toggle(PR,n),registerBodyViewportResizeListener:i=>{let n=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>n())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,n)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(r=>r.classList.toggle(i,n))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new lG),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&tr(this.gos)||sw(this.gos))&&aV(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let i=this.eBodyViewport.classList;i.toggle("ag-row-animation",t),i.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}},mG={selector:"AG-GRID-BODY",component:fG},vG=class extends Z{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){let e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){let e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){let e=this.gos.get("scrollbarWidth"),i=typeof e=="number"&&e>=0?e:vV();i!=null&&(this.scrollbarWidth=i,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},ZD="__ag_grid_instance",kR=class OR extends Z{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=OR.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[ZD]=this.gridInstanceId}getRenderedCellForEvent(t){return HC(this.gos,t.target,fo.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let i=t;for(;i;){let n=i[ZD];if(re(n))return n===this.gridInstanceId;i=i.parentElement}return!1}getCellPositionForEvent(t){let i=this.getRenderedCellForEvent(t);return i?i.getCellPosition():null}getNormalisedPosition(t){let i=li(this.gos,"normal"),n=t,r,s;if(n.clientX!=null||n.clientY!=null?(r=n.clientX,s=n.clientY):(r=n.x,s=n.y),i){let a=this.ctrlsService.getGridBodyCtrl(),c=a.getScrollFeature().getVScrollPosition(),u=a.getScrollFeature().getHScrollPosition();r+=u.left,s+=c.top}return{x:r,y:s}}};kR.gridInstanceSequence=new Va;var CG=kR,wG=class extends Z{constructor(){super(),this.beanName="navigationService",this.onPageDown=LD(this.onPageDown,100),this.onPageUp=LD(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let i=e.key,n=e.altKey,r=e.ctrlKey||e.metaKey,s=!!this.rangeService&&e.shiftKey,a=this.mouseEventService.getCellPositionForEvent(e),c=!1;switch(i){case J.PAGE_HOME:case J.PAGE_END:!r&&!n&&(this.onHomeOrEndKey(i),c=!0);break;case J.LEFT:case J.RIGHT:case J.UP:case J.DOWN:if(!a)return!1;r&&!n&&!s&&(this.onCtrlUpDownLeftRight(i,a),c=!0);break;case J.PAGE_DOWN:case J.PAGE_UP:!r&&!n&&(c=this.handlePageUpDown(i,a,t));break}return c&&e.preventDefault(),c}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),t?(e===J.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){let{scrollIndex:t,scrollType:i,scrollColumn:n,focusIndex:r,focusColumn:s}=e;re(n)&&!n.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(n),re(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(r),this.focusService.setFocusedCell({rowIndex:r,column:s,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:r,rowPinned:null,column:s})}onPageDown(e){let i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.getViewportHeight(),r=this.pageBoundsService.getPixelOffset(),s=i.top+n,a=this.rowModel.getRowIndexAtPixel(s+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a):this.navigateToNextPage(e,a)}onPageUp(e){let i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.pageBoundsService.getPixelOffset(),r=i.top,s=this.rowModel.getRowIndexAtPixel(r+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,s,!0):this.navigateToNextPage(e,s,!0)}navigateToNextPage(e,t,i=!1){let n=this.getViewportHeight(),r=this.pageBoundsService.getFirstRow(),s=this.pageBoundsService.getLastRow(),a=this.pageBoundsService.getPixelOffset(),c=this.rowModel.getRow(e.rowIndex),u=i?c?.rowHeight-n-a:n-a,v=c?.rowTop+u,b=this.rowModel.getRowIndexAtPixel(v+a);if(b===e.rowIndex){let D=i?-1:1;t=b=e.rowIndex+D}let x;i?(x="bottom",b<r&&(b=r),t<r&&(t=r)):(x="top",b>s&&(b=s),t>s&&(t=s)),this.isRowTallerThanView(b)&&(t=b,x="top"),this.navigateTo({scrollIndex:t,scrollType:x,scrollColumn:null,focusIndex:b,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let i=t?-1:1,n=this.getViewportHeight(),r=this.pageBoundsService.getLastRow(),s=0,a=e.rowIndex;for(;a>=0&&a<=r;){let c=this.rowModel.getRow(a);if(c){let u=c.rowHeight??0;if(s+u>n)break;s+=u}a+=i}return Math.max(0,Math.min(a,r))}getViewportHeight(){let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth(),i=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(i-=t),i}isRowTallerThanView(e){let t=this.rowModel.getRow(e);if(!t)return!1;let i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:n}=i,r=i.column;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:r,focusIndex:n,focusColumn:r})}onHomeOrEndKey(e){let t=e===J.PAGE_HOME,i=this.visibleColsService.getAllCols(),n=t?i[0]:Ue(i),r=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:n,focusIndex:r,focusColumn:n})}onTabKeyDown(e,t){let i=t.shiftKey,n=this.tabToNextCellCommon(e,i,t);if(n!==!1){n?t.preventDefault():n===null&&this.focusService.allowFocusForNextGridCoreContainer(i);return}if(i){let{rowIndex:r,rowPinned:s}=e.getRowPosition();(s?r===0:r===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof fo&&e.focusCell(!0),(!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&t.preventDefault()}tabToNextCell(e,t){let i=this.focusService.getFocusedCell();if(!i)return!1;let n=this.getCellByPosition(i);return!n&&(n=this.rowRenderer.getRowByPosition(i),!n||!n.isFullWidth())?!1:!!this.tabToNextCellCommon(n,e,t)}tabToNextCellCommon(e,t,i){let n=e.isEditing();if(!n&&e instanceof fo){let a=e.getRowCtrl();a&&(n=a.isEditing())}let r;return n?this.gos.get("editType")==="fullRow"?r=this.moveToNextEditingRow(e,t,i):r=this.moveToNextEditingCell(e,t,i):r=this.moveToNextCellNotEditing(e,t),r===null?r:r||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){let n=e.getCellPosition();e.getGui().focus(),e.stopEditing();let r=this.findNextCellToFocusOn(n,t,!0);return r===!1?null:r==null?!1:(r.startEditing(null,!0,i),r.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){let n=e.getCellPosition(),r=this.findNextCellToFocusOn(n,t,!0);if(r===!1)return null;if(r==null)return!1;let s=r.getCellPosition(),a=this.isCellEditable(n),c=this.isCellEditable(s),u=s&&n.rowIndex===s.rowIndex&&n.rowPinned===s.rowPinned;return a&&e.setFocusOutOnEditor(),u||(e.getRowCtrl().stopEditing(),r.getRowCtrl().startRowEditing(void 0,void 0,i)),c?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(e,t){let i=this.visibleColsService.getAllCols(),n;e instanceof mo?n=ue(q({},e.getRowPosition()),{column:t?i[0]:Ue(i)}):n=e.getCellPosition();let r=this.findNextCellToFocusOn(n,t,!1);if(r===!1)return null;if(r instanceof fo)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),t);return re(r)}findNextCellToFocusOn(e,t,i){let n=e;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextTabbedCell(n,t);let r=this.gos.getCallback("tabToNextCell");if(re(r)){let u=r({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:n||null});if(u===!0||u===null)u===null&&ee("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),n=e;else{if(u===!1)return!1;n={rowIndex:u.rowIndex,column:u.column,rowPinned:u.rowPinned}}}if(!n)return null;if(n.rowIndex<0){let c=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c+n.rowIndex,column:n.column},fromCell:!0}),null}let s=this.gos.get("editType")==="fullRow";if(i&&!s&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);let a=this.getCellByPosition(n);if(!a){let c=this.rowRenderer.getRowByPosition(n);if(!c||!c.isFullWidth()||i)continue;return c}if(!a.isSuppressNavigable())return this.rangeService?.setRangeToCell(n),a}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){let t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,n){let r=i,s=!1;for(;r&&(r===i||!this.isValidNavigateCell(r));)this.gos.get("enableRtl")?t===J.LEFT&&(r=this.getLastCellOfColSpan(r)):t===J.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextCellToFocus(t,r),s=Ge(r);if(s&&e&&e.key===J.UP&&(r={rowIndex:-1,rowPinned:null,column:i.column}),n){let c=this.gos.getCallback("navigateToNextCell");if(re(c)){let v=c({key:t,previousCellPosition:i,nextCellPosition:r||null,event:e});re(v)?r={rowPinned:v.rowPinned,rowIndex:v.rowIndex,column:v.column}:r=null}}if(!r)return;if(r.rowIndex<0){let c=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c+r.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}let a=this.getNormalisedPosition(r);a?this.focusPosition(a):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(e){this.ensureCellVisible(e);let t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){let i=this.visibleColsService.getAllCols(),n=this.rowRenderer.getRowByPosition(e);if(!n||!n.isFullWidth())return!1;let r=this.focusService.getFocusedCell(),s={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Ue(i):i[0])};this.focusPosition(s);let a=t??(r!=null&&this.rowPositionUtils.before(s,r));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:s.column,isFullWidthCell:!0,fromBelow:a}),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){let t=this.getCellByPosition(e);if(!t)return e;let i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:Ue(i),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=dg(this.gos),i=this.rowModel.getRow(e.rowIndex);!(t&&i?.sticky)&&Ge(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},yG=class extends Z{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},bG=class extends Z{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,n=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:n})},i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let n=-1,r="left",s=this.menuService.isLegacyMenuEnabled();!s&&this.gos.get("enableRtl")&&(n=1,r="right");let a=s?void 0:4*n,c=s?void 0:4;this.showPopup(e,u=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:u,nudgeX:a,nudgeY:c,alignSide:r,keepWithinBounds:!0,position:"under",column:e})},i,t,s)}showPopup(e,t,i,n,r){let s=e?this.createBean(new RH(e,"COLUMN_MENU")):void 0;if(this.activeMenu=s,!s?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let a=document.createElement("div");Hi(a,"presentation"),a.classList.add("ag-menu"),r||a.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(a,{keydown:O=>this.trapFocusWithin(O,a)}),a.appendChild(s?.getGui());let c,u=()=>s?.afterGuiDetached(),v=this.menuService.isColumnMenuAnchoringEnabled()?n??this.ctrlsService.getGridBodyCtrl().getGui():void 0,b=O=>{e.setMenuVisible(!1,"contextMenu");let B=O instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),B&&n&&Ln(n)){let L=this.focusService.findTabbableParent(n);L&&L.focus()}u(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},x=this.localeService.getLocaleTextFunc(),D=r&&i!=="columnFilter"?x("ariaLabelColumnMenu","Column Menu"):x("ariaLabelColumnFilter","Column Filter"),A=this.popupService.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:b,positionCallback:()=>t(a),anchorToElement:v,ariaLabel:D});A&&(this.hidePopup=c=A.hideFunc),s.afterInit().then(()=>{t(a),s.afterGuiAttached({container:i,hidePopup:c})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==J.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},SG=class extends Z{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){let n=uM(this.gos).ResizeObserver,r=n?new n(t):null;return r?.observe(e),()=>r?.disconnect()}},xG=class extends Z{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){let t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){let i=this.paginationService?.getCurrentPage()??0;i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&ee(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);let n={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],n),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((i,n)=>i.index!==n.index?t*(n.index-i.index):n.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");let t=this.createTasksP1,i=t.list,n=this.createTasksP2,r=n.list,s=this.destroyTasks,a=new Date().getTime(),c=new Date().getTime()-a,u=e<=0,v=this.ctrlsService.getGridBodyCtrl();for(;u||c<e;){if(!v.getScrollFeature().scrollGridIfNeeded()){let x;if(i.length)this.sortTaskList(t),x=i.pop().task;else if(r.length)this.sortTaskList(n),x=r.pop().task;else if(s.length)x=s.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(x)||x()}c=new Date().getTime()-a}i.length||r.length||s.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){let t=uM(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};var EG=class extends Z{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=It(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;let t=new Set(e);this.rowModel.forEachNode(i=>{i.id&&t.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let e=[];return this.rowModel.forEachNode(({expanded:t,id:i})=>{t&&i&&e.push(i)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,n){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i,n),e.setExpanded(t,void 0,n))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},DG=class extends Z{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){let t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){let i=this.getRowCtrl(e),n=this.getCellGui(i,t);if(!n)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};let r=n.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(e){let t=e.rowNode,i=e.column,{anchorToElement:n,value:r}=e;t&&i&&r==null&&(r=this.valueService.getValueForDisplay(i,t)),n==null&&(n=this.getContextMenuAnchorElement(t,i)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,r,n)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){let{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&xs(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(Ds()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.filterManager?.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){let t=e.getColDef(),i=t.floatingFilterComponentParams?.suppressFilterButton;return i!=null&&ee("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,i,n){let{positionBy:r}=t,s=t.column;if(r==="button"){let{buttonElement:a}=t;e.showMenuAfterButtonClick(s,a,i,n)}else if(r==="mouse"){let{mouseEvent:a}=t;e.showMenuAfterMouseEvent(s,a,i,n)}else s&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let a=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned())?.getHeaderCtrlForColumn(s);a&&e.showMenuAfterButtonClick(s,a.getAnchorElementForMenu(n),i,!0)}))}getRowCtrl(e){let{rowIndex:t,rowPinned:i}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){return!e||!t?void 0:e.getCellCtrl(t)?.getGui()||void 0}getContextMenuAnchorElement(e,t){let i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),n=this.getRowCtrl(e);if(!n)return i;let r=this.getCellGui(n,t);return r||(n.isFullWidth()?n.getFullWidthElement():i)}},MG=class extends uo{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},RG={selector:"AG-INPUT-TEXT-AREA",component:MG},IG=class extends Wa{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[RG]),this.eTextArea=ae}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),re(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let t=e.key;(t===J.LEFT||t===J.UP||t===J.RIGHT||t===J.DOWN||e.shiftKey&&t===J.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue();return!re(e)&&!re(this.params.value)?this.params.value:this.params.parseValue(e)}},TG=class extends Wa{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){vo(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,i=n=>{XC(this.gos,n,t.node,t.column,!0)||t.onKeyDown(n)};this.addManagedElementListeners(e,{keydown:i})}},FG=class extends Wa{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[LH]),this.eSelect=ae,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;let{eSelect:t,valueService:i,gos:n}=this,{values:r,value:s,eventKey:a}=e;if(Ge(r)){ee("no values found for select cellEditor");return}this.startedByEnter=a!=null?a===J.ENTER:!1;let c=!1;r.forEach(x=>{let D={value:x},A=i.formatValue(e.column,null,x),O=A!=null;D.text=O?A:x,t.addOption(D),c=c||s===x}),c?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:u,valueListMaxWidth:v,valueListMaxHeight:b}=e;u!=null&&t.setPickerGap(u),b!=null&&t.setPickerMaxHeight(b),v!=null&&t.setPickerMaxWidth(v),n.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},mg=class extends Wa{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=ae}init(e){this.params=e;let{cellStartedEdit:t,eventKey:i,suppressPreventDefault:n}=e,r=this.eInput;this.cellEditorInput.init(r,e);let s,a=!0;t?(this.focusAfterAttached=!0,i===J.BACKSPACE||i===J.DELETE?s="":i&&i.length===1?n?a=!1:s=i:(s=this.cellEditorInput.getStartValue(),i!==J.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,s=this.cellEditorInput.getStartValue()),a&&s!=null&&r.setStartValue(s),this.addManagedElementListeners(r.getGui(),{keydown:c=>{let{key:u}=c;(u===J.PAGE_UP||u===J.PAGE_DOWN)&&c.preventDefault()}})}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;ir()||t.getFocusableElement().focus();let i=t.getInputElement();this.highlightAllOnFocus?i.select():this.cellEditorInput.setCaret?.()}focusIn(){let e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},AG=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[gg]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){let e=this.eInput.getValue();return!re(e)&&!re(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let e=this.eInput.getValue(),t=re(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},LR=class extends mg{constructor(){super(new AG)}},PG=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[UH]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);let i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===J.UP||e.key===J.DOWN)&&e.preventDefault()}getValue(){let e=this.eInput.getValue();if(!re(e)&&!re(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){ir()&&this.eInput.getInputElement().focus({preventScroll:!0})}},kG=class extends mg{constructor(){super(new PG)}},OG=class extends bo{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=ir();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){xt(this.gos)===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?mn(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,fn(this.eInput,"min",t),this)}setMax(e){let t=e instanceof Date?mn(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,fn(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,fn(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return Vi(this.getValue())??void 0}setDate(e,t){this.setValue(mn(e??null,!1),t)}},NR={selector:"AG-INPUT-DATE-FIELD",component:OG},LG=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[NR]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.eInput.getDate();return!re(e)&&!re(this.params.value)?this.params.value:e??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return mn(e,!1)}},NG=class extends mg{constructor(){super(new LG)}},_G=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[NR]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.formatDate(this.eInput.getDate());return!re(e)&&!re(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return mn(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Vi(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):mn(e??null,!1)??void 0}},BG=class extends mg{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new _G(()=>this.dataTypeService))}},VG=class extends Wa{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[yw]),this.eCheckbox=ae}init(e){this.params=e;let t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:n=>this.setAriaLabel(n.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.localeService.getLocaleTextFunc(),i=uw(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${n} (${i})`)}},mc=class{constructor(e){this.cellValueChanges=e}},PC=class extends mc{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}},HG=10,QD=class{constructor(e){this.actionStack=[],this.maxStackSize=e||HG,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},GG=class extends Z{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),n=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||n||this.isPasting||this.isRangeInAction))return;let{rowPinned:s,rowIndex:a,column:c,oldValue:u,value:v}=e,b={rowPinned:s,rowIndex:a,columnId:c.getColId(),newValue:v,oldValue:u};this.cellValueChanges.push(b)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;let e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new QD(e),this.redoStack=new QD(e),this.addListeners();let t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:i=>{i.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});let t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});let t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,i,n,r){if(!e)return!1;let s=e.pop();return!s||!s.cellValueChanges?!1:(this.processAction(s,a=>a[n],r),s instanceof PC?this.processRange(this.rangeService,s.ranges||[s[i]]):this.processCell(s.cellValueChanges),t.push(s),!0)}processAction(e,t,i){e.cellValueChanges.forEach(n=>{let{rowIndex:r,rowPinned:s,columnId:a}=n,c={rowIndex:r,rowPinned:s},u=this.rowPositionUtils.getRowNode(c);u.displayed&&u.setDataValue(a,t(n),i)})}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach((n,r)=>{if(!n)return;let s=n.startRow,a=n.endRow;r===t.length-1&&(i={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(i));let c={rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:a.rowIndex,rowEndPinned:a.rowPinned,columnStart:n.startColumn,columns:n.columns};e.addCellRange(c)})}processCell(e){let t=e[0],{rowIndex:i,rowPinned:n}=t,r={rowIndex:i,rowPinned:n},s=this.rowPositionUtils.getRowNode(r),a={rowPinned:t.rowPinned,rowIndex:s.rowIndex,columnId:t.columnId};this.setLastFocusedCell(a,this.rangeService)}setLastFocusedCell(e,t){let{rowIndex:i,columnId:n,rowPinned:r}=e,s=this.gridBodyCtrl.getScrollFeature(),a=this.columnModel.getCol(n);if(!a)return;s.ensureIndexVisible(i),s.ensureColumnVisible(a);let c={rowIndex:i,column:a,rowPinned:r};this.focusService.setFocusedCell(ue(q({},c),{forceBrowserFocus:!0})),t?.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new mc(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let i=new mc(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new mc(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new PC(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&tr(this.gos)?e=new PC(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new mc(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function zG(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function WG(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function _R(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function BR(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function jG(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function UG(e){e.undoRedoService?.undo("api")}function $G(e){e.undoRedoService?.redo("api")}function qG(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(wc)}function KG(e){return e.rowRenderer.getEditingCells()}function YG(e,t=!1){e.rowRenderer.stopEditing(t)}function XG(e,t){let i=e.columnModel.getCol(t.colKey);if(!i){ee(`no column found for ${t.colKey}`);return}let n={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};t.rowPinned==null&&BR(e,t.rowIndex),_R(e,t.colKey);let s=e.navigationService.getCellByPosition(n);if(!s)return;let{focusService:a,gos:c}=e,u=()=>{let b=xt(c),x=s.getGui();return b!==x&&!!x?.contains(b)},v=c.get("stopEditingWhenCellsLoseFocus")&&u();(v||!a.isCellFocused(n))&&a.setFocusedCell(ue(q({},n),{forceBrowserFocus:v,preventScrollOnBrowserFocus:!0})),s.startRowOrCellEdit(t.key)}function ZG(e){return e.undoRedoService?.getCurrentUndoStackSize()??0}function QG(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}var JG=class extends Z{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,i=!1,n=null){let r=this.createCellEditorParams(e,t,i),s=e.getColumn().getColDef(),a=this.userComponentFactory.getCellEditorDetails(s,r),c=a?.popupFromSelector!=null?a.popupFromSelector:!!s.cellEditorPopup,u=a?.popupPositionFromSelector!=null?a.popupPositionFromSelector:s.cellEditorPopupPosition;return e.setEditing(!0,a),e.getComp().setEditDetails(a,c,u,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(n,"cellEditingStarted")),!a?.params?.suppressPreventDefault}stopEditing(e,t){let i=e.getComp(),{newValue:n,newValueExists:r}=this.takeValueFromCellEditor(t,i),s=e.getRowNode(),a=e.getColumn(),c=this.valueService.getValueForDisplay(a,s),u=!1;return r&&(u=this.saveNewValue(e,c,n,s,a)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent(ue(q({},e.createEvent(null,"cellEditingStopped")),{oldValue:c,newValue:n,valueChanged:u})),u}handleColDefChanged(e){let t=e.getCellEditor();if(t?.refresh){let{eventKey:i,cellStartedEdit:n}=e.getEditCompDetails().params,r=this.createCellEditorParams(e,i,n),s=e.getColumn().getColDef(),a=this.userComponentFactory.getCellEditorDetails(s,r);t.refresh(a.params)}}setFocusOutOnEditor(e){let t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){let t=e.getComp(),i=t.getCellEditor();i?.focusIn?i.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>t.getCellEditor()?.focusIn?.()))}stopEditingAndFocus(e,t=!1,i=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new TG(e)}takeValueFromCellEditor(e,t){let i={newValueExists:!1};if(e)return i;let n=t.getCellEditor();return!n||n.isCancelAfterEnd&&n.isCancelAfterEnd()?i:{newValue:n.getValue(),newValueExists:!0}}saveNewValue(e,t,i,n,r){if(i===t)return!1;e.setSuppressRefreshCell(!0);let s=n.setDataValue(r,i,"edit");return e.setSuppressRefreshCell(!1),s}createCellEditorParams(e,t,i){let n=e.getColumn(),r=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(n,r),eventKey:t,column:n,colDef:n.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:r,data:r.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:s=>this.valueService.parseValue(n,r,s,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){let n=e?J.UP:J.DOWN;this.navigationService.navigateToNextCell(null,n,t,!1)}}},ez=class extends Z{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,i=null,n=null){let r=!0;return e.getAllCellCtrls().reduce((a,c)=>{let u=c===i;return u?r=c.startEditing(t,u,n):c.startEditing(null,u,n),a?!0:c.isEditing()},!1)&&this.setEditing(e,!0),r}stopEditing(e,t=!1){let i=e.getAllCellCtrls(),n=e.isEditing();e.setStoppingRowEdit(!0);let r=!1;for(let s of i){let a=s.stopEditing(t);n&&!t&&!r&&a&&(r=!0)}r&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),n&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,n=>n.rowComp.addOrRemoveCssClass("ag-row-editing",t));let i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}},So={version:De,moduleName:"@ag-grid-community/edit-core",beans:[JG]},tz={version:De,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:UG,redoCellEditing:$G,getCellEditorInstances:qG,getEditingCells:KG,stopEditing:YG,startEditingCell:XG,getCurrentUndoSize:ZG,getCurrentRedoSize:QG},dependantModules:[So]},iz={version:De,moduleName:"@ag-grid-community/undo-redo-edit",beans:[GG],dependantModules:[So]},nz={version:De,moduleName:"@ag-grid-community/full-row-edit",beans:[ez],dependantModules:[So]},VR={version:De,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:LR}],dependantModules:[So]},rz={version:De,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:LR},{name:"agNumberCellEditor",classImp:kG,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:NG},{name:"agDateStringCellEditor",classImp:BG},{name:"agCheckboxCellEditor",classImp:VG}],dependantModules:[VR]},sz={version:De,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:FG}],dependantModules:[So]},oz={version:De,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:IG}],dependantModules:[So]},az={version:De,moduleName:"@ag-grid-community/all-editors",dependantModules:[VR,rz,sz,oz]},lz={version:De,moduleName:"@ag-grid-community/editing",dependantModules:[So,iz,nz,az,tz]},cz=class extends Z{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let i=this.getHeaderCellForColumn(e);if(!i)return-1;let n=this.rowRenderer.getAllCellsForColumn(e);return t||n.push(i),this.addElementsToContainerAndGetWidth(n)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){let t=document.createElement("form");t.style.position="fixed";let i=this.centerRowContainerCtrl.getContainerElement();e.forEach(s=>this.cloneItemIntoDummy(s,t)),i.appendChild(t);let n=t.offsetWidth;i.removeChild(t);let r=this.getAutoSizePadding();return n+r}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{let n=i.getHtmlElementForColumnHeader(e);n!=null&&(t=n)}),t}cloneItemIntoDummy(e,t){let i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";let n=document.createElement("div"),r=n.classList;["ag-header-cell","ag-header-group-cell"].some(c=>i.classList.contains(c))?(r.add("ag-header","ag-header-row"),n.style.position="static"):r.add("ag-row");let a=e.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(u=>a.classList.contains(u))){for(let u=0;u<a.classList.length;u++){let v=a.classList[u];v!="ag-row-position-absolute"&&r.add(v)}break}a=a.parentElement}n.appendChild(i),t.appendChild(n)}},dz=class extends Z{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=It(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let i=e.childStore?.getStoreBounds();return e.footer&&(i=e.sibling.childStore?.getStoreBounds()),(i?.heightPx??0)+(i?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=e.footer?e.sibling:e;for(;n.isExpandable()&&n.expanded;)if(n.master)n=n.detailNode;else if(n.childrenAfterSort){if(n.childrenAfterSort.length===0)break;n=Ue(n.childrenAfterSort)}return n.rowTop+n.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){let t=e==="top",i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);let n=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,r=new Set,s=v=>{if(r.add(v),t){let b=this.getLastPixelOfGroup(v),x=n+i+v.rowHeight;b<x?v.stickyRowTop=i+(b-x):v.stickyRowTop=i}else{let b=this.getFirstPixelOfGroup(v),x=n-(i+v.rowHeight);b>x?v.stickyRowTop=i-(b-x):v.stickyRowTop=i}i=0,r.forEach(b=>{let x=b.stickyRowTop+b.rowHeight;i<x&&(i=x)})},a=this.areFooterRowsStickySuppressed(),c=this.gos.get("suppressGroupRowsSticky"),u=v=>{if(!v.displayed)return!1;if(v.footer){if(a===!0||a==="grand"&&v.level===-1||a==="group"&&v.level>-1)return!1;let b=v.sibling.rowIndex?v.sibling.rowIndex+1===v.rowIndex:!1;return e==="bottom"&&b?!1:!r.has(v)}return v.isExpandable()?c===!0||e==="bottom"?!1:!r.has(v)&&v.expanded:!1};for(let v=0;v<100;v++){let b=n+i;t||(b=n-i);let x=this.rowModel.getRowIndexAtPixel(b),D=this.rowModel.getRow(x);if(D==null)break;let O=this.getStickyAncestors(D).find(L=>(t?L.rowIndex<x:L.rowIndex>x)&&u(L));if(O){s(O);continue}if((t?D.rowTop<b:D.rowTop+D.rowHeight>b)&&u(D)){s(D);continue}break}return t||r.forEach(v=>{v.stickyRowTop=i-(v.stickyRowTop+v.rowHeight)}),this.refreshNodesAndContainerHeight(e,r,i)}areFooterRowsStickySuppressed(){let e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;let t=!!this.gos.get("groupIncludeFooter")||e==="group",i=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&i?!0:i?"grand":t?"group":!1}canRowsBeSticky(){let e=dg(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){let t=[],i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){let e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){let t=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===e)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){let n=this.stickyTopRowCtrls[i].getRowNode();n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){let n=this.stickyBottomRowCtrls[i].getRowNode();n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,i){let n=e==="top",r=n?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,s={},a=[];for(let D=0;D<r.length;D++){let A=r[D].getRowNode();if(!t.has(A)){s[A.id]=r[D],A.sticky=!1;continue}a.push(r[D])}let c=new Set;for(let D=0;D<a.length;D++)c.add(a[D].getRowNode());let u=[];t.forEach(D=>{c.has(D)||(D.sticky=!0,u.push(this.createRowCon(D,!1,!1)))});let v=!!u.length||a.length!==r.length;n?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),v=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),v=!0),this.destroyRowCtrls(s,!1);let b=[...a,...u];b.sort((D,A)=>A.getRowNode().rowIndex-D.getRowNode().rowIndex),n||b.reverse(),b.forEach(D=>D.setRowTop(D.getRowNode().stickyRowTop));let x=0;return n?(t.forEach(D=>{D.rowIndex<this.pageBoundsService.getFirstRow()&&(x+=D.rowHeight)}),x>this.topContainerHeight&&(x=this.topContainerHeight),this.setOffsetTop(x)):(t.forEach(D=>{D.rowIndex>this.pageBoundsService.getLastRow()&&(x+=D.rowHeight)}),x>this.bottomContainerHeight&&(x=this.bottomContainerHeight),this.setOffsetBottom(x)),v?(n?this.stickyTopRowCtrls=b:this.stickyBottomRowCtrls=b,!0):!1}ensureRowHeightsValid(){let e=!1,t=i=>{let n=i.getRowNode();if(n.rowHeightEstimated){let r=bs(this.gos,n);n.setRowHeight(r.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},uz=class extends Z{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{this.getAllCellCtrls().forEach(s=>s.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(s=>s.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},n=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>n()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{tr(this.gos)?i():n()}),tr(this.gos)&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),dg(this.gos)&&(It(this.gos)||Mr(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new dz(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=li(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new hz(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let e=Ss(this.rowCtrlsByRowIndex),t=Ss(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{let i=u=>{this.getAllCellCtrls().forEach(v=>{v.getColumn()===t&&u(v)})},n=()=>{i(u=>u.onLeftChanged())},r=()=>{i(u=>u.onWidthChanged())},s=()=>{i(u=>u.onFirstRightPinnedChanged())},a=()=>{i(u=>u.onLastLeftPinnedChanged())},c=()=>{i(u=>u.onColDefChanged())};t.addEventListener("leftChanged",n),t.addEventListener("widthChanged",r),t.addEventListener("firstRightPinnedChanged",s),t.addEventListener("lastLeftPinnedChanged",a),t.addEventListener("colDefChanged",c),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",n),t.removeEventListener("widthChanged",r),t.removeEventListener("firstRightPinnedChanged",s),t.removeEventListener("lastLeftPinnedChanged",a),t.removeEventListener("colDefChanged",c)})})}onDomLayoutChanged(){let e=li(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){let t=[];return this.getAllRowCtrls().forEach(i=>{let n=i.getCellElement(e);n&&t.push(n)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){let{pinnedRowModel:i,beans:n,printLayout:r}=this,s=Object.fromEntries(e.map(c=>[c.getRowNode().id,c]));i.forEachPinnedRow(t,(c,u)=>{let v=e[u];v&&i.getPinnedRowById(v.getRowNode().id,t)===void 0&&(v.destroyFirstPass(),v.destroySecondPass()),c.id in s?(e[u]=s[c.id],delete s[c.id]):e[u]=new mo(c,n,!1,!1,r)});let a=t==="top"?i.getPinnedTopRowCount():i.getPinnedBottomRowCount();e.length=a}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let i=n=>{let r=n[e.rowIndex];r&&r.getRowNode()===e&&(r.destroyFirstPass(),r.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":i(this.topRowCtrls);break;case"bottom":i(this.bottomRowCtrls);break;default:i(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){let t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;let i=xt(this.gos),n=xc(this.gos,i,fo.DOM_DATA_KEY_CELL_CTRL),r=xc(this.gos,i,mo.DOM_DATA_KEY_ROW_CTRL);return n||r?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);let i=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&ka(this.gos),r=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();let s=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();s&&this.updateContainerHeights(s)}this.recycleRows(r,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){let r=t[n].getAllCellCtrls(),s=r.length;for(let a=0;a<s;a++)e.push(r[a])}return e}getAllRowCtrls(){let e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(let n in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[n]);return i}addRenderedRowListener(e,t,i){let n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){let t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(let i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&$C()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(let i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){let t=this.getCellCtrls(e.rowNodes,e.columns).map(r=>r.getCellRenderer()).filter(r=>r!=null);if(e.columns?.length)return t;let i=[],n=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(r=>{if(n&&!this.isRowInMap(r.getRowNode(),n)||!r.isFullWidth())return;let s=r.getFullWidthCellRenderers();for(let a=0;a<s.length;a++){let c=s[a];c!=null&&i.push(c)}}),[...i,...t]}getCellEditorInstances(e){let t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{let n=i.getCellEditor();n&&t.push(n)}),t}getEditingCells(){let e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){let i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;let t={top:{},bottom:{},normal:{}};return e.forEach(i=>{let n=i.id;switch(i.rowPinned){case"top":t.top[n]=i;break;case"bottom":t.bottom[n]=i;break;default:t.normal[n]=i;break}}),t}isRowInMap(e,t){let i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}getRowCtrls(e){let t=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(n=>{let r=n.getRowNode();return this.isRowInMap(r,t)})}getCellCtrls(e,t){let i;re(t)&&(i={},t.forEach(r=>{let s=this.columnModel.getCol(r);re(s)&&(i[s.getId()]=!0)}));let n=[];return this.getRowCtrls(e).forEach(r=>{r.getAllCellCtrls().forEach(s=>{let a=s.getColumn().getId();i&&!i[a]||n.push(s)})}),n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let e=[];un(this.rowCtrlsByRowIndex,(i,n)=>{n.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);let t={};return un(this.rowCtrlsByRowIndex,(i,n)=>{let r=n.getRowNode();t[r.id]=n}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(i=>{let n=this.rowCtrlsByRowIndex[i];n&&(n.destroyFirstPass(t),n.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{afterScroll:t}=e,i;this.stickyRowFeature&&$C()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);let n=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let s=!1;if(this.stickyRowFeature){s=this.stickyRowFeature.checkStickyRows();let c=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();c&&this.updateContainerHeights(c)}let a=this.firstRenderedRow!==n||this.lastRenderedRow!==r;if(!(t&&!s&&!a)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!s),i!=null)){let c=this.getCellToRestoreFocusToAfterRefresh();i!=null&&c==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){let i={};e.forEach(s=>i[s]=!0);let r=Object.keys(this.rowCtrlsByRowIndex).filter(s=>!i[s]);this.removeRowCtrls(r,t)}calculateIndexesToDraw(e){let t=KH(this.firstRenderedRow,this.lastRenderedRow),i=(r,s)=>{let a=s.getRowNode().rowIndex;a!=null&&(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(s)&&t.push(a)};un(this.rowCtrlsByRowIndex,i),un(e,i),t.sort((r,s)=>r-s);let n=[];for(let r=0;r<t.length;r++){let s=t[r],a=this.rowModel.getRow(s);a&&!a.sticky&&n.push(s)}return n}recycleRows(e,t=!1,i=!1){let n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t);let r=[];n.forEach(s=>{let a=this.createOrUpdateRowCtrl(s,e,t,i);re(a)&&r.push(a)}),e&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){let e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];this.getFullWidthRowCtrls().forEach(t=>{let i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;let n=i.getRowNode();return!(t!=null&&!this.isRowInMap(n,t))})}createOrUpdateRowCtrl(e,t,i,n){let r,s=this.rowCtrlsByRowIndex[e];if(s||(r=this.rowModel.getRow(e),re(r)&&re(t)&&t[r.id]&&r.alreadyRendered&&(s=t[r.id],t[r.id]=null)),!s)if(r||(r=this.rowModel.getRow(e)),re(r))s=this.createRowCon(r,i,n);else return;return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=s,s}destroyRowCtrls(e,t){let i=[];un(e,(n,r)=>{if(r){if(this.cachedRowCtrls&&r.isCacheable()){this.cachedRowCtrls.addRow(r);return}if(r.destroyFirstPass(!t),t){let s=r.instanceId;this.zombieRowCtrls[s]=r,i.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[s]})}else r.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),l4(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let e=this.getRowBuffer(),t=go(this.gos);return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{let c=this.getRowBufferInPixels(),u=this.ctrlsService.getGridBodyCtrl(),v=this.gos.get("suppressRowVirtualisation"),b=!1,x,D;do{let U=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:K,pageLastPixel:$}=this.pageBoundsService.getCurrentPagePixelRange(),ne=this.rowContainerHeightService.getDivStretchOffset(),G=u.getScrollFeature().getVScrollPosition(),_=G.top,N=G.bottom;v?(x=K+ne,D=$+ne):(x=Math.max(_+U-c,K)+ne,D=Math.min(N+U+c,$)+ne),this.firstVisibleVPixel=Math.max(_+U,K)+ne,this.lastVisibleVPixel=Math.min(N+U,$)+ne,b=this.ensureAllRowsInRangeHaveHeightsCalculated(x,D)}while(b);let A=this.rowModel.getRowIndexAtPixel(x),O=this.rowModel.getRowIndexAtPixel(D),B=this.pageBoundsService.getFirstRow(),L=this.pageBoundsService.getLastRow();A<B&&(A=B),O>L&&(O=L),e=A,t=O}let i=li(this.gos,"normal"),n=this.gos.get("suppressMaxRenderedRowRestriction"),r=Math.max(this.getRowBuffer(),500);i&&!n&&t-e>r&&(t=e+r);let s=e!==this.firstRenderedRow,a=t!==this.lastRenderedRow;(s||a)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let i=this.pinnedRowModel?.ensureRowHeightsValid(),n=this.stickyRowFeature?.ensureRowHeightsValid(),r=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(r||n)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),n||r||i?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){let n=e.getRowNode(),r=this.focusService.isRowNodeFocused(n),s=e.isEditing(),a=n.detail;return r||s||a?!!this.isRowPresent(n):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,i){let n=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(n)return n;let r=this.gos.get("suppressAnimationFrame"),s=i&&!r&&!this.printLayout;return new mo(e,this.beans,t,s,this.printLayout)}getRenderedNodes(){let e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t,{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(n=>n.getRowNode().rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(n=>n.getRowNode().rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}},hz=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],Ii(this.entriesList,i)}removeFromCache(e){let t=e.getRowNode().id;delete this.entriesMap[t],Ii(this.entriesList,e)}getEntries(){return this.entriesList}},gz=class extends Z{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new JD,this.pinnedBottomRows=new JD}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return(e==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){let t=i=>{i.setRowHeight(i.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){let e=!1,t=0,i=n=>{if(n.rowHeightEstimated){let r=bs(this.gos,n);n.setRowTop(t),n.setRowHeight(r.height),t+=r.height,e=!0}};return this.pinnedBottomRows?.forEach(i),t=0,this.pinnedTopRows?.forEach(i),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){let i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(e===void 0){i.clear();return}let n=Ga(this.gos),r=t==="top"?Er.ID_PREFIX_TOP_PINNED:Er.ID_PREFIX_BOTTOM_PINNED,s=i.getIds(),a=[],c=new Set,u=0,v=-1;for(let b of e){let x=n?.({data:b,level:0,rowPinned:t})??r+this.nextId++;if(c.has(x)){ee("Duplicate ID",x,"found for pinned row with data",b,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}v++,c.add(x),a.push(x);let D=i.getById(x);if(D!==void 0)D.data!==b&&D.setData(b),u+=this.setRowTopAndRowIndex(D,u,v),s.delete(x);else{let A=new Er(this.beans);A.id=x,A.data=b,A.rowPinned=t,u+=this.setRowTopAndRowIndex(A,u,v),i.push(A)}}s.forEach(b=>{i.getById(b)?.clearRowTopAndRowIndex()}),i.removeAllById(s),i.setOrder(a)}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(bs(this.gos,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return t==="top"?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return e==="top"?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){let t=e.getSize();if(t===0)return 0;let i=e.getByIndex(t-1);return i===void 0?0:i.rowTop+i.rowHeight}},JD=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){let t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(let t of e)delete this.cache[t];this.ordering=this.ordering.filter(t=>!e.has(t))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((t,i)=>{let n=this.cache[t];n&&e(n,i)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}};var pz=class extends Z{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){let t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){let t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},fz=class extends Z{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Ri(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){let e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Ii(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&hn("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(Mr(this.gos))return this.rowModel.getBlockStates();let e={};return this.blocks.forEach(t=>{let{id:i,state:n}=t.getBlockStateJson();e[i]=n}),e}printCacheStatus(){this.gos.get("debug")&&hn(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},mz={version:De,moduleName:"@ag-grid-community/row-node-block",beans:[fz]},vz=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){return this.root&&this.root?.key===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&this.end?.key===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let i=t[0].id===this.root.id,n=t.findIndex(r=>r.id===e.id);if(n>-1){let r=t.slice(0,n),s=t.slice(n+1);return this.setEndRange(e),i?{keep:r,discard:s}:{keep:s,discard:r}}else return{keep:t,discard:[]}}extend(e,t=!1){let i=this.getRoot();if(i==null){let r=this.getRange().slice();return t&&e.depthFirstSearch(s=>!s.group&&r.push(s)),r.push(e),this.setRoot(e),{keep:r,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find(r=>r.id===this.end?.id))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let r=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:r}}}},Cz=class extends Z{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,n){this.processClassRules(void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,n,r){if(t==null&&e==null)return;let s={},a={},c=(u,v)=>{u.split(" ").forEach(b=>{b.trim()!=""&&v(b)})};if(t){let u=Object.keys(t);for(let v=0;v<u.length;v++){let b=u[v],x=t[b],D;typeof x=="string"?D=this.expressionService.evaluate(x,i):typeof x=="function"&&(D=x(i)),c(b,A=>{D?s[A]=!0:a[A]=!0})}}e&&r&&Object.keys(e).forEach(u=>c(u,v=>{s[v]||(a[v]=!0)})),r&&Object.keys(a).forEach(r),Object.keys(s).forEach(n)}getStaticCellClasses(e,t){let{cellClass:i}=e;if(!i)return[];let n;return typeof i=="function"?n=i(t):n=i,typeof n=="string"&&(n=[n]),n||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(r=>{i(r)})}};var wz=class extends Z{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:t,eTopGuard:i,eBottomGuard:n,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:s,isFocusableContainer:a,focusInnerElement:c,onFocusIn:u,onFocusOut:v,shouldStopEventPropagation:b,onTabKeyDown:x,handleKeyDown:D,eFocusableElement:A}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=c,this.eFocusableElement=A,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!s,this.isFocusableContainer=!!a,this.providedFocusIn=u,this.providedFocusOut=v,this.providedShouldStopEventPropagation=b,this.providedOnTabKeyDown=x,this.providedHandleKeyDown=D}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new yo(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){let t=Ot(this.gos),i=this.focusService.findFocusableElements(t.body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(n===-1)return;let r,s;e?(r=0,s=n):(r=n+1,s=i.length);let a=i.slice(r,s),c=this.gos.get("tabIndex");a.sort((u,v)=>{let b=parseInt(u.getAttribute("tabindex")||"0"),x=parseInt(v.getAttribute("tabindex")||"0");return x===c?1:b===c?-1:b===0?1:x===0?-1:b-x}),a[e?a.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},yz=class extends Z{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:i,eFocusableElement:n}=this,r=[t,i],s={setTabIndex:B=>{r.forEach(L=>B!=null?L.setAttribute("tabindex",B):L.removeAttribute("tabindex"))}};this.addTabGuards(t,i);let{focusTrapActive:a=!1,onFocusIn:c,onFocusOut:u,focusInnerElement:v,handleKeyDown:b,onTabKeyDown:x,shouldStopEventPropagation:D,forceFocusOutWhenTabGuardsAreEmpty:A,isFocusableContainer:O}=e;this.tabGuardCtrl=this.createManagedBean(new wz({comp:s,focusTrapActive:a,eTopGuard:t,eBottomGuard:i,eFocusableElement:n,onFocusIn:c,onFocusOut:u,focusInnerElement:v,handleKeyDown:b,onTabKeyDown:x,shouldStopEventPropagation:D,forceFocusOutWhenTabGuardsAreEmpty:A,isFocusableContainer:O}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=Ot(this.gos).createElement("div"),i=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),Hi(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];vi(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){vw(t)||(t=t.getGui());let{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):e(t,i)}},HR=class extends qe{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new yz(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},bz=0,Sz=200,xz=class extends Z{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:i}=e,n=this.getPopupIndex(i);if(n!==-1){let A=this.popupList[n];A.alignedToElement=t}let r=t.getBoundingClientRect(),s=this.getParentRect(),a=this.keepXYWithinBounds(i,r.top-s.top,0),c=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${c}px`;let v=s.right-s.left-c,b;this.gos.get("enableRtl")?(b=D(),b<0&&(b=x(),this.setAlignedStyles(i,"left")),b>v&&(b=0,this.setAlignedStyles(i,"right"))):(b=x(),b>v&&(b=D(),this.setAlignedStyles(i,"right")),b<0&&(b=0,this.setAlignedStyles(i,"left"))),i.style.left=`${b}px`,i.style.top=`${a}px`;function x(){return r.right-s.left-2}function D(){return r.left-s.left-c}}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:r}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:r,eventSource:s,alignSide:a="left",position:c="over",column:u,rowNode:v,type:b}=e,x=s.getBoundingClientRect(),D=this.getParentRect(),A=this.getPopupIndex(t);if(A!==-1){let B=this.popupList[A];B.alignedToElement=s}let O=()=>{let B=x.left-D.left;a==="right"&&(B-=t.offsetWidth-x.width);let L;return c==="over"?(L=x.top-D.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,x,D,e.nudgeY||0)==="under"?L=x.top-D.top+x.height:L=x.top-t.offsetHeight-(n||0)*2-D.top),{x:B,y:L}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:r,updatePosition:O,postProcessCallback:()=>this.callPostProcessPopup(b,t,s,null,u,v)})}shouldRenderUnderOrAbove(e,t,i,n){let r=i.bottom-t.bottom,s=t.top-i.top,a=e.offsetHeight+n;return r>a?"under":s>a||s>r?"above":"under"}setAlignedStyles(e,t){let i=this.getPopupIndex(e);if(i===-1)return;let n=this.popupList[i],{alignedToElement:r}=n;!r||(["right","left","over","above","under"].forEach(a=>{r.classList.remove(`ag-has-popup-positioned-${a}`),e.classList.remove(`ag-popup-positioned-${a}`)}),!t)||(r.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,n,r,s){let a=this.gos.getCallback("postProcessPopup");a&&a({column:r,rowNode:s,ePopup:t,type:e,eventSource:i,mouseEvent:n})}positionPopup(e){let{ePopup:t,keepWithinBounds:i,nudgeX:n,nudgeY:r,skipObserver:s,updatePosition:a}=e,c={width:0,height:0},u=(v=!1)=>{let{x:b,y:x}=a();v&&t.clientWidth===c.width&&t.clientHeight===c.height||(c.width=t.clientWidth,c.height=t.clientHeight,n&&(b+=n),r&&(x+=r),i&&(b=this.keepXYWithinBounds(t,b,1),x=this.keepXYWithinBounds(t,x,0)),t.style.left=`${b}px`,t.style.top=`${x}px`,e.postProcessCallback&&e.postProcessCallback())};if(u(),!s){let v=this.resizeObserverService.observeResize(t,()=>u(!0));setTimeout(()=>v(),Sz)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){let e=Ot(this.gos),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),zM(t)}keepXYWithinBounds(e,t,i){let n=i===0,r=n?"clientHeight":"clientWidth",s=n?"top":"left",a=n?"height":"width",c=n?"scrollTop":"scrollLeft",u=Ot(this.gos),v=u.documentElement,b=this.getPopupParent(),x=e.getBoundingClientRect(),D=b.getBoundingClientRect(),A=u.documentElement.getBoundingClientRect(),O=b===u.body,B=Math.ceil(x[a]),U=O?(n?GM:ng)(v)+v[c]:b[r];O&&(U-=Math.abs(A[s]-D[s]));let K=U-B;return Math.min(Math.max(t,0),Math.abs(K))}addPopup(e){let t=Ot(this.gos),{eChild:i,ariaLabel:n,alwaysOnTop:r,positionCallback:s,anchorToElement:a}=e;if(!t)return ee("could not find the document, document is empty"),{hideFunc:()=>{}};let c=this.getPopupIndex(i);if(c!==-1)return{hideFunc:this.popupList[c].hideFunc};this.initialisePopupPosition(i);let u=this.createPopupWrapper(i,n,!!r),v=this.addEventListenersToPopup(ue(q({},e),{wrapperEl:u}));return s&&s(),this.addPopupToPopupList(i,u,v,a),{hideFunc:v}}initialisePopupPosition(e){let i=this.getPopupParent().getBoundingClientRect();re(e.style.top)||(e.style.top=`${i.top*-1}px`),re(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){let n=this.getPopupParent(),r=document.createElement("div");return this.environment.applyThemeClasses(r),r.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Hi(e,"dialog"),Ba(e,t),r.appendChild(e),n.appendChild(r),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),r}handleThemeChange(e){if(e.themeChanged)for(let t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){let t=Ot(this.gos),i=this.getPopupParent(),{wrapperEl:n,eChild:r,closedCallback:s,afterGuiAttached:a,closeOnEsc:c,modal:u}=e,v=!1,b=O=>{if(!n.contains(xt(this.gos)))return;O.key===J.ESCAPE&&!xr(O)&&A({keyboardEvent:O})},x=O=>A({mouseEvent:O}),D=O=>A({touchEvent:O}),A=(O={})=>{let{mouseEvent:B,touchEvent:L,keyboardEvent:U,forceHide:K}=O;!K&&(this.isEventFromCurrentPopup({mouseEvent:B,touchEvent:L},r)||v)||(v=!0,i.removeChild(n),t.removeEventListener("keydown",b),t.removeEventListener("mousedown",x),t.removeEventListener("touchstart",D),t.removeEventListener("contextmenu",x),this.eventService.removeEventListener("dragStarted",x),s&&s(B||L||U),this.removePopupFromPopupList(r))};return a&&a({hidePopup:A}),window.setTimeout(()=>{c&&t.addEventListener("keydown",b),u&&(t.addEventListener("mousedown",x),this.eventService.addEventListener("dragStarted",x),t.addEventListener("touchstart",D),t.addEventListener("contextmenu",x))},0),A}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:bz++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let i=this.getPopupIndex(e);if(i===-1)return;let n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(s=>s&&s()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;let r=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=r,n.isAnchored=!0,r}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:r}=e,s=n.getBoundingClientRect(),a=x=>parseInt(x.substring(0,x.length-1),10),c=(x,D)=>{let A=i[x]-s[x],O=a(r.style[x]);return{initialDiff:A,lastDiff:A,initial:O,last:O,direction:D}},u=c("top",0),v=c("left",1),b=this.getFrameworkOverrides();return new en(x=>{b.wrapIncoming(()=>{b.setInterval(()=>{let D=t.getBoundingClientRect(),A=n.getBoundingClientRect();if(A.top==0&&A.left==0&&A.height==0&&A.width==0){e.hidePopup();return}let B=(L,U)=>{let K=a(r.style[U]);L.last!==K&&(L.initial=K,L.last=K);let $=D[U]-A[U];if($!=L.lastDiff){let ne=this.keepXYWithinBounds(r,L.initial+L.initialDiff-$,L.direction);r.style[U]=`${ne}px`,L.last=ne}L.lastDiff=$};B(u,"top"),B(v,"left")},200).then(D=>{x(()=>{D!=null&&window.clearInterval(D)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){let{mouseEvent:i,touchEvent:n}=e,r=i||n;if(!r)return!1;let s=this.getPopupIndex(t);if(s===-1)return!1;for(let a=s;a<this.popupList.length;a++){let c=this.popupList[a];if(R4(c.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(e){let t=Ot(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){let t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,r=this.getWrapper(e);if(!r||n<=1||!t.contains(e))return;let s=[],a=[];for(let D of i)D!==r&&(D.classList.contains("ag-always-on-top")?a.push(D):s.push(D));let c=[],u=a.length,x=r.classList.contains("ag-always-on-top")||!u?[...s,...a,r]:[...s,r,...a];for(let D=0;D<=n;D++){let A=x[D];if(i[D]===x[D]||A===r)continue;A.querySelectorAll("div").forEach(B=>{B.scrollTop!==0&&c.push([B,B.scrollTop])}),D===0?t.insertAdjacentElement("afterbegin",A):x[D-1].insertAdjacentElement("afterend",A)}for(;c.length;){let D=c.pop();D[0].scrollTop=D[1]}}},Ez=["touchstart","touchend","touchmove","touchcancel"],Ow=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new en(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,n){let r=po(Ez,t);e.addEventListener(t,i,{capture:!!n,passive:r})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},Dz=class extends Z{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let i=e===J.UP,n=e===J.DOWN,r=e===J.LEFT,s,a;if(i||n)a=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),s=t.column;else{let c=this.visibleColsService.getAllCols(),u=this.gos.get("enableRtl");a=t.rowIndex,s=r!==u?c[0]:Ue(c)}return{rowIndex:a,rowPinned:null,column:s}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,n=!1;for(;!n;){switch(e){case J.UP:i=this.getCellAbove(i);break;case J.DOWN:i=this.getCellBelow(i);break;case J.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case J.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,ee("unknown key for navigation ",e);break}i?n=this.isCellGoodToFocusOn(i):n=!0}return i}isCellGoodToFocusOn(e){let t=e.column,i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;let t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){let t=e.rowIndex,i=e.rowPinned,n=!1;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(n=!0);let r=this.rowModel.getRow(e.rowIndex),s=n?void 0:this.getNextStickyPosition(r);return s||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!dg(this.gos)||!e||!e.sticky)return;let i=this.rowRenderer.getStickyTopRowCtrls().some(c=>c.getRowNode().rowIndex===e.rowIndex),n=[];i?n=[...this.rowRenderer.getStickyTopRowCtrls()].sort((c,u)=>c.getRowNode().rowIndex-u.getRowNode().rowIndex):n=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((c,u)=>u.getRowNode().rowIndex-c.getRowNode().rowIndex);let r=t?-1:1,s=n.findIndex(c=>c.getRowNode().rowIndex===e.rowIndex),a=n[s+r];if(a)return{rowIndex:a.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;let t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){let t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=i:this.pageBoundsService.getLastRow()<=i}getRowAbove(e){let t=e.rowIndex,i=e.rowPinned,n=i?t===0:t===this.pageBoundsService.getFirstRow(),r=!1;if(n)return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;i&&(r=!0);let s=this.rowModel.getRow(e.rowIndex),a=r?void 0:this.getNextStickyPosition(s,!0);return a||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;let t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let t=this.visibleColsService.getAllCols(),i=e.rowIndex,n=e.rowPinned,r=this.visibleColsService.getColAfter(e.column);if(!r){r=t[0];let s=this.getRowBelow(e);if(Ge(s)||!s.rowPinned&&!(this.paginationService?.isRowInPage(s)??!0))return null;i=s?s.rowIndex:null,n=s?s.rowPinned:null}return{rowIndex:i,column:r,rowPinned:n}}getNextTabbedCellBackwards(e){let t=this.visibleColsService.getAllCols(),i=e.rowIndex,n=e.rowPinned,r=this.visibleColsService.getColBefore(e.column);if(!r){r=Ue(t);let s=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Ge(s)||!s.rowPinned&&!(this.paginationService?.isRowInPage(s)??!0))return null;i=s?s.rowIndex:null,n=s?s.rowPinned:null}return{rowIndex:i,column:r,rowPinned:n}}},xi=(e,t)=>{for(let i in t)t[i]=e;return t},eM=q(q(q(q(q(q(q(q(q(q(q(q(q(q(q({},xi("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),xi("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0})),xi("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0})),xi("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),xi("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),xi("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),xi("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),xi("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),xi("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),xi("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0})),xi("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),xi("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),xi("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0})),xi("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),xi("@ag-grid-enterprise/status-bar",{getStatusPanel:0})),kC={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},Mz=(e,t)=>e.eventService.dispatchEvent(t),GR=class{};Reflect.defineProperty(GR,"name",{value:"GridApi"});var Rz=class extends Z{constructor(){super(),this.beanName="apiFunctionService",this.api=new GR,this.fns=ue(q({},kC),{dispatchEvent:Mz}),this.beans=null,this.preDestroyLink="";let{api:e}=this;for(let t in eM)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){let{fns:i,beans:n}=this;i!==kC&&(i[e]=n?.validationService?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{let{beans:i,fns:{[e]:n}}=this;return n?n(i,...t):this.apiNotFound(e)}}}apiNotFound(e){let{beans:t,gos:i,preDestroyLink:n}=this;if(!t)ee(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${n}`);else{let r=eM[e];i.assertModuleRegistered(r,`api.${e}`)&&ee(`API function '${e}' not registered to module '${r}'`)}}destroy(){super.destroy(),this.fns=kC,this.beans=null}};function Iz(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var Tz=class extends Z{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){let n=[],r={};return e.forEach(s=>{let a=this.createDefFromColumn(s,t,i),c=!0,u=a,v=s.getOriginalParent(),b=null;for(;v;){let x=null;if(v.isPadding()){v=v.getOriginalParent();continue}let D=r[v.getGroupId()];if(D){D.children.push(u),c=!1;break}if(x=this.createDefFromGroup(v),x&&(x.children=[u],r[x.groupId]=x,u=x,v=v.getOriginalParent()),v!=null&&b===v){c=!1;break}b=v}c&&n.push(u)}),n}createDefFromGroup(e){let t=zC(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){let n=zC(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=e.isVisible()?void 0:!0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,n}},Fz=class extends Z{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t})}genericColumnEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t.length===1?t[0]:null,source:i})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){let{movedColumns:t,source:i,toIndex:n,finished:r}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:n,finished:r,source:i})}columnPinned(e,t){if(!e.length)return;let i=e.length===1?e[0]:null,n=this.getCommonValue(e,r=>r.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:n??null,columns:e,column:i,source:t})}columnVisible(e,t){if(!e.length)return;let i=e.length===1?e[0]:null,n=this.getCommonValue(e,r=>r.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:n,columns:e,column:i,source:t})}getCommonValue(e,t){if(!e||e.length==0)return;let i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}columnChanged(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i})}columnResized(e,t,i,n=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:n,finished:t,source:i})}},Az=class extends Z{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){let e=this.columnModel.getColDefCols();if(Ge(e)||!this.columnModel.isAlive())return[];let i=this.columnModel.getAllCols().map(n=>this.createStateItemFromColumn(n));return this.orderColumnStateList(i),i}createStateItemFromColumn(e){let t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),n=e.isRowGroupActive()?t.indexOf(e):null,r=e.isPivotActive()?i.indexOf(e):null,s=e.isValueActive()?e.getAggFunc():null,a=e.getSort()!=null?e.getSort():null,c=e.getSortIndex()!=null?e.getSortIndex():null,u=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:a,sortIndex:c,aggFunc:s,rowGroup:e.isRowGroupActive(),rowGroupIndex:n,pivot:e.isPivotActive(),pivotIndex:r,flex:u}}orderColumnStateList(e){let t=this.columnModel.getCols(),i=new Map(t.map((n,r)=>[n.getColId(),r]));e.sort((n,r)=>{let s=i.has(n.colId)?i.get(n.colId):-1,a=i.has(r.colId)?i.get(r.colId):-1;return s-a})}},Pz=class extends Z{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){let e=[],t=this.columnModel.getColTree();return Dr(null,t,i=>{Di(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){let t=this.columnModel.getColDefColTree();if(!t)return;let i=[];Dr(null,t,n=>{if(Di(n)){let r=n.getColGroupDef(),s={groupId:n.getGroupId(),open:r?r.openByDefault:void 0};i.push(s)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();let n=[];e.forEach(r=>{let s=r.groupId,a=r.open,c=this.columnModel.getProvidedColGroup(s);c&&c.isExpanded()!==a&&(c.setExpanded(a),n.push(c))}),this.visibleColsService.refresh(t,!0),n.length&&this.eventDispatcher.groupOpened(n),this.columnAnimationService.finish()}},kz=class extends Z{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){let n=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!n)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){let s=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=s-this.scrollPosition-this.scrollWidth,this.viewportRight=s-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i||[]}extractViewportColumns(){let e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,r=this.viewportRight+200,s=t<n&&i<n,a=t>r&&i>r;return!s&&!a}getViewportColumns(){let e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;let t=r=>{let s=r.getLeft();return re(s)&&s>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),n=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,n,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};let e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach(s=>e[s.getId()]=!0);let r=(s,a,c)=>{let u=!1;for(let v=0;v<s.length;v++){let b=s[v],x=!1;if(xs(b))x=e[b.getId()]===!0;else{let A=b.getDisplayedChildren();A&&(x=r(A,a,c+1))}x&&(u=!0,a[c]||(a[c]=[]),a[c].push(b))}return u};r(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),r(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),r(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){let e=n=>`${n.getId()}-${n.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}},Oz=class extends Z{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){let i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(n){let r=e(n),s=typeof r;if(s==="string"||s==="number"||s==="boolean"){this.eGui=Tc("<span>"+r+"</span>");return}if(r==null){this.eGui=Tc("<span></span>");return}this.eGui=r}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},Lz=class extends Z{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},Nz=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],tM=Object.fromEntries(Nz.map((e,t)=>[e,t]));function _z(e,t){let i=(e.beanName?tM[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,n=(t.beanName?tM[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-n}function Bz(e,t){return e?.beanName==="gridDestroyService"?-1:0}var Vz=class extends Z{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){let i=this.registry[e];if(i!=null)return new i(...t)}},Hz=class extends Z{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){this.runReadyCallbacksAsync=e.frameworkOverrides.runWhenReadyAsync?.()??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>e?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{let i=this.readyCallbacks.indexOf(t);i>=0&&this.readyCallbacks.splice(i,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},Gz=class extends Z{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){let{rowIndex:t,rowPinned:i,column:n}=e;return this.createIdFromValues({rowIndex:t,column:n,rowPinned:i})}createIdFromValues(e){let{rowIndex:t,rowPinned:i,column:n}=e;return`${t}.${i??"null"}.${n.getId()}`}equals(e,t){let i=e.column===t.column,n=e.rowPinned===t.rowPinned,r=e.rowIndex===t.rowIndex;return i&&n&&r}},zz=class extends Z{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){It(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);let i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(n=>this.eventService.dispatchEvent(n)),this.events=[]};t?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},Wz=class extends Z{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null,i=this.pinnedRowModel.getPinnedBottomRowCount(),n=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):n&&(t="top",e=n-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(re(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},iM={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},nM={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},rM={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},jz=class extends Z{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(iM),this.getSizeEl(nM),this.getSizeEl(rM)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(iM)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(nM)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(rM)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){return this.gridTheme?.getCssClass()||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){let t=this.getThemeClasses();for(let i of Array.from(e.classList))i.startsWith("ag-theme-")&&!t.includes(i)&&e.classList.remove(i);e.classList.add(...t)}refreshRowHeightVariable(){let e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";let i=t.offsetWidth;return i===sM?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(i),this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${sM}px)`,i.appendChild(t),this.sizeEls.set(e,t);let n=this.measureSizeEl(e);n==="no-styles"&&ee(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);let r=this.resizeObserverService.observeResize(t,()=>{let s=this.measureSizeEl(e);s==="detached"||s==="no-styles"||(this.lastKnownValues.set(e,s),s!==n&&(n=s,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){let e=new MutationObserver(()=>{let i=this.readAncestorThemeClasses();Uz(i,this.ancestorThemeClasses)||(this.ancestorThemeClasses=i,this.fireGridStylesChangedEvent("themeChanged"))}),t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv,t=[];for(;e;){let i=Array.from(e.classList).filter(n=>n.startsWith("ag-theme-"));for(let n of i)t.includes(n)||t.unshift(n);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){let{gos:e,eMeasurementContainer:t,gridTheme:i}=this,n=e.get("theme")||null;n!==i&&(i?.stopUse(),this.gridTheme=n,n?.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){this.gridTheme?.stopUse(),this.gridTheme=null}},Uz=(e,t)=>e.length===t.length&&e.findIndex((i,n)=>e[n]!==t[n])===-1,sM=15538,$z=class extends Z{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new Ha}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){let e=Zh(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},qz=(()=>{let e=class dn extends Z{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(i){this.eGridDiv=i.eGridDiv,this.columnModel=i.columnModel,this.visibleColsService=i.visibleColsService,this.headerNavigationService=i.headerNavigationService,this.headerPositionUtils=i.headerPositionUtils,this.rowRenderer=i.rowRenderer,this.rowPositionUtils=i.rowPositionUtils,this.cellPositionUtils=i.cellPositionUtils,this.navigationService=i.navigationService,this.ctrlsService=i.ctrlsService,this.filterManager=i.filterManager,this.rangeService=i.rangeService,this.advancedFilterService=i.advancedFilterService,this.overlayService=i.overlayService}static addKeyboardModeEvents(i){this.instanceCount>0||(i.addEventListener("keydown",dn.toggleKeyboardMode),i.addEventListener("mousedown",dn.toggleKeyboardMode))}static removeKeyboardModeEvents(i){this.instanceCount>0||(i.removeEventListener("keydown",dn.toggleKeyboardMode),i.removeEventListener("mousedown",dn.toggleKeyboardMode))}static toggleKeyboardMode(i){let n=dn.keyboardModeActive,r=i.type==="keydown";r&&(i.ctrlKey||i.metaKey||i.altKey)||n!==r&&(dn.keyboardModeActive=r)}postConstruct(){let i=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:i,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:i,columnRowGroupChanged:i}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,n=>{this.gridCtrl=n.gridCtrl})}registerKeyboardFocusEvents(){let i=Ot(this.gos);dn.addKeyboardModeEvents(i),dn.instanceCount++,this.addDestroyFunc(()=>{dn.instanceCount--,dn.removeKeyboardModeEvents(i)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let i=this.focusedCellPosition.column,n=this.columnModel.getCol(i.getId());i!==n&&this.clearFocusedCell()}isKeyboardMode(){return dn.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(xt(this.gos),mo.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(xt(this.gos),pg.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(i,n){let r=i;for(;r;){if(xc(this.gos,r,n))return!1;r=r.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(i){return this.isCellRestoreFocused(i)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(i,n){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(i),n())})}isCellRestoreFocused(i){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(i,this.restoredFocusedCellPosition)}setRestoreFocusedCell(i){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=i)}getFocusEventParams(i){let{rowIndex:n,rowPinned:r,column:s}=i,a={rowIndex:n,rowPinned:r,column:s,isFullWidthCell:!1},c=this.rowRenderer.getRowByPosition({rowIndex:n,rowPinned:r});return c&&(a.isFullWidthCell=c.isFullWidth()),a}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let i=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent(q({type:"cellFocusCleared"},i))}setFocusedCell(i){let{column:n,rowIndex:r,rowPinned:s,forceBrowserFocus:a=!1,preventScrollOnBrowserFocus:c=!1}=i,u=this.columnModel.getCol(n);if(!u){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex:r,rowPinned:Sr(s),column:u},this.eventService.dispatchEvent(ue(q({type:"cellFocused"},this.getFocusEventParams(this.focusedCellPosition)),{forceBrowserFocus:a,preventScrollOnBrowserFocus:c}))}isCellFocused(i){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(i,this.focusedCellPosition)}isRowNodeFocused(i){return this.isRowFocused(i.rowIndex,i.rowPinned)}isHeaderWrapperFocused(i){if(this.focusedHeaderPosition==null)return!1;let n=i.getColumnGroupChild(),r=i.getRowIndex(),s=i.getPinned(),{column:a,headerRowIndex:c}=this.focusedHeaderPosition;return n===a&&r===c&&s==a.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(i,n){this.focusedHeaderPosition={headerRowIndex:i,column:n}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(i){if(this.isHeaderFocusSuppressed())return!1;let{direction:n,fromTab:r,allowUserOverride:s,event:a,fromCell:c,rowWithoutSpanValue:u}=i,{headerPosition:v}=i;if(c&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(v);if(s){let b=this.getFocusedHeader(),x=this.headerNavigationService.getHeaderRowCount();if(r){let D=this.gos.getCallback("tabToNextHeader");D&&(v=this.getHeaderPositionFromUserFunc({userFunc:D,direction:n,currentPosition:b,headerPosition:v,headerRowCount:x}))}else{let D=this.gos.getCallback("navigateToNextHeader");if(D&&a){let A={key:a.key,previousHeaderPosition:b,nextHeaderPosition:v,headerRowCount:x,event:a};v=D(A)}}}return v?this.focusProvidedHeaderPosition({headerPosition:v,direction:n,event:a,fromCell:c,rowWithoutSpanValue:u}):!1}focusHeaderPositionFromUserFunc(i){if(this.isHeaderFocusSuppressed())return!1;let{userFunc:n,headerPosition:r,direction:s,event:a}=i,c=this.getFocusedHeader(),u=this.headerNavigationService.getHeaderRowCount(),v=this.getHeaderPositionFromUserFunc({userFunc:n,direction:s,currentPosition:c,headerPosition:r,headerRowCount:u});return!!v&&this.focusProvidedHeaderPosition({headerPosition:v,direction:s,event:a})}getHeaderPositionFromUserFunc(i){let{userFunc:n,direction:r,currentPosition:s,headerPosition:a,headerRowCount:c}=i,v=n({backwards:r==="Before",previousHeaderPosition:s,nextHeaderPosition:a,headerRowCount:c});return v===!0||v===null?(v===null&&ee("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):v===!1?null:v}focusProvidedHeaderPosition(i){let{headerPosition:n,direction:r,fromCell:s,rowWithoutSpanValue:a,event:c}=i,{column:u,headerRowIndex:v}=n;if(v===-1)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(n):this.focusGridView(u);this.headerNavigationService.scrollToColumn(u,r);let x=this.ctrlsService.getHeaderRowContainerCtrl(u.getPinned())?.focusHeader(n.headerRowIndex,u,c)||!1;return x&&(a!=null||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(a??-1),x}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let i=this.visibleColsService.getAllCols()[0];if(!i)return!1;i.getParent()&&(i=this.visibleColsService.getColGroupAtLevel(i,0));let n=this.headerPositionUtils.getHeaderIndexToFocus(i,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(i){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;let n=this.headerNavigationService.getHeaderRowCount()-1,r=Ue(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:r},rowWithoutSpanValue:-1,event:i})}focusPreviousFromFirstCell(i){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(i)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(i,n){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===i&&this.focusedCellPosition.rowPinned===Sr(n)}findFocusableElements(i,n,r=!1){let s=CV,a=HM;n&&(a+=", "+n),r&&(a+=', [tabindex="-1"]');let c=Array.prototype.slice.apply(i.querySelectorAll(s)).filter(b=>Ln(b)),u=Array.prototype.slice.apply(i.querySelectorAll(a));return u.length?((b,x)=>b.filter(D=>x.indexOf(D)===-1))(c,u):c}focusInto(i,n=!1,r=!1){let s=this.findFocusableElements(i,null,r),a=n?Ue(s):s[0];return a?(a.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(i,n){if(!n)return null;let r=this.findFocusableElements(i),s=r.indexOf(n);if(s===-1)return null;let a=-1;for(let c=s-1;c>=0;c--)if(r[c].classList.contains("ag-tab-guard-top")){a=c;break}return a<=0?null:r[a-1]}findNextFocusableElement(i=this.eGridDiv,n,r){let s=this.findFocusableElements(i,n?':not([tabindex="-1"])':null),a=xt(this.gos),c;n?c=s.findIndex(v=>v.contains(a)):c=s.indexOf(a);let u=c+(r?-1:1);return u<0||u>=s.length?null:s[u]}isTargetUnderManagedComponent(i,n){if(!n)return!1;let r=i.querySelectorAll(`.${yo.FOCUS_MANAGED_CLASS}`);if(!r.length)return!1;for(let s=0;s<r.length;s++)if(r[s].contains(n))return!0;return!1}findTabbableParent(i,n=5){let r=0;for(;i&&qC(i)===null&&++r<=n;)i=i.parentElement;return qC(i)===null?null:i}focusOverlay(i){let n=this.overlayService.isVisible()&&this.overlayService.getOverlayWrapper()?.getGui();return!!n&&this.focusInto(n,i)}focusGridViewFailed(i,n){return n&&this.focusOverlay(i)||i&&this.focusLastHeader()}focusGridView(i,n=!1,r=!0){if(this.overlayService.isExclusive())return r&&this.focusOverlay(n);if(this.isCellFocusSuppressed())return n&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():r&&this.focusOverlay(n)?!0:this.focusNextGridCoreContainer(!1);let s=n?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(s){let{rowIndex:a,rowPinned:c}=s;if(i??(i=this.getFocusedHeader()?.column),i&&a!==void 0&&a!==null)return this.navigationService.ensureCellVisible({rowIndex:a,column:i,rowPinned:c}),n&&this.rowRenderer.getRowByPosition(s)?.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(s,n)||(this.setFocusedCell({rowIndex:a,column:i,rowPinned:Sr(c),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:a,rowPinned:c,column:i})),!0}return!!(r&&this.focusOverlay(n)||n&&this.focusLastHeader())}isGridFocused(){let i=xt(this.gos);return!!i&&this.eGridDiv.contains(i)}focusNextGridCoreContainer(i,n=!1){return!n&&this.gridCtrl.focusNextInnerContainer(i)?!0:((n||!i&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(i),!1)}focusAdvancedFilter(i){return this.advancedFilterFocusColumn=i?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(i,n){let r=(n?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return i?this.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(r)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(i){this.gridCtrl.addFocusableContainer(i)}removeFocusableContainer(i){this.gridCtrl.removeFocusableContainer(i)}focusGridInnerElement(i){return this.gridCtrl.focusInnerElement(i)}allowFocusForNextGridCoreContainer(i){this.gridCtrl.allowFocusForNextCoreContainer(i)}};return e.keyboardModeActive=!1,e.instanceCount=0,e})(),Kz=qz,Yz=class extends Z{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let e=li(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},Xz=class extends Z{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());let{dragAndDropService:n,mouseEventService:r,ctrlsService:s,resizeObserverService:a}=this.beans,c={getContainer:()=>this.eGui,isInterestedIn:v=>v===1||v===0,getIconName:()=>"notAllowed"};n.addDropTarget(c),this.addDestroyFunc(()=>n.removeDropTarget(c)),r.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new kw(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});let u=a.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>u()),s.register("gridCtrl",this)}isDetailGrid(){return this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(n===0){if(i>0){let r=this.visibleColsService.getAllCols(),s=Ue(r);if(this.focusService.focusGridView(s,!0))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){let t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;let i=this.getFocusableContainers(),n=this.visibleColsService.getAllCols();if(e){if(i.length>1)return this.focusContainer(Ue(i),!0);let r=Ue(n);if(this.focusService.focusGridView(r,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(n[0]))return!0;for(let r=1;r<i.length;r++)if(this.focusService.focusInto(i[r].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){let t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:n}=this.getNextFocusableIndex(t,e);if(n===-1||i<0||i>=t.length)return;let r=t[i];r.setAllowFocus?.(!0),setTimeout(()=>{r.setAllowFocus?.(!1)})}getNextFocusableIndex(e,t){let i=xt(this.gos),n=e.findIndex(s=>s.getGui().contains(i)),r=n+(t?-1:1);return{indexWithFocus:n,nextIndex:r}}focusContainer(e,t){e.setAllowFocus?.(!0);let i=this.focusService.focusInto(e.getGui(),t);return e.setAllowFocus?.(!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){let e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},Zz=class extends HR{constructor(e){super(),this.gridBody=ae,this.sideBar=ae,this.pagination=ae,this.rootWrapperBody=ae,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:s=>this.addCssClass(s),setGridThemeClass:s=>this.addCssClass(s),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:s=>{this.getGui().style.userSelect=s??"",this.getGui().style.webkitUserSelect=s??""},setCursor:s=>{this.getGui().style.cursor=s??""}},t=this.createManagedBean(new Xz),i=t.getOptionalSelectors(),n=this.createTemplate(i),r=[mG,...Object.values(i).filter(s=>!!s)];this.setTemplate(n,r),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:s=>t.focusInnerElement(s),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.gos.get("debug")&&hn("Grid removed from DOM")})}updateLayoutClasses(e,t){let i=this.rootWrapperBody.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",i=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",n=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",r=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",s=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${i}
                </div>
                ${n}
                ${s}
                ${r}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>Ln(t.getGui()))}},Qz=class extends Z{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t=typeof e=="function";typeof e=="function"&&(e=e());let i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(r=>{if(!r){Ye("alignedGrids contains an undefined option."),t||Ye(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),Ye(i());return}if(this.isGridApi(r))return r;let s=r;return"current"in s?s.current?.api:(s.api||Ye(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),s.api)}).filter(r=>!!r&&!r.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){let i=[];return e.columns?e.columns.forEach(n=>{i.push(t(n))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":ee("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){let{columnModel:t}=this;e.columnGroups.forEach(i=>{let n=null;i&&(n=t.getProvidedColGroup(i.getGroupId())),!(i&&!n)&&t.setColumnGroupOpened(n,i.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){let t=e.column,i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;let n=this.getMasterColumns(e),{columnApplyStateService:r,columnSizeService:s,ctrlsService:a}=this;switch(e.type){case"columnMoved":{let b=e.api.getColumnState().map(x=>({colId:x.colId}));r.applyColumnState({state:b,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let b=e.api.getColumnState().map(x=>({colId:x.colId,hide:x.hide}));r.applyColumnState({state:b},"alignedGridChanged")}break;case"columnPinned":{let b=e.api.getColumnState().map(x=>({colId:x.colId,pinned:x.pinned}));r.applyColumnState({state:b},"alignedGridChanged")}break;case"columnResized":{let v=e,b={};n.forEach(x=>{b[x.getId()]={key:x.getColId(),newWidth:x.getActualWidth()}}),v.flexColumns?.forEach(x=>{b[x.getId()]&&delete b[x.getId()]}),s.setColumnWidths(Object.values(b),!1,v.finished,"alignedGridChanged");break}}let u=a.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(v=>{v.setGridOption("alwaysShowVerticalScroll",u)})}},Jz={version:De,moduleName:"@ag-grid-community/aligned-grid",beans:[Qz]};function e7(e,t){let i=e.columnModel.getColDefCol(t);return i?i.getColDef():null}function t7(e){return e.columnModel.getColumnDefs()}function i7(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function n7(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")}function r7(e,t,i){return e.visibleColsService.getColumnGroup(t,i)}function s7(e,t){return e.columnModel.getProvidedColGroup(t)}function o7(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""}function a7(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""}function l7(e,t){return e.columnModel.getColDefCol(t)}function c7(e){return e.columnModel.getColDefCols()}function d7(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function u7(e){return e.columnGetStateService.getColumnState()}function h7(e){e.columnApplyStateService.resetColumnState("api")}function g7(e){return e.columnGroupStateService.getColumnGroupState()}function p7(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function f7(e){e.columnGroupStateService.resetColumnGroupState("api")}function m7(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function v7(e){return e.visibleColsService.isPinningLeft()}function C7(e){return e.visibleColsService.isPinningRight()}function w7(e,t){return e.visibleColsService.getColAfter(t)}function y7(e,t){return e.visibleColsService.getColBefore(t)}function b7(e,t,i){e.columnModel.setColsVisible([t],i,"api")}function S7(e,t,i){e.columnModel.setColsVisible(t,i,"api")}function x7(e,t,i){e.columnModel.setColsPinned([t],i,"api")}function E7(e,t,i){e.columnModel.setColsPinned(t,i,"api")}function D7(e){return e.columnModel.getCols()}function M7(e){return e.visibleColsService.getLeftCols()}function R7(e){return e.visibleColsService.getCenterCols()}function I7(e){return e.visibleColsService.getRightCols()}function T7(e){return e.visibleColsService.getAllCols()}function F7(e){return e.columnViewportService.getViewportColumns()}function A7(e,t,i){e.columnMoveService.moveColumns([t],i,"api")}function P7(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")}function k7(e,t,i){e.columnMoveService.moveColumns(t,i,"api")}function O7(e,t,i,n=!0,r="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,n,r)}function L7(e,t,i=!0,n="api"){e.columnSizeService.setColumnWidths(t,!1,i,n)}function N7(e){return e.visibleColsService.getTreeLeft()}function _7(e){return e.visibleColsService.getTreeCenter()}function B7(e){return e.visibleColsService.getTreeRight()}function V7(e){return e.visibleColsService.getAllTrees()}function H7(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})}function G7(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})}function z7(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var W7=class extends Z{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(lo(e.source))})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};let t=n=>r=>{let{column:s,node:a,value:c}=r,u=s.getColDef().valueFormatter;return u===n.groupSafeValueFormatter&&(u=n.valueFormatter),this.valueService.formatValue(s,a,c,u)};Object.entries(e).forEach(([n,r])=>{let s=ue(q({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)});this.dataTypeDefinitions[n]=s,this.formatValueFuncs[n]=t(s)});let i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach(([n,r])=>{let s=this.processDataTypeDefinition(r,i,[n],e);s&&(this.dataTypeDefinitions[n]=s,r.dataTypeMatcher&&(this.dataTypeMatchers[n]=r.dataTypeMatcher),this.formatValueFuncs[n]=t(s))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(n=>{let r=this.dataTypeMatchers[n];r&&delete this.dataTypeMatchers[n],this.dataTypeMatchers[n]=r??e[n].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){let i=q(q({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...Kh(e.columnTypes),...Kh(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,n){let r,s=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let a=n[s],c=t[s];if(a&&c&&(a=c),!this.validateDataTypeDefinition(e,a,s))return;r=this.mergeDataTypeDefinitions(a,e)}else{if(i.includes(s)){ee('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let a=t[s];if(!this.validateDataTypeDefinition(e,a,s))return;let c=this.processDataTypeDefinition(a,t,[...i,s],n);if(!c)return;r=this.mergeDataTypeDefinitions(c,e)}return ue(q({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(ee('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(ee(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){let i=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(i){if(i==="first"||i==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&i!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(ue(q({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(ue(q({},t),{value:t.value.value}))}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&typeof t.value=="string"&&!e.dataTypeMatcher?.(t.value))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:n}=t,{field:r}=t;if(n===void 0&&(n=e.cellDataType),(n==null||n===!0)&&(n=this.canInferCellDataType(e,t)?this.inferCellDataType(r,i):!1),!n){e.cellDataType=!1;return}let s=this.dataTypeDefinitions[n];if(!s){ee(`Missing data type definition - "${n}"`);return}return e.cellDataType=n,s.groupSafeValueFormatter&&(e.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(e.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,s,i),s.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let i=n=>{t.add(n.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){if(!It(this.gos))return!1;let i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;let n=t.type===null?e.type:t.type;if(n){let r=this.gos.get("columnTypes")??{};if(Kh(n).some(a=>{let c=r[a.trim()];return c&&this.doColDefPropsPreventInference(c,i)}))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,n])=>this.doesColDefPropPreventInference(e,t,i,n))}doesColDefPropPreventInference(e,t,i,n){if(!t[i])return!1;let r=e[i];return r===null?(t[i]=!1,!1):n===void 0?!!r:r===n}inferCellDataType(e,t){if(!e)return;let i,n=this.getInitialData();if(n){let s=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=vc(n,e,s)}else this.initWaitForRowData(t);if(i==null)return;let[r]=Object.entries(this.dataTypeMatchers).find(([s,a])=>a(i))??["object"];return r}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();let[i]=this.addManagedEventListeners({rowDataUpdateStarted:n=>{let{firstRowData:r}=n;r&&(i?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(r,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;let i=[];this.destroyColumnStateUpdateListeners();let n={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([s,a])=>{let c=this.columnModel.getCol(s);if(!c)return;let u=c.getColDef();if(!this.columnModel.resetColDefIntoCol(c,"cellDataTypeInferred"))return;let v=c.getColDef();if(t&&v.type&&v.type!==u.type){let b=this.getUpdatedColumnState(c,a);b.rowGroup&&b.rowGroupIndex==null&&(n[s]=b),b.pivot&&b.pivotIndex==null&&(r[s]=b),i.push(b)}}),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(n,r)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){let i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(n=>{delete i[n],n==="rowGroup"?delete i.rowGroupIndex:n==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){let t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let i=this.getDataTypeDefinition(e)?.dataTypeMatcher;return i?i(t):!0}validateColDef(e){let t=i=>ee(`Cell data type is "object" but no Value ${i} has been provided. Please either provide an object data type definition with a Value ${i}, or set "colDef.value${i}"`);e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,n){let r=this.formatValueFuncs[t];switch(i.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=s=>!!s.colDef.editable&&s.event.key===J.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=r;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=r;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(s,a)=>{let c=this.columnModel.getColDefCol(n),u=c?.getColDef();if(!c||!u)return 0;let v=s==null?"":r({column:c,node:null,value:s}),b=a==null?"":r({column:c,node:null,value:a});return v===b?0:v>b?1:-1},e.keyCreator=r;break}}this.filterManager?.setColDefPropertiesForDataType(e,i,r)}getDefaultDataTypes(){let e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>i.newValue?.trim?.()===""?null:Number(i.newValue),valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:LC(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>i.newValue==null?i.newValue:i.newValue?.trim?.()===""?null:String(i.newValue).toLowerCase()==="true",valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>Vi(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):mn(i.value,!1)??"",dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>Vi(i)??void 0,dateFormatter:i=>mn(i??null,!1)??void 0,valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>LC(i.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},j7={version:De,moduleName:"@ag-grid-community/data-type",beans:[W7]},U7={version:De,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:e7,getColumnDefs:t7,sizeColumnsToFit:i7,setColumnGroupOpened:n7,getColumnGroup:r7,getProvidedColumnGroup:s7,getDisplayNameForColumn:o7,getDisplayNameForColumnGroup:a7,getColumn:l7,getColumns:c7,applyColumnState:d7,getColumnState:u7,resetColumnState:h7,getColumnGroupState:g7,setColumnGroupState:p7,resetColumnGroupState:f7,isPinning:m7,isPinningLeft:v7,isPinningRight:C7,getDisplayedColAfter:w7,getDisplayedColBefore:y7,setColumnVisible:b7,setColumnsVisible:S7,setColumnPinned:x7,setColumnsPinned:E7,getAllGridColumns:D7,getDisplayedLeftColumns:M7,getDisplayedCenterColumns:R7,getDisplayedRightColumns:I7,getAllDisplayedColumns:T7,getAllDisplayedVirtualColumns:F7,moveColumn:A7,moveColumnByIndex:P7,moveColumns:k7,setColumnWidth:O7,setColumnWidths:L7,getLeftDisplayedColumnGroups:N7,getCenterDisplayedColumnGroups:_7,getRightDisplayedColumnGroups:B7,getAllDisplayedColumnGroups:V7,autoSizeColumn:H7,autoSizeColumns:G7,autoSizeAllColumns:z7}};function $7(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function q7(e,t){let i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)}function K7(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var Y7={version:De,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:$7,removeRowDropZone:q7,getRowDropZoneParams:K7}};function X7(e){return e.pinnedRowModel.getPinnedTopRowCount()}function Z7(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function Q7(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function J7(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var eW={version:De,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:X7,getPinnedBottomRowCount:Z7,getPinnedTopRow:Q7,getPinnedBottomRow:J7}};function tW(e){e.overlayService.showLoadingOverlay()}function iW(e){e.overlayService.showNoRowsOverlay()}function nW(e){e.overlayService.hideOverlay()}var rW={version:De,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:tW,showNoRowsOverlay:iW,hideOverlay:nW}};function sW(e,t,i){if(!t)return;let n=e.ctrlsService.getGridBodyCtrl().getGui(),r=`aria-${t}`;i===null?n.removeAttribute(r):n.setAttribute(r,i)}function oW(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function aW(e,t={}){let i=n=>ee(`Since v31.1 api.flashCells parameter '${n}Delay' is deprecated. Please use '${n}Duration' instead.`);re(t.fadeDelay)&&i("fade"),re(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function lW(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function cW(e){return e.animationFrameService.isQueueEmpty()}function dW(e){e.animationFrameService.flushAllFrames()}function uW(e){return{rowHeight:go(e.gos),headerHeight:e.columnModel.getHeaderHeight()}}function hW(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(wc)}var gW={version:De,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:sW,refreshCells:oW,flashCells:aW,refreshHeader:lW,isAnimationFrameQueueEmpty:cW,flushAllAnimationFrames:dW,getSizesForCurrentTheme:uW,getCellRendererInstances:hW}};function pW(e){e.valueCache.expire()}function fW(e,t,i){return zR(e,{colKey:t,rowNode:i})}function zR(e,t){let{colKey:i,rowNode:n,useFormatter:r}=t,s=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(Ge(s))return null;let a=e.valueService.getValueForDisplay(s,n);return r?e.valueService.formatValue(s,n,a)??er(a,!0):a}function mW(e){return e.context.getGridId()}function vW(e){e.gridDestroyService.destroy()}function CW(e){return e.gridDestroyService.isDestroyCalled()}function wW(e,t){return e.gos.get(t)}function yW(e,t,i){WR(e,{[t]:i})}function WR(e,t){e.gos.updateGridOptions({options:t})}function bW(e,t,i){e.apiEventService.addEventListener(t,i)}function SW(e,t,i){e.apiEventService.removeEventListener(t,i)}function xW(e,t){e.apiEventService.addGlobalListener(t)}function EW(e,t){e.apiEventService.removeGlobalListener(t)}function DW(e){return e.focusService.getFocusedCell()}function MW(e){return e.focusService.clearFocusedCell()}function RW(e,t,i,n){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:n,forceBrowserFocus:!0})}function IW(e,t){return e.navigationService.tabToNextCell(!1,t)}function TW(e,t){return e.navigationService.tabToNextCell(!0,t)}function FW(e,t,i=!1){let n=e.headerNavigationService.getHeaderPositionForColumn(t,i);n&&e.focusService.focusHeaderPosition({headerPosition:n})}function AW(e,t,i){let n=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:n,buttonElement:i,positionBy:"button"})}function PW(e,t,i){let n=e.columnModel.getCol(t);if(n||(n=e.columnModel.getColDefCol(t)),!n){Ye(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:n,mouseEvent:i,positionBy:"mouse"})}function kW(e,t){let i=e.columnModel.getCol(t);if(!i){Ye(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,positionBy:"auto"})}function OW(e){e.menuService.hidePopupMenu()}function LW(e,t={}){let i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function NW(e,t,i,n,r){e.expansionService.setRowNodeExpanded(t,i,n,r)}function _W(e,t){return e.rowModel.getRowNode(t)}function BW(e,t,i,n){e.rowRenderer.addRenderedRowListener(t,i,n)}function VW(e){return e.rowRenderer.getRenderedNodes()}function HW(e,t,i){e.rowModel.forEachNode(t,i)}function GW(e){return jR(e)}function jR(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function zW(e){return UR(e)}function UR(e){return e.rowRenderer.getLastVirtualRenderedRow()}function WW(e,t){return e.rowModel.getRow(t)}function jW(e){return e.rowModel.getRowCount()}function UW(e){return e.rowModel}function $W(e,t){if(!t.nodes.every(c=>c.rowPinned?(ee("cannot select pinned rows"),!1):c.id===void 0?(ee("cannot select node until id for node is known"),!1):!0))return;let{nodes:n,source:r,newValue:s}=t,a=n;e.selectionService.setNodesSelected({nodes:a,source:r??"api",newValue:s})}function qW(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function KW(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function YW(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function XW(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function ZW(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function QW(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function JW(e){return e.selectionService.getSelectedNodes()}function ej(e){return e.selectionService.getSelectedRows()}function tj(e){e.sortController.onSortChanged("api")}var ij={version:De,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:mW,destroy:vW,isDestroyed:CW,getGridOption:wW,setGridOption:yW,updateGridOptions:WR}},nj={version:De,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:$W,selectAll:qW,deselectAll:KW,selectAllFiltered:YW,deselectAllFiltered:XW,selectAllOnCurrentPage:ZW,deselectAllOnCurrentPage:QW,getSelectedNodes:JW,getSelectedRows:ej}},rj={version:De,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:LW,setRowNodeExpanded:NW,getRowNode:_W,addRenderedRowListener:BW,getRenderedNodes:VW,forEachNode:HW,getFirstDisplayedRow:GW,getFirstDisplayedRowIndex:jR,getLastDisplayedRow:zW,getLastDisplayedRowIndex:UR,getDisplayedRowAtIndex:WW,getDisplayedRowCount:jW,getModel:UW}},sj={version:De,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:zG,getHorizontalPixelRange:WG,ensureColumnVisible:_R,ensureIndexVisible:BR,ensureNodeVisible:jG}},oj={version:De,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:DW,clearFocusedCell:MW,setFocusedCell:RW,setFocusedHeader:FW,tabToNextCell:IW,tabToPreviousCell:TW}},aj={version:De,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:bW,addGlobalListener:xW,removeEventListener:SW,removeGlobalListener:EW}},lj={version:De,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:pW,getValue:fW,getCellValue:zR}},cj={version:De,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:AW,showColumnMenuAfterMouseClick:PW,showColumnMenu:kW,hidePopupMenu:OW}},dj={version:De,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:tj}},uj={version:De,moduleName:"@ag-grid-community/api",dependantModules:[ij,eW,nj,U7,rj,Y7,sj,rW,oj,aj,gW,lj,cj,dj]};function hj(e){return e.stateService?.getState()??{}}function gj(e){switch(e=q({},e),e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=pj(e)}return e}function pj(e){return e.cellSelection=fj(e,"rangeSelection"),e}function fj(e,t){if(e&&typeof e=="object")return e[t]}var mj=class extends Z{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Ri(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Ri(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Ri(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=It(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",De),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:({source:n})=>{n==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{i?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return gj(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());let e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){let e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());let t=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){let{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:n}=this.getInitialState(),r=this.gos.get("advancedFilterModel");(e||r)&&this.setFilterState(e,r),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),n&&this.setPaginationState(n),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());let s=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:s,columnRowGroupChanged:s,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{s()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:a=>{(a.newPage||a.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){let{scroll:e,cellSelection:t,focusedCell:i,columnOrder:n}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!n?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());let r=this.getRangeSelectionState();this.updateCachedState("rangeSelection",r),this.updateCachedState("cellSelection",r),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:s=>{if(s.finished){let a=this.getRangeSelectionState();this.updateCachedState("rangeSelection",a),this.updateCachedState("cellSelection",a)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){let e=this.columnModel.isPivotMode(),t=[],i=[],n=[],r=[],s=[],a=[],c=[],u=[],v=[],b=0,x=this.columnGetStateService.getColumnState();for(let D=0;D<x.length;D++){let{colId:A,sort:O,sortIndex:B,rowGroup:L,rowGroupIndex:U,aggFunc:K,pivot:$,pivotIndex:ne,pinned:G,hide:_,width:N,flex:Y}=x[D];v.push(A),O&&(t[B??b++]={colId:A,sort:O}),L&&(i[U??0]=A),typeof K=="string"&&n.push({colId:A,aggFunc:K}),$&&(r[ne??0]=A),G&&(G==="right"?a:s).push(A),_&&c.push(A),(Y||N)&&u.push({colId:A,flex:Y??void 0,width:N})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:r.length||e?{pivotMode:e,pivotColIds:r}:void 0,columnPinning:s.length||a.length?{leftColIds:s,rightColIds:a}:void 0,columnVisibility:c.length?{hiddenColIds:c}:void 0,columnSizing:u.length?{columnSizingModel:u}:void 0,columnOrder:v.length?{orderedColIds:v}:void 0}}setColumnState(e){let{sort:t,rowGroup:i,aggregation:n,pivot:r,columnPinning:s,columnVisibility:a,columnSizing:c,columnOrder:u,partialColumnState:v}=e,b={},x=L=>{let U=b[L];return U||(U={colId:L},b[L]=U,U)},D=v?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:L,sort:U},K)=>{let $=x(L);$.sort=U,$.sortIndex=K}),D.sort=null,D.sortIndex=null),i&&(i.groupColIds.forEach((L,U)=>{let K=x(L);K.rowGroup=!0,K.rowGroupIndex=U}),D.rowGroup=null,D.rowGroupIndex=null),n&&(n.aggregationModel.forEach(({colId:L,aggFunc:U})=>{x(L).aggFunc=U}),D.aggFunc=null),r&&(r.pivotColIds.forEach((L,U)=>{let K=x(L);K.pivot=!0,K.pivotIndex=U}),this.gos.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"}),D.pivot=null,D.pivotIndex=null),s&&(s.leftColIds.forEach(L=>{x(L).pinned="left"}),s.rightColIds.forEach(L=>{x(L).pinned="right"}),D.pinned=null),a&&(a.hiddenColIds.forEach(L=>{x(L).hide=!0}),D.hide=null),c&&(c.columnSizingModel.forEach(({colId:L,flex:U,width:K})=>{let $=x(L);$.flex=U??null,$.width=K}),D.flex=null);let A=u?.orderedColIds,O=!!A?.length,B=O?A.map(L=>x(L)):Object.values(b);B.length&&(this.columnStates=B,this.columnApplyStateService.applyColumnState({state:B,applyOrder:O,defaultState:D},"gridInitializing"))}setColumnPivotState(e){let t=this.columnStates;this.columnStates=void 0;let i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){let n=[];for(let r of t)this.pivotResultColsService.getPivotResultCol(r.colId)&&n.push(r);this.columnApplyStateService.applyColumnState({state:n,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){let e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:i,open:n})=>{n&&t.push(i)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;let t=new Set(e.columnGroup?.openColumnGroupIds),n=this.columnGroupStateService.getColumnGroupState().map(({groupId:r})=>{let s=t.has(r);return s&&t.delete(r),{groupId:r,open:s}});t.forEach(r=>{n.push({groupId:r,open:!0})}),n.length&&(this.columnGroupStates=n),this.columnGroupStateService.setColumnGroupState(n,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);let t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){let{filterModel:i,advancedFilterModel:n}=e??{advancedFilterModel:t};i&&this.filterManager?.setFilterModel(i,"columnFilter"),n&&this.filterManager?.setAdvancedFilterModel(n)}getRangeSelectionState(){let e=this.rangeService?.getCellRanges().map(t=>{let{id:i,type:n,startRow:r,endRow:s,columns:a,startColumn:c}=t;return{id:i,type:n,startRow:r,endRow:s,colIds:a.map(u=>u.getColId()),startColId:c.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){let{gos:t,rangeService:i,columnModel:n,visibleColsService:r}=this;if(!tr(t)||!i)return;let s=[];if(e.cellRanges.forEach(a=>{let c=[];if(a.colIds.forEach(v=>{let b=n.getCol(v);b&&c.push(b)}),!c.length)return;let u=n.getCol(a.startColId);if(!u){let v=r.getAllCols(),b=new Set(c);u=v.find(x=>b.has(x))}s.push(ue(q({},a),{columns:c,startColumn:u}))}),v4(t)&&C4(t)&&s.length>1)return ee("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");i.setCellRanges(s)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:i}=e?.getVScrollPosition()??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:i}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.focusService.getFocusedCell();if(e){let{column:t,rowIndex:i,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{colId:t,rowIndex:i,rowPinned:n}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;let e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){let e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!e?.toggledNodes?.length?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){let e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){let t=this.getColumnState(),i=!1;Object.entries(t).forEach(([n,r])=>{Sc(r,this.cachedState[n])||(i=!0)}),this.cachedState=q(q({},this.cachedState),t),i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let i=this.cachedState[e];this.setCachedStateValue(e,t),Sc(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=ue(q({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},$R={version:De,moduleName:"@ag-grid-community/state-core",beans:[mj]},vj={version:De,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:hj},dependantModules:[$R]},Cj={version:De,moduleName:"@ag-grid-community/state",dependantModules:[$R,vj]};function wj(e){return e.rowModel.isLastRowIndexKnown()}function yj(e){return e.paginationService?.getPageSize()??100}function bj(e){return e.paginationService?.getCurrentPage()??0}function Sj(e){return e.paginationService?.getTotalPages()??1}function xj(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function Ej(e){e.paginationService?.goToNextPage()}function Dj(e){e.paginationService?.goToPreviousPage()}function Mj(e){e.paginationService?.goToFirstPage()}function Rj(e){e.paginationService?.goToLastPage()}function Ij(e,t){e.paginationService?.goToPage(t)}var Tj=class extends Z{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){let t=()=>{let i=Math.max(go(this.gos),1),n=Math.floor(e/i);this.paginationService.setPageSize(n,"autoCalculated")};this.isBodyRendered?Ri(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function Fj(e,t,i){e.addManagedElementListeners(t,{keydown:n=>{if(!n.defaultPrevented&&n.key===J.TAB){let r=n.shiftKey;i.findNextFocusableElement(t,!1,r)||i.focusNextGridCoreContainer(r)&&n.preventDefault()}}})}var pc="paginationPageSizeSelector",Aj=class extends qe{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(pc,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){vi(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(pc)!==!1}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);if(i){let r=this.gos.exists("paginationPageSize"),s=this.gos.get(pc)!==!0;ee(`'paginationPageSize=${t}'${r?"":" (default value)"}, but ${t} is not included in${s?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),s||ee(`Either set '${pc}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}let n=String(i?"":t);this.selectPageSizeComp?(Es(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(n,!0)):this.createPageSizeSelectorComp(e,n),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){let i=this.localeService.getLocaleTextFunc(),n=i("pageSizeSelectorLabel","Page Size:"),r=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new xw).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(r).setLabel(n).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){let e=[20,50,100],t=this.gos.get(pc);return!Array.isArray(t)||nn(t)?e:[...t].sort((i,n)=>i-n)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},Pj={selector:"AG-PAGE-SIZE-SELECTOR",component:Aj},kj=class extends HR{constructor(){super(),this.btFirst=ae,this.btPrevious=ae,this.btNext=ae,this.btLast=ae,this.lbRecordCount=ae,this.lbFirstRowOnPage=ae,this.lbLastRowOnPage=ae,this.lbCurrent=ae,this.lbTotal=ae,this.pageSizeComp=ae,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[Pj]);let{btFirst:t,btPrevious:i,btNext:n,btLast:r}=this;this.activateTabIndex([t,i,n,r]),t.insertAdjacentElement("afterbegin",tn(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",tn(e?"next":"previous",this.gos)),n.insertAdjacentElement("afterbegin",tn(e?"previous":"next",this.gos)),r.insertAdjacentElement("afterbegin",tn(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:s=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(s):this.focusService.focusGridInnerElement(s)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{let{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:n=>{(n.key===J.ENTER||n.key===J.SPACE)&&(n.preventDefault(),i())}})}),Fj(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});let i=this.localeService.getLocaleTextFunc(),n=i("thousandSeparator",","),r=i("decimalSeparator",".");return YH(e,n,r)}getTemplate(){let e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),n=e("of","of"),r=e("firstPage","First Page"),s=e("previousPage","Previous Page"),a=e("nextPage","Next Page"),c=e("lastPage","Last Page"),u=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${u}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${u}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${u}-to">${i}</span>
                    <span id="ag-${u}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${u}-of">${n}</span>
                    <span id="ag-${u}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${u}-start-page">${t}</span>
                        <span id="ag-${u}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${u}-of-page">${n}</span>
                        <span id="ag-${u}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${c}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){let e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let n=this.isZeroPagesToDisplay(),r=e===i-1;this.nextButtonDisabled=r||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){rV(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}updateLabels(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=this.paginationService.getMasterRowCount(),n=e?i:null;if(n===1){let K=this.rowModel.getRow(0);if(K&&K.group&&!(K.groupData||K.aggData)){this.setTotalLabelsToZero();return}}let r=this.paginationService.getCurrentPage(),s=this.paginationService.getPageSize(),a,c;this.isZeroPagesToDisplay()?a=c=0:(a=s*r+1,c=a+s-1,e&&c>n&&(c=n));let u=a+s-1,v=!e&&i<u,b=this.formatNumber(a);this.lbFirstRowOnPage.textContent=b;let x,D=this.localeService.getLocaleTextFunc();v?x=D("pageLastRowUnknown","?"):x=this.formatNumber(c),this.lbLastRowOnPage.textContent=x;let O=t>0?r+1:0,B=this.formatNumber(O);this.lbCurrent.textContent=B;let L,U;if(e)L=this.formatNumber(t),U=this.formatNumber(n);else{let K=D("more","more");L=K,U=K}this.lbTotal.textContent=L,this.lbRecordCount.textContent=U,this.announceAriaStatus(b,x,U,B,L)}announceAriaStatus(e,t,i,n,r){let s=this.localeService.getLocaleTextFunc(),a=s("page","Page"),c=s("to","to"),u=s("of","of"),v=`${e} ${c} ${t} ${u} ${i}`,b=`${a} ${n} ${u} ${r}`;v!==this.ariaRowStatus&&(this.ariaRowStatus=v,this.ariaAnnouncementService.announceValue(v,"paginationRow")),b!==this.ariaPageStatus&&(this.ariaPageStatus=b,this.ariaAnnouncementService.announceValue(b,"paginationPage"))}setTotalLabelsToZero(){let e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},Oj={selector:"AG-PAGINATION",component:kj},Lj=class extends Z{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return Oj}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;let t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return re(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:re(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:re(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:re(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let t=this.pageSize*this.currentPage,i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let n=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=n-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:n=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:n,keepRenderedRows:t})}},qR={version:De,moduleName:"@ag-grid-community/pagination-core",beans:[Lj,Tj]},Nj={version:De,moduleName:"@ag-grid-community/pagination-api",dependantModules:[qR],apiFunctions:{paginationIsLastPageFound:wj,paginationGetPageSize:yj,paginationGetCurrentPage:bj,paginationGetTotalPages:Sj,paginationGetRowCount:xj,paginationGoToNextPage:Ej,paginationGoToPreviousPage:Dj,paginationGoToFirstPage:Mj,paginationGoToLastPage:Rj,paginationGoToPage:Ij}},_j={version:De,moduleName:"@ag-grid-community/pagination",dependantModules:[qR,Nj]},Bi="clientSide",Ei="serverSide",Fa="infinite",Bj={onGroupExpandedOrCollapsed:[Bi],refreshClientSideRowModel:[Bi],isRowDataEmpty:[Bi],forEachLeafNode:[Bi],forEachNodeAfterFilter:[Bi],forEachNodeAfterFilterAndSort:[Bi],resetRowHeights:[Bi],applyTransaction:[Bi],applyTransactionAsync:[Bi],flushAsyncTransactions:[Bi],getBestCostNodeSelection:[Bi],getServerSideSelectionState:[Ei],setServerSideSelectionState:[Ei],applyServerSideTransaction:[Ei],applyServerSideTransactionAsync:[Ei],applyServerSideRowData:[Ei],retryServerSideLoads:[Ei],flushServerSideAsyncTransactions:[Ei],refreshServerSide:[Ei],getServerSideGroupLevelState:[Ei],refreshInfiniteCache:[Fa],purgeInfiniteCache:[Fa],getInfiniteRowCount:[Fa],isLastRowIndexKnown:[Fa,Ei],expandAll:[Bi,Ei],collapseAll:[Bi,Ei],onRowHeightChanged:[Bi,Ei],setRowCount:[Fa,Ei],getCacheBlockState:[Fa,Ei]},Vj={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function Hj(e,t,i){let n=Vj[e];if(n){let{version:s,new:a,old:c,message:u}=n,v=c??e;return(...b)=>{let x=a?`Please use ${a} instead. `:"";return ee(`Since ${s} api.${v} is deprecated. ${x}${u??""}`),t.apply(t,b)}}let r=Bj[e];return r?(...s)=>{let a=i.rowModel.getType();if(!r.includes(a)){Ye(`api.${e} can only be called when gridOptions.rowModelType is ${r.join(" or ")}`);return}return t.apply(t,s)}:t}var Gj={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},vs=(e,t)=>{let i=t.rowModelType??"clientSide";return i==="clientSide"||i==="serverSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},zj={enableRowGroup:vs,rowGroup:vs,rowGroupIndex:vs,enablePivot:vs,enableValue:vs,pivot:vs,pivotIndex:vs,aggFunc:vs,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(i=>t.includes(i))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Aa},Wj={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},jj=Object.keys(Wj),Aa={objectName:"colDef",allProperties:jj,docsUrl:"column-properties/",deprecations:Gj,validations:zj},Uj=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),$j={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},qj=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{let t=e.rowModelType??"clientSide";switch(t){case"clientSide":{let i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{let i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{let t=e.paginationPageSizeSelector;return typeof t=="boolean"||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},rowSelection:{validate({rowSelection:e}){return e&&typeof e=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>Aa,defaultColDef:()=>Aa,defaultColGroupDef:()=>Aa,autoGroupColumnDef:()=>Aa,selectionColumnDef:()=>Aa}),Kj=()=>({objectName:"gridOptions",allProperties:[...Dc.ALL_PROPERTIES,...Mc.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:Uj(),validations:qj()}),Yj=class extends Z{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,Kj())}validateApiFunction(e,t){return Hj(e,t,this.beans)}processOptions(e,t){let{validations:i,deprecations:n,allProperties:r,propertyExceptions:s,objectName:a,docsUrl:c}=t;r&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...s??[],...Object.keys(n)],r,a,c);let u=new Set;Object.keys(e).forEach(b=>{let x=n[b];if(x)if("renamed"in x){let{renamed:$,version:ne}=x;u.add(`As of v${ne}, ${String(b)} is deprecated. Please use ${String($)} instead.`),e[$]=e[b]}else{let{message:$,version:ne}=x;u.add(`As of v${ne}, ${String(b)} is deprecated. ${$??""}`)}let D=e[b];if(D==null||D===!1)return;let A=i[b],O;if(A)if(typeof A=="function"){let $=A(e,this.gridOptions);if(!$)return;if("objectName"in $){let ne=e[b];if(Array.isArray(ne)){ne.forEach(G=>{this.processOptions(G,$)});return}this.processOptions(e[b],$);return}O=$}else O=A;else return;let{module:B,dependencies:L,validate:U,supportedRowModels:K}=O;if(K){let $=this.gridOptions.rowModelType??"clientSide";if(!K.includes($)){u.add(`${String(b)} is not supported with the '${$}' row model.`);return}}if(B){let $=Array.isArray(B)?B:[B],ne=!0;if($.forEach(G=>{this.gos.assertModuleRegistered(G,String(b))||(ne=!1,u.add(`${String(b)} is only available when ${G} is loaded.`))}),!ne)return}if(L){let $=this.checkForRequiredDependencies(b,L,e);if($){u.add($);return}}if(U){let $=U(e,this.gridOptions);if($){u.add($);return}}}),u.size>0&&u.forEach(b=>{ee(b)})}checkForRequiredDependencies(e,t,i){let r=Object.entries(t).find(([c,u])=>{let v=i[c];return!u.includes(v)});if(!r)return null;let[s,a]=r;return a.length>1?`'${String(e)}' requires '${s}' to be one of [${a.join(", ")}].`:`'${String(e)}' requires '${s}' to be ${a[0]}.`}checkProperties(e,t,i,n,r){let s=["__ob__","__v_skip","__metadata__"],a=Xj(Object.getOwnPropertyNames(e),[...s,...t,...i],i);if(un(a,(c,u)=>{let v=`invalid ${n} property '${c}' did you mean any of these: ${u.slice(0,8).join(", ")}.`;i.includes("context")&&(v+=`
If you are trying to annotate ${n} with application data, use the '${n}.context' property instead.`),ee(v)}),Object.keys(a).length>0&&r){let c=this.getFrameworkOverrides().getDocLink(r);ee(`to see all the valid ${n} properties please check: ${c}`)}}};function Xj(e,t,i){let n={},r=e.filter(s=>!t.some(a=>a===s));return r.length>0&&r.forEach(s=>n[s]=JM({inputValue:s,allSuggestions:i}).values),n}var Zj={version:De,moduleName:"@ag-grid-community/core"},Qj={version:De,moduleName:"@ag-grid-community/core-validations",beans:[Yj]},KR={version:De,moduleName:"@ag-grid-community/core-community-features",dependantModules:[Zj,Qj,lz,O8,Cj,j7,Jz,_j,uj]},Jj=class extends Z{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}}),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},Yh=new Set(["gridPreDestroyed","fillStart","pasteStart"]),e9=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",t9=new Map([...Dc.BOOLEAN_PROPERTIES.map(e=>[e,_C]),...Dc.NUMBER_PROPERTIES.map(e=>[e,mR]),["groupAggFiltering",e=>typeof e=="function"?e:_C(e)],["pageSize",Qn(1)],["autoSizePadding",Qn(0)],["keepDetailRowsCount",Qn(1)],["rowBuffer",Qn(0)],["infiniteInitialRowCount",Qn(1)],["cacheOverflowSize",Qn(1)],["cacheBlockSize",Qn(1)],["serverSideInitialRowCount",Qn(1)],["viewportRowModelPageSize",Qn(1)],["viewportRowModelBufferSize",Qn(0)]]);function YR(e,t){let i=t9.get(e);return i?i(t):t}function i9(e){let t={};return Object.entries(e).forEach(([i,n])=>{let r=YR(i,n);t[i]=r}),t}var n9=(()=>{let e=class XR extends Z{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Ha,this.globalEventHandlerFactory=i=>(n,r)=>{if(!this.isAlive())return;let s=Yh.has(n);if(s&&!i||!s&&i)return;let a=Mc.getCallbackForEvent(n),c=this.gridOptions[a];typeof c=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{c(r)})}}wireBeans(i){this.gridOptions=i.gridOptions,this.eGridDiv=i.eGridDiv,this.validationService=i.validationService,this.environment=i.environment,this.api=i.gridApi,this.gridId=i.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){let i=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),i),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:n})=>{this.updateGridOptions({options:n,force:!0,source:"gridOptionsUpdated"})}})}get(i){return this.gridOptions[i]??$j[i]}getCallback(i){return this.mergeGridCommonParams(this.gridOptions[i])}exists(i){return re(this.gridOptions[i])}mergeGridCommonParams(i){return i&&(r=>{let s=r;return s.api=this.api,s.context=this.gridOptionsContext,i(s)})}updateGridOptions({options:i,force:n,source:r="api"}){let s={id:XR.changeSetId++,properties:[]},a=[];Object.entries(i).forEach(([c,u])=>{r==="api"&&Q4[c]&&ee(`${c} is an initial property and cannot be updated.`);let v=YR(c,u),b=n||typeof v=="object"&&r==="api",x=this.gridOptions[c];if(b||x!==v){this.gridOptions[c]=v;let D={type:c,currentValue:v,previousValue:x,changeSet:s,source:r};a.push(D)}}),this.validationService?.processGridOptions(this.gridOptions),s.properties=a.map(c=>c.type),a.forEach(c=>{this.gridOptions.debug&&hn(`Updated property ${c.type} from`,c.previousValue," to ",c.currentValue),this.propertyEventService.dispatchEvent(c)})}addPropertyEventListener(i,n){this.propertyEventService.addEventListener(i,n)}removePropertyEventListener(i,n){this.propertyEventService.removeEventListener(i,n)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(i){let n=i;return n.api=this.api,n.context=this.gridOptionsContext,n}assertModuleRegistered(i,n){return br.__assertRegistered(i,n,this.gridId)}isModuleRegistered(i){return br.__isRegistered(i,this.gridId)}};return e.changeSetId=0,e})(),r9=n9,s9=class extends Z{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,n;if(Nt(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(n=`getCol${t}`,i=this.visibleColsService[n](e.column)),!i)return;let{headerRowIndex:r}=e;if(this.getHeaderRowType(r)!=="filter"){let c=[i];for(;i.getParent();)i=i.getParent(),c.push(i);i=c[c.length-1-r]}let{column:s,headerRowIndex:a}=this.getHeaderIndexToFocus(i,r);return{column:s,headerRowIndex:a}}getHeaderIndexToFocus(e,t){let i;if(Nt(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){let n=e;i=n.getLeafColumns()[0];let r=i;for(;r!==n;)t++,r=r.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){let i=this.getHeaderRowType(t),n=i==="filter",r=i==="column",s=n?e:e.getParent(),a=t-1,c=a;if(r&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;s&&s.isPadding();)s=s.getParent(),a--;c=a,a<0&&(s=e,a=t,c=void 0)}return{column:s,headerRowIndex:a,headerRowIndexWithoutSpan:c}}getColumnVisibleChild(e,t,i="After"){let n=this.getHeaderRowType(t),r=e,s=t+1,a=s;if(n==="group"){let c=e.getDisplayedLeafColumns(),u=i==="After"?c[0]:Ue(c),v=[],b=u;for(;b.getParent()!==e;)b=b.getParent(),v.push(b);if(r=u,u.isSpanHeaderHeight())for(let x=v.length-1;x>=0;x--){let D=v[x];if(!D.isPadding()){r=D;break}s++}else r=Ue(v),r||(r=u)}return{column:r,headerRowIndex:s,headerRowIndexWithoutSpan:a}}getHeaderRowType(e){let t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){let i=this.visibleColsService.getAllCols(),n=i[t==="start"?0:i.length-1];if(!n)return;let s=this.ctrlsService.getHeaderRowContainerCtrl(n.getPinned())?.getRowType(e);if(s=="group"){let a=this.visibleColsService.getColGroupAtLevel(n,e);return{headerRowIndex:e,column:a}}return{headerRowIndex:s==null?-1:e,column:n}}},o9=class extends Z{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){let e=this.gos.getCallback("getLocaleText");if(e)return(i,n,r)=>e({key:i,defaultValue:n,variableValues:r});let t=this.gos.get("localeText");return(i,n,r)=>{let s=t&&t[i];if(s&&r&&r.length){let a=0;for(;!(a>=r.length||s.indexOf("${variable}")===-1);)s=s.replace("${variable}",r[a++])}return s??n}}},a9=class extends Z{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new lw(this.getFrameworkOverrides())}addEventListener(e,t){let i=this.frameworkEventWrappingService.wrap(t),n=Zh(this.gos)&&!Yh.has(e),r=n?this.asyncEventListeners:this.syncEventListeners;r.has(e)||r.set(e,new Set),r.get(e).add(i),this.eventService.addEventListener(e,i,n)}removeEventListener(e,t){let i=this.frameworkEventWrappingService.unwrap(t),r=!!this.asyncEventListeners.get(e)?.delete(i);r||this.syncEventListeners.get(e)?.delete(i),this.eventService.removeEventListener(e,i,r)}addGlobalListener(e){let t=this.frameworkEventWrappingService.wrapGlobal(e);if(Zh(this.gos)){let n=(s,a)=>{Yh.has(s)&&t(s,a)},r=(s,a)=>{Yh.has(s)||t(s,a)};this.globalEventListenerPairs.set(e,{syncListener:n,asyncListener:r}),this.eventService.addGlobalListener(n,!1),this.eventService.addGlobalListener(r,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){let t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){let{syncListener:n,asyncListener:r}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(n,!1),this.eventService.removeGlobalListener(r,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((i,n)=>{i.forEach(r=>this.eventService.removeEventListener(n,r,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(i=>this.eventService.removeGlobalListener(i,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},l9=class extends Z{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},c9=class extends Z{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return Ge(this.topRowBounds)||Ge(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=re(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},d9=class extends Z{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=Ri(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){let e=Ot(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),PM(t,"polite"),nV(t,"additions text"),iV(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;let e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(vi(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},u9=class extends Z{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e(),t();return}let i=n=>{for(;n.length;){let r=n.pop();r&&r()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),i(this.executeNextFuncs)},0),window.setTimeout(()=>{t(),i(this.executeLaterFuncs)},200)})}},h9=class extends Z{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},g9=class extends Z{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=It(this.gos);let e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){ee("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){let n=e.newAgStackInstance();this.overlayWrapperComp?.showOverlay(n,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){let e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;this.state===2?e=this.ctrlsService.get("gridHeaderCtrl")?.getHeaderHeight()||0:this.wrapperPadding!==0&&(e=0),this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},p9=class extends Z{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){let t=[];return re(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),BD(t,this.processClassesFromGridOptions(e.rowNode)),BD(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){let t=[],i=s=>{typeof s=="string"?t.push(s):Array.isArray(s)&&s.forEach(a=>t.push(a))},n=this.gos.get("rowClass");if(n){if(typeof n=="function")return ee("rowClass should not be a function, please use getRowClass instead"),[];i(n)}let r=this.gos.getCallback("getRowClass");if(r){let s={data:e.data,node:e,rowIndex:e.rowIndex},a=r(s);i(a)}return t}preProcessRowClassRules(e){let t=[];return this.processRowClassRules(e,i=>{t.push(i)},()=>{}),t}processRowClassRules(e,t,i){let n=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),n,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},f9=class extends Z{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=pV(),this.gos.get("debug")&&hn("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&hn(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},m9=class extends Z{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=Jn(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Jn(this.gos))}doFullSort(e,t){let i=(r,s)=>({currentPos:s,rowNode:r}),n=e.map(i);return n.sort(this.compareRowNodes.bind(this,t)),n.map(r=>r.rowNode)}compareRowNodes(e,t,i){let n=t.rowNode,r=i.rowNode;for(let s=0,a=e.length;s<a;s++){let c=e[s],u=c.sort==="desc",v=this.getValue(n,c.column),b=this.getValue(r,c.column),x,D=this.getComparator(c,n);if(D?x=D(v,b,n,r,u):x=h4(v,b,this.isAccentedSort),!isNaN(x)&&x!==0)return c.sort==="asc"?x:x*-1}return t.currentPos-i.currentPos}getComparator(e,t){let i=e.column,n=i.getColDef().comparator;if(n!=null)return n;if(!i.getColDef().showRowGroup)return;let r=!t.group&&i.getColDef().field;if(!r)return;let s=this.columnModel.getColDefCol(r);if(s)return s.getColDef().comparator}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(ug(this.gos,this.columnModel.isPivotActive())){let s=e.allLeafChildren?.[0];return s?this.valueService.getValue(t,s,!1,!1):void 0}let r=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());return r?e.groupData?.[r.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},vg=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let n=0;n<e.childrenAfterGroup.length;n++){let r=e.childrenAfterGroup[n];r.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[n],t,i):i&&t(r)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){let n={rowNode:t,children:null};this.mapToItems[t.id]=n,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(n=>this.nodeIdsToColumns[i.id][n.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let n=0;n<t;n++){let r=this.mapToItems[i.id],s=this.mapToItems[i.parent.id];s.children||(s.children=[]),s.children.push(r),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let i=this.nodeIdsToColumns[e.id];return t.filter(r=>i[r.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let i=this.nodeIdsToColumns[e.id];return t.filter(r=>!i[r.getId()])}},ZR=class extends Z{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new vz,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){let{gos:e,rowModel:t,onRowSelected:i}=this;this.selectionCtx.init(t),this.rowSelectionMode=Jh(e),this.groupSelectsChildren=Co(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{let n=Co(e),r=Jh(e);(n!==this.groupSelectsChildren||r!==this.rowSelectionMode)&&(this.groupSelectsChildren=n,this.rowSelectionMode=r,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:i.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(e,t){if(!e9(t))return e;let i=this.selectionCtx.getRoot();return i?i.isSelected()??!1:!0}setNodesSelected(e){let{newValue:t,clearSelection:i,suppressFinishActions:n,rangeSelect:r,nodes:s,event:a,source:c}=e;if(s.length===0)return 0;if(s.length>1&&!this.isMultiSelect())return ee("cannot multi select unless selection mode is 'multiRow'"),0;let u=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,v=s.map(x=>x.footer?x.sibling:x);if(r){if(v.length>1)return ee("cannot range select while selecting multiple rows"),0;let x=v[0],D=this.overrideSelectionValue(t,c);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(x)){let A=this.selectionCtx.truncate(x);return D&&this.selectRange(A.discard,!1,c),this.selectRange(A.keep,D,c)}else if(this.selectionCtx.getRoot()!==x){let B=this.selectionCtx.extend(x,this.groupSelectsChildren);return D&&this.selectRange(B.discard,!1,c),this.selectRange(B.keep,D,c)}}}n||this.selectionCtx.setRoot(v[0]);let b=0;for(let x=0;x<v.length;x++){let D=v[x];u&&D.group||D.selectThisNode(t,a,c)&&b++,this.groupSelectsChildren&&D.childrenAfterGroup?.length&&(b+=this.selectChildren(D,t,u,c))}return n||(t&&(i||!this.isMultiSelect())&&(b+=this.clearOtherNodes(v[0],c)),b>0&&(this.updateGroupsFromChildrenSelections(c),this.dispatchSelectionChanged(c))),b}selectRange(e,t,i){let n=0;return e.forEach(r=>{if(r.group&&this.groupSelectsChildren)return;r.selectThisNode(t,void 0,i)&&n++}),n>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),n}selectChildren(e,t,i,n){let r=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return Ge(r)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:n,nodes:r})}getSelectedNodes(){let e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((i,n)=>{i&&e(i)&&t.set(n,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||!It(this.gos))return!1;let n=this.rowModel.getRootNode();t||(t=new vg(!0,n),t.setInactive());let r=!1;return t.forEachChangedNodeDepthFirst(s=>{if(s!==n){let a=s.calculateSelectedFromChildren();r=s.selectThisNode(a===null?!1:a,void 0,e)||r}}),r}clearOtherNodes(e,t){let i=new Map,n=0;return this.selectedNodes.forEach(r=>{if(r&&r.id!==e.id){let s=this.selectedNodes.get(r.id);n+=s.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&r.parent&&i.set(r.parent.id,r.parent)}}),i.forEach(r=>{let s=r.calculateSelectedFromChildren();r.selectThisNode(s===null?!1:s,void 0,t)}),n}onRowSelected(e){let t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(re(t)&&e.id!==t.id&&t){let n=t.id;this.selectedNodes.get(n)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(!It(this.gos))return;let t=this.rowModel.getTopLevelNodes();if(t===null)return;let i=[];function n(r){for(let s=0,a=r.length;s<a;s++){let c=r[s];if(c.isSelected())i.push(c);else{let u=c;u.group&&u.children&&n(u.children)}}}return n(t),i}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){let t=a=>a.selectThisNode(!1,void 0,n),i=It(this.gos),{source:n,justFiltered:r,justCurrentPage:s}=e;if(s||r){if(!i){Ye("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(r,s).forEach(t)}else this.selectedNodes.forEach(a=>{a&&t(a)}),this.reset(n);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)}getSelectedCounts(e,t){let i=0,n=0,r=s=>{this.groupSelectsChildren&&s.group||(s.isSelected()?i++:s.selectable&&n++)};return this.getNodesToSelect(e,t).forEach(r),{selectedCount:i,notSelectedCount:n}}getSelectAllState(e,t){let{selectedCount:i,notSelectedCount:n}=this.getSelectedCounts(e,t);return i===0&&n===0?!1:i>0&&n>0?null:i>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(i=>i.selectable).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();let i=[];if(t)return this.forEachNodeOnPage(r=>{if(!r.group){i.push(r);return}if(!r.expanded){let s=a=>{i.push(a),a.childrenAfterFilter?.length&&a.childrenAfterFilter.forEach(s)};s(r);return}this.groupSelectsChildren||i.push(r)}),i;let n=this.rowModel;return e?(n.forEachNodeAfterFilter(r=>{i.push(r)}),i):(n.forEachNode(r=>{i.push(r)}),i)}forEachNodeOnPage(e){let t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let n=t;n<=i;n++){let r=this.rowModel.getRow(n);r&&e(r)}}selectAllRowNodes(e){if(m4(this.gos)&&!sw(this.gos))return ee("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();let{source:t,justFiltered:i,justCurrentPage:n}=e,r=this.getNodesToSelect(i,n);r.forEach(s=>s.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(r[0]??null),this.selectionCtx.setEndRange(Ue(r)??null),It(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){let e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return Ye("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");let i=new Set(e),n=[];this.rowModel.forEachNode(r=>{i.has(r.id)&&n.push(r)}),this.setNodesSelected({newValue:!0,nodes:n,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!It(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},v9=class extends Z{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){let{gos:t}=this,i=Xh(t),n=rw(t);if(!i||!n)return;let r=Co(t),s=It(t)&&r,a=[],c=u=>{if(e&&!u.group)return;if(s&&u.group){let b=u.childrenAfterGroup.some(x=>x.selectable===!0);u.setRowSelectable(b,!0);return}let v=n?.(u)??!0;u.setRowSelectable(v,!0),!v&&u.isSelected()&&a.push(u)};if(s){let u=this.rowModel;new vg(!1,u.getRootNode()).forEachChangedNodeDepthFirst(c,!0,!0)}else this.rowModel.forEachNode(c);a.length&&this.selectionService.setNodesSelected({nodes:a,newValue:!1,source:"selectableChanged"}),s&&this.selectionService instanceof ZR&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},oM=["asc","desc",null],C9=class extends Z{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){let n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}setSortForColumn(e,t,i,n){t!=="asc"&&t!=="desc"&&(t=null);let r=Jn(this.gos),s=[e];if(r&&e.getColDef().showRowGroup){let v=this.funcColsService.getSourceColumnsForGroupColumn(e)?.filter(b=>b.isSortable());v&&(s=[e,...v])}s.forEach(u=>u.setSort(t,n));let a=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),c=[];if(!a){let u=this.clearSortBarTheseColumns(s,n);c.push(...u)}this.updateSortIndex(e),c.push(...s),this.dispatchSortChangedEvents(n,c)}updateSortIndex(e){let t=Jn(this.gos),i=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),n=t&&i||e,r=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(c=>c.setSortIndex(null));let s=r.filter(c=>t&&c.getColDef().showRowGroup?!1:c!==n);(n.getSort()?[...s,n]:s).forEach((c,u)=>{c.setSortIndex(u)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let t=this.columnModel.getAllCols().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){let i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){let i=[];return this.columnModel.getAllCols().forEach(n=>{e.includes(n)||(n.getSort()&&i.push(n),n.setSort(void 0,t))}),i}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=oM,!Array.isArray(t)||t.length<=0)return ee(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;let i=t.indexOf(e.getSort()),n=i<0,r=i==t.length-1,s;return n||r?s=t[0]:s=t[i+1],oM.indexOf(s)<0?(ee("invalid sort type ",s),null):s}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(s=>!!s.getSort());if(this.columnModel.isPivotMode()){let s=Jn(this.gos);e=e.filter(a=>{let c=!!a.getAggFunc(),u=!a.isPrimary(),v=s?this.showRowGroupColsService?.getShowRowGroupCol(a.getId()):a.getColDef().showRowGroup;return c||u||v})}let t=this.funcColsService.getRowGroupColumns().filter(s=>!!s.getSort()),i={};e.forEach((s,a)=>i[s.getId()]=a),e.sort((s,a)=>{let c=s.getSortIndex(),u=a.getSortIndex();if(c!=null&&u!=null)return c-u;if(c==null&&u==null){let v=i[s.getId()],b=i[a.getId()];return v>b?1:-1}else return u==null?-1:1});let n=Jn(this.gos)&&!!t.length;n&&(e=[...new Set(e.map(s=>this.showRowGroupColsService?.getShowRowGroupCol(s.getId())??s))]);let r=new Map;return e.forEach((s,a)=>r.set(s,a)),n&&t.forEach(s=>{let a=this.showRowGroupColsService.getShowRowGroupCol(s.getId());r.set(s,r.get(a))}),r}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,n])=>t-n).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=Jn(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){let t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let n=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,r=n[0].getSort();return n.every(a=>a.getSort()==r)?r:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},w9=class extends Z{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});let e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&hn(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,lo(e.source))}}},y9="paste",b9=class extends Z{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){It(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==y9&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;let i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){let n=this.gos.get("aggregateOnlyChangedColumns"),r=new vg(n,this.clientSideRowModel.getRootNode());r.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst(s=>{i.push(s)})}this.rowRenderer.refreshCells({rowNodes:i})}},S9=class extends Z{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Ye("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return hn("Processing of the expression failed"),hn("Expression = ",e),hn("Params = ",t),hn("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];let t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},x9=class extends Z{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},E9=class extends Z{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=Mr(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let e=i=>this.callColumnCellValueChangedHandler(i),t=Zh(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValueForDisplay(e,t){let i=t.leafGroup&&this.columnModel.isPivotMode(),n=t.group&&t.expanded&&!t.footer&&!i,r=this.gos.get("groupSuppressBlankHeader");if(!n||r)return this.getValue(e,t);let s=!1,a=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof a!="function"?s=!!a:s=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});let c=n&&s;return this.getValue(e,t,!1,c)}getValue(e,t,i=!1,n=!1){if(this.initialised||this.init(),!t)return;let r=e.getColDef(),s=r.field,a=e.getColId(),c=t.data,u,v=t.groupData&&t.groupData[a]!==void 0,b=!n&&t.aggData&&t.aggData[a]!==void 0,x=this.isSsrm&&n&&!!e.getColDef().aggFunc,D=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&r.filterValueGetter?u=this.executeFilterValueGetter(r.filterValueGetter,c,e,t):this.isTreeData&&b?u=t.aggData[a]:this.isTreeData&&r.valueGetter?u=this.executeValueGetter(r.valueGetter,c,e,t):this.isTreeData&&s&&c?u=vc(c,s,e.isFieldContainsDots()):v?u=t.groupData[a]:b?u=t.aggData[a]:r.valueGetter?u=this.executeValueGetter(r.valueGetter,c,e,t):D?u=vc(c,t.field,e.isFieldContainsDots()):s&&c&&!x&&(u=vc(c,s,e.isFieldContainsDots())),this.cellExpressions&&typeof u=="string"&&u.indexOf("=")===0){let A=u.substring(1);u=this.executeValueGetter(A,c,e,t)}if(u==null){let A=this.getOpenedGroup(t,e);if(A!=null)return A}return u}parseValue(e,t,i,n){let r=e.getColDef(),s=r.valueParser;if(re(s)){let a=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:n,newValue:i,colDef:r,column:e});return typeof s=="function"?s(a):this.expressionService.evaluate(s,a)}return i}getDeleteValue(e,t){return re(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,n,r=!0){let s=null,a,c=e.getColDef();if(n?a=n:r&&(a=c.valueFormatter),a){let u=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:c,column:e});typeof a=="function"?s=a(u):s=this.expressionService.evaluate(a,u)}else if(c.refData)return c.refData[i]||"";return s==null&&Array.isArray(i)&&(s=i.join(", ")),s}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;let n=t.getColDef().showRowGroup,r=e.parent;for(;r!=null;){if(r.rowGroupColumn&&(n===!0||n===r.rowGroupColumn.getColId()))return r.key;r=r.parent}}setValue(e,t,i,n){let r=this.columnModel.getColDefCol(t);if(!e||!r)return!1;Ge(e.data)&&(e.data={});let{field:s,valueSetter:a}=r.getColDef();if(Ge(s)&&Ge(a))return ee("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(r,i))return ee("Data type of the new value does not match the cell data type of the column"),!1;let c=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(r,e),newValue:i,colDef:r.getColDef(),column:r});c.newValue=i;let u;if(re(a)?typeof a=="function"?u=a(c):u=this.expressionService.evaluate(a,c):u=this.setValueUsingField(e.data,s,i,r.isFieldContainsDots()),u===void 0&&(u=!0),!u)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();let v=this.getValue(r,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:c.column,colDef:c.colDef,data:e.data,node:e,oldValue:c.oldValue,newValue:v,value:v,source:n}),!0}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,n){if(!t)return!1;let r=!1;if(!n)r=e[t]===i,r||(e[t]=i);else{let s=t.split("."),a=e;for(;s.length>0&&a;){let c=s.shift();s.length===0?(r=a[c]===i,r||(a[c]=i)):a=a[c]}}return!r}executeFilterValueGetter(e,t,i,n){let r=this.gos.addGridCommonParams({data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});return typeof e=="function"?e(r):this.expressionService.evaluate(e,r)}executeValueGetter(e,t,i,n){let r=i.getColId(),s=this.valueCache.getValue(n,r);if(s!==void 0)return s;let a=this.gos.addGridCommonParams({data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)}),c;return typeof e=="function"?c=e(a):c=this.expressionService.evaluate(e,a),this.valueCache.setValue(n,r,c),c}getValueCallback(e,t){let i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){let i=this.getValue(e,t),n=e.getColDef().keyCreator,r=i;if(n){let s=this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});r=n(s)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&ee("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),r}},D9=(()=>{let e=class ao{static applyGlobalGridOptions(i){if(!ao.gridOptions)return i;let n={};return Mi(n,ao.gridOptions,!0,!0),ao.mergeStrategy==="deep"?Mi(n,i,!0,!0):n=q(q({},n),i),ao.gridOptions.context&&(n.context=ao.gridOptions.context),i.context&&(ao.mergeStrategy==="deep"&&n.context&&Mi(i.context,n.context,!0,!0),n.context=i.context),n}};return e.gridOptions=void 0,e.mergeStrategy="shallow",e})(),M9=D9;function QR(e,t,i){if(!t)return Ye("No gridOptions provided to createGrid"),{};let n=new I9().create(e,t,r=>{let s=new Zz(e);r.createBean(s)},void 0,i);if(!Object.isFrozen(t)&&!i?.frameworkOverrides){let r="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{Ye(`gridOptions.api is no longer supported. See ${r}.`)},configurable:!0})}return n}var R9=1,I9=class{create(e,t,i,n,r){let s=M9.applyGlobalGridOptions(t),a=i9(s),c=a.gridId??String(R9++),u=this.getRegisteredModules(r,c),v=this.createBeansList(a.rowModelType,u,c),b=this.createProvidedBeans(e,a,r);if(!v){Ye("Failed to create grid.");return}let x={providedBeanInstances:b,beanClasses:v,gridId:c,beanInitComparator:_z,beanDestroyComparator:Bz,derivedBeans:[Iz]},D=new vH(x);return this.registerModuleUserComponents(D,u),this.registerControllers(D,u),this.registerModuleApiFunctions(D,u),i(D),D.getBean("syncService").start(),n&&n(D),D.getBean("gridApi")}registerControllers(e,t){let i=e.getBean("ctrlsFactory");t.forEach(n=>{n.controllers&&n.controllers.forEach(r=>i.register(r))})}getRegisteredModules(e,t){let i=e?e.modules:null,n=br.__getRegisteredModules(t),r=[],s={},a=(c,u,v)=>{(x=>{s[x.moduleName]||(s[x.moduleName]=!0,r.push(x),br.__register(x,c,v))})(u),u.dependantModules&&u.dependantModules.forEach(x=>a(c,x,v))};return a(!!i?.length||!br.__isPackageBased(),KR,void 0),i&&i.forEach(c=>a(!0,c,t)),n&&n.forEach(c=>a(!br.__isPackageBased(),c,void 0)),r}registerModuleUserComponents(e,t){let i=this.extractModuleEntity(t,r=>r.userComponents?r.userComponents:[]),n=e.getBean("userComponentRegistry");i.forEach(({name:r,classImp:s,params:a})=>{n.registerDefaultComponent(r,s,a)})}registerModuleApiFunctions(e,t){let i=e.getBean("apiFunctionService");t.forEach(n=>{let r=n.apiFunctions;r&&Object.keys(r).forEach(a=>{i?.addFunction(a,r[a])})})}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;Ge(n)&&(n=new Ow);let r={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(r,i.providedBeanInstances),r}createBeansList(e="clientSide",t,i){let n=t.filter(u=>!u.rowModel||u.rowModel===e),r={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!r[e]){Ye("Could not find row model for rowModelType = ",e);return}if(!br.__assertRegistered(r[e],`rowModelType = '${e}'`,i))return;let s=[Wz,Gz,s9,Jj,Rz,XV,Oz,Lz,SG,eR,f9,yG,o9,gz,bH,Y4,$z,r9,xz,ZR,_4,V8,c9,l9,uz,S9,N4,wG,x9,E9,cz,bG,CH,Kz,CG,jz,Dz,Cz,vG,C9,h9,u9,v9,b9,xG,Tz,p9,m9,Hz,Yz,zz,Vz,w9,g9,EG,a9,d9,DG,H4,Fz,G4,B4,Az,Pz,K4,V4,$4,kz,q4,A4],a=this.extractModuleEntity(n,u=>u.beans?u.beans:[]);s.push(...a);let c=[];return s.forEach(u=>{c.indexOf(u)<0&&c.push(u)}),c}extractModuleEntity(e,t){return[].concat(...e.map(t))}},JR=class extends Z{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){let e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function T9(e){e.expansionService.expandAll(!0)}function F9(e){e.expansionService.expandAll(!1)}function A9(e){let t=e.rowModelHelperService?.getClientSideRowModel(),i=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}function P9(e,t,i){let n=e.rowModelHelperService?.getServerSideRowModel();if(n){if(e.funcColsService.isRowGroupEmpty()){n.setRowCount(t,i);return}Ye("setRowCount cannot be used while using row grouping.");return}let r=e.rowModelHelperService?.getInfiniteRowModel();if(r){r.setRowCount(t,i);return}}function k9(e){return e.rowNodeBlockLoader?.getBlockState()??{}}function O9(e){return e.rowModel.isLastRowIndexKnown()}var L9={version:De,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:T9,collapseAll:F9,onRowHeightChanged:A9}},N9={version:De,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:P9,getCacheBlockState:k9,isLastRowIndexKnown:O9}},e3=class{wrap(e,t,i=[],n){let r=this.createWrapper(e,n);return t.forEach(s=>{this.createMethod(r,s,!0)}),i.forEach(s=>{this.createMethod(r,s,!1)}),r}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&ee("Framework component is missing the method "+t+"()"),null)}}};var ja=typeof global>"u"?{}:global;ja.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;ja.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;ja.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;ja.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;ja.Node=typeof Node>"u"?{}:Node;ja.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var _9="ROOT_NODE_ID",OC=0,B9=class{constructor(e,t,i,n,r,s){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=n,this.beans=s,this.selectionService=r,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=_9,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return SM(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){ee("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);let t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((n,r)=>this.createNode(n,this.rootNode,OC,r)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);let t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[];return this.executeRemove(e,t,i),this.executeUpdate(e,t,i),this.executeAdd(e,t),this.updateSelection(i,"rowDataChanged"),t}updateRowOrderFromRowData(e){let t=this.rootNode.allLeafChildren,i=t?.length??0,n=new Map,r=-1,s=-1;for(let a=0;a<i;++a){let c=t[a],u=c.data;u!==e[a]&&(s<0&&(r=a),s=a,n.set(u,c))}if(r<0)return!1;for(let a=r;a<=s;++a){let c=n.get(e[a]);c!==void 0&&(t[a]=c,c.sourceRowIndex=a)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}updateSelection(e,t){let i=e.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){let i=e.add;if(nn(i))return;let n=this.rootNode.allLeafChildren,r=n.length;if(typeof e.addIndex=="number"&&(r=this.sanitizeAddIndex(e.addIndex),r>0&&this.gos.get("treeData"))){for(let u=0;u<n.length;u++)if(n[u]?.rowIndex==r-1){r=u+1;break}}let s=i.map((c,u)=>this.createNode(c,this.rootNode,OC,r+u));if(r<n.length){let c=n.slice(0,r),u=n.slice(r,n.length),v=c.length+s.length;for(let b=0,x=u.length;b<x;++b)u[b].sourceRowIndex=v+b;this.rootNode.allLeafChildren=[...c,...s,...u],t.rowsInserted=!0}else this.rootNode.allLeafChildren=n.concat(s);let a=this.rootNode.sibling;a&&(a.allLeafChildren=n),t.rowNodeTransaction.add=s}sanitizeAddIndex(e){let t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},i){let{remove:n}=e;if(nn(n))return;let r={};n.forEach(a=>{let c=this.lookupRowNode(a);c&&(c.isSelected()&&i.push(c),c.clearRowTopAndRowIndex(),r[c.id]=!0,delete this.allNodesMap[c.id],t.remove.push(c))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter(a=>!r[a.id])??null,this.rootNode.allLeafChildren?.forEach((a,c)=>{a.sourceRowIndex=c});let s=this.rootNode.sibling;s&&(s.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},i){let{update:n}=e;nn(n)||n.forEach(r=>{let s=this.lookupRowNode(r);s&&(s.updateData(r),!s.selectable&&s.isSelected()&&i.push(s),this.setMasterForRow(s,r,OC,!1),t.update.push(s))})}lookupRowNode(e){let t=Ga(this.gos),i;if(t){let n=t({data:e,level:0});if(i=this.allNodesMap[n],!i)return Ye(`could not find row id=${n}, data item was not found for this id`),null}else if(i=this.rootNode.allLeafChildren?.find(n=>n.data===e),!i)return Ye("could not find data item as object was not found",e),Ye("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i,n){let r=new Er(this.beans);return r.sourceRowIndex=n,r.group=!1,this.setMasterForRow(r,e,i,!0),t&&(r.parent=t),r.level=i,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&ee(`duplicate node id '${r.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[r.id]=r,this.nextId++,r}setMasterForRow(e,t,i,n){if(this.gos.get("treeData"))e.setMaster(!1),n&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){let a=this.gos.get("isRowMaster");a?e.setMaster(a(t)):e.setMaster(!0)}else e.setMaster(!1);if(n){let a=this.funcColsService.getRowGroupColumns(),c=a?a.length:0,u=i+c;e.expanded=e.master?this.isExpanded(u):!1}}}isExpanded(e){let t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},V9=class extends Z{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=Ri(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){let e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new Er(this.beans),this.nodeManager=new B9(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){let e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),n=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),r=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),s=new Set(["postSortRows","groupDisplayType","accentedSort"]),a=new Set([]),c=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),u=[...e,...t,...i,...n,...n,...r,...s,...a,...c];this.addManagedPropertyListeners(u,v=>{let b=v.changeSet?.properties;if(!b)return;let x=D=>b.some(A=>D.has(A));if(x(e)){this.setRowData(this.rootNode.allLeafChildren.map(D=>D.data));return}if(x(t)){this.refreshModel({step:"group"});return}if(x(i)){this.refreshModel({step:"filter"});return}if(x(n)){this.refreshModel({step:"pivot"});return}if(x(r)){this.refreshModel({step:"aggregate"});return}if(x(s)){this.refreshModel({step:"sort"});return}if(x(a)){this.refreshModel({step:"filter_aggregates"});return}x(c)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,n){let r,s=!1;do{r=!1;let a=this.getRowIndexAtPixel(e),c=this.getRowIndexAtPixel(t),u=Math.max(a,i),v=Math.min(c,n);for(let b=u;b<=v;b++){let x=this.getRow(b);if(x.rowHeightEstimated){let D=bs(this.gos,x);x.setRowHeight(D.height),r=!0,s=!0}}r&&this.setRowTopAndRowIndex()}while(r);return s}setRowTopAndRowIndex(){let e=this.environment.getDefaultRowHeight(),t=0,i=new Set,n=li(this.gos,"normal");for(let r=0;r<this.rowsToDisplay.length;r++){let s=this.rowsToDisplay[r];if(s.id!=null&&i.add(s.id),s.rowHeight==null){let a=bs(this.gos,s,n,e);s.setRowHeight(a.height,a.estimated)}s.setRowTop(t),s.setRowIndex(r),t+=s.rowHeight}return i}clearRowTopAndRowIndex(e,t){let i=e.isActive(),n=s=>{s&&s.id!=null&&!t.has(s.id)&&s.clearRowTopAndRowIndex()},r=s=>{if(n(s),n(s.detailNode),n(s.sibling),s.hasChildren()&&s.childrenAfterGroup){let a=s.level==-1;i&&!a&&!s.expanded||s.childrenAfterGroup.forEach(r)}};r(this.rootNode)}ensureRowsAtPixel(e,t,i=0){let n=this.getRowIndexAtPixel(t),r=this.getRow(n),s=!this.gos.get("suppressAnimationFrame");if(r===e[0])return!1;let a=this.rootNode.allLeafChildren;return e.forEach(c=>{Ii(a,c)}),e.forEach((c,u)=>{eg(a,c,Math.max(n+i,0)+u)}),e.forEach((c,u)=>{c.sourceRowIndex=u}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:s,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){let i=t!=null?this.getRowIndexAtPixel(t):null,n=i!=null?this.getRow(i):null;if(!n||!e||t==null){this.clearHighlightedRow();return}let r=this.getHighlightPosition(t,n),s=this.isHighlightingCurrentPosition(e,n,r),a=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==n;(s||a)&&(this.clearHighlightedRow(),s)||(n.setHighlighted(r),this.lastHighlightedRow=n)}getHighlightPosition(e,t){if(!t){let r=this.getRowIndexAtPixel(e);if(t=this.getRow(r||0),!t)return 1}let{rowTop:i,rowHeight:n}=t;return e-i<n/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;let n=i===0?-1:1;return this.getRow(t.rowIndex+n)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let t=this.rootNode.childrenAfterAggFilter,i=this.rootNode.sibling?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;i-=1}let n=this.rowsToDisplay[this.rowsToDisplay.length-1],r=i>=this.rootNode.childrenAfterSort.length;if(n.footer&&r)return n.rowIndex;let s=this.rootNode.childrenAfterSort[i];if(this.gos.get("groupHideOpenParents"))for(;s.expanded&&s.childrenAfterSort&&s.childrenAfterSort.length>0;)s=s.childrenAfterSort[0];return s.rowIndex}getRowBounds(e){if(Ge(this.rowsToDisplay))return null;let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let e=ka(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;let t=ka(this.gos),n=e.columns.length===0||e.columns.some(r=>r.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:n,keepRenderedRows:!0,animate:t})}onSortChanged(){let e=ka(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){let t=nn(e),i=new vg(!1,this.rootNode);return t&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;let t=e.rowNodeTransactions.filter(n=>n.add!=null&&n.add.length>0||n.remove!=null&&n.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group",i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(re(e)&&(t=i[e]),Ge(t)){Ye(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}let n=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:n}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;let i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,i,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}let n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,n),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){let e=Ge(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Ge(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return re(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,n=!1,r=[],s=Co(this.gos);return this.forEachNodeAfterFilterAndSort(a=>{if(n)return;if(i&&(a===t||a===e)&&(n=!0,a.group&&s)){r.push(...a.allLeafChildren);return}if(!i){if(a!==t&&a!==e)return;i=!0}if(!a.group||!s){r.push(a);return}}),r}setDatasource(e){Ye("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(Ue(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let r=-1,s=-1;for(;;){let a=Math.floor((t+i)/2),c=this.rowsToDisplay[a];if(this.isRowInPixel(c,e)||(c.rowTop<e?t=a+1:c.rowTop>e&&(i=a-1),r===t&&s===i))return a;r=t,s=i}}isRowInPixel(e,t){let i=e.rowTop,n=e.rowTop+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){let{nodes:t,callback:i,recursionType:n,includeFooterNodes:r}=e,{index:s}=e,a=c=>{let u=t[0]?.parent;if(!u)return;let v=r&&gM(this.gos),b=pM(this.gos),x=r&&b({node:u});if(u===this.rootNode){v===c&&(u.createFooter(),i(u.sibling,s++));return}x===c&&(u.createFooter(),i(u.sibling,s++))};a("top");for(let c=0;c<t.length;c++){let u=t[c];if(i(u,s++),u.hasChildren()&&!u.footer){let v=null;switch(n){case 0:v=u.childrenAfterGroup;break;case 1:v=u.childrenAfterAggFilter;break;case 2:v=u.childrenAfterSort;break;case 3:v=u.leafGroup?null:u.childrenAfterSort;break}v&&(s=this.recursivelyWalkNodesAndCallback({nodes:[...v],callback:i,recursionType:n,index:s,includeFooterNodes:r}))}}return a("bottom"),s}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){let t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),n=r=>{r&&r.forEach(s=>{let a=()=>{s.expanded=e,n(s.childrenAfterGroup)};if(t){re(s.childrenAfterGroup)&&a();return}if(i){!s.leafGroup&&a();return}s.group&&a()})};this.rootNode&&n(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,n){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:i,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:n}),Co(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{let r=this.rootNode,s=r.sibling;r.childrenAfterGroup=r.allLeafChildren,s&&(s.childrenAfterGroup=r.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if(typeof e=="string"&&e.indexOf(Er.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(n=>{n.id===e&&(i=n)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let i=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let e=[],t=[],i=!1;this.rowDataTransactionBatch?.forEach(n=>{let{rowNodeTransaction:r,rowsInserted:s}=this.nodeManager.updateRowData(n.rowDataTransaction);s&&(i=!0),t.push(r),n.callback&&e.push(n.callback.bind(null,r))}),this.commonUpdateRowData(t,i),e.length>0&&window.setTimeout(()=>{e.forEach(n=>n())},0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();let{rowNodeTransaction:t,rowsInserted:i}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],i),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;let i=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}};function H9(e){e.expansionService.onGroupExpandedOrCollapsed()}function G9(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)}function z9(e){return e.rowModelHelperService?.getClientSideRowModel()?.isEmpty()??!0}function W9(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)}function j9(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)}function U9(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)}function $9(e){if(e.columnModel.isAutoRowHeightActive()){ee("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()}function q9(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t))}function K9(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,i))}function Y9(e){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions())}function X9(e){return e.selectionService.getBestCostNodeSelection()}var Z9=class extends Z{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){let{changedPath:t}=e;this.filter(t)}filter(e){let t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let i=(n,r)=>{n.hasChildren()&&e&&!r?n.childrenAfterFilter=n.childrenAfterGroup.filter(s=>{let a=s.childrenAfterFilter&&s.childrenAfterFilter.length>0,c=s.data&&this.filterManager.doesRowPassFilter({rowNode:s});return a||c}):n.childrenAfterFilter=n.childrenAfterGroup,n.sibling&&(n.sibling.childrenAfterFilter=n.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let n=(s,a)=>{if(s.childrenAfterGroup)for(let c=0;c<s.childrenAfterGroup.length;c++){let u=s.childrenAfterGroup[c],v=a||this.filterManager.doesRowPassFilter({rowNode:u});u.childrenAfterGroup?n(s.childrenAfterGroup[c],v):i(u,v)}i(s,a)},r=s=>n(s,!1);t.executeFromRootNode(r)}else{let n=r=>i(r,!1);t.forEachChangedNodeDepthFirst(n,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},Q9=class extends Z{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){let t=e.rowNode,i=[],n=this.columnModel.isPivotMode(),r=n&&t.leafGroup,s=r?[t]:t.childrenAfterSort,a=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(a,s,i,n,0);let c=i.length>0;if(!r&&c&&a.grandTotalRow){t.createFooter();let v=a.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(a,t.sibling,i,0,v)}return i}getFlattenDetails(){let e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:fM(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:gM(this.gos),groupTotalRow:pM(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,n,r){if(!nn(t))for(let s=0;s<t.length;s++){let a=t[s],c=a.hasChildren(),u=n&&!c,v=e.groupRemoveSingleChildren&&c&&a.childrenAfterGroup.length===1,b=e.groupRemoveLowestSingleChildren&&c&&a.leafGroup&&a.childrenAfterGroup.length===1,x=n&&a.leafGroup,D=e.hideOpenParents&&a.expanded&&!a.master&&!x;if(!u&&!D&&!v&&!b&&this.addRowNodeToRowsToDisplay(e,a,i,r),!(n&&a.leafGroup)){if(c){let O=v||b;if(a.expanded||O){let B=e.groupTotalRow({node:a});B||a.destroyFooter();let L=O?r:r+1;B==="top"&&(a.createFooter(),this.addRowNodeToRowsToDisplay(e,a.sibling,i,L)),this.recursivelyAddToRowsToDisplay(e,a.childrenAfterSort,i,n,L),B==="bottom"&&(a.createFooter(),this.addRowNodeToRowsToDisplay(e,a.sibling,i,L))}}else if(a.master&&a.expanded){let O=this.createDetailNode(a);this.addRowNodeToRowsToDisplay(e,O,i,r)}}}}addRowNodeToRowsToDisplay(e,t,i,n,r){r?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:n)}createDetailNode(e){if(re(e.detailNode))return e.detailNode;let t=new Er(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,re(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},J9=class extends Z{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){It(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){let t=this.createTransactionForRowData(e);if(!t)return;let i=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:n,rowsInserted:r}=i.updateRowData(t),s=!1;this.gos.get("suppressMaintainUnsortedOrder")||(s=i.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(n,s||r)}createTransactionForRowData(e){if(!It(this.gos))return Ye("ImmutableService only works with ClientSideRowModel"),null;let t=Ga(this.gos);if(t==null)return Ye("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;let i=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),n=[],r=[],s=[];return re(e)&&e.forEach(a=>{let c=t({data:a,level:0}),u=i[c];u?(u.data!==a&&r.push(a),i[c]=void 0):s.push(a)}),un(i,(a,c)=>{c&&n.push(c.data)}),{remove:n,update:r,add:s}}onRowDataUpdated(){let e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},eU=class extends Z{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,n,r,s){let a=this.gos.get("groupMaintainOrder"),c=this.columnModel.getCols().some(D=>D.isRowGroupActive()),u={};i&&n&&(u=this.calculateDirtyNodes(n));let v=this.columnModel.isPivotMode(),b=this.gos.getCallback("postSortRows"),x=D=>{this.pullDownGroupDataForHideOpenParents(D.childrenAfterAggFilter,!0);let A=v&&D.leafGroup;if(a&&c&&!D.leafGroup&&!s){let L=this.funcColsService.getRowGroupColumns()?.[D.level+1]?.getSort()===null,U=D.childrenAfterAggFilter.slice(0);if(D.childrenAfterSort&&!L){let K={};D.childrenAfterSort.forEach(($,ne)=>{K[$.id]=ne}),U.sort(($,ne)=>(K[$.id]??0)-(K[ne.id]??0))}D.childrenAfterSort=U}else!t||A?D.childrenAfterSort=D.childrenAfterAggFilter.slice(0):i?D.childrenAfterSort=this.doDeltaSort(D,u,r,e):D.childrenAfterSort=this.rowNodeSorter.doFullSort(D.childrenAfterAggFilter,e);if(D.sibling&&(D.sibling.childrenAfterSort=D.childrenAfterSort),this.updateChildIndexes(D),b){let B={nodes:D.childrenAfterSort};b(B)}};r&&r.forEachChangedNodeDepthFirst(x),this.updateGroupDataForHideOpenParents(r)}calculateDirtyNodes(e){let t={},i=n=>{n&&n.forEach(r=>t[r.id]=!0)};return e&&e.forEach(n=>{i(n.add),i(n.update),i(n.remove)}),t}doDeltaSort(e,t,i,n){let r=e.childrenAfterAggFilter,s=e.childrenAfterSort;if(!s)return this.rowNodeSorter.doFullSort(r,n);let a={},c=[];r.forEach(x=>{t[x.id]||!i.canSkip(x)?c.push(x):a[x.id]=!0});let u=s.filter(x=>a[x.id]),v=(x,D)=>({currentPos:D,rowNode:x}),b=c.map(v).sort((x,D)=>this.rowNodeSorter.compareRowNodes(n,x,D));return this.mergeSortedArrays(n,b,u.map(v)).map(({rowNode:x})=>x)}mergeSortedArrays(e,t,i){let n=[],r=0,s=0;for(;r<t.length&&s<i.length;)this.rowNodeSorter.compareRowNodes(e,t[r],i[s])<0?n.push(t[r++]):n.push(i[s++]);for(;r<t.length;)n.push(t[r++]);for(;s<i.length;)n.push(i[s++]);return n}updateChildIndexes(e){if(Ge(e.childrenAfterSort))return;let t=e.childrenAfterSort;for(let i=0;i<t.length;i++){let n=t[i],r=i===0,s=i===e.childrenAfterSort.length-1;n.setFirstChild(r),n.setLastChild(s),n.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return ee("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(n=>{n.hasChildren()&&t(n)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||Ge(e)||e.forEach(i=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach(r=>{let s=r.getColDef().showRowGroup;if(typeof s!="string"){Ye("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let a=s,c=this.columnModel.getColDefCol(a);if(c!==i.rowGroupColumn)if(t)i.setGroupValue(r.getId(),void 0);else{let v=this.getFirstChildOfFirstChild(i,c);v&&i.setGroupValue(r.getId(),v.key)}})})}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){let n=i.parent;if(n&&i.firstChild){if(n.rowGroupColumn===t)return n}else return null;i=n}return null}},tU=class extends Z{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){let t=this.sortController.getSortOptions(),i=re(t)&&t.length>0,n=i&&re(e.rowNodeTransactions)&&this.gos.get("deltaSort"),r=t.some(s=>Jn(this.gos)?s.column.isPrimary()&&s.column.isRowGroupActive():!!s.column.getColDef().showRowGroup);this.sortService.sort(t,i,n,e.rowNodeTransactions,e.changedPath,r)}},Lw="32.3.3",t3={version:Lw,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[V9,Z9,tU,Q9,eU,J9]},iU={version:Lw,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[JR],apiFunctions:{onGroupExpandedOrCollapsed:H9,refreshClientSideRowModel:G9,isRowDataEmpty:z9,forEachLeafNode:W9,forEachNodeAfterFilter:j9,forEachNodeAfterFilterAndSort:U9,resetRowHeights:$9,applyTransaction:q9,applyTransactionAsync:K9,flushAsyncTransactions:Y9,getBestCostNodeSelection:X9},dependantModules:[t3,L9]},nU={version:Lw,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[t3,iU]},rU=class extends Z{setBeans(e){this.beans=e}getFileName(e){let t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){let t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},sU=class{constructor(e){this.groupColumns=[];let{columnModel:t,funcColsService:i,columnNameService:n,valueService:r,gos:s,processCellCallback:a,processHeaderCallback:c,processGroupHeaderCallback:u,processRowGroupCallback:v}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=n,this.valueService=r,this.gos=s,this.processCellCallback=a,this.processHeaderCallback=c,this.processGroupHeaderCallback=u,this.processRowGroupCallback=v}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,n,r){let a=(!this.gos.get("groupHideOpenParents")||r.footer)&&this.shouldRenderGroupSummaryCell(r,e,t)?this.createValueForGroupNode(e,r):this.valueService.getValue(e,r);return this.processCell({accumulatedRowIndex:i,rowNode:r,column:e,value:a,processCellCallback:this.processCellCallback,type:n})}shouldRenderGroupSummaryCell(e,t,i){if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){let a=e.groupData?.[t.getId()],c=this.gos.get("suppressGroupMaintainValueType");if(c&&a!=null||!c&&a!==void 0||Mr(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){let u=t.getColDef();return u==null||u.showRowGroup===!0||u.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}let s=ug(this.gos,this.columnModel.isPivotMode());return i===0&&s}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));let i=this.gos.get("treeData"),n=this.gos.get("suppressGroupMaintainValueType"),r=u=>{if(i||n)return u.key;let v=u.groupData?.[e.getId()];return!v||!u.rowGroupColumn||u.rowGroupColumn.getColDef().useValueFormatterForExport===!1?v:this.valueService.formatValue(u.rowGroupColumn,u,v)??v},s=t.footer,a=[r(t)];if(!fM(this.gos))for(;t.parent;)t=t.parent,a.push(r(t));let c=a.reverse().join(" -> ");return s?`Total ${c}`:c}processCell(e){let{accumulatedRowIndex:t,rowNode:i,column:n,value:r,processCellCallback:s,type:a}=e;return s?{value:s(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:n,node:i,value:r,type:a,parseValue:c=>this.valueService.parseValue(n,i,c,this.valueService.getValue(n,i)),formatValue:c=>this.valueService.formatValue(n,i,c)??c}))??""}:n.getColDef().useValueFormatterForExport!==!1?{value:r??"",valueFormatted:this.valueService.formatValue(n,i,r)}:{value:r??""}}},oU=class{static download(e,t){let i=document.defaultView||window;if(!i){ee("There is no `window` associated with the current `document`");return}let n=document.createElement("a"),r=i.URL.createObjectURL(t);n.setAttribute("href",r),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(n),i.setTimeout(()=>{i.URL.revokeObjectURL(r)},0)}},aM=`\r
`,aU=class extends sU{constructor(e){super(e),this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,aM),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,n)=>{n!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,n){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);let n=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(n.valueFormatted??n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(ee("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=aM),this.isFirstLine=!1}},lU=class extends rU{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){ee("Export cancelled. Export is not allowed as per your configuration.");return}let t=this.getMergedParams(e),i=this.getData(t),n=new Blob(["\uFEFF",i],{type:"text/plain"}),r=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;oU.download(this.getFileName(r),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{columnModel:t,columnNameService:i,funcColsService:n,valueService:r,gos:s}=this,{processCellCallback:a,processHeaderCallback:c,processGroupHeaderCallback:u,processRowGroupCallback:v,suppressQuotes:b,columnSeparator:x}=e;return new aU({columnModel:t,columnNameService:i,funcColsService:n,valueService:r,gos:s,processCellCallback:a||void 0,processHeaderCallback:c||void 0,processGroupHeaderCallback:u||void 0,processRowGroupCallback:v||void 0,suppressQuotes:b||!1,columnSeparator:x||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function cU(e,t){return e.csvCreator?.getDataAsCsv(t)}function dU(e,t){e.csvCreator?.exportDataAsCsv(t)}var uU=class extends Z{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){let{allColumns:i,columnKeys:n,skipRowGroups:r}=t,s=this.getColumnsToExport(i,r,n);return u4(this.prepareSession(s),this.prependContent(t),this.exportColumnGroups(t,s),this.exportHeaders(t,s),this.processPinnedTopRows(t,s),this.processRows(t,s),this.processPinnedBottomRows(t,s),this.appendContent(t))(e).parse()}processRow(e,t,i,n){let r=t.shouldRowBeSkipped||(()=>!1),s=this.gos.get("groupRemoveSingleChildren"),a=this.gos.get("groupRemoveLowestSingleChildren"),u=t.rowPositions!=null||!!t.onlySelected,v=this.gos.get("groupHideOpenParents")&&!u,b=this.columnModel.isPivotMode()?n.leafGroup:!n.group,x=!!n.footer,D=a&&n.leafGroup,A=n.allChildrenCount===1&&n.childrenAfterGroup?.length===1&&(s||D);if(!b&&!x&&(t.skipRowGroups||A||v)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&n.rowPinned==="top"||t.skipPinnedBottom&&n.rowPinned==="bottom"||n.level===-1&&!b&&!x||r(this.gos.addGridCommonParams({node:n})))return;let L=e.onNewBodyRow(n);if(i.forEach((U,K)=>{L.onColumn(U,K,n)}),t.getCustomContentBelowRow){let U=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:n}));U&&e.addCustomContent(U)}}appendContent(e){return t=>{let i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{let i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){let n=new MM,r=this.visibleColsService.createGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(r,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){let n=i.onNewHeaderRow();t.forEach((r,s)=>{n.onColumn(r,s,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{let n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="top").sort((r,s)=>r.rowIndex-s.rowIndex).map(r=>this.pinnedRowModel.getPinnedTopRow(r.rowIndex)).forEach(n):this.pinnedRowModel.forEachPinnedRow("top",n),i}}processRows(e,t){return i=>{let n=this.rowModel,r=It(this.gos),s=Mr(this.gos),a=!r&&e.onlySelected,c=this.processRow.bind(this,i,e,t),{exportedRows:u="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(v=>v.rowPinned==null).sort((v,b)=>v.rowIndex-b.rowIndex).map(v=>n.getRow(v.rowIndex)).forEach(c);else if(this.columnModel.isPivotMode())r?n.forEachPivotNode(c,!0):s?n.forEachNodeAfterFilterAndSort(c,!0):n.forEachNode(c);else if(e.onlySelectedAllPages||a){let v=this.selectionService.getSelectedNodes();this.replicateSortedOrder(v),v.forEach(c)}else u==="all"?n.forEachNode(c):r||s?n.forEachNodeAfterFilterAndSort(c,!0):n.forEachNode(c);return i}}replicateSortedOrder(e){let t=this.sortController.getSortOptions(),i=(n,r)=>n.rowIndex!=null&&r.rowIndex!=null?n.rowIndex-r.rowIndex:n.level===r.level?n.parent?.id===r.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:n,currentPos:n.rowIndex??-1},{rowNode:r,currentPos:r.rowIndex??-1}):i(n.parent,r.parent):n.level>r.level?i(n.parent,r):i(n,r.parent);e.sort(i)}processPinnedBottomRows(e,t){return i=>{let n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,s)=>r.rowIndex-s.rowIndex).map(r=>this.pinnedRowModel.getPinnedBottomRow(r.rowIndex)).forEach(n):this.pinnedRowModel.forEachPinnedRow("bottom",n),i}}getColumnsToExport(e=!1,t=!1,i){let n=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);let r=this.gos.get("treeData"),s=[];return e&&!n?s=this.columnModel.getCols():s=this.visibleColsService.getAllCols(),t&&!r&&(s=s.filter(a=>GC(a)||Fc(a))),s}recursivelyAddHeaderGroups(e,t,i){let n=[];e.forEach(r=>{let s=r;s.getChildren&&s.getChildren().forEach(a=>n.push(a))}),e.length>0&&Nt(e[0])&&this.doAddHeaderHeader(t,e,i),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,i)}doAddHeaderHeader(e,t,i){let n=e.onNewHeaderGroupingRow(),r=0;t.forEach(s=>{let a=s,c;i?c=i(this.gos.addGridCommonParams({columnGroup:a})):c=this.columnNameService.getDisplayNameForColumnGroup(a,"header");let u=a.getLeafColumns().reduce((v,b,x,D)=>{let A=Ue(v);return b.getColumnGroupShow()==="open"?(!A||A[1]!=null)&&(A=[x],v.push(A)):A&&A[1]==null&&(A[1]=x-1),x===D.length-1&&A&&A[1]==null&&(A[1]=x),v},[]);n.onColumn(a,c||"",r++,a.getLeafColumns().length-1,u)})}},Nw="32.3.3",i3={version:Nw,moduleName:"@ag-grid-community/csv-export-core",beans:[lU,uU]},hU={version:Nw,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:cU,exportDataAsCsv:dU},dependantModules:[i3]},gU={version:Nw,moduleName:"@ag-grid-community/csv-export",dependantModules:[i3,hU]};var qJ=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);var pU=class extends pz{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){re(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(Ge(this.params.datasource.getRows)){ee("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach((n,r)=>{this.startRow+r<i&&e(n,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());let i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){let t=this.startRow+e,i=new Er(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,n)=>{let r=e.rowData?e.rowData[n]:void 0;!i.id&&i.alreadyRendered&&r&&(this.rowNodes[n]=new Er(this.beans),this.rowNodes[n].setRowIndex(i.rowIndex),this.rowNodes[n].setRowTop(i.rowTop),this.rowNodes[n].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[n],r,this.startRow+n)});let t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},fU=2,mU=class extends Z{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){let i=Math.floor(e/this.params.blockSize),n=this.blocks[i];if(!n){if(t)return;n=this.createBlock(i)}return n.getRow(e)}createBlock(e){let t=this.createBean(new pU(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&hn(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(a=>a!=e),i=(a,c)=>c.getLastAccessed()-a.getLastAccessed();t.sort(i);let n=this.params.maxBlocksInCache>0,r=n?this.params.maxBlocksInCache-1:null,s=fU-1;t.forEach((a,c)=>{let u=a.getState()==="needsLoading"&&c>=s,v=n?c>=r:!1;if(u||v){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){let t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let i=e.getStartRow(),n=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){let t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let n=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<n&&(this.rowCount=n)}}setRowCount(e,t){this.rowCount=e,re(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t=new Va;this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){let e=(i,n)=>i.getId()-n.getId();return Ss(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let i=[],n=-1,r=!1,s=new Va,a=!1;return this.getBlocksInOrder().forEach(u=>{if(!a){if(r&&n+1!==u.getId()){a=!0;return}n=u.getId(),u.forEachNode(v=>{let b=v===e||v===t;(r||b)&&i.push(v),b&&(r=!r)},s,this.rowCount)}}),a||r?[]:i}},vU=class extends Z{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=go(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&ee("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=go(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!Sc(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;Ga(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:go(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new Va},this.infiniteCache=this.createBean(new mU(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function CU(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()}function wU(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()}function yU(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}var _w="32.3.3",n3={version:_w,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[vU],dependantModules:[mz]},bU={version:_w,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[JR],apiFunctions:{refreshInfiniteCache:CU,purgeInfiniteCache:wU,getInfiniteRowCount:yU},dependantModules:[n3,N9]},SU={version:_w,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[n3,bU]};var xU=e=>{let t=new Map;return i=>{let n=i;return t.has(n)||t.set(n,e(i)),t.get(n)}},KJ=xU(e=>{if(/Color$/.test(e))return"color";if(/Scale?$/.test(e))return"scale";if(e==="spacing"||/(Padding|Spacing|Size|Width|Height|Radius|Indent|Start|End|Top|Bottom|Horizontal|Vertical)$/.test(e))return"length";if(/Border$/.test(e))return"border";if(/BorderStyle$/.test(e))return"borderStyle";if(/Shadow$/.test(e))return"shadow";if(/Image$/.test(e))return"image";if(/Family$/.test(e))return"fontFamily";if(/Weight$/.test(e))return"fontWeight";if(/Duration$/.test(e))return"duration";if(/ColorScheme$/.test(e))return"colorScheme";throw new Error(`"${e}" is not a valid theme parameter.`)});var YJ=typeof window!="object"||!window||typeof document!="object"||window.document!==document;br.__registerModules([KR,nU,SU,gU],!1,void 0);var r3=(()=>{class e extends e3{setViewContainerRef(i,n){this.viewContainerRef=i,this.angularFrameworkOverrides=n}createWrapper(i){let n=this.angularFrameworkOverrides,r=this;class s extends Bw{init(u){n.runInsideAngular(()=>{super.init(u),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return n.runInsideAngular(()=>r.createComponent(i))}hasMethod(u){return a.getFrameworkComponentInstance()[u]!=null}callMethod(u,v){let b=this.getFrameworkComponentInstance();return n.runInsideAngular(()=>a.getFrameworkComponentInstance()[u].apply(b,v))}addMethod(u,v){a[u]=v}}let a=new s;return a}createComponent(i){return this.viewContainerRef.createComponent(i)}static{this.\u0275fac=(()=>{let i;return function(r){return(i||(i=ns(e)))(r||e)}})()}static{this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}}return e})(),Bw=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,gn(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},s3=(()=>{class e extends Ow{constructor(i){super("angular"),this._ngZone=i,this.isRunningWithinTestZone=!1,this.wrapIncoming=(n,r)=>this.runOutside(n,r),this.wrapOutgoing=n=>this.runInsideAngular(n),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(n,r)=>r==="resize-observer"||r==="popupPositioning"?this._ngZone.runOutsideAngular(n):n():this.runOutside=n=>this._ngZone.runOutsideAngular(n):this.runOutside=n=>n()}get shouldWrapOutgoing(){return this._ngZone&&gt.isInAngularZone()}isFrameworkComponent(i){if(!i)return!1;let n=i.prototype;return n&&"agInit"in n}runInsideAngular(i){return this._ngZone?this._ngZone.run(i):i()}runOutsideAngular(i,n){return this.runOutside(i,n)}static{this.\u0275fac=function(n){return new(n||e)(Ae(gt))}}static{this.\u0275prov=Ee({token:e,factory:e.\u0275fac})}}return e})(),o3=(()=>{class e{constructor(i,n,r,s){this.viewContainerRef=n,this.angularFrameworkOverrides=r,this.frameworkComponentWrapper=s,this._initialised=!1,this._destroyed=!1,this._holdEvents=!0,this._fullyReady=new Promise(a=>{this._resolveFullyReady=a}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.enableStrictPivotColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressMoveWhenColumnDragging=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.suppressSetFilterByDefault=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.dragAndDropImageComponent=void 0,this.dragAndDropImageComponentParams=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.cellSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.selectionColumnDef=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.theme=void 0,this.loadThemeGoogleFonts=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new ie,this.toolPanelSizeChanged=new ie,this.columnMenuVisibleChanged=new ie,this.contextMenuVisibleChanged=new ie,this.cutStart=new ie,this.cutEnd=new ie,this.pasteStart=new ie,this.pasteEnd=new ie,this.columnVisible=new ie,this.columnPinned=new ie,this.columnResized=new ie,this.columnMoved=new ie,this.columnValueChanged=new ie,this.columnPivotModeChanged=new ie,this.columnPivotChanged=new ie,this.columnGroupOpened=new ie,this.newColumnsLoaded=new ie,this.gridColumnsChanged=new ie,this.displayedColumnsChanged=new ie,this.virtualColumnsChanged=new ie,this.columnEverythingChanged=new ie,this.columnHeaderMouseOver=new ie,this.columnHeaderMouseLeave=new ie,this.columnHeaderClicked=new ie,this.columnHeaderContextMenu=new ie,this.componentStateChanged=new ie,this.cellValueChanged=new ie,this.cellEditRequest=new ie,this.rowValueChanged=new ie,this.cellEditingStarted=new ie,this.cellEditingStopped=new ie,this.rowEditingStarted=new ie,this.rowEditingStopped=new ie,this.undoStarted=new ie,this.undoEnded=new ie,this.redoStarted=new ie,this.redoEnded=new ie,this.cellSelectionDeleteStart=new ie,this.cellSelectionDeleteEnd=new ie,this.rangeDeleteStart=new ie,this.rangeDeleteEnd=new ie,this.fillStart=new ie,this.fillEnd=new ie,this.filterOpened=new ie,this.filterChanged=new ie,this.filterModified=new ie,this.advancedFilterBuilderVisibleChanged=new ie,this.chartCreated=new ie,this.chartRangeSelectionChanged=new ie,this.chartOptionsChanged=new ie,this.chartDestroyed=new ie,this.cellKeyDown=new ie,this.gridReady=new ie,this.firstDataRendered=new ie,this.gridSizeChanged=new ie,this.modelUpdated=new ie,this.virtualRowRemoved=new ie,this.viewportChanged=new ie,this.bodyScroll=new ie,this.bodyScrollEnd=new ie,this.dragStarted=new ie,this.dragStopped=new ie,this.dragCancelled=new ie,this.stateUpdated=new ie,this.paginationChanged=new ie,this.rowDragEnter=new ie,this.rowDragMove=new ie,this.rowDragLeave=new ie,this.rowDragEnd=new ie,this.rowDragCancel=new ie,this.columnRowGroupChanged=new ie,this.rowGroupOpened=new ie,this.expandOrCollapseAll=new ie,this.pivotMaxColumnsExceeded=new ie,this.pinnedRowDataChanged=new ie,this.rowDataUpdated=new ie,this.asyncTransactionsFlushed=new ie,this.storeRefreshed=new ie,this.headerFocused=new ie,this.cellClicked=new ie,this.cellDoubleClicked=new ie,this.cellFocused=new ie,this.cellMouseOver=new ie,this.cellMouseOut=new ie,this.cellMouseDown=new ie,this.rowClicked=new ie,this.rowDoubleClicked=new ie,this.rowSelected=new ie,this.selectionChanged=new ie,this.cellContextMenu=new ie,this.rangeSelectionChanged=new ie,this.cellSelectionChanged=new ie,this.tooltipShow=new ie,this.tooltipHide=new ie,this.sortChanged=new ie,this._nativeElement=i.nativeElement,this._fullyReady.then(()=>{this._holdEvents=!1})}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let i=IM(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let n=QR(this._nativeElement,i,this.gridParams);n&&(this.api=n),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(i){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let n={};Object.entries(i).forEach(([r,s])=>{n[r]=s.currentValue}),TM(n,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(i){let r=this[i],s=r?.observed??r?.observers?.length>0,a=`on${i.charAt(0).toUpperCase()}${i.substring(1)}`,c=!!this.gridOptions&&!!this.gridOptions[a];return s||c}globalEventListener(i,n){if(this._destroyed)return;let r=this[i];if(r&&this.isEmitterUsed(i)){let s=()=>this.angularFrameworkOverrides.runInsideAngular(()=>r.emit(n));this._holdEvents?this._fullyReady.then(()=>s()):s()}}static{this.\u0275fac=function(n){return new(n||e)(pt(Zi),pt(as),pt(s3),pt(r3))}}static{this.\u0275cmp=Xs({type:e,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",enableStrictPivotColumnOrder:"enableStrictPivotColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressMoveWhenColumnDragging:"suppressMoveWhenColumnDragging",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",suppressSetFilterByDefault:"suppressSetFilterByDefault",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",dragAndDropImageComponent:"dragAndDropImageComponent",dragAndDropImageComponentParams:"dragAndDropImageComponentParams",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",loading:"loading",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",cellSelection:"cellSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",selectionColumnDef:"selectionColumnDef",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:"enableGroupEdit",initialState:"initialState",theme:"theme",loadThemeGoogleFonts:"loadThemeGoogleFonts",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",cellSelectionDeleteStart:"cellSelectionDeleteStart",cellSelectionDeleteEnd:"cellSelectionDeleteEnd",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",dragCancelled:"dragCancelled",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",rowDragCancel:"rowDragCancel",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",cellSelectionChanged:"cellSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},features:[fa([s3,r3]),Jr],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}return e})();var nr={objectname:{visible:!0},rating:{visible:!0,type:"n"},numplays:{visible:!1,type:"n"},weight:{visible:!1,type:"n"},own:{visible:!1,type:"b"},fortrade:{visible:!1,type:"b"},want:{visible:!1,type:"b"},wanttobuy:{visible:!1,type:"b"},wanttoplay:{visible:!1,type:"b"},prevowned:{visible:!1,type:"b"},preordered:{visible:!1,type:"b"},wishlist:{visible:!1,type:"b"},wishlistpriority:{visible:!1,type:"n"},wishlistcomment:{visible:!1},comment:{visible:!0},conditiontext:{visible:!1},haspartslist:{visible:!1},wantpartslist:{visible:!1},collid:{visible:!1,type:"n"},baverage:{visible:!0,type:"n"},average:{visible:!0,type:"n"},avgweight:{visible:!0,type:"n"},rank:{visible:!0,type:"n"},numowned:{visible:!1,type:"n"},objecttype:{visible:!1},originalname:{visible:!0},minplayers:{visible:!0,type:"n"},maxplayers:{visible:!0,type:"n"},playingtime:{visible:!0,type:"n"},maxplaytime:{visible:!0,type:"n"},minplaytime:{visible:!0,type:"n"},yearpublished:{visible:!0,type:"n"},bggrecplayers:{visible:!0},bggbestplayers:{visible:!0},bggrecagerange:{visible:!0,type:"n"},bgglanguagedependence:{visible:!1},publisherid:{visible:!1},imageid:{visible:!1},year:{visible:!1},language:{visible:!1},other:{visible:!1},itemtype:{visible:!0},barcode:{visible:!1},pricepaid:{visible:!1},pp_currency:{visible:!1},currvalue:{visible:!1},cv_currency:{visible:!1},acquisitiondate:{visible:!1},acquiredfrom:{visible:!1},quantity:{visible:!1},privatecomment:{visible:!1},invlocation:{visible:!1},invdate:{visible:!1},version_publishers:{visible:!1},version_languages:{visible:!1},version_yearpublished:{visible:!1,type:"n"},version_nickname:{visible:!1},objectid:{visible:!0,type:"n"}},a3={autoSizeStrategy:{type:"fitGridWidth",defaultMinWidth:100,columnLimits:[{colId:"objectname",minWidth:350}]}};var EU=["agGrid"];function DU(e,t){if(e&1&&oi(0),e&2){let i=Pn();th(" Wczytano ",i.counter," gier ")}}function MU(e,t){e&1&&(Jt(0,"span",10),oi(1,"Najpierw za\u0142aduj plik csv"),cs(2,"br"),oi(3,"First load csv file"),kt())}function RU(e,t){if(e&1){let i=Al();Jt(0,"div",16)(1,"label",17),oi(2),kt(),Jt(3,"input",18),Si("change",function(){let r=ts(i).$implicit,s=Pn(3);return is(s.onUpdate(r))}),nh("ngModelChange",function(r){let s=ts(i).$implicit;return sv(s.visible,r)||(s.visible=r),is(r)}),kt()()}if(e&2){let i=t.$implicit;An(),tv("for",i.key),An(),rv(i.key),An(),eh("checked",i.visible),ih("ngModel",i.visible)}}function IU(e,t){if(e&1){let i=Al();Jt(0,"div",15),Si("mouseleave",function(){ts(i);let r=Pn(2);return is(r.isExpanded=!1)}),O1(1,RU,4,4,"div",16,k1),kt()}if(e&2){let i=Pn(2);An(),L1(i.checkboxOptions)}}function TU(e,t){if(e&1){let i=Al();Jt(0,"div",8)(1,"div",9),Si("click",function(){ts(i);let r=Pn();return is(r.toggleOptions())}),oi(2,"Opcje / Options "),Qs(3,MU,4,0,"span",10),kt(),Qs(4,IU,3,0,"div",11),kt(),Jt(5,"div",12)(6,"label",13),oi(7,"Exclude Expansions"),kt(),Jt(8,"input",14),Si("change",function(){ts(i);let r=Pn();return is(r.onUpdateExcludeExpansions(r.excludeExpansions))}),nh("ngModelChange",function(r){ts(i);let s=Pn();return sv(s.excludeExpansions,r)||(s.excludeExpansions=r),is(r)}),kt()()}if(e&2){let i=Pn();An(3),pa(i.dataLoaded?-1:3),An(),pa(i.isExpanded?4:-1),An(4),ih("ngModel",i.excludeExpansions)}}function FU(e,t){if(e&1){let i=Al();Jt(0,"ag-grid-angular",19,0),Si("rowClicked",function(r){ts(i);let s=Pn();return is(s.onRowClicked(r))}),kt()}if(e&2){let i=Pn();eh("rowData",i.rowData)("columnDefs",i.columnDefs)("gridOptions",i.gridOptions)}}var l3=["x","y","objectname","url"],c3=(()=>{class e{constructor(i){this.http=i,this.counter=0,this.isExpanded=!1,this.dataLoaded=!1,this.rowData=[],this.columnDefs=[],this.visibleColumns=new Set,this.gridOptions=a3,this.excludeExpansions=!1,this.results=[],this.link="https://boardgamegeek.com/boardgame/",this.chartOptions={chart:{type:"scatter",height:800},title:{text:"Ocena na BGG vs Trudno\u015B\u0107"},xAxis:{title:{text:"Ocena BGG"}},yAxis:{title:{text:"Ci\u0119\u017Car (trudno\u015B\u0107)"}},tooltip:{useHTML:!0,formatter:function(){let n=this,r=`Name: <b>${n.name}</b><br>`;r+=`Rating: <b>${n.y}</b><br>`,r+=`Weight: <b>${n.x}</b><br>`;let s=n.options;for(let a of Object.keys(s))s[a]&&!l3.includes(a)&&(r+=`${a}: <b>${n[a]}</b><br>`);return r}},series:[{type:"scatter",name:"Games",data:[],color:"rgba(5,141,199,0.5)"},{type:"scatter",name:"Expansions",data:[],color:"rgba(237,86,27,0.5)"}],plotOptions:{scatter:{marker:{radius:2.5,states:{select:{fillColor:"red",lineColor:"black",lineWidth:2,radius:6}}},allowPointSelect:!0},series:{cursor:"pointer",point:{events:{click:function(){let r=this.options.url;r&&window.open(r,"_blank")}}}}}},this.checkboxOptions=Object.keys(nr).map(n=>({key:n,visible:nr[n].visible}))}onFileUpload(i){return or(this,null,function*(){let n=i.target.files[0];yield this.pareseCSV(n)})}pareseCSV(i){return or(this,null,function*(){i&&(yield this.validateCsv(i))?Vw.parse(i,{header:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:n=>{this.results=n.data;let r=this.extractData();this.dataLoaded=!0,this.updateChart(r[0],r[1]),this.processTableData(n),this.initializeChart()},error:n=>{console.error("Error parsing CSV:",n)}}):alert(`Problem z plikiem CSV, czy na pewno pochodzi z BGG?
Problem with CSV file, is it for sure from BGG?`)})}extractData(){let i=this.results;this.counter=0;let n=[],r=[];return i.forEach(s=>{let a=+parseFloat(s.average).toFixed(2),c=+parseFloat(s.avgweight).toFixed(2),u=s.objectname,v=s.objectid;if(!isNaN(a)&&!isNaN(c)){let b={x:c,y:a,objectname:u,objectid:v};Object.keys(s).forEach(x=>{nr[x]&&(b[x]=s[x])}),this.excludeExpansions?s.itemtype==="standalone"&&(n.push(b),this.counter++):(s.itemtype==="standalone"&&(n.push(b),this.counter++),s.itemtype==="expansion"&&(r.push(b),this.counter++))}}),[n,r]}processTableData(i){this.populateVisibleColumns(),this.rowData=i.data.map(n=>(n.bggrecagerange&&typeof n.bggrecagerange=="string"&&(n.bggrecagerange=parseFloat(n.bggrecagerange.replace("+",""))),n)),this.columnDefs=this.generateColumns(i.data[0]),this.columnDefs[0].pinned="left"}generateColumns(i){return Object.keys(i||{}).map(n=>({field:n,headerName:n.charAt(0).toUpperCase()+n.slice(1),filter:!0,hide:!this.visibleColumns.has(n),suppressColumnsToolPanel:!0,floatingFilter:!0,cellDataType:this.calculateCellDataType(n)}))}calculateCellDataType(i){let n=nr[i];if(n.type){if(n.type==="n")return"number";if(n.type==="b")return"boolean"}return"text"}populateVisibleColumns(){for(let i in nr)nr[i]&&nr[i].visible&&this.visibleColumns.add(i)}onUpdate(i){this.visibleColumns.has(i.key)&&!i.visible?(this.visibleColumns.delete(i.key),this.agGrid.api.setColumnsVisible([i.key],!1)):i.visible&&(this.visibleColumns.add(i.key),this.agGrid.api.setColumnsVisible([i.key],!0)),this.chartOptions=ue(q({},this.chartOptions),{tooltip:ue(q({},this.chartOptions.tooltip),{formatter:function(){let n=this,r=`Name: <b>${n.name}</b><br>`;r+=`Rating: <b>${n.y}</b><br>`,r+=`Weight: <b>${n.x}</b><br>`;let s=n.options;for(let a of Object.keys(s))s[a]&&!l3.includes(a)&&(r+=`${a}: <b>${s[a]}</b><br>`);return r}})}),this.chart=Cg.chart("hcContainer",this.chartOptions)}updateChart(i,n){this.chartOptions=ue(q({},this.chartOptions),{series:[{type:"scatter",name:"Games",marker:{symbol:"circle",color:"rgba(237,86,27,0.5)"},data:this.processPoints(i)},{type:"scatter",name:"Expansions",marker:{symbol:"square",color:"rgba(5,141,199,0.5)"},data:this.processPoints(n)}]})}processPoints(i){return i.map(n=>{let r={};return Object.keys(nr).forEach(s=>{nr[s].visible&&(r[s]=n[s])}),q({name:n.objectname,x:n.x,y:n.y,url:this.link+n.objectid},r)})}addUserName(){let i=prompt("Enter your name:");i&&window.open(`https://boardgamegeek.com/geekcollection.php?action=exportcsv&subtype=boardgame&username=${i}&all=1`)}toggleOptions(){this.isExpanded=!this.isExpanded}onUpdateExcludeExpansions(i){this.excludeExpansions=i;let n=this.extractData();this.updateChart(n[0],n[1]),this.chart=Cg.chart("hcContainer",this.chartOptions)}onRowClicked(i){switch(i.data.itemtype){case"standalone":{(this.chart?.series[0].data.filter(r=>r.objectid===i.data.objectid))[0].select(!0,!1);break}case"expansion":{(this.chart?.series[1].data.filter(r=>r.objectid===i.data.objectid))[0].select(!0,!1);break}}}validateCsv(i){return new Promise((n,r)=>{let s=["objectname","objectid","rating","numplays"];i&&Vw.parse(i,{header:!1,preview:1,complete:a=>{let c=a.data[0],u=c.length===58&&s.every((v,b)=>v.toLowerCase().trim()===c[b].toLowerCase().trim());n(u)},error(a){r(a)}})})}onLoadMyExample(){this.http.get("/assets/collection.csv",{responseType:"text"}).subscribe(n=>{this.pareseCSV(n)})}initializeChart(){this.chart=Cg.chart("hcContainer",this.chartOptions)}static{this.\u0275fac=function(n){return new(n||e)(pt(pv))}}static{this.\u0275cmp=Xs({type:e,selectors:[["app-root"]],viewQuery:function(n,r){if(n&1&&B1(EU,5),n&2){let s;iv(s=nv())&&(r.agGrid=s.first)}},decls:30,vars:3,consts:[["agGrid",""],[1,"container"],[1,"upload"],["accept","text/csv","type","file",3,"change"],[1,"myCSV","bold",3,"click"],["id","hcContainer"],[1,"ag-theme-alpine",2,"width","100%","height","500px",3,"rowData","columnDefs","gridOptions"],[1,"bold",3,"click"],[1,"options",2,"position","relative"],[1,"tooltip",3,"click"],[1,"tooltiptext"],["id","options-container"],[1,"expansions"],["for","excludeExpansions"],["type","checkbox","id","excludeExpansions",3,"change","ngModelChange","ngModel"],["id","options-container",3,"mouseleave"],[1,"option-item"],[3,"for"],["type","checkbox",3,"change","ngModelChange","checked","ngModel"],[1,"ag-theme-alpine",2,"width","100%","height","500px",3,"rowClicked","rowData","columnDefs","gridOptions"]],template:function(n,r){n&1&&(Jt(0,"div",1)(1,"div")(2,"h1"),oi(3,"BGG collection"),kt(),Qs(4,DU,1,1),Jt(5,"div")(6,"div",2)(7,"input",3),Si("change",function(a){return r.onFileUpload(a)}),kt(),oi(8," lub "),Jt(9,"p",4),Si("click",function(){return r.onLoadMyExample()}),oi(10,"u\u017Cyj mojego CSV"),kt()(),Qs(11,TU,9,3),kt(),cs(12,"div",5),kt(),Jt(13,"div"),Qs(14,FU,2,3,"ag-grid-angular",6),kt(),Jt(15,"div"),cs(16,"br")(17,"br"),Jt(18,"h2"),oi(19,"Info:"),kt(),oi(20," \u015Aci\u0105gnij swoj\u0105 kolekcj\u0119 z bgg jako csv, a nast\u0119pnie wczytaj ja tu. Mo\u017Cna to zrobic z tutaj, klikaj\u0105c "),Jt(21,"span",7),Si("click",function(){return r.addUserName()}),oi(22,"tutaj"),kt(),oi(23," i wpisuj\u0105c nazw\u0119 u\u017Cytkownika. "),cs(24,"br")(25,"br"),oi(26," Download your collection from bgg as csv, then upload it here. It can be done from here, click "),Jt(27,"span",7),Si("click",function(){return r.addUserName()}),oi(28,"here"),kt(),oi(29," and input your user name. "),kt()()),n&2&&(An(4),pa(r.counter!=0?4:-1),An(7),pa(r.dataLoaded?11:-1),An(3),pa(r.dataLoaded?14:-1))},dependencies:[uD,PD,fC,TD,vC,o3],styles:['.bold[_ngcontent-%COMP%]{font-weight:700;color:#00f;text-decoration:underline;cursor:pointer}.container[_ngcontent-%COMP%]{margin:10px;font-family:Unica One,arial,helvetica,sans-serif,serif}.upload[_ngcontent-%COMP%]{float:left;border:1px solid darkcyan;padding:5px;border-radius:5px}.expansions[_ngcontent-%COMP%]{border:1px solid darkcyan;padding:5px;border-radius:5px;display:inline;float:right;margin-right:10px}.options[_ngcontent-%COMP%]{cursor:pointer;float:right;border:1px solid darkcyan;padding:5px;border-radius:5px;position:relative}#options-container[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background-color:#fff;z-index:10;padding:10px;width:250px;border:1px solid #ccc}.option-item[_ngcontent-%COMP%]{margin:5px 0}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block;border-bottom:1px dotted black}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:250px;background-color:#000;color:#fff;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1;top:-5px;right:110%}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:100%;margin-top:-5px;border-width:5px;border-style:solid;border-color:transparent transparent transparent black}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.myCSV[_ngcontent-%COMP%]{display:inline}#options-container[_ngcontent-%COMP%]{position:absolute;margin-top:10px;top:100%;right:0;background-color:#fff;z-index:10;padding:10px;border:1px solid #ccc}#hcContainer[_ngcontent-%COMP%]{width:100%;height:100%;display:block}']})}}return e})();SE(c3,lD).catch(e=>console.error(e));
